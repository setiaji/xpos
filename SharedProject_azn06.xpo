Exportfile for AOT version 1.0 or later
Formatversion: 1

***Element: FRM

; Microsoft Dynamics AX Forms unloaded
; --------------------------------------------------------------------------------
FRMVERSION 12

FORM #PurchTable
  PROPERTIES
    Name                #PurchTable
    FormTemplate        #DetailsPage
    InteractionClass    #PurchTableInteraction
    Origin              #{0B0A0000-0000-1000-B49B-F07268546162}
  ENDPROPERTIES
  
  METHODS
    SOURCE #classDeclaration
      #public class FormRun extends ObjectRun
      #{
      #    boolean                         isCalledFromLP;
      #    PurchTableForm                  purchTableForm;
      #    PurchTableType                  purchTableType;
      #
      #    boolean                         isRefreshing;
      #    PurchTable                      purchTableCaller;
      #
      #    QueryBuildRange                 queryBuildRangeProj;
      #    QueryBuildRange                 queryBuildRangePurchLine;
      #    boolean                         isProjectForm;
      #    boolean                         isDocuActionTemplate;
      #
      #    // Used for validateWrite and write to update tax groups on misc. charges and header2lines updates
      #    DialogButton                    copyTaxGroupToMarkupTrans;
      #    PurchTable2LineUpdatePrompt     purchTable2LineUpdatePrompt;
      #
      #    InventDimCtrl_Frm_Mov           inventDimFormSetup;
      #
      #    //PBA begin
      #    boolean                         autoConfig;
      #    // PBA end
      #
      #    Object                          tmpPurchTableTaxTransForm;
      #    Object                          tmpPurchTableTaxWithholdTransForm;
      #    TaxWithholdParameters_IN        taxWithholdParameters;
      #    TaxParameters                   taxParameters;
      #    EximParameters_IN               eximParameters;
      #    TaxExciseTypeController_IN      taxExciseTypeController;
      #    TaxItemGroupHeading             taxItemGroupHeadingRev;
      #    boolean                         isPurchLine_INEnabled;
      #
      #    boolean                         cashDiscOnInvoice;
      #
      #    Map                             interCompanySalesCache;
      #    RecId                           interCompanyIsPriceDiscSearchNeeded;
      #
      #    #Tax1099
      #
      #    PurchId                         purchIdTouched;
      #
      #    DimensionDefaultingController   dimensionDefaultingControllerHeader;
      #    DimensionDefaultingController   dimensionDefaultingControllerLine;
      #
      #    LedgerDimensionDefaultAccountController     ledgerDefaultAccountControllerLine;
      #
      #    boolean                         keepName; // When set to false Name is defaulted from category description.
      #
      #    NumberSeqFormHandler            numberSeqFormHandler;
      #    //Asset qualifier related variables
      #    container                       assetRules;
      #    List                            assetQualifierList;
      #    Description                     selectedAssetQualifier;
      #
      #    LogisticsLocationRecId          postalAddressLocation;
      #
      #    #AssetRules
      #    #resAppl
      #    #define.grpAssetQualifier('grpAssetQualifier')
      #    #define.editAssetQualifier('editAssetQualifier')
      #
      #    boolean                         hasEMSAccess;
      #
      #    BankLCImportFeatureChecker      bankLCImportFeatureChecker;
      #    BankLGFeatureChecker            bankLGFeatureChecker;
      #    boolean                         enableLCFeature;
      #    boolean                         enableLGFeature;
      #
      #    boolean                         wasCalledFromVendorSearch;
      #    VendAccount                     vendAccountSearch;
      #    // Default create values
      #    ItemId                          defaultItemId;
      #    InventDim                       defaultInventDim;
      #    TransDate                       defaultDate;
      #    boolean                         zakatParameterEnabled;
      #    InventItemBarcode               itemBarcode;
      #
      #    #resAppl
      #
      #
      #    boolean                         workflowEnabled;
      #    boolean                         isRU;
      #    boolean                         isPurchTableEnabled_RU;
      #    // RU assets
      #    Map                             itemTypeCache;
      #    Map                             itemInventDimSetupCache;
      #    #ISOCountryRegionCodes
      #
      #    DueDate                         priorDueDate;
      #    boolean                         isPurchLine_WEnabled;
      #    boolean                         isPurchTableEnabled_W;
      #    SalesPurchOperationTypeController_BR salesPurchOperationTypeController_BR;
      #    boolean                         isPurchTableEnabled_BR;
      #
      #    boolean                         advanceHoldersEnabled;
      #
      #    PurchLine                       defaultPurchLine;
      #
      #    PurchParameters purchParameters;
      #
      #    ImageListAppl_PurchTableForm  imageListAppl_PurchTableForm;
      #
      #    int                            purchTableRecVersion;
      #
      #    boolean                         skipLinkActive;
      #    boolean                         linkActiveHeaderExecuted;
      #
      #    boolean                         executePersonalization;
      #    QueryBuildRange                 queryRange;
      #    QueryBuildRange                 queryRangeQuantity;
      #    QueryBuildRange                 queryRangeOptionsRef;
      #    QueryBuildRange                 queryRangeGroup;
      #    InventQty                       salesLineMaxQty;
      #    boolean                         itemChanged;
      #    boolean                         inTextLine;
      #    boolean                         onInit;
      #    boolean                         fromQty;
      #    boolean                         fromLostControl;
      #    SalesLine                       salesLine;
      #    FilePath                        filePath;
      #
      #    boolean                         isWHSPurchLineEnabled;
      #
      #    // <GMY>
      #    boolean                             isSelfBilldInvoiceEnabled_MY;
      #    boolean                             isIsoMY;
      #    boolean                             isWrnPrintedMY;
      #    VendInvoiceJourLookupController_MY  vendInvoiceJourLookupController;
      #    // </GMY>
      #}
    ENDSOURCE
    SOURCE #allowEditAsset_RU
      #boolean allowEditAsset_RU()
      #{
      #    boolean ret;
      #
      #    if (itemTypeCache && purchLine.ItemId)
      #    {
      #        if (itemTypeCache.exists(purchLine.ItemId))
      #        {
      #            ret = itemTypeCache.lookup(purchLine.ItemId);
      #        }
      #        else
      #        {
      #            ret = InventTable::find(purchLine.ItemId).AssetGroupId_RU != '';
      #            itemTypeCache.insert(purchLine.ItemId, ret);
      #        }
      #    }
      #
      #    return ret;
      #}
    ENDSOURCE
    SOURCE #allowEditLedgerAccount_RU
      #boolean allowEditLedgerAccount_RU()
      #{
      #    boolean                     allowEdit = ! purchLine_W.MarkupCode_RU;
      #
      #    if (allowEdit && itemInventDimSetupCache && purchLine.ItemId)
      #    {
      #        if (itemInventDimSetupCache.exists(purchLine.ItemId))
      #        {
      #            allowEdit = itemInventDimSetupCache.lookup(purchLine.ItemId);
      #        }
      #        else
      #        {
      #            allowEdit = !EcoResDimensionGroupSetup::isInventoryDimensionActiveForItem(purchLine.ItemId, fieldNum(InventDim, InventProfileId_RU));
      #            itemInventDimSetupCache.insert(purchLine.ItemId, allowEdit);
      #        }
      #    }
      #
      #    return allowEdit;
      #}
    ENDSOURCE
    SOURCE #applyBackOrderLinesSelection
      #/// <summary>
      #/// If form was called by BackOrderLines list page, applies additional ranges to the form data source to show only sales orders that were selected in a list page.
      #/// </summary>
      #/// <remarks>
      #/// If form called not from BackOrderLines list page no action is taken.
      #/// </remarks>
      #private void applyBackOrderLinesSelection()
      #{
      #    Map             selectedPurchIds;
      #    MapEnumerator   en;
      #
      #    if (!this.isCalledFromPurchLineBackOrderListPage() || !element.args().record())
      #    {
      #        return;
      #    }
      #
      #    // Apply filter to show only Purch Orders selected in the list page...
      #    selectedPurchIds = PurchLineBackOrderListPageInteraction::getPurchIdsSelected(element.args().record().dataSource());
      #    if (selectedPurchIds)
      #    {
      #        // Dynalinks need to be cleared to avoid transfer only currently selected record from a list page.
      #        purchTable_ds.query().dataSourceTable(tableNum(PurchTable)).clearDynalinks();
      #
      #        en = new MapEnumerator(selectedPurchIds);
      #        while(en.moveNext())
      #        {
      #            purchTable_ds.query().dataSourceTable(tableNum(PurchTable)).addRange(fieldNum(PurchTable,PurchId)).value(en.currentValue());
      #        }
      #    }
      #}
    ENDSOURCE
    SOURCE #automaticTotalDiscount
      #public void automaticTotalDiscount()
      #{
      #    PurchTable localPurchTable;
      #
      #    if (PurchParameters::find().AutomaticTotalDiscount)
      #    {
      #        for (localPurchTable = purchTable_ds.getFirst(true) ? purchTable_ds.getFirst(true) : purchTable_ds.cursor(); localPurchTable; localPurchTable = purchTable_ds.getNext())
      #        {
      #            localPurchTable.updateFinalDisc();
      #        }
      #        purchTable_ds.reread();
      #        purchTable_ds.refresh();
      #        purchLine_ds.research(true);
      #    }
      #}
    ENDSOURCE
    SOURCE #budgetControlLine
      #public void budgetControlLine()
      #{
      #    if (purchLine)
      #    {
      #        // Submit to source document processor for an on-demand budget check
      #        SourceDocumentProcessorFacade::submitOnDemandSourceDocLineImpl(purchLine);
      #
      #        // <PubSect>
      #        if (purchLine.isBudgetReservationLineReferenced())
      #        {
      #            // Checks the purchase order line balance against the referenced budget reservation line.
      #            BudgetReservation_PSN::checkBudgetReservationBalance(purchLine.BudgetReservationLine_PSN, purchTable.SourceDocumentHeader);
      #        }
      #        // </PubSect>
      #
      #        purchLine_ds.updateBudgetCheckResultDisplay();
      #    }
      #}
    ENDSOURCE
    SOURCE #budgetCreateTransfer
      #public void budgetCreateTransfer()
      #{
      #    BudgetCreateTransfer budgetCreateTransfer = BudgetCreateTransfer::construct();
      #
      #    // The source number for the created transfer is the purchase order id.
      #    budgetCreateTransfer.parmBudgetTransferSourceNumber(purchTable.PurchId);
      #
      #    budgetCreateTransfer.parmToLedgerDimensionDate(systemDateGet());
      #
      #    // Set the To ledger dimension to 0.
      #    budgetCreateTransfer.parmToLedgerDimension(0);
      #
      #    // Set the currency to the currency on the selected purchase order line.
      #    budgetCreateTransfer.parmCurrency(purchLine.CurrencyCode);
      #
      #    // Set the budget type as Expense.
      #    budgetCreateTransfer.parmBudgetType(BudgetType::Expense);
      #
      #    BudgetCreateTransferManager::launchCreateTransferForm(budgetCreateTransfer);
      #}
    ENDSOURCE
    SOURCE #canClose
      #public boolean canClose()
      #{
      #    boolean ret;
      #
      #    ret = super();
      #
      #    // PBA begin
      #    if (!purchLine.PBAItemLine::checkMandatory() )
      #    {
      #        return false;
      #    }
      #    // PBA end
      #
      #    return ret;
      #}
    ENDSOURCE
    SOURCE #canSubmitToWorkflow
      #public boolean canSubmitToWorkflow()
      #{
      #    return purchTable.canSubmitToWorkflow();
      #}
    ENDSOURCE
    SOURCE #checkCreditNoteLine
      #void  checkCreditNoteLine()
      #{
      #    boolean  allowEdit;
      #
      #    allowEdit = purchLine.allowEditReturnActionId();
      #    purchLine_ds.object(fieldNum(PurchLine, ReturnActionId)).allowEdit(allowEdit);
      #    purchLine_ds.object(fieldNum(PurchLine, ReturnActionId)).skip(!allowEdit);
      #
      #    allowEdit = purchLine.allowEditScrap();
      #    purchLine_ds.object(fieldNum(PurchLine, Scrap)).allowEdit(allowEdit);
      #    purchLine_ds.object(fieldNum(PurchLine, Scrap)).skip(allowEdit);
      #}
    ENDSOURCE
    SOURCE #close
      #void close()
      #{
      #    xSysLastValue::saveLast(purchTableForm);
      #
      #    // Current price references may need to be deleted.
      #    purchLine.SalesPurchLine::cleanUpPriceHistoryRef();
      #
      #    super();
      #}
    ENDSOURCE
    SOURCE #configBankDocumentControls
      #/// <summary>
      #///     Configs the BankDocument Controls.
      #/// </summary>
      #public void configBankDocumentControls()
      #{
      #    boolean         enableDocumentType = false;
      #    PurchTableType  purchTableTypeLcoal;
      #
      #    if (enableLCFeature
      #    ||  enableLGFeature)
      #    {
      #        purchTableTypeLcoal = purchTable.type();
      #        enableDocumentType  = purchTableTypeLcoal.mayBankDocumentTypeBeModified();
      #        element.configPaymentGroupControls();
      #        purchTable_DS.object(fieldNum(PurchTable, BankDocumentType)).allowEdit(enableDocumentType);
      #    }
      #}
    ENDSOURCE
    SOURCE #configPaymentGroupControls
      #/// <summary>
      #/// Configs the payment group controls based on the value of field <c>BankDocumentType</c>
      #/// </summary>
      #private void configPaymentGroupControls()
      #{
      #    boolean flag;
      #
      #    flag = !purchTable.isMarkedForBankLC();
      #
      #    purchTable_DS.object(fieldNum(PurchTable, Payment)).allowEdit(flag);
      #    purchTable_DS.object(fieldNum(PurchTable, FixedDueDate)).allowEdit(flag);
      #    purchTable_DS.object(fieldNum(PurchTable, PaymMode)).allowEdit(flag);
      #    purchTable_DS.object(fieldNum(PurchTable, PaymSpec)).allowEdit(flag);
      #    purchTable_DS.object(fieldNum(PurchTable, PaymentSched)).allowEdit(flag);
      #    purchTable_DS.object(fieldNum(PurchTable, CashDisc)).allowEdit(flag);
      #    purchTable_DS.object(fieldNum(PurchTable, CashDiscPercent)).allowEdit(flag);
      #    purchTable_DS.object(fieldNum(PurchTable, SettleVoucher)).allowEdit(flag);
      #}
    ENDSOURCE
    SOURCE #createAgreementLink
      #public void createAgreementLink()
      #{
      #    AgreementLine                           localAgreementLine;
      #    Args                                    args;
      #    FormRun                                 formRun;
      #    PurchTableForm_DlvScheduleSyncEnabled   purchTableFormDlvSchedule;
      #    PurchLine                               origPurchLine;
      #
      #    args = new Args(formStr(AgreementLinePrompt));
      #    args.caller(element);
      #    args.record(purchLine);
      #    args.parm(int642str(purchTable.MatchingAgreement));
      #    formRun = classfactory.formRunClass(args);
      #    formRun.init();
      #    formRun.run();
      #    formRun.wait(true);
      #    localAgreementLine = args.record() as AgreementLine;
      #
      #    if (localAgreementLine)
      #    {
      #        // Make a pre-associated copy of the current purchase line.
      #        origPurchLine = purchLine.data().orig();
      #        if (isPurchLine_INEnabled || isPurchLine_WEnabled)
      #        {
      #            origPurchLine.SysExtensionSerializerMap::copyExtensionTableData(purchLine, true);
      #        }
      #
      #        ttsbegin;
      #
      #        PurchTableForm::createAgreementLinkServer(purchLine, localAgreementLine);
      #
      #        if (purchLine.LineDeliveryType == LineDeliveryType::OrderLineWithMultipleDeliveries)
      #        {
      #            purchTableFormDlvSchedule = purchTableForm as PurchTableForm_DlvScheduleSyncEnabled;
      #            purchTableFormDlvSchedule.parmOrderLineOrig(origPurchLine);
      #            if (purchTableFormDlvSchedule.deliveryLinesSync(purchLine, false))
      #            {
      #                // Need to refresh delivery lines on grid.
      #                purchLine_DS.executeQuery();
      #            }
      #        }
      #
      #        ttscommit;
      #        purchLine_DS.research(true);
      #
      #        this.enableAgreementButtons();
      #    }
      #}
    ENDSOURCE
    SOURCE #disableConsInvoiceControl_JP
      #/// <summary>
      #/// Disable the consolidation invoice related controls.
      #/// </summary>
      #public void disableConsInvoiceControl_JP()
      #{
      #    if (!VendConsInvoiceType_JP::isVendConsInvoiceEnabled())
      #    {
      #        purchTable_ds.object(fieldNum(PurchTable, ConsTarget_JP)).visible(false);
      #        consTarget_JP.visible(false);
      #    }
      #}
    ENDSOURCE
    SOURCE #distributionFormClosed
      #/// <summary>
      #/// Method called upon closing of the <c>AccountingDistribution</c> form.
      #/// </summary>
      #public void distributionFormClosed()
      #{
      #    purchTable_ds.reread();
      #    purchTable_ds.refresh();
      #    purchTable_ds.selectionChanged();
      #}
    ENDSOURCE
    SOURCE #docCursor
      #public Common docCursor()
      #{
      #    Common docCursor;
      #
      #    docCursor = super();
      #
      #    if (docCursor.TableId == tableNum(InventDim))
      #    {
      #        docCursor = purchLine;
      #    }
      #
      #    return docCursor;
      #}
    ENDSOURCE
    SOURCE #doRefresh
      #public void doRefresh(boolean _lineRefreshNeeded = false)
      #{
      #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoIN]))
      #    {
      #        purchTable_ds.reread();
      #        purchTable_ds.refresh();
      #
      #        if (_lineRefreshNeeded)
      #        {
      #            purchLine_ds.reread();
      #            purchLine_ds.refresh();
      #        }
      #        else
      #        {
      #            purchLine_ds.research();
      #        }
      #    }
      #}
    ENDSOURCE
    SOURCE #editPurch
      #public void editPurch(boolean _allowEdit, boolean _allowDelete = _allowEdit)
      #{
      #    boolean allowEditEmplAccount_RU;
      #    purchTable_ds.allowEdit    (_allowEdit);
      #    purchTable_ds.allowDelete  (_allowEdit && _allowDelete);
      #    purchLine_ds.allowEdit     (_allowEdit);
      #    purchLine_ds.allowCreate   (_allowEdit);
      #    purchLine_ds.allowDelete   (_allowEdit && _allowDelete);
      #    if (advanceHoldersEnabled)
      #    {
      #        allowEditEmplAccount_RU = PaymTerm::isEmplAccountUsed_RU(purchTable.Payment);
      #        purchTable_W_ds.object(fieldNum(PurchTable_W, EmplAccount_RU)).allowEdit(allowEditEmplAccount_RU);
      #        purchTable_ds.object(fieldNum(PurchTable, CashDisc)).allowEdit(!allowEditEmplAccount_RU);
      #    }
      #}
    ENDSOURCE
    SOURCE #enableAdvanceAction
      #/// <summary>
      #/// Enables advance action button on header when <c>PurchaseType</c> field of <c>PurchTable</c> table has <c>PurchaseType::Purch</c> enum value .
      #/// </summary>
      #[SysObsoleteAttribute('Prepay elements are controlled by the PurchTableInteraction class', true)]
      #public void enableAdvanceAction()
      #{
      #
      #}
    ENDSOURCE
    SOURCE #enableAgreementButtons
      #protected void enableAgreementButtons()
      #{
      #    boolean agreementLineEnabled, createLinkEnabled, removeLinkEnabled;
      #
      #    [agreementLineEnabled, createLinkEnabled, removeLinkEnabled] = purchTableForm.getEnabledAgreementButtons(purchTable, purchLine);
      #
      #    agreementLine.enabled(agreementLineEnabled);
      #    createLink.enabled(createLinkEnabled);
      #    removeLink.enabled(removeLinkEnabled);
      #
      #    buttonPurchAgreement.enabled(purchTable.MatchingAgreement);
      #}
    ENDSOURCE
    SOURCE #enableApplyDEPB_IN
      #boolean enableApplyDEPB_IN()
      #{
      #    boolean ret;
      #    if (eximPurchLine_IN.EximIncentiveSchemeGroup)
      #    {
      #        ret = EximSetOffRulesTable_IN::checkUtilizedDEPBLicense(eximPurchLine_IN.EximIncentiveSchemeGroup);
      #    }
      #    return ret;
      #}
    ENDSOURCE
    SOURCE #enableContractNumber_SA
      #public void enableContractNumber_SA()
      #{
      #    purchTable_ContractNum_SA.enabled(VendInfoZakat_SA::findByVendAccount(purchTable.OrderAccount).IsSubcontractor);
      #}
    ENDSOURCE
    SOURCE #enableDepreciationStartDate
      #//
      #// This method enables/disables depreciation start date control
      #//
      #void enableDepreciationStartDate(boolean _setDate = true)
      #{
      #    AssetBook assetBook;
      #
      #    assetBook = AssetBook::find(purchLine.AssetId, purchLine.AssetBookId);
      #    if (assetBook && (purchLine.AssetTransTypePurch == AssetTransTypePurch::Acquisition || purchLine.AssetTransTypePurch == AssetTransTypePurch::AcquisitionAdj) &&
      #    !assetBook.depreciationStarted() && assetBook.DepreciationConvention == AssetDepreciationConvention::None)
      #    {
      #        if (!depreciationStartDate.enabled())
      #        {
      #            depreciationStartDate.enabled(true);
      #            purchLine.setDepreciationStartDate(_setDate);
      #        }
      #    }
      #    else
      #    {
      #        purchLine.setDepreciationStartDate(true);
      #        depreciationStartDate.enabled(false);
      #    }
      #}
    ENDSOURCE
    SOURCE #enabledVATTaxAgent_RU
      #void enabledVATTaxAgent_RU()
      #{
      #    vatTaxAgent_RU.allowEdit(! PurchLine::exist(purchTable.PurchId));
      #}
    ENDSOURCE
    SOURCE #enableFieldsActive_IN
      #public void enableFieldsActive_IN()
      #{
      #    purchLine_IN_ds.object(fieldNum(PurchLine_IN, DirectSettlement_IN)).enabled(purchLine_IN.ExciseType_IN == ExciseType_IN::Manufacturer);
      #    purchLine_IN_ds.object(fieldNum(PurchLine_IN, cenvatCreditAvailed_IN)).enabled(purchLine_IN.ExciseRecordType_IN == ExciseRecordType_IN::RG23C    &&
      #                                                                             purchLine_IN.DirectSettlement_IN == DirectSettlement_IN::PLA      &&
      #                                                                             purchLine.PurchQty < 0                                         &&
      #                                                                             taxParameters.Excise_IN);
      #    customsImportAssessableValue_IN.enabled(purchTable_W.CustomsImportOrder_IN == NoYes::Yes    &&
      #                                            taxParameters.Customs_IN == NoYes::Yes);
      #    purchLine_CustomsMaxRetailPrice_IN.visible(purchTable_W.CustomsImportOrder_IN == NoYes::Yes &&
      #                                               taxParameters.Customs_IN == NoYes::Yes);
      #    purchLine_MaximumRetailPrice_IN.enabled(purchTable_W.CustomsImportOrder_IN == NoYes::No);
      #    element.setEximFieldsAccess_IN();
      #}
    ENDSOURCE
    SOURCE #enableForeignTrade_RU
      #void enableForeignTrade_RU()
      #{
      #    purchLine_W_ds.object(fieldNum(PurchLine_W, InvoiceGTDId_RU)).enabled(
      #        purchLine_W_ds.object(fieldNum(PurchLine_W, CountryRegionName_RU)).enabled(
      #            purchLine.isCategoryBased()));
      #}
    ENDSOURCE
    SOURCE #enableInvoice4PaymButtons
      #public void enableInvoice4PaymButtons()
      #{
      #    purchTableForm.enableInvoice4PaymButton_RU(buttonUpdateInvoice4Paym_RU);
      #    buttonProformaInvoice4Paym_RU.enabled(buttonUpdateInvoice4Paym_RU.enabled());
      #}
    ENDSOURCE
    SOURCE #enableLedgerDimensionDefaultAccount
      #public void enableLedgerDimensionDefaultAccount()
      #{
      #    if (purchLine.canEditLedgerDimensionDefaultAccount())
      #    {
      #        purchLine_LedgerDimension.allowEdit(true
      #            && (! isRU || this.allowEditLedgerAccount_RU())
      #        );
      #
      #    }
      #    else
      #    {
      #        if (purchLine.IsFinalized == NoYes::No)
      #        {
      #            if (!isRU || purchLine_W.MarkupCode_RU)
      #            {
      #                purchLine.LedgerDimension = 0;
      #            }
      #        }
      #        purchLine_LedgerDimension.allowEdit(false);
      #    }
      #}
    ENDSOURCE
    SOURCE #enableLinePBAActions
      #public void enableLinePBAActions()
      #{
      #    boolean isPBAExecuteButtonEnabled;
      #    isPBAExecuteButtonEnabled = purchTableForm.isPBAExecuteButtonEnabled(purchLine);
      #
      #    pbaExecute.enabled(isPBAExecuteButtonEnabled);
      #}
    ENDSOURCE
    SOURCE #enableMarkupCode_RU
      #public void enableMarkupCode_RU()
      #{
      #    if (isRU)
      #    {
      #        purchLine_W_ds.object(fieldNum(PurchLine_W, MarkupCode_RU))
      #            .enabled(purchLine.isMarkupCodeEnabled_RU());
      #    }
      #}
    ENDSOURCE
    SOURCE #enableProjSalesPrice
      #public void enableProjSalesPrice()
      #{
      #    boolean mustDefaultCostPriceAsSalesPrice;
      #    boolean isTiedToItemReq;
      #
      #    if (purchLine.ProjId)
      #    {
      #        if (!purchLine.ItemId && ProjParameters::find().DefaultCostPriceAsSalesPrice)
      #        {
      #            mustDefaultCostPriceAsSalesPrice = true;
      #        }
      #
      #        if(purchTable.isProjectSalesItemReqPO())
      #        {
      #            isTiedToItemReq = true;
      #        }
      #
      #        if (ProjInvoiceTable::isSalesCurrencyLocked(ProjTable::find(purchLine.ProjId).ProjInvoiceProjId))
      #        {
      #            purchLine_ds.object(fieldNum(PurchLine, ProjSalesCurrencyId)).allowEdit(false);
      #            purchLine_ds.object(fieldNum(PurchLine, ProjSalesCurrencyId)).skip(true);
      #        }
      #        else
      #        {
      #            purchLine_ds.object(fieldNum(PurchLine, ProjSalesCurrencyId)).allowEdit(!mustDefaultCostPriceAsSalesPrice);
      #            purchLine_ds.object(fieldNum(PurchLine, ProjSalesCurrencyId)).skip(mustDefaultCostPriceAsSalesPrice);
      #        }
      #
      #        purchLine_ds.object(fieldNum(PurchLine, ProjSalesPrice)).allowEdit(!mustDefaultCostPriceAsSalesPrice && !isTiedToItemReq);
      #    }
      #}
    ENDSOURCE
    SOURCE #enableRetentionProject
      #void enableRetentionProject()
      #{
      #    if(isConfigurationkeyEnabled(configurationKeyNum(PSAAPRetainage)))
      #    {
      #        if(purchLine.ProjId)
      #        {
      #            purchLine_PSARetainScheduleId.visible(true);
      #        }
      #        else
      #        {
      #            purchLine_PSARetainScheduleId.visible(false);
      #        }
      #    }
      #}
      #
    ENDSOURCE
    SOURCE #enableServiceFields_BR
      #public void enableServiceFields_BR()
      #{
      #    InventTable inventTable;
      #    boolean     enable;
      #
      #    select firstonly ItemType from inventTable where inventTable.ItemId == purchLine.ItemId;
      #
      #    enable = inventTable.ItemType == ItemType::Service;
      #
      #    purchLine_ds.object(fieldNum(PurchLine, TaxServiceCode_BR)).allowEdit(enable);
      #}
    ENDSOURCE
    SOURCE #enableTMSFields
      #public void enableTMSFields()
      #{
      #    TMSTransportationTemplateId transTempId;
      #    TMSCarrierCode              carrierCode;
      #    TMSCarrierGroupCode         carrierGroupCode;
      #    TMSModeCode                 modeCode;
      #    boolean                     modeCodeEnabled;
      #
      #    transTempId         = tmsPurchTable.TransportationTemplateId;
      #    carrierCode         = tmsPurchTable.CarrierCode;
      #    carrierGroupCode    = tmsPurchTable.CarrierGroupCode;
      #    modeCode            = tmsPurchTable.ModeCode;
      #    modeCodeEnabled     = tmsPurchTable.ModeCode != '' && tmsPurchTable.CarrierCode == '';
      #
      #    tmsPurchTable_ds.object(fieldNum(TMSPurchTable, ModeCode)).allowEdit(!(carrierCode || transTempId || carrierGroupCode));
      #    tmsPurchTable_ds.object(fieldNum(TMSPurchTable, CarrierCode)).allowEdit(!(transTempId ||carrierGroupCode || modeCodeEnabled));
      #    tmsPurchTable_ds.object(fieldNum(TMSPurchTable, CarrierServiceCode)).allowEdit(!(transTempId || carrierGroupCode || modeCodeEnabled));
      #    tmsPurchTable_ds.object(fieldNum(TMSPurchTable, CarrierGroupCode)).allowEdit(!(transTempId || carrierCode || modeCode));
      #    tmsPurchTable_ds.object(fieldNum(TMSPurchTable, TransportationTemplateId)).allowEdit(!(carrierCode || carrierGroupCode || modeCode));
      #}
    ENDSOURCE
    SOURCE #endDiscount
      #public void endDiscount()
      #{
      #    purchTable.updateFinalDisc();
      #    purchtable_ds.refresh();
      #
      #}
    ENDSOURCE
    SOURCE #filenameLookupFilename
      #str filenameLookupFilename()
      #{
      #    return '';
      #}
    ENDSOURCE
    SOURCE #filenameLookupFilter
      #FilenameFilter filenameLookupFilter()
      #{
      #    return ["@SYS54806",'*.*',"@SYS98008",'*.jpg', "@MCR33266",'*.gif', "@SYS98008",'*.jpg',"@MCR33267",'*.tif',"@MCR33268",'*.bmp'];
      #}
    ENDSOURCE
    SOURCE #filenameLookupInitialPath
      #str filenameLookupInitialPath()
      #{
      #    return filePath;
      #}
    ENDSOURCE
    SOURCE #filenameLookupTitle
      #str filenameLookupTitle()
      #{
      #    return '';
      #}
    ENDSOURCE
    SOURCE #filePathLookupTitle
      #str filePathLookupTitle()
      #{
      #    return '';
      #}
    ENDSOURCE
    SOURCE #fillPackageTree
      #/// <summary>
      #/// Fill Package Tree
      #/// </summary>
      #void fillPackageTree()
      #{
      #    ImageRes    imageRes    = imageListAppl_PurchTableForm.image(#imageFolder);
      #
      #    TreeItemIdx     purchIdx,packageIdx,packageLineIdx;
      #    PurchLine       purchLineSearch;
      #    RetailPackagePurch packagePurch;
      #    ;
      #    packageTree.deleteAll();
      #
      #    purchIdx = SysFormTreeControl::addTreeItem(packageTree,
      #                                               "@RET4405" + purchTable.PurchId,
      #                                               FormTreeAdd::Root,
      #                                               "@SYS15812",
      #                                               imageRes,
      #                                               true);
      #
      #
      #    while select packagePurch
      #    where packagePurch.PurchId == purchTable.PurchId
      #    {
      #        packageIdx = SysFormTreeControl::addTreeItem(packageTree,
      #                                                     "@RET4406" + packagePurch.PackageId + '  ' +
      #                                                     RetailPackageTable::find(packagePurch.PackageId).PackageName +
      #                                                     '  ' + "@RET4407" + num2str(packagePurch.Qty,2,2,0,0),
      #                                                     purchIdx,
      #                                                     packagePurch,
      #                                                     imageRes,
      #                                                     true);
      #
      #        while select ItemId, PurchQty from purchLineSearch
      #        where purchLineSearch.PurchId           == purchTable.PurchId &&
      #              purchLineSearch.RetailPackageId   == packagePurch.PackageId &&
      #              purchLineSearch.rboPackageLineNum == packagePurch.LineNum
      #        {
      #            packageLineIdx = SysFormTreeControl::addTreeItem(packageTree,
      #                                                             purchLineSearch.ItemId + '  ' +
      #                                                             InventTable::find(purchLineSearch.ItemId).defaultProductName() +
      #                                                             '  ' + "@RET4407" + num2str(purchLineSearch.PurchQty,2,2,0,0),
      #                                                             packageIdx,
      #                                                             "@SYS7407",
      #                                                             imageRes,
      #                                                             false);
      #        }
      #
      #    }
      #
      #    SysFormTreeControl::expandTree(packageTree, packageTree.getRoot(), 1);
      #
      #
      #}
    ENDSOURCE
    SOURCE #formBOEJournalClosed_IN
      #/// <summary>
      #/// BOE Journal form close event handler
      #/// </summary>
      #public void formBOEJournalClosed_IN()
      #{
      #    purchTable_ds.research(true);
      #}
    ENDSOURCE
    SOURCE #formControlIsDataBound
      #private boolean  formControlIsDataBound(Object  _formControl)
      #{
      #    FormControlType formControlType = SysFormRun::controlType(classIdGet(_formControl));
      #    boolean         ret             = false;
      #
      #    if (formControlType == FormControlType::CheckBox
      #    ||  formControlType == FormControlType::ComboBox
      #    ||  formControlType == FormControlType::ListBox
      #    ||  formControlType == FormControlType::RadioButton
      #    ||  formControlType == FormControlType::String
      #    ||  formControlType == FormControlType::StaticText
      #    ||  formControlType == FormControlType::Date
      #    ||  formControlType == FormControlType::Integer
      #    ||  formControlType == FormControlType::Real
      #    ||  formControlType == FormControlType::Time
      #    ||  formControlType == FormControlType::Image
      #    ||  formControlType == FormControlType::Grid
      #    ||  formControlType == FormControlType::TabPage)
      #    {
      #        ret = true;
      #    }
      #
      #    return ret;
      #}
    ENDSOURCE
    SOURCE #handleSecurity
      #void handleSecurity(FormDataSource _fds, boolean _hasAccess)
      #{
      #    if (_fds && !_fds.allowCheck() && !_hasAccess)
      #    {
      #        _fds.query().dataSourceNo(1).enabled(false);
      #    }
      #}
    ENDSOURCE
    SOURCE #hasTableAccess
      #boolean hasTableAccess(TableId _tableId, AccessType _neededAccessLevel = AccessType::View)
      #{
      #    DictTable dictTable = new DictTable(_tableId);
      #
      #    if (dictTable)
      #    {
      #        return dictTable.rights() >= _neededAccessLevel;
      #    }
      #    return false;
      #}
    ENDSOURCE
    SOURCE #hideQualityManagement
      #void hideQualityManagement()
      #{
      #    status_qualityOrderStatusDisplay.visible(false);
      #    statusLine_qualityOrderStatusDisplay.visible(false);
      #    purchTable_qualityOrderStatusDisplay.visible(false);
      #    purchLine_qualityOrderStatusDisplay.visible(false);
      #
      #    lineStripProductQualitySeparator.visible(false);
      #    inventNonConformanceTableTableHeader.visible(false);
      #    inventQualityOrderTableTableHeader.visible(false);
      #    inventNonConformanceTableLine.visible(false);
      #    inventQualityOrderTableLine.visible(false);
      #}
    ENDSOURCE
    SOURCE #init
      #public void  init()
      #{
      #    Object              caller;
      #    boolean             wasCalledFromPurchLineBackOrderListPage = this.isCalledFromPurchLineBackOrderListPage();
      #    boolean             isFrenchRegulatoryEnabled = PublicSectorUtils::isFrenchRegulatoryEnabled();
      #    CFMPaymentRequestTable  paymentRequest;
      #
      #    #define.menuPurchTableForNew("PurchTableForNew_Action")
      #
      #    imageListAppl_PurchTableForm = ImageListAppl_PurchTableForm::construct();
      #
      #    #ISOCountryRegionCodes
      #
      #    isPurchLine_INEnabled   = PurchLine_IN::isExtensionEnabled();
      #    isPurchLine_WEnabled    = PurchLine_W::isExtensionEnabled();
      #    isPurchTableEnabled_W   = PurchTable_W::isExtensionEnabled();
      #    isPurchTableEnabled_BR   = PurchTable_BR::isExtensionEnabled();
      #    isPurchTableEnabled_RU   = PurchTable_RU::isExtensionEnabled();
      #    // <GMY>
      #    isSelfBilldInvoiceEnabled_MY        = TaxGSTFeatureChecker_MY::isSelfBilledInvoiceEnabled();
      #    isIsoMY                             = TaxGSTFeatureChecker_MY::isCountryRegionMY();
      #    if(isIsoMY)
      #    {
      #        vendInvoiceJourLookupController = VendInvoiceJourLookupController_MY::construct();
      #        isWrnPrintedMY                  = false;
      #    }
      #    // </GMY>
      #
      #    isCalledFromLP = TradeFormHelper::isCalledFromForm(element.args(), formStr(PurchTableListPage));
      #
      #    if (element.args())
      #    {
      #        if (!element.args().record() && element.args().lookupRecord())
      #        {
      #            //Called from EP
      #            element.args().record(element.args().lookupRecord());
      #            element.args().lookupRecord(null);
      #        }
      #    }
      #
      #    if (element.args() && !isCalledFromLP)
      #    {
      #        element.args().copyCallerQuery(CopyCallerQuery::No);
      #    }
      #
      #    if (isCalledFromLP
      #        && element.args()
      #        && element.args().record()
      #        && element.args().menuItemName() != #menuPurchTableForNew)
      #    {
      #        purchTableCaller = element.args().record() as PurchTable;
      #    }
      #
      #    zakatParameterEnabled = LedgerParameters::find().IsZakatEnabled_SA;
      #    // </GSA
      #    this.initCalledFromVendorSearch();
      #    super();
      #    isDocuActionTemplate = DocuActionForTemplate::createTemplateOnMenuButton(mbTemplatesButton, purchTable.TableId);
      #    FormSecurity::setFormDataSourceMaxAccessRight(this);
      #
      #    if (isConfigurationkeyEnabled(configurationKeyNum(RAsset)))
      #    {
      #        itemTypeCache = new Map(Types::String, Types::Enum);
      #    }
      #
      #    isRU = SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]);
      #
      #    if (isRU)
      #    {
      #        itemInventDimSetupCache = new Map(Types::String, Types::Enum);
      #    }
      #
      #    advanceHoldersEnabled = EmplParameters_RU::enableAdvanceHolders();
      #
      #    purchTableBudgetCheckResult.imageList(imageListAppl_PurchTableForm.imageList());
      #    purchLineBudgetCheckResult.imageList(imageListAppl_PurchTableForm.imageList());
      #
      #    dimensionDefaultingControllerHeader = DimensionDefaultingController::constructInGroupWithValues(false, true, true, 0, this, groupFinancialDimensionHeader , "@SYS101181");
      #    dimensionDefaultingControllerHeader.parmAttributeValueSetDataSource(purchTable_ds, fieldStr(PurchTable, DefaultDimension));
      #
      #    DimensionDefaultingController::initContainerId(groupFinancialDimensionLine, 2);
      #    dimensionDefaultingControllerLine = DimensionDefaultingController::constructInGroupWithValues(false, true, true, 0, this, groupFinancialDimensionLine , "@SYS101181");
      #    dimensionDefaultingControllerLine.parmAttributeValueSetDataSource(purchLine_ds, fieldStr(PurchLine, DefaultDimension));
      #
      #    ledgerDefaultAccountControllerLine = LedgerDimensionDefaultAccountController::construct(purchLine_ds, fieldStr(PurchLine, LedgerDimension));
      #    ledgerDefaultAccountControllerLine.parmControl(purchLine_LedgerDimension);
      #
      #    // Initialization specifically for projects
      #    // Only show purchase orders associated to projects if form is called from the project main menu
      #    if (element.args().parmEnumType() == enumNum(PurchTableFormId) && element.args().parmEnum() == PurchTableFormId::Project)
      #    {
      #        if (! element.args().record()) // called from menu
      #        {
      #            purchTable_ds.query().dataSourceTable(tableNum(PurchTable)).addRange(fieldNum(PurchTable, ProjId)).value(SysQuery::valueNotEmptyString());
      #        }
      #
      #        isProjectForm = true;
      #    }
      #
      #    // Initialization for call from PuchLineBackOrderListForm
      #    if (wasCalledFromPurchLineBackOrderListPage)
      #    {
      #        this.applyBackOrderLinesSelection();
      #        purchTableForm = PurchTableForm::construct(PurchTableFormId::None, element.args().record());
      #    }
      #    else
      #    {
      #        purchTableForm = PurchTableForm::constructFromArgs(this.args());
      #    }
      #
      #    purchTableForm.parmPurchTableFormRun(element);
      #    purchTableForm.parmDimensionDefaultingControllerHeader(dimensionDefaultingControllerHeader);
      #
      #    TaxVATNumTable::enableLookupVATNum(vatNum);
      #
      #    element.updateDesign(InventDimFormDesignUpdate::Init);
      #    lineSpec.visibleColsValue(8+conLen(inventDimFormSetup.dimFieldsActive(inventDimFormSetup.parmDimParmVisibleGrid())));
      #
      #    purchTable_ds.object(fieldNum(PurchTable, PurchaseType)).allowEdit(purchTableForm.editPurchaseType());
      #    purchTable_ds.query(purchTableForm.queryPurchTable(purchTable_ds.query()));
      #    purchLine_ds.query(purchTableForm.queryPurchLine(purchLine_ds.query()));
      #
      #    groupNotificationToTheCentralBank.visible(SysCountryRegionCode::isLegalEntityInCountryRegion([#isoNO]));
      #
      #    if (!TaxParameters::find().CashDiscOnInvoice)
      #    {
      #        purchTable_ds.object(fieldNum(PurchTable, CashDiscPercent)).allowEdit(false);
      #    }
      #
      #    interCompanySalesCache = new Map(typeName2Type(extendedTypeStr(RecId)), Types::Container);
      #
      #    if (!InventParameters::find().UseQualityManagement)
      #    {
      #        element.hideQualityManagement();
      #    }
      #
      #    //Hide 1099 Tab if neither 1099G or 1099S keys are enabled
      #    if (isConfigurationkeyEnabled(configurationKeyNum(PublicSector))
      #            && !(isConfigurationkeyEnabled(configurationKeyNum(Tax1099G)) || isConfigurationkeyEnabled(configurationKeyNum(Tax1099S))))
      #    {
      #        tabLineTax1099.visible(false);
      #    }
      #
      #    // Hide the Environment tab
      #    environment.visible(false);
      #
      #    //CFM payment requests
      #    if (element.args().dataset() == tableNum(CFMPaymentRequestTable))
      #    {
      #        paymentRequest = element.args().record();
      #        purchTable_ds.query().dataSourceTable(tableNum(PurchTable)).addRange(fieldNum(PurchTable, RecId)).value(queryValue(paymentRequest.HeaderRefRecId));
      #    }
      #
      #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoIN]))
      #    {
      #        taxWithholdParameters   = TaxWithholdParameters_IN::find();
      #        taxParameters           = TaxParameters::find();
      #        eximParameters          = EximParameters_IN::find();
      #
      #        taxExciseTypeController = TaxExciseTypeController_IN::construct(exciseNone_IN,
      #                                                                        exciseManufacture_IN,
      #                                                                        exciseTraders_IN,
      #                                                                        taxInformation_IN_ECCNumber,
      #                                                                        taxInformation_IN_ManECCRegistrationNumberTable,
      #                                                                        taxInformation_IN_TraderECCRegistrationNumberTable,
      #                                                                        purchLine_IN_DS);
      #        taxExciseTypeController.parmFieldNumDirectSettlement(fieldNum(PurchLine_IN, DirectSettlement_IN));
      #        taxExciseTypeController.parmFieldNumDSA(fieldNum(PurchLine_IN, dsa_in));
      #
      #        element.setVisible_IN();
      #        element.updateDesign_IN();
      #        element.setTaxWithholdVisible_IN();
      #    }
      #
      #    if (LedgerParameters::find().IsEncumbranceProcessEnabled == NoYes::No)
      #    {
      #        buttonSubLedgerJournalLines.visible(false);
      #        encumbranceSummary.visible(false);
      #        ledgerTransact.visible(false);
      #    }
      #    else
      #    {
      #        buttonSubLedgerJournalLines.visible(true);
      #        encumbranceSummary.visible(true);
      #        ledgerTransact.visible(true);
      #    }
      #
      #    purchParameters = PurchParameters::find();
      #    if (purchParameters.ChangeRequestEnabled == NoYes::No &&
      #        purchParameters.ChangeRequestAllowOverride == NoYes::No)
      #    {
      #        workflowEnabled = false;
      #    }
      #    else
      #    {
      #        workflowEnabled = true;
      #    }
      #
      #    element.design().workflowEnabled(workflowEnabled);
      #
      #    bankLGFeatureChecker    = BankLGFeatureChecker::construct();
      #    enableLGFeature         = bankLGFeatureChecker.checkFeatureEnabled();
      #    bankLGRequestForm.visible(enableLGFeature);
      #
      #    bankLCImportFeatureChecker = BankLCImportFeatureChecker::construct();
      #    enableLCFeature            = bankLCImportFeatureChecker.checkFeatureEnabled();
      #    purchTable_DS.object(fieldNum(PurchTable, BankDocumentType)).visible(enableLCFeature || enableLGFeature);
      #    buttonCreateBankLCImport.visible(enableLCFeature);
      #
      #    zakat_SA.visible(zakatParameterEnabled);
      #
      #    headerForeignTrade_ListCode.visible(IntrastatParameters::find().euSalesListTransferPurchases);
      #
      #    lineDeliveryType.imageList(imageListAppl_PurchTableForm.imageList());
      #
      #    if (isConfigurationkeyEnabled(configurationKeyNum(Retail)))
      #    {
      #        packageTree.setImagelist(imageListAppl_PurchTableForm.imageList());
      #        packageTree.setStateImagelist(imageListAppl_PurchTableForm.imageList());
      #    }
      #
      #    // Needed to check validity of address
      #    logisticsPostalAddressHeader_ds.addFieldToSelectionList(fieldNum(LogisticsPostalAddress, ValidFrom));
      #    logisticsPostalAddressHeader_ds.addFieldToSelectionList(fieldNum(LogisticsPostalAddress, ValidTo));
      #    logisticsPostalAddressHeader_ds.addFieldToSelectionList(fieldNum(LogisticsPostalAddress, CountryRegionId));
      #    logisticsPostalAddressLine_ds.addFieldToSelectionList(fieldNum(LogisticsPostalAddress, ValidFrom));
      #    logisticsPostalAddressLine_ds.addFieldToSelectionList(fieldNum(LogisticsPostalAddress, ValidTo));
      #    logisticsPostalAddressLine_ds.addFieldToSelectionList(fieldNum(LogisticsPostalAddress, CountryRegionId));
      #
      #
      #    //if the Purchase Requisition control is enabled, then disable it if the commitments feature is enabled.
      #    if (purchReq_PurchReqId.enabled())
      #    {
      #        purchReq_PurchReqId.enabled(!isFrenchRegulatoryEnabled);
      #    }
      #
      #    //Make the commitments fields mandatory and visible if the feature is enabled, otherwise hide them and make them non-mandatory.
      #    purchCommitmentLineLookup_PSN.visible(isFrenchRegulatoryEnabled);
      #    purchCommitmentLineLookup_PSN.mandatory(isFrenchRegulatoryEnabled);
      #
      #
      #    purchCommitmentLineLookup2_PSN.visible(isFrenchRegulatoryEnabled);
      #    purchCommitmentLineLookup2_PSN.mandatory(isFrenchRegulatoryEnabled);
      #
      #    commitment_PSN.visible(isFrenchRegulatoryEnabled);
      #
      #    // <PubSect>
      #    BudgetReservation.visible(PublicSectorUtils::isBudgetReservationEnabled());
      #    // </PubSect>
      #
      #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoJP]))
      #    {
      #        element.disableConsInvoiceControl_JP();
      #    }
      #
      #    if (BrazilParameters::isEnabled())
      #    {
      #        salesPurchOperationTypeController_BR = new SalesPurchOperationTypeController_BR(this.name());
      #        purchTable_BR_DS.object(fieldNum(PurchTable_BR, cfpsId_BR)).visible(BrazilParameters::isCFPSEnabled_BR());
      #    }
      #
      #    if (VendAdvanceInvoice::isDeactivated())
      #    {
      #        prepayPurchTableHeading.visible(false);
      #        buttonRemovePurchPrepayTable.visible(false);
      #        buttonUpdatePrepayInvoice.visible(false);
      #    }
      #
      #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoCZ]))
      #    {
      #        purchTable_DS.object(fieldNum(PurchTable, StatProcId)).visible(false);
      #        purchLine_DS.object( fieldNum(PurchLine,  StatProcId)).visible(false);
      #    }
      #
      #    if (element.args().parmEnumType() == enumNum(FormOpenMode))
      #    {
      #        caller = element.args().caller();
      #        if (caller && caller is SysSetupFormRun)
      #        {
      #            skipLinkActive = element.args().parmEnum() == FormOpenMode::ForNew;
      #        }
      #    }
      #
      #    if (RetailSMB::IsRetailSMBEnabled())
      #    {
      #        RetailSMB::SetVisible(element);
      #    }
      #    mcrPriceHistory.visible(purchParameters.mcrEnablePriceDetails);
      #}
      #
      #
      #
    ENDSOURCE
    SOURCE #initCalledFromVendorSearch
      #private void initCalledFromVendorSearch()
      #{
      #    Object                      myCaller;
      #    VendTmpCurrentVendorResult  vendTmpCurrentVendorResult;
      #
      #    wasCalledFromVendorSearch = false;
      #
      #    if (element.args())
      #    {
      #        myCaller = element.args().caller();
      #        if (myCaller && myCaller is FormRun)
      #        {
      #            if (element.args().caller().name() == formStr(VendSearchResults))
      #            {
      #                wasCalledFromVendorSearch   = true;
      #                vendTmpCurrentVendorResult  = element.args().record();
      #                vendAccountSearch           = vendTmpCurrentVendorResult.VendorAccountNum;
      #            }
      #        }
      #    }
      #}
    ENDSOURCE
    SOURCE #interCompanyIsPriceDiscSearchNeeded
      #RecId interCompanyIsPriceDiscSearchNeeded()
      #{
      #    return interCompanyIsPriceDiscSearchNeeded;
      #}
    ENDSOURCE
    SOURCE #interCompanyRefreshCache
      #void interCompanyRefreshCache()
      #{
      #    interCompanySalesCache = new Map(typeName2Type(extendedTypeStr(RecId)), Types::Container);
      #}
    ENDSOURCE
    SOURCE #inventDimSetupObject
      #Object inventDimSetupObject()
      #{
      #    return inventDimFormSetup;
      #}
    ENDSOURCE
    SOURCE #invoiceMatchingAccess
      #public void invoiceMatchingAccess()
      #{
      #    invoiceMatching.visible(VendParameters::find().editUseInvoiceMatching());
      #}
    ENDSOURCE
    SOURCE #isCalledFromPurchLineBackOrderListPage
      #private boolean isCalledFromPurchLineBackOrderListPage()
      #{
      #    return TradeFormHelper::isCalledFromForm(element.args(), formStr(PurchLineBackOrderListPage));
      #}
    ENDSOURCE
    SOURCE #lineTaxTransSource
      #public void lineTaxTransSource()
      #{
      #    element.automaticTotalDiscount();
      #
      #    PurchTotals::showTaxLine(menuitemDisplayStr(TaxTmpWorkPurchOrder), purchTable,purchLine);
      #}
    ENDSOURCE
    SOURCE #markupTransFormClosed
      #public void markupTransFormClosed()
      #{
      #    int pos;
      #
      #    // Update budget check result for changes from edit
      #    purchLine_ds.updateBudgetCheckResultDisplay();
      #
      #    if (isPurchLine_INEnabled)
      #    {
      #        purchLine_IN_ds.reread();
      #        purchLine_IN_ds.refresh();
      #    }
      #
      #    if (isPurchLine_WEnabled)
      #    {
      #        purchLine_W_ds.reread();
      #        purchLine_W_ds.refresh();
      #    }
      #
      #    if (purchTable.mcrDropShipment)
      #    {
      #        pos = purchLine_ds.getPosition();
      #        purchLine_ds.research();
      #        purchLine_ds.setPosition(pos);
      #    }
      #
      #    purchTable_ds.reread();
      #    purchTable_ds.refresh();
      #    purchTable_ds.selectionChanged();
      #}
    ENDSOURCE
    SOURCE #multiLineDiscount
      #/// <summary>
      #/// Calculates multi line discounts.
      #/// </summary>
      #public void multiLineDiscount()
      #{
      #    element.automaticTotalDiscount();
      #
      #    if (purchTable.updateMultiLineDisc())
      #    {
      #        purchLine_ds.research(true);
      #    }
      #}
    ENDSOURCE
    SOURCE #nextGroup
      #void  nextGroup()
      #{
      #    if (!PurchLine::exist(purchTable.PurchId))
      #    {
      #        purchLine_ds.create();
      #    }
      #
      #    purchLine_ItemId.setFocus();
      #}
    ENDSOURCE
    SOURCE #numberSeqFormHandler
      #NumberSeqFormHandler numberSeqFormHandler()
      #{
      #    // Activate number sequence handler
      #    if (!numberSeqFormHandler)
      #    {
      #        numberSeqFormHandler = NumberSeqFormHandler::newForm(EMSParameter::numRefFlowId().NumberSequenceId,
      #                                                         element,
      #                                                         emsPurchOrderFlowRelation_ds,
      #                                                         fieldNum(EMSPurchOrderFlowRelation, FlowId));
      #    }
      #    return numberSeqFormHandler;
      #}
    ENDSOURCE
    SOURCE #packageAllowEdit
      #/// <summary>
      #/// Package Allow Edit
      #/// </summary>
      #/// <param name="allowEdit">
      #/// True to allow Edit, False otherwise
      #/// </param>
      #void packageAllowEdit(boolean allowEdit)
      #{
      #    purchLine_ds.object(fieldNum(PurchLine, ItemId)).allowEdit(allowEdit && purchLine_ds.object(fieldNum(PurchLine, ItemId)).allowEdit());
      #    purchLine_ds.object(fieldNum(PurchLine, VariantId)).allowEdit(allowEdit);
      #    if (!pdsIsCWItem(purchLine.ItemId))
      #    {
      #        purchLine_ds.object(fieldNum(PurchLine, PurchQty)).allowEdit(allowEdit && purchLine_ds.object(fieldNum(PurchLine, PurchQty)).allowEdit());
      #    }
      #    purchLine_ds.object(fieldNum(PurchLine, PurchUnit)).allowEdit(allowEdit && purchLine_ds.object(fieldNum(PurchLine, PurchUnit)).allowEdit());
      #    inventDim_ds.allowEdit(allowEdit && inventDim_ds.allowEdit());
      #    retailPackagePurch_ds.object(fieldNum(RetailPackagePurch, Qty)).allowEdit(allowEdit);
      #
      #}
    ENDSOURCE
    SOURCE #parmPostalAddressLocation
      #public LogisticsLocationRecId parmPostalAddressLocation(LogisticsLocationRecId _postalAddressLocation = 0)
      #{
      #    if (!_postalAddressLocation)
      #    {
      #        // Set location by active datasource
      #        if (element.dataSource().name() == purchLine_ds.name())
      #        {
      #            _postalAddressLocation = purchLine.deliveryLocation();
      #        }
      #        else
      #        {
      #            _postalAddressLocation = purchTable.deliveryLocation();
      #        }
      #    }
      #
      #    postalAddressLocation = _postalAddressLocation;
      #    return postalAddressLocation;
      #}
    ENDSOURCE
    SOURCE #pbaConfigureLine
      #void pbaConfigureLine()
      #{
      #    PBATablePBAInstance   pbaTablePBAInstance;
      #
      #    purchLine_DS.write();
      #
      #    if (PCRuntimeLibrary::isConstraintBasedConfigurable(purchLine.ItemId))
      #    {
      #        PCExecuteVariantConfiguration::execute(purchLine, purchLine.ItemId, inventDim.ConfigId);
      #    }
      #    else
      #    {
      #        if (!autoConfig )
      #        {
      #            PBAExecute::execute(purchLine,pbaTablePBAInstance, '');
      #        }
      #
      #        autoConfig = false;
      #    }
      #
      #    purchline_ds.research(true);
      #}
    ENDSOURCE
    SOURCE #performVendInvoiceJourLookup_MY
      #/// <summary>
      #/// Performs lookup for <c>VendInvoiceJour</c> table.
      #/// </summary>
      #/// <param name="_control">
      #/// The control to require lookup.
      #/// </param>
      #/// <param name="_vendAccount">
      #/// The account of vendor.
      #/// </param>
      #// <GMY>
      #public void performVendInvoiceJourLookup_MY(
      #    FormStringControl   _control,
      #    VendAccount         _vendAccount)
      #{
      #    vendInvoiceJourLookupController.parmVendAccount(_vendAccount);
      #    vendInvoiceJourLookupController.performLookup(_control);
      #}
      #// <GMY>
    ENDSOURCE
    SOURCE #PrintManagement
      #/// <summary>
      #/// Launch the print management setup form.
      #/// </summary>
      #public void PrintManagement()
      #{
      #    PrintMgmtSetupContext setupContext = new PrintMgmtSetupContext();
      #
      #    setupContext.addHierarchyContext(PrintMgmtHierarchyType::Purch, PrintMgmtNodeType::PurchTable);
      #    setupContext.parmCaller(element);
      #    setupContext.parmReferencedTableBuffer(purchTable_ds.cursor());
      #    setupContext.parmCountryRegionId(LogisticsPostalAddress::findRecId(purchTable.DeliveryPostalAddress).CountryRegionId);
      #    PrintMgmt::launchSetup(setupContext);
      #}
    ENDSOURCE
    SOURCE #purchLineResearch
      #void purchLineResearch()
      #{
      #    purchLine_ds.research();
      #}
    ENDSOURCE
    SOURCE #purchTable
      #PurchTable purchTable()
      #{
      #    return purchTable;
      #}
    ENDSOURCE
    SOURCE #refreshPurchLine_IN
      #public void refreshPurchLine_IN()
      #{
      #    purchLine_ds.reread();
      #    purchLine_ds.refresh();
      #    purchLine_IN_ds.reread();
      #    purchLine_IN_ds.refresh();
      #    purchLine_W_ds.refresh();
      #}
    ENDSOURCE
    SOURCE #removeAgreementLink
      #public void removeAgreementLink()
      #{
      #    PurchTableForm_DlvScheduleSyncEnabled purchTableFormDlvSchedule;
      #    PurchLine       origPurchLine = purchLine.orig().data();
      #    boolean doNotAsk;
      #
      #
      #    if (purchLine.unLinkAgreementLinePrompt())
      #    {
      #        // When the user manually removes a link to an agreement line, then also prevent automatic (re)linking of agreement lines
      #        purchLine.AgreementSkipAutoLink = NoYes::Yes;
      #
      #        if (purchLine.LineDeliveryType == LineDeliveryType::OrderLineWithMultipleDeliveries)
      #        {
      #            purchTableFormDlvSchedule = purchTableForm as PurchTableForm_DlvScheduleSyncEnabled;
      #            purchTableFormDlvSchedule.parmOrderLineOrig(origPurchLine);
      #            if (purchTableFormDlvSchedule.deliveryLinesSync(purchLine, doNotAsk))
      #            {
      #                // Need to update delivery lines on grid.
      #                purchLine_DS.executeQuery();
      #            }
      #        }
      #        purchLine_DS.research(true);
      #        this.enableAgreementButtons();
      #    }
      #}
    ENDSOURCE
    SOURCE #resetAssetContainers
      #/// <summary>
      #///     Resets the asset containers to empty.
      #/// </summary>
      #public void resetAssetContainers()
      #{
      #    assetRules              = conNull();
      #    assetQualifierList      = new List(Types::Container);
      #    selectedAssetQualifier  = '';
      #}
    ENDSOURCE
    SOURCE #run
      #public void run()
      #{
      #    super();
      #    docuActionTemplateUndefined.visible(!isDocuActionTemplate);
      #
      #    if (RetailSMB::IsRetailSMBEnabled())
      #    {
      #        RetailUtils::HidePart(element, identifierStr(PurchEncumbranceSummaryPart));
      #    }
      #}
    ENDSOURCE
    SOURCE #selectControl
      #public boolean selectControl(FormControl _control)
      #{
      #    boolean  ok;
      #
      #    ok = super(_control);
      #
      #    if (ok  &&  workflowEnabled && _control  &&  element.formControlIsDataBound(_control))
      #    {
      #        element.toggleWorkflow_ds(_control);
      #    }
      #
      #    return ok;
      #}
    ENDSOURCE
    SOURCE #setAccountingDistributionView
      #public void setAccountingDistributionView(AccountingDistributionView    _accountingDistributionView)
      #{
      #    purchTableForm.subscribeToAccDistViewEvents(_accountingDistributionView);
      #}
    ENDSOURCE
    SOURCE #setAllowEdit1099GFields
      #/// <summary>
      #/// Sets the 1099G fields to be editable if G-2 is selected
      #/// </summary>
      #/// <remarks>
      #/// When G-2 is selected, the fields are set as editable, when it is not selected they are uneditable
      #/// </remarks>
      #void setAllowEdit1099GFields()
      #{
      #    boolean     canEdit;
      #    boolean     canEditTax1099;
      #    #Tax1099
      #
      #    canEditTax1099 = purchLine.allowEditTax1099();
      #
      #    canEdit = purchTableForm.can1099GFieldsBeEdited(purchLine) && canEditTax1099;
      #
      #    tax1099GFields.allowEdit(canEdit);
      #
      #    canEdit = purchTableForm.can1099G1FieldsBeEdited(purchLine) && canEditTax1099;
      #
      #    tax1099G1Fields.allowEdit(canEdit);
      #}
    ENDSOURCE
    SOURCE #setAllowEdit1099SFields
      #/// <summary>
      #/// Sets the editable state of S-2 fields based on the value of S-2
      #/// </summary>
      #/// <remarks>
      #/// When S-2 is selected the fields are editable, when it is not selected they are not editable.
      #/// </remarks>
      #void setAllowEdit1099SFields()
      #{
      #    boolean canEdit;
      #
      #    #Tax1099
      #
      #    canEdit = purchTableForm.can1099SFieldsBeEdited(purchLine) && purchLine.allowEditTax1099();
      #
      #    tax1099SFields.allowEdit(canEdit);
      #}
    ENDSOURCE
    SOURCE #setAllowEditTax1099
      #/// <summary>
      #/// Sets the editable status of tax1099Amount and tax1099StateAmount based upon the invoice status
      #/// </summary>
      #/// <remarks>
      #/// If the record is marked as Invoiced then the fields are not editable.
      #/// </remarks>
      #void setAllowEditTax1099()
      #{
      #    boolean canEdit;
      #    Tax1099Fields tax1099Fields;
      #    #Tax1099
      #
      #    canEdit = purchLine.allowEditTax1099();
      #
      #    purchLine_ds.object(fieldNum(PurchLine, Tax1099Fields)).allowEdit(canEdit);
      #    purchLine_ds.object(fieldNum(PurchLine, Tax1099Amount)).allowEdit(canEdit);
      #    purchLine_ds.object(fieldNum(PurchLine, Tax1099State)).allowEdit(canEdit);
      #    purchLine_ds.object(fieldNum(PurchLine, Tax1099StateAmount)).allowEdit(canEdit);
      #
      #    //Amounts on setup tab are not editable for 1099-S
      #    if (isConfigurationkeyEnabled(configurationKeyNum(PublicSector)))
      #    {
      #        tax1099Fields = Tax1099Fields::find(purchLine.Tax1099Fields);
      #
      #        if (canEdit && (tax1099Fields.Tax1099Box == #S_2))
      #        {
      #            line1099Fields_Tax1099Amount.allowEdit(false);
      #            line1099Fields_Tax1099StateAmount.allowEdit(false);
      #        }
      #        else
      #        {
      #            line1099Fields_Tax1099Amount.allowEdit(true);
      #            line1099Fields_Tax1099StateAmount.allowEdit(true);
      #        }
      #    }
      #}
    ENDSOURCE
    SOURCE #setCFOP_BR
      #public RefRecId setCFOP_BR(boolean _userInteraction = false)
      #{
      #    CFOPValidation_BR           cfopValidation;
      #    RefRecId                    cfopTableRecId;
      #
      #    cfopValidation  = CFOPValidation_BR::construct(purchTable);
      #
      #    cfopTableRecId = cfopValidation.getDefaultCFOP(_userInteraction);
      #
      #    return cfopTableRecId;
      #}
      #
    ENDSOURCE
    SOURCE #setControls
      #void setControls()
      #{
      #    // Disable the Substance and Destination Process fields if the Source Process is not setup yet
      #    flow_SubstanceId.enabled(emsFlow.SourceProcessId ? true : false);
      #    flow_DestinationProcessId.enabled(emsFlow.SourceProcessId ? true : false);
      #}
    ENDSOURCE
    SOURCE #setEditCommitmentLineAllowed
      #/// <summary>
      #/// Enables or disables editability of the commitment line field.
      #/// </summary>
      #/// <param name="_allowEdit">
      #/// Whether to enable editing.
      #/// </param>
      #void setEditCommitmentLineAllowed(boolean _allowEdit)
      #{
      #    if (PublicSectorUtils::isFrenchRegulatoryEnabled())
      #    {
      #        purchLine_ds.object(fieldNum(PurchLine, PurchCommitmentLine_PSN)).allowEdit(_allowEdit);
      #    }
      #}
      #
    ENDSOURCE
    SOURCE #setEditItemCategoryAllowed
      #/// <summary>
      #/// Enables or disables editing of the item and procurement category fields.
      #/// </summary>
      #/// <param name="allowEdit">
      #/// Whether to enable editing.
      #/// </param>
      #void setEditItemCategoryAllowed(boolean allowEdit)
      #{
      #    purchLine_ds.object(fieldNum(PurchLine, ItemId)).allowEdit(allowEdit);
      #
      #    if (BrazilParameters::isEnabled())
      #    {
      #        purchLine_ds.object(fieldNum(PurchLine, ProcurementCategory)).allowEdit(false);
      #    }
      #    else
      #    {
      #        purchLine_ds.object(fieldNum(PurchLine, ProcurementCategory)).allowEdit(allowEdit);
      #    }
      #
      #}
    ENDSOURCE
    SOURCE #setEditLinenumberAllowed
      #/// <summary>
      #/// Enables or disables editing of the line number field.
      #/// </summary>
      #/// <param name="_allowEdit">
      #/// A bolean specifying whether editing is allowed.
      #/// </param>
      #void setEditLinenumberAllowed(boolean _allowEdit)
      #{
      #    purchLine_ds.object(fieldNum(PurchLine, LineNumber)).allowEdit(_allowEdit);
      #}
    ENDSOURCE
    SOURCE #setEximFieldsAccess_IN
      #public void setEximFieldsAccess_IN()
      #{
      #    boolean           isVisible;
      #    boolean           isInvoice;
      #
      #    isVisible = (taxParameters.EximIncentiveSchemes_IN && purchTable_W.CustomsImportOrder_IN);
      #    isInvoice = (purchLine.PurchQty > 0);
      #
      #    exim_IN.visible(isVisible);
      #    eximPurchLine_IN_ApplyDEPB.visible(isVisible && eximParameters.ActivateEPCG);
      #    incentiveSchemeGroup_IN.visible(isVisible);
      #
      #    exim_IN.allowEdit(isInvoice);
      #    eximPurchLine_IN_ApplyDEPB.allowEdit(isInvoice);
      #    incentiveSchemeGroup_IN.enabled(isInvoice);
      #}
    ENDSOURCE
    SOURCE #setIsPwpField
      #public void setIsPwpField()
      #{
      #    if (!isConfigurationkeyEnabled(configurationKeyNum(Project3)))
      #    {
      #        return;
      #    }
      #
      #    if (ProjLineProperty::find(purchline.ProjLinePropertyId).ToBeInvoiced)
      #    {
      #        purchline_ds.object(fieldNum(PurchLine, IsPwp)).allowEdit(true);
      #    }
      #    else
      #    {
      #        purchline_ds.object(fieldNum(PurchLine, IsPwp)).allowEdit(false);
      #    }
      #}
    ENDSOURCE
    SOURCE #setLineDefaults
      #/// <summary>
      #/// Sets default values to be used when creating an order line.
      #/// </summary>
      #public void setLineDefaults()
      #{
      #    Object      callerFormObject;
      #
      #    // Make sure this was called via a form.
      #    if (element.args().caller() && element.args().caller() is FormRun)
      #    {
      #        if (element.args().caller().name() == formStr(ReqSupplyDemandSchedule))
      #        {
      #            callerFormObject = element.args().caller();
      #
      #            if (formHasMethod(callerFormObject, identifierStr(parmItemId)))
      #            {
      #                defaultItemId = callerFormObject.parmItemId();
      #            }
      #
      #            if (formHasMethod(callerFormObject, identifierStr(defaultInventDim)))
      #            {
      #                defaultInventDim = callerFormObject.defaultInventDim();
      #            }
      #
      #            if (formHasMethod(callerFormObject, identifierStr(getFromDate)))
      #            {
      #                defaultDate = callerFormObject.getFromDate();
      #            }
      #        }
      #    }
      #}
    ENDSOURCE
    SOURCE #setTaxWithholdEnabled_IN
      #void setTaxWithholdEnabled_IN()
      #{
      #
      #    purchTable_W_ds.object(fieldNum(PurchTable_W, tcsGroup_IN)).enabled(!purchTable_W.tdsGroup_IN &&
      #                                                                    taxWithholdParameters.tcsActivate);
      #    purchTable_W_ds.object(fieldNum(PurchTable_W, tdsGroup_IN)).enabled(!purchTable_W.tcsGroup_IN &&
      #                                                                    taxWithholdParameters.tdsActivate);
      #    purchLine_IN_ds.object(fieldNum(PurchLine_IN, tcsGroup_IN)).enabled(!purchLine_IN.tdsGroup_IN    &&
      #                                                                   taxWithholdParameters.tcsActivate);
      #    purchLine_IN_ds.object(fieldNum(PurchLine_IN, tdsGroup_IN)).enabled(!purchLine_IN.tcsGroup_IN    &&
      #                                                                   taxWithholdParameters.tdsActivate);
      #    buttonWithholdTax_IN.enabled((purchLine_IN.tdsGroup_IN || purchLine_IN.tcsGroup_IN) &&
      #                                 (taxWithholdParameters.tdsActivate || taxWithholdParameters.tcsActivate));
      #    if (purchLine.InventRefId && purchLine.InventRefTransId && !purchTable.isInterCompanyOrder())
      #    {
      #        purchTable_W_ds.object(fieldNum(PurchTable_W, tcsGroup_IN)).enabled(!purchLine.InventRefId      &&
      #                                                                        !purchLine.InventRefTransId &&
      #                                                                         taxWithholdParameters.tcsActivate);
      #        purchTable_W_ds.object(fieldNum(PurchTable_W, tdsGroup_IN)).enabled(!purchLine.InventRefId      &&
      #                                                                        !purchLine.InventRefTransId &&
      #                                                                         taxWithholdParameters.tdsActivate);
      #        purchLine_IN_ds.object(fieldNum(PurchLine_IN, tcsGroup_IN)).enabled(!purchLine.InventRefId        &&
      #                                                                      !purchLine.InventRefTransId   &&
      #                                                                       taxWithholdParameters.tcsActivate);
      #        purchLine_IN_ds.object(fieldNum(PurchLine_IN, tdsGroup_IN)).enabled(!purchLine.InventRefId        &&
      #                                                                      !purchLine.InventRefTransId   &&
      #                                                                       taxWithholdParameters.tdsActivate);
      #    }
      #    purchLine_IN_ds.object(fieldNum(PurchLine_IN, SoftwareDeclReceived_IN)).enabled((purchLine_IN.tdsGroup_IN != ''));
      #}
    ENDSOURCE
    SOURCE #setTaxWithholdVisible_IN
      #void setTaxWithholdVisible_IN()
      #{
      #    purchTable_W_ds.object(fieldNum(PurchTable_W, tdsGroup_IN)).visible(taxWithholdParameters.tdsActivate);
      #    purchLine_IN_ds.object(fieldNum(PurchLine_IN, tdsGroup_IN)).visible(taxWithholdParameters.tdsActivate);
      #    purchTable_W_ds.object(fieldNum(PurchTable_W, tcsGroup_IN)).visible(taxWithholdParameters.tcsActivate);
      #    purchLine_IN_ds.object(fieldNum(PurchLine_IN, tcsGroup_IN)).visible(taxWithholdParameters.tcsActivate);
      #    withholdingTax_IN.visible(taxWithholdParameters.tdsActivate || taxWithholdParameters.tcsActivate);
      #    buttonWithholdTax_IN.visible(taxWithholdParameters.tdsActivate || taxWithholdParameters.tcsActivate);
      #    withholdingTax.visible(taxWithholdParameters.tdsActivate || taxWithholdParameters.tcsActivate);
      #}
    ENDSOURCE
    SOURCE #setTitleText
      #public void setTitleText()
      #{
      #    headerTitle.text(strFmt('%1 : %2 - %3', purchTable.PurchId,
      #                                            purchTable.InvoiceAccount,
      #                                            purchTable.vendTable_InvoiceAccount().name()));
      #}
    ENDSOURCE
    SOURCE #setupAsset
      #/// <summary>
      #///     Sets asset group on the line based on asset rules defined.
      #/// </summary>
      #/// <param name = "_purchLine">
      #///     A <c>Purchline</c> buffer based on which asset rules needs to be looked up.
      #/// </param>
      #/// <returns>
      #///     true if an asset group can be set and if no user selection is required; otherwise, false.
      #/// </returns>
      #boolean setupAsset(PurchLine _purchLine)
      #{
      #    container       optionContainer;
      #    container       assetQualifierContainer;
      #    int             i;
      #    boolean         ret;
      #    str             temp;
      #    ListEnumerator  valueList;
      #
      #    ret = true;
      #
      #    //Find asset information only for lines which are being created or lines which already have asset information set
      #    //For purchase lines where asset information was not set when created, there should not be any re-evaluation for asset rules.
      #    if (_purchLine.ProcurementCategory
      #        && purchTable.PurchaseType == PurchaseType::Purch
      #        && (!purchLine.RecId || purchLine.CreateFixedAsset)
      #        && !assetRules)
      #    {
      #        if (AssetParameters::canAssetBeAutoCreated())
      #        {
      #            assetRules = PurchTableForm::setupAssetGroup(_purchLine);
      #        }
      #
      #        //Load assetQualifierList
      #        if (conLen(assetRules) > 0)
      #        {
      #            optionContainer = conPeek(assetRules, #AssetOptionContainerPosition);
      #
      #            if (conLen(optionContainer) != 0)
      #            {
      #                //Load asset qualifier options
      #                if (!_purchLine.AssetGroup)
      #                {
      #                    //Asset group does not exist but qualifiers exist; User needs to select a qualifier
      #                    ret = checkFailed("@SYS136416");
      #                }
      #
      #                assetQualifierList = new List(Types::Container);
      #                for (i = 1; i < conLen(optionContainer); i += 3)
      #                {
      #                    assetQualifierContainer = [conPeek(optionContainer, i), conPeek(optionContainer, i+1)];
      #                    assetQualifierList.addEnd(assetQualifierContainer);
      #
      #                    valueList = assetQualifierList.getEnumerator();
      #
      #                    temp = conPeek(assetQualifierContainer, #AssetOptionContainerGroupPosition);
      #
      #                    if (_purchLine.AssetGroup == temp)
      #                    {
      #                        selectedAssetQualifier = conPeek(assetQualifierContainer, #AssetOptionContainerTextPosition);
      #                    }
      #                }
      #            }
      #        }
      #    }
      #
      #    if (assetQualifierList && !assetQualifierList.empty())
      #    {
      #        //Qualifier options exist, so load asset info controls
      #        element.design().controlName(#grpAssetQualifier).visible(true);
      #        txtAssetQualifierQuestion.text(conPeek(assetRules, #AssetQualifierTextPosition));
      #        editAssetQualifier.text(selectedAssetQualifier);
      #        editAssetQualifier.mandatory(true);
      #    }
      #    else
      #    {
      #        element.design().controlName(#grpAssetQualifier).visible(false);
      #        editAssetQualifier.mandatory(false);
      #    }
      #
      #    return ret;
      #}
    ENDSOURCE
    SOURCE #setupEnvironmentalTab
      #/// <summary>
      #/// Set the environmetal tab visibility and the enabled state.
      #/// </summary>
      #/// <remarks>
      #/// Environmental tab is visible for selected vendor and items. Environmental tab is enabled when a <c>PurchLine</c> record exists in the form.
      #/// </remarks>
      #public void setupEnvironmentalTab()
      #{
      #    // Environment tab is only shown for selected vendor and items
      #    environment.visible(isConfigurationkeyEnabled(configurationKeyNum(EMS)) &&
      #                         EMSActivation::isActive(purchTable.OrderAccount , purchLine.ItemId , purchLine.InventDimId));
      #
      #    environment.enabled(purchLine.RecId != 0);
      #    environmentActionPane.enabled(purchLine.RecId != 0);
      #
      #    if (isConfigurationkeyEnabled(configurationKeyNum(psaPwp)))
      #    {
      #        if (ProjTable::setFieldPwpThresholdPercent(ProjTable::find(purchLine.ProjId)))
      #        {
      #            purchLine_IsPwp.visible(true);
      #            psaPwpPercent.visible(true);
      #        }
      #        else
      #        {
      #            purchLine_IsPwp.visible(false);
      #            psaPwpPercent.visible(false);
      #        }
      #
      #        element.setIsPwpField();
      #
      #        if (purchLine.IsPwp)
      #        {
      #            buttonSubledgerdistribution.enabled(false);
      #            buttonSourceDocumentDistributionHeader.enabled(false);
      #        }
      #        else
      #        {
      #            buttonSubledgerdistribution.enabled(true);
      #            buttonSourceDocumentDistributionHeader.enabled(true);
      #        }
      #    }
      #}
    ENDSOURCE
    SOURCE #setVisible_IN
      #private void setVisible_IN()
      #{
      #    TaxParameters       taxParametersLoc = TaxParameters::find();
      #    boolean             isTaxParametersMarked   = TaxParameters::checkTaxParameters_IN();
      #
      #    exciseNone_IN.visible(true);
      #    exciseTraders_IN.visible(false);
      #    exciseManufacture_IN.visible(false);
      #    purchTable_W_ds.object(fieldNum(PurchTable_W, CustomsImportOrder_IN)).visible(taxParametersLoc.Customs_IN);
      #
      #    companyInformation.visible(isTaxParametersMarked);
      #    tabTaxInformation_IN.visible(isTaxParametersMarked || TaxWithholdParameters_IN::checkTaxParameters());
      #    purchLine_IN_ds.object(fieldNum(PurchLine_IN, AssessableValue_IN)).visible(isTaxParametersMarked);
      #    purchLine_IN_ds.object(fieldNum(PurchLine_IN, MaximumRetailPrice_IN)).visible(isTaxParametersMarked);
      #    excise_IN.visible(taxParametersLoc.Excise_IN);
      #    customs_IN.visible(taxParametersLoc.Customs_IN);
      #    exim_IN.visible(taxParametersLoc.Customs_IN && taxParametersLoc.EximIncentiveSchemes_IN);
      #    serviceTax_IN.visible(taxParametersLoc.ServiceTax_IN);
      #    indiaSalesTax.visible(taxParametersLoc.SalesTax_IN);
      #    indiaVAT.visible(taxParametersLoc.vat_in);
      #}
    ENDSOURCE
    SOURCE #setWidthHeight
      #void setWidthHeight()
      #{
      #    element.design(1).width(element.design(1).widthValue());
      #    element.design(1).height(element.design(1).heightValue());
      #}
    ENDSOURCE
    SOURCE #shouldHeaderChangeRequestsBeEnabled
      #protected boolean shouldHeaderChangeRequestsBeEnabled()
      #{
      #    return purchTable.ChangeRequestRequired;
      #}
    ENDSOURCE
    SOURCE #shouldHeaderInterCompanyBeEnabled
      #protected boolean shouldHeaderInterCompanyBeEnabled()
      #{
      #    return purchTable.isInterCompanyOrder();
      #}
    ENDSOURCE
    SOURCE #shouldLineInterCompanyBeEnabled
      #protected boolean shouldLineInterCompanyBeEnabled()
      #{
      #    return purchTable.isInterCompanyOrder() && !purchLine.isCategoryBased();
      #}
    ENDSOURCE
    SOURCE #showDeliveryAddressFiscalInformation_BR
      #/// <summary>
      #/// Shows or hides Address fiscal information depending on the Purchase type.
      #/// The fields should not be showed if the Purchase type is ReturnItem
      #/// </summary>
      #public void showDeliveryAddressFiscalInformation_BR()
      #{
      #    if(purchTable.PurchaseType == PurchaseType::ReturnItem)
      #    {
      #        headerDlvAddressFiscalInformation_BR.visible(true);
      #        lineDlvAddressFiscalInformation_BR.visible(true);
      #    }
      #    else
      #    {
      #        headerDlvAddressFiscalInformation_BR.visible(false);
      #        lineDlvAddressFiscalInformation_BR.visible(false);
      #    }
      #}
    ENDSOURCE
    SOURCE #showInactiveAddressBar
      #public void showInactiveAddressBar()
      #{
      #    LogisticsLocationEntity::showHideEffectiveAddressMessageBar(element, logisticsPostalAddressHeader, logisticsPostalAddressLine);
      #}
    ENDSOURCE
    SOURCE #task
      #public int task(int _taskId)
      #{
      #    #task
      #    int ret;
      #
      #    if (_taskId == #taskF5)
      #    {
      #        purchTableCaller.data(purchTable);
      #        isRefreshing = true;
      #    }
      #
      #    ret = super(_taskId);
      #
      #    return ret;
      #}
    ENDSOURCE
    SOURCE #tmsSetCarrierFieldsFromDlvMode
      #public void tmsSetCarrierFieldsFromDlvMode(DlvModeId   _dlvModeId)
      #{
      #    TMSCarrierService carrierService;
      #
      #    carrierService = TMSCarrierService::findByDlvModeId(_dlvModeId);
      #
      #    tmsPurchTable.CarrierCode           = carrierService.CarrierCode;
      #    tmsPurchTable.CarrierServiceCode    = carrierService.CarrierServiceCode;
      #    tmsPurchTable.ModeCode              = TMSCarrier::find(carrierService.CarrierCode).ModeCode;
      #
      #    tmsPurchTable_ds.refresh();
      #}
    ENDSOURCE
    SOURCE #tmsUpdatePurchTable
      #/// <summary>
      #/// Updates purchase order when transportation fields are updated
      #/// </summary>
      #public void tmsUpdatePurchTable()
      #{
      #    purchTable.DlvMode = TMSCarrierService::findDlvModeId(tmsPurchTable.CarrierCode, tmsPurchTable.CarrierServiceCode);
      #
      #    purchTable_ds.refresh();
      #}
    ENDSOURCE
    SOURCE #toggleWorkflow_ds
      #private void  toggleWorkflow_ds(Object  _formControl)
      #{
      #    Object  parentControl;
      #
      #    int     dataSourceId;
      #    int     oldWorkflow_ds;
      #
      #    // The reference fields does not point to a datasource in the design,
      #    // but the reference group (parent control) does
      #    parentControl = _formControl.parentControl();
      #    if (parentControl  &&  parentControl is FormReferenceGroupControl)
      #    {
      #        dataSourceId = parentControl.dataSource();
      #    }
      #    else
      #    {
      #        dataSourceId = _formControl.dataSource();
      #    }
      #
      #    oldWorkflow_ds = element.design().workflowDatasource();
      #
      #    // Return if the form datasource isn't changed or it is empty
      #    if (!dataSourceId || dataSourceId == oldWorkflow_ds)
      #    {
      #        return;
      #    }
      #
      #    // Distinguish between header and line-item workflow
      #    if (dataSourceId == purchLine_ds.id()
      #    ||  dataSourceId == purchLineForeignTradeCategory_ds.id()
      #    ||  dataSourceId == inventDim_ds.id()
      #    ||  dataSourceId == emsPurchOrderFlowRelation_ds.id()
      #    ||  dataSourceId == emsFlow_ds.id())
      #    {
      #        // Return if the workflow datasource isn't changed
      #        if (oldWorkflow_ds == purchLine_ds.id())
      #        {
      #            return;
      #        }
      #
      #        // Only enable "line-items" when the header already has been submitted
      #        if (!element.canSubmitToWorkflow())
      #        {
      #            element.design().workflowDatasource(purchLine_ds.id());
      #            element.design().workflowType(workFlowTypeStr(PurchLineTemplate));
      #
      #            element.updateWorkflowControls();
      #        }
      #    }
      #    else
      #    {
      #        // Return if the workflow datasource isn't changed
      #        if (oldWorkflow_ds == purchTable_ds.id())
      #        {
      #            return;
      #        }
      #
      #        element.design().workflowDatasource(purchTable_ds.id());
      #        element.design().workflowType(workFlowTypeStr(PurchTableTemplate));
      #
      #        element.updateWorkflowControls();
      #    }
      #}
    ENDSOURCE
    SOURCE #updateControlsForFrenchConfirmedPO
      #/// <summary>
      #/// Enables or disables specific controls for purchase orders that have been confirmed at some point in the past.
      #/// </summary>
      #/// <remarks>
      #/// This is only used for the French regulatory feature.
      #/// </remarks>
      #public void updateControlsForFrenchConfirmedPO()
      #{
      #    boolean canEnable;
      #
      #    if (PublicSectorUtils::isFrenchRegulatoryEnabled())
      #    {
      #        canEnable = purchTable.canModifyPurchaseOrder();
      #
      #        purchLine_ds.allowDelete(canEnable);
      #        purchLine_ds.allowCreate(canEnable);
      #
      #        // Header buttons
      #        buttonPurchCancel.enabled(canEnable);
      #        purchaseCalculate.enabled(canEnable);
      #        purchOrderMiscCharges.enabled(canEnable);
      #
      #        // Grid buttons
      #        lineStripNew.enabled(canEnable);
      #        buttonLineQuickQuote.enabled(canEnable);
      #        lineStripDelete.enabled(canEnable);
      #        buttonLineExpandBOM.enabled(canEnable);
      #        markupTrans_LinePurchTable.enabled(canEnable);
      #
      #        // Grid fields
      #        purchLine_PurchQtyGrid.allowEdit(canEnable);
      #        purchLine_PurchPriceGrid.allowEdit(canEnable);
      #        purchLine_LineDiscGrid.allowEdit(canEnable);
      #        purchLine_LinePercentGrid.allowEdit(canEnable);
      #        purchLine_LineAmountGrid.allowEdit(canEnable);
      #        purchLine_PurchUnitGrid.allowEdit(canEnable);
      #        purchCommitmentLineLookup_PSN.allowEdit(canEnable);
      #
      #        // Line details tab fields
      #        lineSalesTax_TaxItemGroup.allowEdit(canEnable);
      #        lineSalesTax_TaxGroup.allowEdit(canEnable);
      #        lineDisc.allowEdit(canEnable);
      #        linePercent.allowEdit(canEnable);
      #        multiLnDisc.allowEdit(canEnable);
      #        multiLnPercent.allowEdit(canEnable);
      #        purchLine_PriceUnit.allowEdit(canEnable);
      #        purchLine_PurchMarkup.allowEdit(canEnable);
      #        projectCostPrice_PurchQty.allowEdit(canEnable);
      #        projectCostPrice_PurchPrice.allowEdit(canEnable);
      #        projectCostPrice_LineAmount.allowEdit(canEnable);
      #        purchCommitmentLineLookup2_PSN.allowEdit(canEnable);
      #    }
      #}
    ENDSOURCE
    SOURCE #updateDesign
      #void updateDesign(InventDimFormDesignUpdate mode)
      #{
      #    InventMovement movement = InventMovement::construct(purchLine);
      #    Set            validInventDimDSset;
      #    InventDimControlIdCollection inventDimControlIdCollection;
      #    boolean emptyLine;
      #    // <GMY>
      #    boolean             isInvoiceTypeEditable_MY;
      #    // </GMY>
      #
      #    switch (mode)
      #    {
      #        case InventDimFormDesignUpdate::Init:
      #            if (!inventDimFormSetup)
      #            {
      #                validInventDimDSset = new Set(Types::String);
      #                validInventDimDSset.add(inventDim_ds.name());
      #                inventDimControlIdCollection = InventDimControlIdCollection::construct();
      #                inventDimControlIdCollection.add(storageDimensionsLine.id(), false);
      #                inventDimControlIdCollection.add(trackingDimesions.id(), false);
      #                inventDimControlIdCollection.add(productDimensions.id(), false);
      #                inventDimControlIdCollection.add(inventoryDimensionsGrid.id(), true);
      #                inventDimFormSetup = InventDimCtrl_Frm_Mov_OrderLine::newFromFormMovement(element, movement, validInventDimDSset
      #                , inventDimControlIdCollection
      #                );
      #
      #            }
      #        case InventDimFormDesignUpdate::Active,
      #             InventDimFormDesignUpdate::FieldChange:
      #            emptyLine = purchLine.ItemId == '' && purchLine.ProcurementCategory == 0;
      #            storageDimensionsLine.allowEdit(!emptyLine);
      #            trackingDimesions.allowEdit(!emptyLine);
      #            productDimensions.allowEdit(!emptyLine);
      #            inventoryDimensionsGrid.allowEdit(!emptyLine);
      #            if (!emptyLine)
      #            {//For performance reasons, only call the inventDimFormSetup if the order line has an item ID or Category ID.
      #                inventDimFormSetup.formActiveSetup(movement.inventDimGroupSetup(), movement);
      #                inventDimFormSetup.formSetControls(mode == InventDimFormDesignUpdate::Active);
      #            }
      #            break;
      #
      #        default : throw error(strFmt("@SYS54195",funcName()));
      #    }
      #
      #    // <GMY>
      #    if (isSelfBilldInvoiceEnabled_MY)
      #    {
      #        isInvoiceTypeEditable_MY = (purchTable.PurchStatus != PurchStatus::Invoiced && purchTable.PurchStatus != PurchStatus::Canceled);
      #        gstInvoice_MY_M_editInvoiceType_MY.allowEdit(isInvoiceTypeEditable_MY);
      #        purchTable_W_ds.object(fieldNum(PurchTable_W, TaxGSTImportDeclarationNo_MY)).allowEdit(isInvoiceTypeEditable_MY);
      #
      #        this.updateDesignForGSTApprovalNumber_MY();
      #    }
      #    // </GMY>
      #
      #    purchLine_DS.updateDesignForProject();
      #}
    ENDSOURCE
    SOURCE #updateDesign_IN
      #public void updateDesign_IN()
      #{
      #    if(!taxParameters)
      #    {
      #        taxParameters = TaxParameters::find();
      #    }
      #    if (taxParameters.ServiceTax_IN)
      #    {
      #        taxItemGroupHeadingRev = TaxItemGroupHeading::find(purchLine.TaxItemGroup);
      #    }
      #    if (purchTable_W.CustomsImportOrder_IN)
      #    {
      #        if (TaxParameters::find().ServiceTax_IN)
      #        {
      #            purchLine_IN_ds.object(fieldNum(PurchLine_IN, IsRecoverableServiceTax_IN)).visible(true);
      #        }
      #        else
      #        {
      #            purchLine_IN_ds.object(fieldNum(PurchLine_IN, IsRecoverableServiceTax_IN)).visible(false);
      #        }
      #
      #        purchLine_IN_AssessableValueAccountingCurrency.visible(true);
      #    }
      #    else
      #    {
      #        if (taxParameters.ServiceTax_IN)
      #        {
      #            if (taxItemGroupHeadingRev.ServiceTaxBasis_IN == ServiceTaxBasis_IN::CashBasis)
      #            {
      #                purchLine_IN_ds.object(fieldNum(PurchLine_IN, IsRecoverableServiceTax_IN)).visible(false);// Legacy Cash behaviour kept intact.
      #            }
      #            else if (taxItemGroupHeadingRev.ReverseChargePercentage_IN != 0) // POTBasis
      #            {
      #                purchLine_IN_ds.object(fieldNum(PurchLine_IN, IsRecoverableServiceTax_IN)).visible(true);
      #            }
      #        }
      #    }
      #}
    ENDSOURCE
    SOURCE #updateDesignForGSTApprovalNumber_MY
      #/// <summary>
      #/// Updates the design for GST approval number.
      #/// </summary>
      #// <GMY>
      #public void updateDesignForGSTApprovalNumber_MY()
      #{
      #    FormDataObject      formDateObj;
      #
      #    formDateObj = purchTable_W_ds.object(fieldNum(PurchTable_W, gstApprovalNumber_MY));
      #    if (purchTable_W.InvoiceType_MY == InvoiceType_MY::SelfBilled
      #        && purchTable.PurchStatus   != PurchStatus::Invoiced
      #        && purchTable.PurchStatus   != PurchStatus::Canceled)
      #    {
      #        formDateObj.allowEdit(true);
      #        formDateObj.mandatory(true);
      #    }
      #    else
      #    {
      #        formDateObj.allowEdit(false);
      #        formDateObj.mandatory(false);
      #    }
      #}
      #// <GMY>
    ENDSOURCE
    SOURCE #updateFormState
      #public void updateFormState(SourceDocumentLineRecId _sourceDocumentLineRecId)
      #{
      #    // Accounting distribution form has closed - update budget check result for changes from edit
      #    purchLine_ds.updateBudgetCheckResultDisplay();
      #}
    ENDSOURCE
    SOURCE #updateRFIDTagging
      #void  updateRFIDTagging()
      #{
      #    RFIDItemTaggingLevel    taggingLevel;
      #    boolean                 itemTagging;
      #    boolean                 caseTagging;
      #    boolean                 palletTagging;
      #
      #    if (inventDimFormSetup.parmDimParmEnabled().InventSerialIdFlag)
      #    {
      #        itemTagging = true;
      #        caseTagging = true;
      #    }
      #    else
      #    {
      #        itemTagging = false;
      #        caseTagging = false;
      #    }
      #
      #    if (inventDimFormSetup.parmDimParmEnabled().wmsPalletIdFlag
      #        &&  purchLine.inventTable().PalletTagging)
      #    {
      #        palletTagging = true;
      #    }
      #    else
      #    {
      #        palletTagging = false;
      #    }
      #
      #    if (itemTagging  ||  caseTagging)
      #    {
      #        taggingLevel = purchLine.inventTable().ItemTaggingLevel;
      #
      #        switch (taggingLevel)
      #        {
      #            case RFIDItemTaggingLevel::None :
      #                itemTagging = false;
      #                caseTagging = false;
      #                break;
      #
      #            case RFIDItemTaggingLevel::ItemLevel :
      #                caseTagging = false;
      #                break;
      #
      #            case RFIDItemTaggingLevel::CaseLevel :
      #                itemTagging = false;
      #                break;
      #        }
      #    }
      #
      #    purchLine_ds.object(fieldNum(PurchLine, ItemTagging)).allowEdit     ( itemTagging);
      #    purchLine_ds.object(fieldNum(PurchLine, ItemTagging)).skip          (!itemTagging);
      #    purchLine_ds.object(fieldNum(PurchLine, CaseTagging)).allowEdit     ( caseTagging);
      #    purchLine_ds.object(fieldNum(PurchLine, CaseTagging)).skip          (!caseTagging);
      #    purchLine_ds.object(fieldNum(PurchLine, PalletTagging)).allowEdit   ( palletTagging);
      #    purchLine_ds.object(fieldNum(PurchLine, PalletTagging)).skip        (!palletTagging);
      #}
    ENDSOURCE
    SOURCE #updateSourceRefControlsAfterLookup_MY
      #/// <summary>
      #///     Updates the controls used for selecting source invoice transaction.
      #/// </summary>
      #// <GMY>
      #public void updateSourceRefControlsAfterLookup_MY()
      #{
      #    VendInvoiceJour     vendInvoiceJourInstance;
      #    RecId               vendInvoiceJourRecId;
      #
      #    vendInvoiceJourRecId = vendInvoiceJourLookupController.parmVendInvoiceJourRecId();
      #    if (vendInvoiceJourRecId != 0)
      #    {
      #        vendInvoiceJourInstance = VendInvoiceJour::findRecId(vendInvoiceJourRecId);
      #        if(vendInvoiceJourInstance)
      #        {
      #            purchLine_W.RefInvoiceId_MY       = vendInvoiceJourInstance.InvoiceId;
      #            purchLine_W.RefInvoiceDate_MY     = vendInvoiceJourInstance.InvoiceDate;
      #        }
      #        vendInvoiceJourLookupController.parmVendInvoiceJourRecId(0);
      #    }
      #}
      #// </GMY>
    ENDSOURCE
  ENDMETHODS
  OBJECTBANK
    PROPERTIES
    ENDPROPERTIES
    
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #PurchTable
          Table               #PurchTable
          Index               #PurchIdx
          StartPosition       #Last
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
          DATAFIELD PurchId
            PROPERTIES
              AllowEdit           #No
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD OrderAccount
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    purchLine_ds.reread();
                #    purchLine_ds.refresh();
                #    purchTable_ds.rereadReferenceDataSources();
                #    if (isPurchTableEnabled_W)
                #    {
                #        purchTable_W_ds.refresh();
                #    }
                #    dimensionDefaultingControllerHeader.activated();
                #
                #    if (BrazilParameters::isEnabled())
                #    {
                #        purchTable.enableDataSourceFields_BR();
                #        purchTable_BR_ds.refresh();
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD Email
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    LogisticsElectronicAddressLookup lookup = LogisticsElectronicAddressLookup::newParameters(_formControl);
                #
                #    lookup.addParty(purchTable.contactPerson().Party);
                #    lookup.addParty(purchTable.vendTable_OrderAccount().Party);
                #
                #    lookup.parmMethodType(LogisticsElectronicAddressMethodType::Email);
                #    lookup.performFormLookup();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CurrencyCode
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    if (TaxParameters::isCustomsEnable_IN())
                #    {
                #        if (PurchTable::find(purchLine.PurchId).purchTable_W().CustomsImportOrder_IN == NoYes::Yes)
                #        {
                #            //When user changes the currency code. MRP defaulted from item is converted using Customs exchange rate for Export orders.
                #            purchLine_IN.MaximumRetailPrice_IN = Currency::customsCurAmount_IN(purchLine_IN.CustomsMaxRetailPrice_IN, purchTable.CurrencyCode, Direction_IN::Import, systemDateGet(), false);
                #        }
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD Payment
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    boolean allowEditEmplAccount_RU;
                #
                #    super();
                #
                #    if (advanceHoldersEnabled)
                #    {
                #        allowEditEmplAccount_RU = PaymTerm::isEmplAccountUsed_RU(purchTable.Payment);
                #        purchTable_W_ds.object(fieldNum(PurchTable_W, EmplAccount_RU)).allowEdit(allowEditEmplAccount_RU);
                #        purchTable_ds.object(fieldNum(PurchTable, CashDisc)).allowEdit(!allowEditEmplAccount_RU);
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CashDisc
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    CashDisc    cashDisc;
                #
                #    super();
                #
                #    cashDisc = CashDisc::find(purchTable.CashDisc);
                #    purchTable.CashDiscPercent = cashDisc.Percent;
                #
                #    purchTable.dataSource().refresh();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD VendGroup
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    dimensionDefaultingControllerHeader.activated();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD DlvMode
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    element.tmsSetCarrierFieldsFromDlvMode(purchTable.DlvMode);
                #
                #    element.enableTMSFields();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD PurchaseType
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #/// <summary>
                #/// Modifies the purchase lines when the purchase type is changed.
                #/// </summary>
                #/// <remarks>
                #/// This method calls the <c>modifyPurchaseType</c> method of the <c>PurchTableType</c> class to
                #/// so that the fixed asset information is cleared if necessary. The purchase line data source
                #/// is refreshed as the information may have been modified.
                #/// </remarks>
                #public void modified()
                #{
                #    super();
                #
                #    purchTableType = purchTable.type();
                #    purchTableType.modifyPurchaseType();
                #    element.configBankDocumentControls();
                #    purchLine_ds.refresh();
                #    element.enableAdvanceAction();
                #    if (BrazilParameters::isEnabled())
                #    {
                #        purchTable.enableDataSourceFields_BR();
                #        purchTable_ds.rereadReferenceDataSources();
                #        element.showDeliveryAddressFiscalInformation_BR();
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD URL
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    LogisticsElectronicAddressLookup lookup = LogisticsElectronicAddressLookup::newParameters(_formControl);
                #
                #    lookup.addParty(purchTable.contactPerson().Party);
                #    lookup.addParty(purchTable.vendTable_OrderAccount().Party);
                #
                #    lookup.parmMethodType(LogisticsElectronicAddressMethodType::URL);
                #    lookup.performFormLookup();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD PaymentSched
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #void modified()
                #{
                #    super();
                #
                #    if (purchTable.PaymentSched)
                #    {
                #        buttonPaymentSchedule.enabled(true);
                #    }
                #    else
                #    {
                #        buttonPaymentSchedule.enabled(false);
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventSiteId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    purchTable_ds.refresh();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ContactPersonId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #void  modified()
                #{
                #    super();
                #
                #    purchTable_ds.refresh();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventLocationId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    purchTable_ds.refresh();
                #}
              ENDSOURCE
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    if (purchTable.InventSiteId)
                #    {
                #        InventLocation::lookupBySiteIdAllTypes(_formControl, purchTable.InventSiteId);
                #    }
                #    else
                #    {
                #        super(_formControl, _filterStr);
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ProjId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    dimensionDefaultingControllerHeader.activated();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD VATNum
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    if (TaxVATNumTable::taxVATNumTableEnabled())
                #        TaxVATNumTable::jumpRefVATNum(purchTable, element);
                #    else
                #        super();
                #}
              ENDSOURCE
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    if (TaxVATNumTable::taxVATNumTableEnabled())
                #        TaxVATNumTable::lookupVATNum(vatNum,purchTable);
                #    else
                #        super(_formControl, _filterStr);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD FixedDueDate
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    PaymCalendarAdjustedDate        paymCalendarAdjustedDate;
                #
                #    super();
                #
                #    // perform the payment calendar work only for the required countries
                #    if (SysCountryRegionCode::isLegalEntityInConsolidatedCountryRegion())
                #    {
                #        paymCalendarAdjustedDate = PaymCalendarSourcePurchaseOrder::getAdjustedDate(purchTable);
                #
                #        purchTable.FixedDueDate = PaymCalendarProcessor::getAdjustedDueDate(purchTable.FixedDueDate, priorDueDate, paymCalendarAdjustedDate);
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ContractNum_SA
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(
                #    FormControl _formControl,
                #    str         _filterStr)
                #{
                #    VendContractZakat_SA::lookupContracts(_formControl, purchTable.OrderAccount);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          REFERENCEFIELD DeliveryPostalAddress
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    if (BrazilParameters::isEnabled())
                #    {
                #        purchTable_ds.cacheCalculateMethod(tableMethodStr(PurchTable, deliveryCNPJCPFNUM_BR));
                #        purchTable_ds.cacheCalculateMethod(tableMethodStr(PurchTable, deliveryIENum_BR));
                #    }
                #
                #    purchTable_ds.refresh();
                #
                #    element.showInactiveAddressBar();
                #}
              ENDSOURCE
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    Common ret;
                #    LogisticsLocationSelectionLookup_Purch lookup;
                #
                #    lookup = LogisticsLocationSelectionLookup_Purch::newParameters(_formReferenceControl);
                #
                #    lookup.parmInventSiteId(purchTable.InventSiteId);
                #    lookup.parmInventLocationId(purchTable.InventLocationId);
                #
                #    lookup.addRoleByType(LogisticsLocationRoleType::Delivery);
                #    lookup.parmReturnLocation(false);
                #
                #    ret = lookup.performFormLookup();
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          DATAFIELD BankDocumentType
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    element.configBankDocumentControls();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD AccountingDate
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret = true;
                #
                #    if(!purchTable.checkAccountingDateFiscalYear())
                #    {
                #        purchTable.AccountingDate = purchTable.orig().AccountingDate;
                #        ret = false;
                #        Box::warning("@SYS335906");
                #    }
                #    else
                #    {
                #        ret = super();
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    dimensionDefaultingControllerHeader.setNonActiveValueTolerance(ErrorTolerance::Warning, purchTable.AccountingDate);
                #    dimensionDefaultingControllerLine.setNonActiveValueTolerance(ErrorTolerance::Warning, purchTable.AccountingDate);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #reread_BR
          #public void reread_BR()
          #{
          #    purchTable_BR_ds.reread();
          #    purchTable_BR_ds.rereadReferenceDataSources();
          #    purchtable_BR_ds.refresh();
          #}
        ENDSOURCE
        SOURCE #enableJournalButtons
          #/// <summary>
          #///     Enables journal buttons.
          #/// </summary>
          #public void enableJournalButtons()
          #{
          #    #ISOCountryRegionCodes
          #
          #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoIN]))
          #    {
          #        purchTableForm.parmButtonUpdateInvoiceRegistration_IN(buttonUpdateInvoiceRegistration_IN);
          #        purchTableForm.parmButtonUpdateBillOfEntry_IN(buttonUpdateBillOfEntry_IN);
          #        purchTableForm.parmButtonJournalBillOfEntry_IN(buttonJournalBillOfEntry_IN);
          #    }
          #
          #    // Enable journal buttons
          #    purchTableForm.enableUpdateJournalButtons(purchTable,
          #                                              buttonUpdatePurchaseOrder,
          #                                              buttonUpdateReceiptsList,
          #                                              buttonUpdatePackingSlip,
          #                                              buttonUpdateInvoice,
          #                                              buttonProformaPurchaseOrder,
          #                                              buttonProformaReceiptsList,
          #                                              buttonProformaPackingSlip,
          #                                              buttonProformaInvoice
          #                                              ,buttonUpdateInvoice4Paym_RU,
          #                                              buttonUpdateFacture_RU,
          #                                              factureEditLinesVend_RU,
          #                                              buttonProformaInvoice4Paym_RU,
          #                                              buttonProformaFacture_RU,
          #                                              factureEditLinesVend_Proforma_RU
          #                                              , buttonConfirmationRequest,
          #                                              mcrButtonDeliverMenuItemButton,
          #                                              mcrButtonReleaseMenuItemButton,
          #                                              mcrButtonProformaDeliver,
          #                                              mcrButtonProformaRelease);
          #    // Re-enable journal buttons when multiple orders are selected.
          #    buttonConfirm.enabled(buttonUpdatePurchaseOrder.enabled());
          #}
        ENDSOURCE
        SOURCE #enableDistributionTemplate
          #/// <summary>
          #/// Enables the <c>AccountingDistributionTemplate</c> field based on the purchase order header state.
          #/// </summary>
          #public void enableDistributionTemplate()
          #{
          #    distributionTemplateHeader.allowEdit(purchTable.canApplyAllocationOrDistributionTemplate());
          #}
          #
        ENDSOURCE
        SOURCE #executeQuery
          #public void executeQuery()
          #{
          #    logisticsPostalAddressHeader_ds.validTimeStateUpdate(ValidTimeStateUpdate::Correction);
          #    logisticsPostalAddressHeader_ds.query().validTimeStateDateTimeRange(DateTimeUtil::minValue(), DateTimeUtil::maxValue());
          #    super();
          #
          #    if ((isCalledFromLP || isRefreshing)
          #        && purchTableCaller
          #        && purchTableCaller.PurchId != purchTable.PurchId)
          #    {
          #        purchTable_ds.findRecord(purchTableCaller);
          #        isRefreshing = false;
          #    }
          #}
        ENDSOURCE
        SOURCE #updateBudgetCheckResultDisplay
          #/// <summary>
          #/// Updates budget check result display cache.
          #/// </summary>
          #public void updateBudgetCheckResultDisplay()
          #{
          #    if (this.cacheCalculateMethod(tableMethodStr(PurchTable, displayBudgetCheckResult)))
          #    {
          #        purchTable_ds.refresh();
          #        // Must refresh form cache for ALL purchase order lines.
          #        purchLine_ds.research(true);
          #    }
          #}
        ENDSOURCE
        SOURCE #init
          #public void init()
          #{
          #    Query  query;
          #
          #    switch(element.args().dataset())
          #    {
          #        case tableNum(CostControlTransCommittedCost):
          #            purchTable_ds.autoQuery(false);
          #
          #            query   = new Query();
          #            queryBuildRangeProj = query.addDataSource(tableNum(PurchTable)).addRange(fieldNum(PurchTable, PurchId));
          #            purchTable_ds.query(query);
          #            break;
          #    }
          #
          #    super();
          #
          #    if ((TradeFormHelper::isCalledFromForm(element.args(), formStr(VendTable))
          #        || TradeFormHelper::isCalledFromForm(element.args(), formStr(VendTableListPage)))
          #        && element.args().record().TableId == tableNum(VendTable))
          #    {
          #        this.query().dataSourceTable(tableNum(PurchTable)).clearDynalinks();
          #    }
          #
          #    if(InventParameters::find().UseQualityManagement)
          #    {
          #        purchTable_ds.cacheAddMethod(tableMethodStr(PurchTable, qualityOrderStatusDisplay), false);
          #    }
          #    purchTable_ds.cacheAddMethod(tableMethodStr(PurchTable, displayBudgetCheckResult), false);
          #    purchTable_ds.cacheAddMethod(tableMethodStr(PurchTable, displayDocumentStatus));
          #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
          #    {
          #        purchTable_ds.cacheAddMethod(tableMethodStr(PurchTable, agreementDocumentTitle_RU), true);
          #    }
          #
          #    if (BrazilParameters::isEnabled())
          #    {
          #        purchTable_ds.cacheAddMethod(tableMethodStr(PurchTable, deliveryCNPJCPFNUM_BR));
          #        purchTable_ds.cacheAddMethod(tableMethodStr(PurchTable, deliveryIENum_BR));
          #    }
          #    purchTable_ds.cacheAddMethod(tableMethodStr(PurchTable, editReasonComment));
          #}
        ENDSOURCE
        SOURCE #validateWrite
          #public boolean validateWrite()
          #{
          #    boolean ret;
          #    List                    purchTable2LineUpdateFields;
          #    ListEnumerator          purchTable2LineUpdateFieldsEnumerator;
          #    PurchTable2LineField    purchTable2LineField;
          #
          #    ret = super();
          #
          #    copyTaxGroupToMarkupTrans = DialogButton::No;
          #    if (ret && purchTable.TaxGroup != purchTable.orig().TaxGroup)
          #    {
          #        copyTaxGroupToMarkupTrans   = MarkupTrans::promptCopyTaxGroupToMarkupTrans(purchTable.TableId, purchTable.RecId);
          #        ret                         = copyTaxGroupToMarkupTrans != DialogButton::Cancel;
          #    }
          #
          #    if (ret)
          #    {
          #        purchTable2LineUpdatePrompt = PurchTable2LineUpdatePrompt::newExecuteExtendedPrompt(purchTable, copyTaxGroupToMarkupTrans);
          #        // If the purchTable2LineUpdatePrompt object is null no fields are to be updated.
          #        if(purchTable2LineUpdatePrompt)
          #        {
          #            ret = purchTable2LineUpdatePrompt.parmExtendedPromptReturnValue();
          #        }
          #    }
          #
          #    if (isRU
          #        && ret
          #        && purchTable2LineUpdatePrompt)
          #    {
          #        purchTable2LineUpdateFields = List::create(purchTable2LineUpdatePrompt.packedSalesPurchTableToLineUpdateFields());
          #
          #        purchTable2LineUpdateFieldsEnumerator = purchTable2LineUpdateFields.getEnumerator();
          #
          #        while (purchTable2LineUpdateFieldsEnumerator.moveNext())
          #        {
          #            purchTable2LineField = purchTable2LineUpdateFieldsEnumerator.current();
          #            if (purchTable2LineField.parmFieldId()          == PurchTable::fieldIdToInternalFieldId_W(fieldNum(PurchTable_RU, InventProfileId_RU), tableNum(PurchTable_RU))
          #                && purchTable2LineField.parmUpdateLines()   == NoYes::No)
          #            {
          #                // must be checked for possible inconsistence if user did not select to propagate inventProfileId to the order lines
          #                // otherwise it will be checked on sales order validateWrite() method
          #                ret = purchTable.checkInventProfile_RU(true);
          #            }
          #        }
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #write
          #void  write()
          #{
          #    DialogButton            copyAddress     = DialogButton::No;
          #    boolean                 convertCurrency = false;
          #    boolean                 rollBackCurrencyChange;
          #    TradeCurencyConversion  tradeCurrencyConversion;
          #    LogisticsPostalAddressRecId originalDeliveryPostalAddress;
          #    boolean                     mustReread;
          #    TMSPurchTable           newTMSPurchTable;
          #
          #    if (purchTable.checkUpdate())
          #    {
          #        if (PurchLine::exist(purchTable.PurchId) || MarkupTrans::exist(purchTable.TableId, purchTable.RecId))
          #        {
          #            if (purchTable.CurrencyCode != purchTable.orig().CurrencyCode)
          #            {
          #                [convertCurrency, tradeCurrencyConversion] = PurchTable::promptConvertCurrencyCode(purchTable);
          #                rollBackCurrencyChange = !convertCurrency;
          #            }
          #        }
          #
          #        if (PurchLine::exist(purchTable.PurchId))
          #        {
          #            if (purchTable.DeliveryPostalAddress != purchTable.orig().DeliveryPostalAddress)
          #            {
          #                copyAddress = PurchTable::promptCopyDeliveryAddress();
          #                originalDeliveryPostalAddress = purchTable.orig().DeliveryPostalAddress;
          #            }
          #        }
          #
          #        ttsbegin;
          #
          #        if (convertCurrency)
          #        {
          #            if (isConfigurationkeyEnabled(configurationKeyNum(LedgerAdv2BudgetCtrl)))
          #            {
          #                purchTable.convertCurrencyCode(purchTable.CurrencyCode, tradeCurrencyConversion, purchTable.AccountingDate);
          #            }
          #            else
          #            {
          #                purchTable.convertCurrencyCode(purchTable.CurrencyCode, tradeCurrencyConversion);
          #            }
          #        }
          #        else
          #        {
          #            if (rollBackCurrencyChange)
          #            {
          #                // Cancel has been choosen in the dialogue:
          #                // Currency code should not be recalculated, in fact all changes in currency code should be
          #                // rolled back...
          #                purchTable.CurrencyCode = purchTable.orig().CurrencyCode;
          #            }
          #        }
          #
          #        dimensionDefaultingControllerHeader.writing();
          #
          #        if (TaxThaiGovCertificationFeatureChecker::isTaxBranchEnabled())
          #        {
          #            purchTable_W.TaxBranch = TaxBranchType::getTaxBranchRecIdByDefaultDimension(purchTable.DefaultDimension);
          #        }
          #
          #        if (copyTaxGroupToMarkupTrans == DialogButton::Yes || copyTaxGroupToMarkupTrans == DialogButton::YesToAll)
          #        {
          #            MarkupTrans::updateTaxGroup(purchTable.TableId, purchTable.RecId, purchTable.TaxGroup, purchTable.orig().TaxGroup, copyTaxGroupToMarkupTrans,
          #                purchTable.isInvoiceMatched());
          #            copyTaxGroupToMarkupTrans = DialogButton::No;
          #        }
          #
          #        super();
          #        if(SysExtensionSerializerExtensionMap::isExtensionEnabled(tableNum(PurchTable_Intrastat)))
          #        {
          #           purchtable_Intrastat.SysExtensionSerializerExtensionMap::insertAfterBaseTable(purchTable);
          #        }
          #        if (isPurchTableEnabled_W)
          #        {
          #            purchTable_W.SysExtensionSerializerExtensionMap::insertAfterBaseTable(purchTable);
          #        }
          #        if (isPurchTableEnabled_RU)
          #        {
          #            purchTable_RU.SysExtensionSerializerExtensionMap::insertAfterBaseTable(purchTable);
          #        }
          #        if (isPurchTableEnabled_BR)
          #        {
          #            purchTable_BR.SysExtensionSerializerExtensionMap::insertAfterBaseTable(purchTable);
          #        }
          #
          #        if (copyAddress != DialogButton::Cancel  &&  copyAddress != DialogButton::No)
          #        {
          #            purchTable.copyAddressToLine(copyAddress, originalDeliveryPostalAddress);
          #        }
          #
          #        if (purchTable2LineUpdatePrompt)
          #        {
          #            purchTable2LineUpdatePrompt.run();
          #            purchTable2LineUpdatePrompt = null;
          #            mustReread = true;
          #        }
          #
          #        if (!tmsPurchTable.isTmp()) // No need to query for TMSPurchTable if it is disabled
          #        {
          #            newTMSPurchTable = TMSPurchTable::find(purchTable.PurchId);
          #
          #            tmsPurchTable.data(newTMSPurchTable);
          #            tmsPurchTable.reread();
          #        }
          #
          #        ttscommit;
          #
          #        if (mustReread)
          #        {
          #            purchLine_ds.research();
          #        }
          #        if (BrazilParameters::isEnabled())
          #        {
          #            purchLine_ds.research(true);
          #        }
          #    }
          #    defaultPurchLine.clear();
          #    purchTable_ds.reread();
          #    purchTable_ds.refresh();
          #}
        ENDSOURCE
        SOURCE #delete
          #void  delete()
          #{
          #    if (purchTableType)
          #    {
          #        purchTableType.formMethodDataSourceDelete(element, purchTable_ds);
          #    }
          #
          #    super();
          #
          #    dimensionDefaultingControllerHeader.deleted();
          #}
        ENDSOURCE
        SOURCE #create
          #void  create(boolean  append = true)
          #{
          #    PurchTable      newPurchTable;
          #    TMSPurchTable   newTMSPurchTable;
          #    boolean         purchTableFormCreate;
          #    QueryBuildDataSource    purchTableDS;
          #
          #    element.editPurch(true);
          #
          #    if (wasCalledFromVendorSearch)
          #    {
          #        purchTableFormCreate = purchTableForm.createFromVendorSearch(vendAccountSearch);
          #    }
          #    else
          #    {
          #        purchTableFormCreate = purchTableForm.create();
          #    }
          #    if (purchTableFormCreate)
          #    {
          #        if(skipLinkActive)
          #        {
          #            skipLinkActive = false;
          #            if (!linkActiveHeaderExecuted)
          #            {
          #                this.linkActive();
          #            }
          #        }
          #        newPurchTable = purchTableForm.purchTable();
          #        if (newPurchTable.ProjId && element.args().dataset() == tableNum(ProjTable))
          #        {
          #            purchTableDS = purchTable_ds.queryRun().query().dataSourceTable(tableNum(PurchTable));
          #            purchTableDS.addRange(fieldNum(PurchTable, PurchId)).value(newPurchTable.PurchId);
          #        }
          #        defaultPurchLine.clear();
          #        element.setLineDefaults();
          #
          #        if (newPurchTable)
          #        {
          #            dimensionDefaultingControllerHeader.activated();
          #            if (purchTable.AccountingDate)
          #            {
          #                dimensionDefaultingControllerHeader.setNonActiveValueTolerance(ErrorTolerance::Warning, purchTable.AccountingDate);
          #            }
          #
          #            super(append);
          #            purchTable.data(newPurchTable);
          #            if (isPurchTableEnabled_W || isPurchTableEnabled_RU || isPurchTableEnabled_BR)
          #            {
          #                purchTable.SysExtensionSerializerMap::unpackAll();
          #            }
          #            purchTable_ds.rereadReferenceDataSources();
          #
          #            lineViewTab.setFocus();
          #
          #            if (!tmsPurchTable.isTmp()) // No need to query for TMSPurchTable if it is disabled
          #            {
          #                newTMSPurchTable = TMSPurchTable::find(purchTable.PurchId);
          #
          #                tmsPurchTable.data(newTMSPurchTable);
          #                tmsPurchTable.reread();
          #            }
          #        }
          #        else
          #        {
          #            element.editPurch(purchTableForm.editHeaderAllowed(), purchTableForm.deleteHeaderAllowed());
          #        }
          #    }
          #    else
          #    {
          #        if(TradeFormHelper::isCalledFromForm(element.args()))
          #        {
          #            element.close();
          #        }
          #        else
          #        {
          #            this.editPurch();
          #        }
          #    }
          #
          #    skipLinkActive = false;
          #}
        ENDSOURCE
        SOURCE #active
          #int  active()
          #{
          #    int                                 ret;
          #    PurchTotals                         purchTotals;
          #    boolean                             editHeaderAllowed;
          #    boolean                             deleteHeaderAllowed;
          #    boolean                             allowEditDeliveryPostalAddress;
          #
          #    purchTableForm.purchTable(purchTable);
          #
          #    editHeaderAllowed   = purchTableForm.editHeaderAllowed();
          #    deleteHeaderAllowed = purchTableForm.deleteHeaderAllowed();
          #
          #    element.editPurch(editHeaderAllowed, deleteHeaderAllowed);
          #
          #    ret = super();
          #
          #    dimensionDefaultingControllerHeader.activated();
          #
          #    if (purchTable.AccountingDate)
          #    {
          #        dimensionDefaultingControllerHeader.setNonActiveValueTolerance(ErrorTolerance::Warning, purchTable.AccountingDate);
          #    }
          #
          #    if (purchTable.RecId)
          #    {
          #        purchTable_ds.enableDistributionTemplate();
          #    }
          #
          #    interCompanyAllowIndirectCreationOrig.visible(purchTable.interCompanyAllowIndirectCreationOrig() ? true : false);
          #
          #    purchTableForm.setHeaderAccess();
          #    allowEditDeliveryPostalAddress = purchTable_ds.object(fieldNum(PurchTable, DeliveryPostalAddress)).allowEdit();
          #    logisticsLocationSelectHeader.enabled(allowEditDeliveryPostalAddress);
          #    dirPartyPostalAddressNewHeader.enabled(allowEditDeliveryPostalAddress);
          #
          #    if (isRU)
          #    {
          #        purchTable_ds.object(fieldNum(PurchTable, PostingProfile)).allowEdit(! purchTable_W.EmplAccount_RU);
          #    }
          #
          #    if (tmpPurchTableTaxTransForm && !tmpPurchTableTaxTransForm.closed())
          #    {
          #        purchTotals = PurchTotals::newPurchTable(purchTable);
          #        purchTotals.calc();
          #        tmpPurchTableTaxTransForm.pushTaxObject(purchTotals.tax());
          #    }
          #    // <GIN>
          #    if (TaxWithholdParameters_IN::checkTaxParameters())
          #    {
          #        if ( tmpPurchTableTaxWithholdTransForm && !tmpPurchTableTaxWithholdTransForm.closed())
          #        {
          #            purchTotals = PurchTotals::newPurchTable(purchTable);
          #            purchTotals.calc();
          #            tmpPurchTableTaxWithholdTransForm.pushTaxObject(purchTotals.taxWithhold_IN());
          #        }
          #    }
          #    if (TaxParameters::checkTaxParameters_IN())
          #    {
          #        if (ExciseRecordTypeTable_IN::existForceBatchValidation(ExciseRecordType_IN::RG23D)
          #            && (purchTable_W.ExciseVendorType_IN == ExciseVendorType_IN::FirstStageDealer
          #                || purchTable_W.ExciseVendorType_IN == ExciseVendorType_IN::SecondStageDealer))
          #        {
          #            ExciseManufacturerImporterInvDetails_IN.enabled(true);
          #        }
          #        else
          #        {
          #            ExciseManufacturerImporterInvDetails_IN.enabled(false);
          #        }
          #    }
          #    // </GIN>
          #
          #    element.interCompanyRefreshCache();
          #
          #    if (isRU)
          #    {
          #        element.enabledVATTaxAgent_RU();
          #    }
          #
          #    purchTable_ds.object(fieldNum(PurchTable,ProjId)).allowEdit(purchTable.ProjId ? true : false);
          #    if (purchTable.ProjId && !purchTable.isProjectSalesItemReqPO())
          #    {
          #        headerInquiry_CostControlCommittedCost.enabled(true);
          #
          #        if (isConfigurationkeyEnabled(configurationKeyNum(PublicSector)))
          #        {
          #            if ((purchTable.PurchStatus == PurchStatus::Received) ||
          #                (purchTable.PurchStatus == PurchStatus::Invoiced))
          #            {
          #                purchTable_ds.object(fieldNum(PurchTable,ProjId)).allowEdit(false);
          #            }
          #            else
          #            {
          #                purchTable_ds.object(fieldNum(PurchTable,ProjId)).allowEdit(true);
          #            }
          #        }
          #    }
          #    else
          #    {
          #        headerInquiry_CostControlCommittedCost.enabled(false);
          #    }
          #
          #    element.configBankDocumentControls();
          #    element.setTitleText();
          #    element.showInactiveAddressBar();
          #
          #    if (zakatParameterEnabled)
          #    {
          #        element.enableContractNumber_SA();
          #    }
          #
          #    buttonSourceDocumentDistributionHeader.enabled(purchTable.SourceDocumentLine ? true : false);
          #
          #    element.updateControlsForFrenchConfirmedPO();
          #    if (isConfigurationkeyEnabled(configurationKeyNum(Retail)))
          #    {
          #        retailAddItemMenuItem.enabled(editPurchOrder.enabled()
          #            && !purchTable.mcrDropShipment);
          #
          #        retailSumLines_ds.executeQuery();
          #
          #        if (rboItemPackage.isActivePage() && treeView.value())  //Only fills the package tree when package tab is chosen and user has selected tree view
          #            element.fillPackageTree();
          #
          #    }
          #
          #    if (BrazilParameters::isEnabled())
          #    {
          #        purchTableForm.activate_BR();
          #        element.showDeliveryAddressFiscalInformation_BR();
          #    }
          #
          #    if (TaxParameters::isCustomsEnable_IN())
          #    {
          #        customsImportAssessableValue_IN.enabled(purchTable_W.CustomsImportOrder_IN == NoYes::Yes && TaxParameters::find().Customs_IN == NoYes::Yes);
          #        purchLine_CustomsMaxRetailPrice_IN.visible(PurchTable::find(purchTable.PurchId).purchTable_W().CustomsImportOrder_IN == NoYes::Yes && TaxParameters::find().Customs_IN == NoYes::Yes);
          #        purchLine_MaximumRetailPrice_IN.enabled(PurchTable::find(purchLine.PurchId).purchTable_W().CustomsImportOrder_IN == NoYes::No);
          #    }
          #    if (TaxWithholdParameters_IN::checkTaxParameters())
          #    {
          #        element.setTaxWithholdEnabled_IN();
          #    }
          #
          #    purchTable_ds.enableJournalButtons();
          #
          #    element.enableTMSFields();
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #linkActive
          #void linkActive()
          #{
          #    ProjTable                       projTableLink;
          #    ProjTable                       projTableLinkQuery;
          #    ProjInvoiceTable                projInvoiceTableLink;
          #    QueryBuildRange                 projIdPurchTable;
          #    ProjWIPTable                    projWIPTable;
          #    CostControlTransCommittedCost   costControlTransCommittedCost;
          #    PurchLine                       purchLineLink;
          #    QueryBuildDataSource            purchTableDS;
          #    QueryBuildDataSource            queryBuildDataSource;
          #    InterCompanyPurchSalesReference interCompanyPurchReference;
          #
          #    if (skipLinkActive)
          #    {
          #        return;
          #    }
          #
          #    // Initialize QueryBuildDataSource as table PurchTable.
          #    purchTableDS = purchTable_ds.query().dataSourceTable(tableNum(PurchTable));
          #
          #    switch(element.args().dataset())
          #    {
          #        case tableNum(InterCompanyPurchSalesReference):
          #            // Clear dynalinks, since multiple order can be shown
          #            purchTableDS.clearDynalinks();
          #            // Show all orders referenced from the original order
          #            interCompanyPurchReference  = element.args().record() as InterCompanyPurchSalesReference;
          #            queryBuildDataSource        = purchTableDS.addDataSource(tableNum(InterCompanyPurchSalesReference));
          #            queryBuildDataSource.relations(true);
          #            queryBuildDataSource.joinMode(JoinMode::ExistsJoin);
          #            queryBuildDataSource.addRange(fieldNum(InterCompanyPurchSalesReference, SalesId)).value(interCompanyPurchReference.SalesId);
          #            break;
          #
          #        case tableNum(CostControlTransCommittedCost):
          #            costControlTransCommittedCost = element.args().record();
          #            queryBuildRangeProj.value(queryValue(costControlTransCommittedCost.RefId));
          #            break;
          #
          #
          #        case tableNum(ProjTable):
          #            // Clear any range on field ProjId of table PurchTable
          #            projIdPurchTable    = purchTableDS.findRange(fieldNum(PurchTable,ProjId));
          #            while (projIdPurchTable)
          #            {
          #                purchTableDS.clearRange(fieldNum(PurchTable,ProjId));
          #                projIdPurchTable  = purchTableDS.findRange(fieldNum(PurchTable,ProjId));
          #            }
          #
          #            projTableLink = element.args().record();
          #
          #            // Find all records in PurchLine that matches the Project Id.
          #            while select PurchId from purchLineLink group by PurchId
          #                where purchLineLink.ProjId  == projTableLink.ProjId
          #                  && !purchLineLink.IsDeleted
          #            {
          #                purchTableDS.addRange(fieldNum(PurchTable,PurchId)).value(purchLineLink.PurchId);
          #            }
          #
          #            // Find all records in PurchLine that matches the sub-projects of the Project Id.
          #            while select ProjId from projTableLinkQuery
          #                where projTableLinkQuery.ParentId == projTableLink.ProjId
          #                join PurchId from purchLineLink group by PurchId
          #                    where purchLineLink.ProjId == projTableLinkQuery.ProjId
          #                        && !purchLineLink.IsDeleted
          #            {
          #                purchTableDS.addRange(fieldNum(PurchTable,PurchId)).value(purchLineLink.PurchId);
          #            }
          #
          #            // Clear the dynalinks to remove the dynalink range by Project Id in PurchTable.
          #            if (purchTableDS.findRange(fieldNum(PurchTable,PurchId)))
          #            {
          #                purchTableDS.clearDynalinks();
          #            }
          #
          #            break;
          #
          #        case tableNum(ProjInvoiceTable):
          #            // Clear any range on field ProjId of table PurchTable
          #            projIdPurchTable    = purchTableDS.findRange(fieldNum(PurchTable,ProjId));
          #            while (projIdPurchTable)
          #            {
          #                purchTableDS.clearRange(fieldNum(PurchTable,ProjId));
          #                projIdPurchTable  = purchTableDS.findRange(fieldNum(PurchTable,ProjId));
          #            }
          #
          #            projInvoiceTableLink   = element.args().record();
          #
          #            // Find all records in PurchLine that matches the Project Ids related to a Project Contract.
          #            while select ProjId from projTableLink
          #                where projTableLink.ProjInvoiceProjId   == projInvoiceTableLink.ProjInvoiceProjId
          #                join PurchId from purchLineLink
          #                    where purchLineLink.ProjId == projTableLink.ProjId
          #                      && !purchLineLink.IsDeleted
          #            {
          #                purchTableDS.addRange(fieldNum(PurchTable,PurchId)).value(purchLineLink.PurchId);
          #            }
          #
          #            // If no matching records foung in PurchLine, look for records in PurchTable.
          #            if (!purchTableDS.findRange(fieldNum(PurchTable, PurchId)))
          #            {
          #                while select ProjId from projTableLink
          #                    where projTableLink.ProjInvoiceProjId   == projInvoiceTableLink.ProjInvoiceProjId
          #                {
          #                    purchTable_ds.query().dataSourceTable(tableNum(PurchTable)).addRange(fieldNum(PurchTable,ProjId)).value(projTableLink.ProjId);
          #                }
          #            }
          #            break;
          #
          #        case tableNum(ProjWIPTable)     :
          #            // Clear any range on field ProjId of table PurchTable
          #            projIdPurchTable    = purchTableDS.findRange(fieldNum(PurchTable,ProjId));
          #            while (projIdPurchTable)
          #            {
          #                purchTableDS.clearRange(fieldNum(PurchTable,ProjId));
          #                projIdPurchTable  = purchTableDS.findRange(fieldNum(PurchTable,ProjId));
          #            }
          #
          #            projWIPTable   =   element.args().record();
          #
          #            // Find all records in PurchLine that matches the Project Ids related to an estimate project.
          #            while select ProjId from projTableLink
          #                where projTableLink.wipProject  == projWIPTable.ProjId
          #                join PurchId from purchLineLink
          #                    where purchLineLink.ProjId == projTableLink.ProjId
          #                      && !purchLineLink.IsDeleted
          #            {
          #                purchTableDS.addRange(fieldNum(PurchTable,PurchId)).value(purchLineLink.PurchId);
          #            }
          #
          #            // If no matching records foung in PurchLine, look for records in PurchTable.
          #            if (!purchTableDS.findRange(fieldNum(PurchTable, PurchId)))
          #            {
          #                while select ProjId from projTableLink
          #                    where projTableLink.wipProject  == projWIPTable.ProjId
          #                {
          #                    purchTable_ds.query().dataSourceTable(tableNum(PurchTable)).addRange(fieldNum(PurchTable,ProjId)).value(projTableLink.ProjId);
          #
          #                }
          #            }
          #            break;
          #    }
          #
          #    if (purchTableForm.linkActive())
          #    {
          #        purchTableForm.purchTable(element.args().record());
          #        purchTable_ds.query(purchTableForm.queryPurchTable(purchTable_ds.query()));
          #    }
          #
          #    if (purchTableType)
          #    {
          #        purchTableType.formMethodDataSourceLinkActive(element, purchTable_ds);
          #    }
          #
          #    super();
          #    linkActiveHeaderExecuted = true;
          #}
        ENDSOURCE
        SOURCE #editPurch
          #void  editPurch()
          #{
          #    purchTableForm.purchTable(purchTable);
          #
          #    element.editPurch(purchTableForm.editHeaderAllowed(), purchTableForm.deleteHeaderAllowed());
          #
          #    if (isRU)
          #    {
          #        element.enableInvoice4PaymButtons();
          #    }
          #}
        ENDSOURCE
        SOURCE #editHeader
          #void editHeader()
          #{
          #    this.editPurch();
          #}
        ENDSOURCE
        SOURCE #reReadLines
          #void  reReadLines()
          #{
          #    purchLine_ds.executeQuery();
          #    this.editPurch();
          #}
        ENDSOURCE
        SOURCE #leave
          #public boolean leave()
          #{
          #    // PBA begin
          #    if( ! purchLine.PBAItemLine::checkMandatory() )
          #    {
          #        return false;
          #    }
          #    // PBA end
          #
          #    return super();
          #}
        ENDSOURCE
        SOURCE #setTouched
          #/// <summary>
          #/// Reset some informtaion when the current record is updated.
          #/// </summary>
          #void setTouched()
          #{
          #    purchIdTouched = purchTable.PurchId;
          #}
        ENDSOURCE
        SOURCE #reReadPackages
          #/// <summary>
          #/// Re-Read Packages
          #/// </summary>
          #void  reReadPackages()
          #{
          #    retailPackagePurch_ds.executeQuery();
          #}
        ENDSOURCE
        SOURCE #onSummaryRecordsInvalid
          #/// <summary>
          #///     Refreshes the summary factboxes to show updated record
          #/// </summary>
          #/// <param name="_tableId">
          #///     Table id of the table whose record became invalid
          #/// </param>
          #public void onSummaryRecordsInvalid(TableId _tableId)
          #{
          #    PartList                partList;
          #    FormRun                 formPart;
          #    str                     formName;
          #    int                     counter;
          #    PurchTotalsSummary      purchTotalsSummary;
          #    PurchEncumbranceSummary purchEncumbranceSummary;
          #
          #    if (purchParameters.AutomaticFactBoxUpdateOnPO_PSN && isConfigurationkeyEnabled(configurationKeyNum(PublicSector)))
          #    {
          #        switch(_tableId)
          #        {
          #            case tableNum(PurchTotalsSummary):
          #                purchTotalsSummary = PurchTotalsSummary::findByPurchId(purchTable.PurchId);
          #                formName = formStr(PurchTotalsSummaryPart);
          #                break;
          #
          #            case tableNum(PurchEncumbranceSummary):
          #                purchEncumbranceSummary = PurchEncumbranceSummary::findByPurchId(purchTable.PurchId);
          #                formName = formStr(PurchEncumbranceSummaryPart);
          #                break;
          #        }
          #
          #        if ((purchTotalsSummary && purchTotalsSummary.IsValid) || (purchEncumbranceSummary && !purchEncumbranceSummary.IsValid))
          #        {
          #            partList = new PartList(element);
          #            for(counter = 1; counter <= partList.partCount(); counter++)
          #            {
          #                if(partList.getPartById(counter).name() == formName)
          #                {
          #                    formPart = partList.getPartById(counter);
          #                    formPart.dataSource().reread();
          #                    formPart.dataSource().refresh();
          #                    break;
          #                }
          #            }
          #        }
          #    }
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #PurchLine
          Table               #PurchLine
          Index               #PurchLineIdx
          JoinSource          #PurchTable
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
          DATAFIELD ItemId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    InventLookup lookup;
                #
                #    lookup = new InventLookup(_formControl, new Query(), formStr(InventItemIdLookupPurchase));
                #    lookup.run();
                #}
              ENDSOURCE
              SOURCE #modified
                #void  modified()
                #{
                #    ItemId                  itemId;
                #    LedgerDimensionAccount  ledgerDimension;
                #    RefRecId                sourceDocumentLine;
                #    InventTable             inventTableLoc;
                #
                #    super();
                #
                #    itemId              = purchLine.ItemId;
                #    ledgerDimension     = purchLine.LedgerDimension;
                #    sourceDocumentLine  = purchLine.SourceDocumentLine;
                #
                #    purchTableForm.resetPurchLine(purchLine);
                #
                #    purchLine.ItemId    = itemId;
                #    purchLine.LedgerDimension = ledgerDimension;
                #    purchLine.SourceDocumentLine = sourceDocumentLine;
                #
                #    purchLine_ds.itemIdModified();
                #
                #    element.enableLinePBAActions();
                #
                #    purchLine_ds.cacheCalculateMethod(tableMethodStr(PurchLine, itemName));
                #    purchLine_ds.enableDistributionTemplate();
                #
                #    element.enableProjSalesPrice();
                #
                #    element.setEditCommitmentLineAllowed(purchLine.ItemId || purchLine.ProcurementCategory);
                #
                #    if (TaxParameters::checkTaxParameters_IN())
                #    {
                #        inventTableLoc                         = InventTable::find(purchLine.ItemId);
                #        purchLine_IN.ExciseTariffCodes_IN      = inventTableLoc.ExciseTariffCodes_IN;
                #        purchLine_IN.CustomsTariffCodeTable_IN = inventTableLoc.CustomsImportTariffCodeTable_IN;
                #        purchLine_IN.ServiceCodeTable_IN       = inventTableLoc.ServiceCodeTable_IN;
                #
                #        if (PurchTable::find(purchLine.PurchId).purchTable_W().CustomsImportOrder_IN == NoYes::Yes)
                #        {
                #            //MRP defaulted from item is converted using Customs exchange rate for Import orders.
                #            purchLine_IN.MaximumRetailPrice_IN = Currency::customsCurAmount_IN(purchLine_IN.CustomsMaxRetailPrice_IN, purchTable.CurrencyCode, Direction_IN::Import, systemDateGet(), false);
                #        }
                #        purchLine_IN_DS.enableExciseFields_IN();
                #    }
                #
                #    if (TaxParameters::checkTaxParameters_IN() || TaxWithholdParameters_IN::checkTaxParameters())
                #    {
                #        purchLine_IN.SalesPurchJournalLineExtension_IN::initFromPrimaryTable(purchLine, true);
                #        taxInformation_IN_DS.linkActive();
                #        purchLine_IN_DS.refresh();
                #        purchLine_ds.rereadReferenceDataSources();
                #    }
                #
                #    if (BrazilParameters::isEnabled())
                #    {
                #        if (purchLine.inventTable().ItemType != ItemType::Service)
                #        {
                #            purchLine.LedgerDimension = SalesPurchOperationType_BR::find(purchTable_BR.SalesPurchOperationType_BR).LedgerDimension;
                #        }
                #
                #        purchLine.setCFOP_BR();
                #
                #        element.enableServiceFields_BR();
                #    }
                #}
                #
                #
                #
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD Name
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    // Do not default Name from category when modified.
                #    keepName = true;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD TaxGroup
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    if (isRU)
                #    {
                #        inventDim_ds.setRecord(purchLine.inventDimProfileRAsset_RU(inventDim));
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD PriceUnit
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #void  modified()
                #{
                #    super();
                #
                #    if (isRU)
                #    {
                #        inventDim_ds.setRecord(purchLine.inventDimProfileRAsset_RU(inventDim));
                #    }
                #
                #    purchLine_ds.refresh();
                #
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD PurchPrice
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #void  modified()
                #{
                #    super();
                #
                #    if (isRU)
                #    {
                #        inventDim_ds.setRecord(purchLine.inventDimProfileRAsset_RU(inventDim));
                #    }
                #
                #    purchLine_ds.refresh();
                #
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD LinePercent
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    if (isRU)
                #    {
                #        inventDim_ds.setRecord(purchLine.inventDimProfileRAsset_RU(inventDim));
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD LineDisc
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    if (isRU)
                #    {
                #        inventDim_ds.setRecord(purchLine.inventDimProfileRAsset_RU(inventDim));
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD LineAmount
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #void modified()
                #{
                #    super();
                #
                #    if (isRU)
                #    {
                #        inventDim_ds.setRecord(purchLine.inventDimProfileRAsset_RU(inventDim));
                #    }
                #
                #    purchLine_ds.active();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD PurchUnit
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #void  modified()
                #{
                #    super();
                #
                #    PurchLine::modifyPurchQty(purchLine, inventDim, !purchLine.MatchingAgreementLine);
                #    interCompanyIsPriceDiscSearchNeeded = purchLine.RecId;
                #
                #    purchLine_ds.refresh();
                #    // <GIN>
                #    if (isPurchLine_INEnabled)
                #    {
                #        purchLine_IN_ds.refresh();
                #    }
                #    // </GIN>
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD VendAccount
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    if (isConfigurationkeyEnabled(configurationKeyNum(PublicSector)))
                #    {
                #        purchLine_ds.refresh();
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD PurchQty
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #void  modified()
                #{
                #    TaxParameters   taxParametersLoc = TaxParameters::find();
                #    boolean         isCustomsEnabled = TaxParameters::isCustomsEnable_IN();
                #    boolean         isExciseEnabled  = TaxParameters::isExciseEnable_IN();
                #    ;
                #    super();
                #
                #    purchLine.purchQtyModifiedInteraction(inventDim);
                #
                #    purchLine.InventDimId = InventDim::findOrCreate(inventDim).InventDimId;
                #    purchLine.modifyWMSLocation(inventDim, false);
                #
                #    interCompanyIsPriceDiscSearchNeeded = purchLine.RecId;
                #
                #    element.checkCreditNoteLine();
                #
                #    if (isCustomsEnabled || isExciseEnabled)
                #    {
                #        if (taxParametersLoc.Excise_IN)
                #        {
                #            if (purchLine.PurchQty >= 0)
                #            {
                #                purchLine_IN.cenvatCreditAvailed_IN = NoYes::No;
                #            }
                #        }
                #        element.enableFieldsActive_IN();
                #
                #        purchLine_IN_DS.enableExciseFields_IN();
                #
                #        if (TaxParameters::find().EximIncentiveSchemes_IN
                #            && purchLine.PurchQty < 0)
                #        {
                #            eximPurchLine_IN.EximPorts                  = 0;
                #            eximPurchLine_IN.EximIncentiveSchemeGroup   = 0;
                #            eximPurchLine_IN.EximProductGroupTable      = 0;
                #            eximPurchLine_IN.ApplyDEPB            = NoYes::No;
                #            eximPurchLine_IN_ds.refresh();
                #        }
                #
                #        element.setEximFieldsAccess_IN();
                #    }
                #
                #    // <PubSect>
                #    if (PublicSectorUtils::isBudgetReservationEnabled() && purchLine.PurchQty < 0)
                #    {
                #        purchTableForm.enableBudgetReservationFields(purchLine);
                #    }
                #    // </PubSect>
                #
                #    purchLine_ds.refresh();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD PurchMarkup
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #void modified()
                #{
                #    super();
                #
                #    purchLine_ds.refresh();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD MultiLnDisc
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    if (isRU)
                #    {
                #        inventDim_ds.setRecord(purchLine.inventDimProfileRAsset_RU(inventDim));
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD MultiLnPercent
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    if (isRU)
                #    {
                #        inventDim_ds.setRecord(purchLine.inventDimProfileRAsset_RU(inventDim));
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD TaxItemGroup
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    if (isRU)
                #    {
                #        inventDim_ds.setRecord(purchLine.inventDimProfileRAsset_RU(inventDim));
                #    }
                #    if(TaxItemGroupHeading::find(purchLine.TaxItemGroup).ReverseChargePercentage_IN)
                #    {
                #        purchLine_ds.object(fieldNum(PurchLine_IN, IsRecoverableServiceTax_IN)).visible(true);
                #    }
                #
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD Tax1099Amount
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    if (isConfigurationkeyEnabled(configurationKeyNum(PublicSector)) && ret && purchLine.Tax1099Amount == 0.0 && tax1099BoxDetail.Tax1099PropertyOrServices == NoYes::No)
                #    {
                #        ret = checkFailed(strFmt("@SPS1165","@SYS23907", "@SPS1100"));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ProjTransId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    ProjItemTrans::jumpRefTransId(purchLine, element);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ReturnActionId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #void  modified()
                #{
                #    super();
                #    purchLine.returnActionChanged(inventDim);
                #    purchLine_ds.refresh();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ProjCategoryId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    purchLine_DS.updateDesignForProject();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ProjId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    if (ProjInvoiceTable::isSalesCurrencyLocked(ProjTable::find(purchLine.ProjId).ProjInvoiceProjId))
                #    {
                #        purchLine_ds.object(fieldNum(PurchLine, ProjSalesCurrencyId)).allowEdit(false);
                #        purchLine_ds.object(fieldNum(PurchLine, ProjSalesCurrencyId)).skip(true);
                #    }
                #    else
                #    {
                #        purchLine_ds.object(fieldNum(PurchLine, ProjSalesCurrencyId)).allowEdit(!purchLine.isInvoiceMatched());
                #        purchLine_ds.object(fieldNum(PurchLine, ProjSalesCurrencyId)).skip(purchLine.isInvoiceMatched());
                #    }
                #
                #    purchLine_ds.enableDistributionTemplate();
                #
                #    element.enableLedgerDimensionDefaultAccount();
                #
                #    dimensionDefaultingControllerLine.activated();
                #}
                #
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD AssetId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #/// <summary>
                #/// Modifies the <c>AssetId</c> field value on the <c>PurchLine</c> table buffer.
                #/// </summary>
                #/// <remarks>
                #/// This method calls the
                #/// <c>setAllowEditAssetFields</c> method of the <c>purchTableForm</c> class to correctly
                #/// set the <c>allowEdit</c> property of the fixed asset fields.
                #/// </remarks>
                #public void modified()
                #{
                #    super();
                #
                #    purchLine_ds.refresh();
                #
                #    purchLine.setDepreciationStartDate();
                #    element.enableDepreciationStartDate();
                #
                #    purchTableForm.setAllowEditAssetFields(purchTable, purchLine, purchLine_ds);
                #    if (AssetDocumentUtility_JP::isAssetDocumentEnabled())
                #    {
                #        purchTableForm.setAllowVisibleReductionEntryFields_JP(purchTable, purchLine, reductionEntry_JP);
                #    }
                #
                #    purchline_ds.enableDistributionTemplate();
                #
                #    element.enableLedgerDimensionDefaultAccount();
                #
                #    dimensionDefaultingControllerLine.activated();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD AssetTransTypePurch
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    element.enableDepreciationStartDate();
                #}
                #
                #
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD AssetBookId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    if (AssetDocumentUtility_JP::isAssetDocumentEnabled())
                #    {
                #        purchTableForm.setAllowVisibleReductionEntryFields_JP(purchTable, purchLine, reductionEntry_JP);
                #    }
                #
                #    purchLine.setDepreciationStartDate();
                #    element.enableDepreciationStartDate();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ItemTagging
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    element.updateRFIDTagging();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CaseTagging
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    element.updateRFIDTagging();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ActivityNumber
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    HierarchyTreeTable::lookupHierarchyTree(_formControl, ProjTable::find(purchLine.ProjId));
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CreateFixedAsset
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #/// <summary>
                #/// Modifies the <c>CreateFixedAssetField</c> field value on the <c>PurchLine</c> table buffer.
                #/// </summary>
                #/// <remarks>
                #/// This method broadcasts the change in value of the <c>CreateFixedAssetField</c> field by
                #/// calling <c>createFixedAssetModified</c> on the data source. Then it calls the
                #/// <c>setAllowEditAssetFields</c> method of the <c>purchTableForm</c> class to correctly
                #/// set the <c>allowEdit</c> property of the fixed asset fields.
                #/// </remarks>
                #public void modified()
                #{
                #    super();
                #
                #    purchLine_ds.createFixedAssetModified();
                #    purchTableForm.setAllowEditAssetFields(purchTable, purchLine, purchLine_ds);
                #    if (AssetDocumentUtility_JP::isAssetDocumentEnabled())
                #    {
                #        purchTableForm.setAllowVisibleReductionEntryFields_JP(purchTable, purchLine, reductionEntry_JP);
                #    }
                #    purchLine_ds.enableDistributionTemplate();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD AssetGroup
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    element.enableLedgerDimensionDefaultAccount();
                #
                #    dimensionDefaultingControllerLine.activated();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          REFERENCEFIELD ProcurementCategory
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #resolveReference
                #public Common resolveReference(FormReferenceControl _formReferenceControl)
                #{
                #    return EcoResCategory::resolveCategoryHierarchyRole(
                #        _formReferenceControl,
                #        EcoResCategoryNamedHierarchyRole::Procurement);
                #}
              ENDSOURCE
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    if (isConfigurationkeyEnabled(configurationKeyNum(PublicSector)) && purchTable.MatchingAgreement)
                #    {
                #        return EcoResCategory::lookupCategoryHierarchyRole(
                #            _formReferenceControl,
                #            EcoResCategoryNamedHierarchyRole::Procurement,
                #            false, true, true, null, 0, 0, 0, purchTable.MatchingAgreement);
                #    }
                #    else
                #    {
                #        return EcoResCategory::lookupCategoryHierarchyRole(
                #            _formReferenceControl,
                #            EcoResCategoryNamedHierarchyRole::Procurement);
                #    }
                #}
              ENDSOURCE
              SOURCE #modified
                #public void modified()
                #{
                #    PurchCategory               procurementCategory;
                #    ItemFreeTxt                 name;
                #    LedgerDimensionAccount      ledgerDimension;
                #
                #    name                = purchLine.Name;
                #
                #    procurementCategory = purchLine.ProcurementCategory;
                #    ledgerDimension     = purchLine.LedgerDimension;
                #
                #    purchTableForm.resetPurchLine(purchLine);
                #
                #    purchLine.ProcurementCategory       = procurementCategory;
                #    purchLine.LedgerDimension           = ledgerDimension;
                #
                #    super();
                #
                #    // Name is defaulted from category in super(). So we revert to saved value, if needed.
                #    if (keepName)
                #    {
                #        purchLine.Name  = name;
                #    }
                #
                #    // Enabled/disable fields
                #    purchLine_ds.changedInventoriedStatus();
                #
                #    element.enableLinePBAActions();
                #    element.enableForeignTrade_RU();
                #
                #    if (purchLine.isCategoryBased())
                #    {
                #        if (purchTable.MatchingAgreement)
                #        {
                #            purchLine.SalesPurchLine::autoMatchAgreementLine(purchTable.MatchingAgreement);
                #        }
                #
                #        if (purchLineForeignTradeCategory.PurchLineDataAreaId == '')
                #        {//Only create a new record if no one exist
                #            purchLineForeignTradeCategory_ds.allowCreate(true);
                #            purchLineForeignTradeCategory_ds.create();
                #            purchLineForeignTradeCategory_ds.allowEdit(true);
                #            purchLineForeignTradeCategory_ds.allowCreate(false);
                #        }
                #    }
                #    else
                #    {
                #        purchLineForeignTradeCategory.clearFormFields();
                #        purchLineForeignTradeCategory_ds.allowEdit(false);
                #        purchLineForeignTradeCategory_ds.refresh();
                #    }
                #
                #    purchLine_ds.enableDistributionTemplate();
                #
                #    dimensionDefaultingControllerLine.activated();
                #
                #    element.enableProjSalesPrice();
                #
                #    element.setEditCommitmentLineAllowed(purchLine.ItemId || purchLine.ProcurementCategory);
                #}
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #    EcoResCategory  ecoResCategory;
                #    EcoResCategory  ecoResCategoryChildren;
                #    AgreementLine   agreementLineLocal;
                #
                #    if (isConfigurationkeyEnabled(configurationKeyNum(PublicSector)) && purchTable.MatchingAgreement)
                #    {
                #        select RecId from ecoResCategory
                #            where ecoResCategory.RecId == purchLine.ProcurementCategory
                #                join Category from agreementLineLocal
                #                where ecoResCategory.RecId == agreementLineLocal.Category
                #                && agreementLineLocal.Agreement == purchTable.MatchingAgreement;
                #
                #        if (!ecoResCategory.RecId)
                #        {
                #            select RecId from ecoResCategory
                #                join Category from agreementLineLocal
                #                where ecoResCategory.RecId == agreementLineLocal.Category
                #                && agreementLineLocal.Agreement == purchTable.MatchingAgreement
                #                    exists join ParentCategory, RecId from ecoResCategoryChildren
                #                    where ecoResCategoryChildren.CategoryHierarchy == ecoResCategory.CategoryHierarchy
                #                    && (ecoResCategoryChildren.NestedSetLeft >= ecoResCategory.NestedSetLeft
                #                    && ecoResCategoryChildren.NestedSetRight <= ecoResCategory.NestedSetRight)
                #                    && (ecoResCategory.RecId == purchLine.ProcurementCategory || ecoResCategoryChildren.RecId == purchLine.ProcurementCategory);
                #        }
                #
                #        if (ecoResCategory.RecId || ecoResCategoryChildren.RecId)
                #        {
                #            ret = super();
                #        }
                #        else
                #        {
                #            ret = false;
                #        }
                #    }
                #    else
                #    {
                #        ret = super();
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD LedgerDimension
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #resolveReference
                #public Common resolveReference(FormReferenceControl _formReferenceControl)
                #{
                #    return ledgerDefaultAccountControllerLine.resolveReference();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD Tax1099Fields
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    if (isConfigurationkeyEnabled(configurationKeyNum(PublicSector)) && purchLine.Tax1099Amount != 0.0 && !purchLine.Tax1099Fields)
                #    {
                #        ret = checkFailed(strFmt("@SYS86315", "@SYS23885"));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    if (isConfigurationkeyEnabled(configurationKeyNum(PublicSector)))
                #    {
                #        element.setAllowEdit1099GFields();
                #        element.setAllowEdit1099SFields();
                #
                #        Tax1099BoxDetail::deleteOrClear1099Detail(Tax1099Fields::find(purchLine.Tax1099Fields).Tax1099Box, tax1099BoxDetail.RecId);
                #        tax1099BoxDetail_ds.executeQuery();
                #        element.redraw();
                #    }
                #}
                #
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD DeliveryPostalAddress
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    purchLine_ds.refresh();
                #
                #    element.showInactiveAddressBar();
                #}
              ENDSOURCE
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    Common ret;
                #    LogisticsLocationSelectionLookup_Purch lookup;
                #
                #    lookup = LogisticsLocationSelectionLookup_Purch::newParameters(_formReferenceControl);
                #
                #    lookup.parmInventSiteId(inventDim.InventSiteId);
                #    lookup.parmInventLocationId(inventDim.InventLocationId);
                #
                #    lookup.addRoleByType(LogisticsLocationRoleType::Delivery);
                #    lookup.parmReturnLocation(false);
                #
                #    ret = lookup.performFormLookup();
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          DATAFIELD itemPBAId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    PBAVersion::lookupPBAId(_formControl, purchLine.ItemId);
                #}
                #
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD TaxServiceCode_BR
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    NoYes                   serviceCodeOnDlvAddress;
                #    LogisticsPostalAddress  logisticsPostalAddress;
                #
                #    serviceCodeOnDlvAddress = purchTable_BR.ServiceCodeOnDlvAddress_BR;
                #    logisticsPostalAddress = LogisticsLocationEntity::location2PostalAddress(purchLine.deliveryLocation());
                #
                #    TaxServiceCode_BR::lookup(_formControl, serviceCodeOnDlvAddress,
                #                              logisticsPostalAddress.CountryRegionId,
                #                              logisticsPostalAddress.State,
                #                              logisticsPostalAddress.City);
                #}
                #
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          REFERENCEFIELD CFOPTable_BR
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    purchLine_ds.refresh();
                #}
              ENDSOURCE
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    Common                      ret;
                #    CFOPAttributesDeterminer_BR cfopAttributes;
                #
                #    if (BrazilParameters::isEnabled())
                #    {
                #        cfopAttributes     = CFOPAttributesDeterminer_BR::construct(purchLine);
                #
                #        ret = CFOPTable_BR::lookupCFOPTable(_formReferenceControl, cfopAttributes);
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          DATAFIELD VariantId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #/// <summary>
                #/// Variant ID - Jump Ref
                #/// </summary>
                #public void jumpRef()
                #{
                #    Args args = new Args();
                #
                #    args.caller(element);
                #    args.record(InventTable::find(purchLine.ItemId));
                #    args.lookupRecord(EcoResDistinctProductVariant::find(InventDimCombination::findVariantId(purchLine.VariantId).DistinctProductVariant));
                #
                #    new MenuFunction(menuitemDisplayStr(EcoResProductVariantsAction), MenuItemType::Display).run(args);
                #}
              ENDSOURCE
              SOURCE #modified
                #/// <summary>
                #/// Variant ID - Modified
                #/// </summary>
                #public void modified()
                #{
                #    InventDim               combInventDim;
                #    InventDim               inventDimOrig;
                #    List                    dimProductFields;
                #    ListEnumerator          enumerator;
                #    FieldId                 inventDimFieldId;
                #    InventDimGroupSetup     inventDimGroupSetup;
                #    boolean                 priceDiscSearchNeeded = false;
                #
                #    super();
                #
                #    combInventDim = InventDimCombination::findVariantId(purchLine.VariantId).inventDim();
                #
                #    if (combInventDim)
                #    {
                #        inventDimOrig.data(inventDim);
                #
                #        inventDim.InventSizeId  = combInventDim.InventSizeId;
                #        inventDim.InventColorId = combInventDim.InventColorId;
                #        inventDim.InventStyleId = combInventDim.InventStyleId;
                #        inventDim.ConfigId      = combInventDim.ConfigId;
                #
                #        // set Name according to VariantId
                #        purchLine.InventDimId    = InventDim::findOrCreate(inventDim).InventDimId;
                #        purchLine.initFromProductDimensions(inventDim);
                #        // Get the active dimension fields from the item's product dimension group and loop over them
                #        inventDimGroupSetup = InventDimGroupSetup::newItemId(purchLine.ItemId);
                #        dimProductFields = inventDimGroupSetup.ecoResProductDimGroupSetup().activeDimensionFields();
                #        enumerator = dimProductFields.getEnumerator();
                #
                #        if (enumerator)
                #        {
                #            while (enumerator.moveNext() && !priceDiscSearchNeeded)
                #            {
                #                inventDimFieldId = enumerator.current();
                #
                #                // If a dimension was changed
                #                if (inventDimOrig.(inventDimFieldId) != inventDim.(inventDimFieldId))
                #                {
                #                    // and it is active for price search
                #                    if (InventDim::mustUseFieldPurchPriceDisc(inventDimFieldId, inventDimGroupSetup))
                #                    {
                #                        priceDiscSearchNeeded = true;
                #                    }
                #                }
                #            }
                #
                #            // then trigger price recalculation
                #            if (priceDiscSearchNeeded)
                #            {
                #                purchLine.modifyInventDim(inventDim, inventDimFieldId, !purchLine.MatchingAgreementLine);
                #            }
                #
                #            // Update item name
                #            purchLine_ds.cacheCalculateMethod(tableMethodStr(PurchLine, itemName));
                #        }
                #    }
                #}
              ENDSOURCE
              SOURCE #lookup
                #/// <summary>
                #/// Variant ID - Lookup
                #/// </summary>
                #/// <param name="_formControl">
                #/// Form String Control
                #/// </param>
                #/// <param name="_filterStr">
                #/// Filter String
                #/// </param>
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    PurchLine::lookupRetailVariantId(_formControl, purchLine.ItemId);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD MCRDropShipment
            PROPERTIES
              AllowEdit           #No
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD MCRDropShipComment
            PROPERTIES
              AllowEdit           #No
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD MCRDropShipStatus
            PROPERTIES
              AllowEdit           #No
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD PDSCalculationId
            PROPERTIES
              AllowEdit           #No
              Skip                #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          REFERENCEFIELD ProjWorker
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    HcmWorkerLookup workerLookup;
                #    ProjParameters  projParameters = ProjParameters::find();
                #    boolean         includeTerminated = true;
                #
                #    if (projParameters.ShowInactiveEmployees == NoYes::No)
                #    {
                #        includeTerminated = false;
                #    }
                #    workerLookup = HcmWorkerLookup::newCustomOptions(
                #        false, // includeEmployees
                #        true, // includeContractors
                #        true, // includeActive
                #        false, // includePending
                #        includeTerminated, // includeTerminated
                #        true, // includeOnlyCurrentLegalEntity
                #        true, // lock workerTypeFilters
                #        true, // lock workerStatusFilters
                #        true); // lock legalEntityFilters
                #
                #    return workerLookup.lookupWorker(_formReferenceControl);
                #}
                #
                #
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD PurchCommitmentLine_PSN
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #/// <summary>
                #/// Adds the 'View details' link to the commitment context menu.
                #/// </summary>
                #public void jumpRef()
                #{
                #    PurchCommitmentHeader_PSN::jumpRefPurchCommitment(purchLine.PurchCommitmentLine_PSN);
                #}
              ENDSOURCE
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    Common commitmentLookupTableBuffer;
                #
                #    PurchCommitmentLineLookup_PSN   purchCommitmentLineLookupClass = PurchCommitmentLineLookup_PSN::construct(_formReferenceControl, purchLine);
                #
                #    commitmentLookupTableBuffer = purchCommitmentLineLookupClass.performFormLookup();
                #
                #    return commitmentLookupTableBuffer;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD BudgetReservationLine_PSN
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #// <PubSect>
                #public void modified()
                #{
                #    super();
                #
                #    purchLine_ds.refresh();
                #
                #    purchTableForm.setAllowEditProjectFields(purchLine, purchLine_ds);
                #
                #    purchLine_ds.updateDesignForProject();
                #
                #    element.enableProjSalesPrice();
                #
                #    groupFinancialDimensionLine.enabled(!purchLine.isBudgetReservationLineReferenced());
                #}
                #// </PubSect>
              ENDSOURCE
              SOURCE #jumpRef
                #/// <summary>
                #/// Adds the view details link to the budget reservation context menu.
                #/// </summary>
                #// <PubSect>
                #public void jumpRef()
                #{
                #    BudgetReservation_PSN::jumpRefBudgetReservation(purchLine.BudgetReservationLine_PSN);
                #}
                #// </PubSect>
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #PISCOFINSFixedAssetCreditAppropMethod_BR
          #//BP Deviation documented
          #display FBPISCOFINSFixedAssetAppropMethod_BR PISCOFINSFixedAssetCreditAppropMethod_BR(PurchLine _purchLine)
          #{
          #    return _purchLine.PISCOFINSFixedAssetCreditAppropMethod_BR();
          #}
          #
        ENDSOURCE
        SOURCE #PISCOFINSFixedAssetCreditInstallments_BR
          #//BP Deviation documented
          #display FBPisCofinsFixedAssetCreditInstls_BR PISCOFINSFixedAssetCreditInstallments_BR(PurchLine _purchLine)
          #{
          #    return _purchLine.PISCOFINSFixedAssetCreditInstallments_BR();
          #}
          #
        ENDSOURCE
        SOURCE #PISCOFINSFixedAssetCreditGroup_BR
          #//BP Deviation documented
          #display FBPISCOFINSFixedAssetCreditGroup_BR PISCOFINSFixedAssetCreditGroup_BR(PurchLine _purchLine)
          #{
          #    return _purchLine.PISCOFINSFixedAssetCreditGroup_BR();
          #}
          #
        ENDSOURCE
        SOURCE #PISCOFINSFixedAssetCreditPurpose_BR
          #//BP Deviation documented
          #display FBPISCOFINSFixedAssetCreditPurpose_BR PISCOFINSFixedAssetCreditPurpose_BR(PurchLine _purchLine)
          #{
          #    return _purchLine.PISCOFINSFixedAssetCreditPurpose_BR();
          #}
          #
        ENDSOURCE
        SOURCE #reread
          #public void reread()
          #{
          #    // Current price references may need to be deleted.
          #    purchLine.SalesPurchLine::cleanUpPriceHistoryRef();
          #
          #    super();
          #}
        ENDSOURCE
        SOURCE #updateDesignForProject
          #public void updateDesignForProject()
          #{
          #    //<PubSect>
          #    BudgetReservationLine_PSN budgetReservationLine = BudgetReservationLine_PSN::find(purchLine.BudgetReservationLine_PSN);
          #
          #    if (purchLine.ProjId == ''
          #        || purchLine.isProjItemBased()
          #        || (budgetReservationLine.RecId != 0 && budgetReservationLine.ProjId && PublicSectorUtils::isBudgetReservationEnabled()))
          #    //</PubSect>
          #    /*<SYS>
          #    if (purchLine.ProjId == '' || purchLine.isProjItemBased())
          #    </SYS>*/
          #    {
          #        purchLine_DS.object(fieldNum(PurchLine, ProjWorker)).allowEdit(false);
          #    }
          #    else
          #    {
          #        purchLine_DS.object(fieldNum(PurchLine, ProjWorker)).allowEdit(true);
          #    }
          #}
        ENDSOURCE
        SOURCE #deleteMarked
          # public void deleteMarked()
          #{
          #    purchTableForm.parmInPurchlineDeleteMarked(true);
          #
          #    super();
          #
          #    purchTable.type().updateDistribution();
          #
          #    purchTableForm.parmInPurchlineDeleteMarked(false);
          #}
        ENDSOURCE
        SOURCE #ICMSCreditInstallments_BR
          #//BP Deviation documented
          #display ICMSCreditInstallments_BR ICMSCreditInstallments_BR(PurchLine _purchLine)
          #{
          #    return _purchLine.ICMSCreditInstallments_BR();
          #}
          #
        ENDSOURCE
        SOURCE #PISCOFINSReceivableLongTerm_BR
          #//BP Deviation documented
          #display NoYes PISCOFINSReceivableLongTerm_BR(PurchLine _purchLine)
          #{
          #    return _purchLine.PISCOFINSReceivableLongTerm_BR();
          #}
          #
        ENDSOURCE
        SOURCE #ICMSReceivableLongTerm_BR
          #//BP Deviation documented
          #display NoYes ICMSReceivableLongTerm_BR(PurchLine _purchLine)
          #{
          #    return _purchLine.ICMSReceivableLongTerm_BR();
          #}
          #
        ENDSOURCE
        SOURCE #active
          #/// <summary>
          #/// Activates the <c>PurchLine</c> datasource.
          #/// </summary>
          #/// <returns>
          #/// An integer value indicating if the method is successful. It always returns 1.
          #/// </returns>
          #/// <remarks>
          #/// This method calls the <c>setAllowEditAssetFields</c> method of the <c>PurchTableForm</c> class
          #/// to ensure that the fixed asset fields are available to be edited.
          #/// </remarks>
          #int  active()
          #{
          #    int     ret;
          #    boolean allowEdit;
          #    boolean allowEditDeliveryPostalAddress;
          #    #ISOCountryRegionCodes
          #
          #    ret = super();
          #    dimensionDefaultingControllerLine.activated();
          #    dimensionDefaultingControllerLine.setEditability(!purchLine.IsInvoiceMatched);
          #    if (purchTable.AccountingDate)
          #    {
          #        dimensionDefaultingControllerLine.setNonActiveValueTolerance(ErrorTolerance::Warning, purchTable.AccountingDate);
          #    }
          #
          #    purchTableForm.purchTable(purchTable);
          #
          #    element.setEditItemCategoryAllowed(purchLine.RecId == 0);
          #    element.setEditLinenumberAllowed(purchTableForm.editLineNumberAllowed(purchLine));
          #    element.showInactiveAddressBar();
          #
          #    allowEdit = purchTableForm.editLineAllowed(purchLine) || purchLine.editableInWorkflow();
          #
          #    purchLine_ds.allowCreate(purchTableForm.createLineAllowed(purchLine));
          #    purchLine_ds.allowEdit  (allowEdit);
          #    purchLine_ds.allowDelete(purchTableForm.deleteLineAllowed(purchLine));
          #
          #    inventDim_ds.allowEdit  (allowEdit);
          #
          #    element.checkCreditNoteLine();
          #
          #    element.updateDesign(InventDimFormDesignUpdate::Active);
          #
          #    purchLine_ds.object(fieldNum(PurchLine, PurchReceivedNow)).allowEdit(purchLine.purchReceivedNowAllowEdit());
          #
          #    element.setAllowEditTax1099();
          #
          #    if (isConfigurationkeyEnabled(configurationKeyNum(PublicSector)))
          #    {
          #        element.setAllowEdit1099GFields();
          #        element.setAllowEdit1099SFields();
          #        element.setEditCommitmentLineAllowed(purchLine.ItemId || purchLine.ProcurementCategory);
          #    }
          #    element.updateRFIDTagging();
          #
          #    if (isRU)
          #    {
          #        element.enabledVATTaxAgent_RU();
          #        element.enableMarkupCode_RU();
          #        element.enableForeignTrade_RU();
          #    }
          #
          #    purchTableForm.interCompanySetLineAccess(purchLine);
          #    purchTableForm.directDeliverySetLineAccess(purchLine);
          #    allowEditDeliveryPostalAddress = purchLine_ds.object(fieldNum(PurchLine, DeliveryPostalAddress)).allowEdit();
          #    logisticsLocationSelectLine.enabled(allowEditDeliveryPostalAddress);
          #    dirPartyPostalAddressNewLine.enabled(allowEditDeliveryPostalAddress);
          #
          #    if (purchLine.ProjId)
          #    {
          #        if (purchLine.purchTable().isProjectSalesItemReqPO() ||
          #            purchLine.getProjCreditNoteSource().purchTable().isProjectSalesItemReqPO())
          #        {
          #            lineInquiry_CostControlCommittedCost.enabled(false);
          #        }
          #        else
          #        {
          #            lineInquiry_CostControlCommittedCost.enabled(true);
          #        }
          #    }
          #    else
          #    {
          #        lineInquiry_CostControlCommittedCost.enabled(false);
          #    }
          #
          #    element.resetAssetContainers();
          #
          #    if(tabLineFixedAsset.isActivePage())
          #    {
          #        element.setupAsset(purchLine);
          #    }
          #    else
          #    {
          #        element.design().controlName(#grpAssetQualifier).visible(false);
          #    }
          #
          #    purchTableForm.setAllowEditAssetFields(purchTable, purchLine, purchLine_ds);
          #    if (AssetDocumentUtility_JP::isAssetDocumentEnabled())
          #    {
          #        purchTableForm.setAllowVisibleReductionEntryFields_JP(purchTable, purchLine, reductionEntry_JP);
          #    }
          #
          #    // If the date is not set
          #    if(SysCountryRegionCode::isLegalEntityInCountryRegion([#isoIT]))
          #    {
          #        if(!purchLine.DepreciationStartDate)
          #        {
          #            purchLine.setDepreciationStartDate();
          #        }
          #        element.enableDepreciationStartDate(false);
          #    }
          #
          #    if (purchLine.RecId)
          #    {
          #        purchLine_ds.enableDistributionTemplate();
          #    }
          #
          #    element.setupEnvironmentalTab();
          #
          #    element.enableLedgerDimensionDefaultAccount();
          #
          #    element.enableRetentionProject();
          #
          #    element.enableProjSalesPrice();
          #
          #    element.updateControlsForFrenchConfirmedPO();
          #    if (isConfigurationkeyEnabled(configurationKeyNum(Retail)))
          #    {
          #        allowEdit = allowEdit && (!purchLine.RetailPackageId);    //User may not be allowed to edit purchase order lines that belong to a package
          #        element.packageAllowEdit(allowEdit);
          #    }
          #
          #    if (ret && SysCountryRegionCode::isLegalEntityInCountryRegion([#isoIN]))
          #    {
          #        element.enableFieldsActive_IN();
          #        element.updateDesign_IN();
          #        if (taxWithholdParameters.tdsActivate || taxWithholdParameters.tcsActivate)
          #        {
          #            element.setTaxWithholdEnabled_IN();
          #        }
          #        purchLine_IN_ds.enableExciseFields_IN();
          #    }
          #
          #    isWHSPurchLineEnabled = WHSPurchLine::isExtensionRecordNeeded(purchLine);
          #    crossDock.enabled(isWHSPurchLineEnabled);
          #
          #    if (BrazilParameters::isEnabled())
          #    {
          #        element.enableServiceFields_BR();
          #    }
          #
          #    // <PubSect>
          #    if (PublicSectorUtils::isBudgetReservationEnabled())
          #    {
          #        purchTableForm.enableBudgetReservationFields(purchLine);
          #        groupFinancialDimensionLine.enabled(purchLine.BudgetReservationLine_PSN == 0);
          #        purchTableForm.determineFinancialEditingForBudgRes(purchLine);
          #    }
          #    // </PubSect>
          #
          #    return ret;
          #}
          #
          #
        ENDSOURCE
        SOURCE #initInventDim
          #/// <summary>
          #/// Updates <c>InventDim</c> with new data which has been set due to modification of <c>PurchLine</c>.
          #/// </summary>
          #private void initInventDim()
          #{
          #    inventDim.data(InventDim::find(purchLine.InventDimId));
          #
          #    // Override the initial value if a default is provided.
          #    if (defaultInventDim && purchLine.ItemId == defaultItemId)
          #    {
          #        inventDim.initFromInventDim(defaultInventDim);
          #    }
          #}
        ENDSOURCE
        SOURCE #lineDeliveryTypeImage
          #//BP Deviation documented
          #display LineDeliveryTypeImage lineDeliveryTypeImage(PurchLine _purchLine)
          #{
          #    return imageListAppl_PurchTableForm.image(_purchLine.lineDeliveryImageRessNo());
          #}
        ENDSOURCE
        SOURCE #executeQuery
          #public void executeQuery()
          #{
          #    logisticsPostalAddressLine_ds.validTimeStateUpdate(ValidTimeStateUpdate::Correction);
          #    logisticsPostalAddressLine_ds.query().validTimeStateDateTimeRange(DateTimeUtil::minValue(), DateTimeUtil::maxValue());
          #
          #    super();
          #
          #    if (isCalledFromLP)
          #    {
          #        isCalledFromLP = false;
          #        if (purchTable && TradeFormHelper::isEditableNotGridView(element.args()))
          #        {
          #            purchLine_PurchQtyGrid.setFocus();
          #        }
          #    }
          #}
        ENDSOURCE
        SOURCE #updateBudgetCheckResultDisplay
          #/// <summary>
          #/// Updates budget check result display cache.
          #/// </summary>
          #public void updateBudgetCheckResultDisplay()
          #{
          #    if (Ledger::isLedgerBudgetControlEnabled())
          #    {
          #        if (this.cacheCalculateMethod(tableMethodStr(PurchLine, displayBudgetCheckResult)))
          #        {
          #            purchLine_ds.refresh();
          #        }
          #    }
          #}
        ENDSOURCE
        SOURCE #enableBudgetControlLineInquiry
          #/// <summary>
          #/// Eanbles the <c>BudgetControlLine</c> inquiry button.
          #/// </summary>
          #private void enableBudgetControlLineInquiry()
          #{
          #    budgetControlLine.enabled(budgetControlLine.visible() && purchLine.IsModified);
          #}
        ENDSOURCE
        SOURCE #editAssetQualifier
          #// BP deviation documented
          #edit AssetRuleAssetQualifier editAssetQualifier(boolean set, AssetRuleAssetQualifier _qualifier)
          #{
          #    if(set)
          #    {
          #        if(AssetRuleTmpAssetQualifierLookup::getAssetGroupFromQualifier(_qualifier, assetQualifierList) != '')
          #        {
          #            selectedAssetQualifier = _qualifier;
          #        }
          #    }
          #    return  selectedAssetQualifier;
          #}
        ENDSOURCE
        SOURCE #validateDelete
          #public boolean validateDelete()
          #{
          #    boolean ret = true;
          #    str warning = purchLine.type(purchTable).getDeleteWarning();
          #
          #    if (warning != "")
          #    {
          #        ret = (Box::yesNo(warning, DialogButton::No) == DialogButton::Yes)
          #            && purchLine.validateDelete();
          #    }
          #    else
          #    {
          #        ret = super();
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #itemIdModified
          #void itemIdModified()
          #{
          #    purchLine.itemIdChanged(purchTable.MatchingAgreement);
          #
          #    this.changedInventoriedStatus();
          #    isWHSPurchLineEnabled = WHSPurchLine::isExtensionRecordNeeded(purchLine);
          #    crossDock.enabled(isWHSPurchLineEnabled);
          #
          #    // Reread ReferenceGroup controls, e.g. to show the category name.
          #    purchLine_ds.rereadReferenceDataSources();
          #
          #    element.enableLedgerDimensionDefaultAccount();
          #
          #    dimensionDefaultingControllerLine.activated();
          #    element.enableMarkupCode_RU();
          #    element.enableForeignTrade_RU();
          #}
        ENDSOURCE
        SOURCE #changedInventoriedStatus
          #/// <summary>
          #/// Updates the form to reflect the current inventoried status inventoried status, i.e. after a change to the itemid, category, or inventoried field.
          #/// </summary>
          #void changedInventoriedStatus()
          #{
          #    // Update inventDim with new data which has been set due to modification
          #    this.initInventDim();
          #    purchLine.modifyInventDim(inventDim, fieldNum(InventDim,InventLocationId), !purchLine.MatchingAgreementLine);
          #
          #    InventMovement::bufferSetTransQtyUnit(purchLine);
          #    // Update inventdim fields
          #    element.updateDesign(InventDimFormDesignUpdate::FieldChange);
          #    // Update tagging fields based on dimension settings.
          #    element.updateRFIDTagging();
          #
          #    // Disable category editing if itemid is selected
          #    purchLine_ds.object(fieldNum(PurchLine, ProcurementCategory)).allowEdit(purchLine.ItemId == '');
          #    // Disable itemid editing if only a category is selected
          #    purchLine_ds.object(fieldNum(PurchLine, ItemId)).allowEdit(!purchLine.isCategoryBased());
          #
          #    // Update allow edit for scrap
          #    element.checkCreditNoteLine();
          #    // Update allow edit for inventory fields
          #    purchTableForm.interCompanySetLineAccess(purchLine);
          #    purchTableForm.directDeliverySetLineAccess(purchLine);
          #
          #    purchTableForm.setAllowEditAssetFields(purchTable, purchLine, purchLine_ds);
          #}
        ENDSOURCE
        SOURCE #create
          #void  create(boolean append = true)
          #{
          #    element.setEditItemCategoryAllowed(true);
          #    distributionTemplateLine.allowEdit(true);
          #
          #    dimensionDefaultingControllerLine.activated();
          #
          #    if (!purchTableForm.canNewLineBeAppended(purchLine))
          #    {
          #        append = false;
          #    }
          #
          #    purchTableForm.purchLine_CreatePreSuper(purchLine);
          #
          #    if (purchTable.checkUpdate())
          #    {
          #        super(append);
          #    }
          #
          #    if (purchTable && tabPageDetails.isActivePage())
          #    {
          #        purchLine_ItemId.setFocus();
          #    }
          #
          #    // Invoke postSuper to store an initialized purchLine used for further creation. Only store it if an item
          #    // has not been defined or we have a default item.
          #    if ((!purchLine.ItemId && !purchLine.ProcurementCategory)
          #        || (defaultItemId && defaultItemId == purchLine.ItemId))
          #    {
          #        purchTableForm.purchLine_CreatePostSuper(purchLine);
          #    }
          #
          #    // filter exists on ItemId
          #    if (purchLine.ItemId)
          #    {
          #        this.itemIdModified();
          #    }
          #
          #    // filter exists on ProcurementCategory
          #    if (purchLine.ProcurementCategory)
          #    {
          #        this.changedInventoriedStatus();
          #    }
          #
          #    this.createFixedAssetModified();
          #}
        ENDSOURCE
        SOURCE #createFixedAssetModified
          #/// <summary>
          #/// Broadcasts that the <c>CreateFixedAsset</c> field value has changed to the <c>purchLine</c> table buffer.
          #/// </summary>
          #void createFixedAssetModified()
          #{
          #    purchLine.modifyCreateFixedAsset();
          #}
        ENDSOURCE
        SOURCE #delete
          #void  delete()
          #{
          #    PurchId purchId;
          #    boolean mustFormResearchAfterDelete = purchTableForm.mustFormResearchAfterDelete(purchLine);
          #
          #    if (purchLine.checkDelete(true, purchTable))
          #    {
          #        purchId = purchLine.PurchId;
          #
          #        ttsbegin;
          #        if (isConfigurationkeyEnabled(configurationKeyNum(Retail)))
          #        {
          #            purchLine.type(purchTable).deleteRetailSumLinesFromPurch();
          #        }
          #
          #        //This is a performance optimization. Indicates we can skip updating the purchTable
          #        //header distribution on this line because we are in a multiselect delete of lines.
          #        //Update will be done at the end in PurchLine_ds.deleteMarked()
          #        if (purchTableForm.parmInPurchlineDeleteMarked())
          #        {
          #            purchLine.SkipDistributionUpdate = NoYes::Yes;
          #        }
          #
          #        // Current price references may need to be deleted.
          #        purchLine.SalesPurchLine::cleanUpPriceHistoryRef();
          #
          #        super();
          #        purchTable_ds.onSummaryRecordsInvalid(tableNum(PurchTotalsSummary));
          #
          #        ttscommit;
          #
          #        dimensionDefaultingControllerLine.deleted();
          #
          #        if ( mustFormResearchAfterDelete )
          #        {
          #            purchLine_ds.research(true);
          #        }
          #
          #        if (purchId && PurchTable::exist(purchId))
          #        {
          #            purchTable_ds.reread();
          #            purchTable_ds.refresh();
          #        }
          #
          #        if (isConfigurationkeyEnabled(configurationKeyNum(Retail)))
          #        {
          #            retailSumLines_ds.research();
          #        }
          #        element.setupEnvironmentalTab();
          #    }
          #}
        ENDSOURCE
        SOURCE #enableDistributionTemplate
          #/// <summary>
          #/// Enables the <c>AccountingDistributionTemplate</c> field based on the purchase order line state.
          #/// </summary>
          #public void enableDistributionTemplate()
          #{
          #    if (purchLine.canApplyAllocationOrDistributionTemplate())
          #    {
          #        distributionTemplateLine.allowEdit(true);
          #    }
          #    else
          #    {
          #        distributionTemplateLine.allowEdit(false);
          #    }
          #}
        ENDSOURCE
        SOURCE #initValue
          #void initValue()
          #{
          #    if (purchTable
          #       && (defaultPurchLine.PurchId != purchTable.PurchId
          #       || (defaultPurchLine.PurchId == purchTable.PurchId
          #       && purchTableRecVersion      != purchTable.RecVersion)))
          #    {
          #        defaultPurchLine.initFromPurchTable(purchTable);
          #        defaultPurchLine.initFromVendTable(purchTable.vendTable_OrderAccount());
          #        purchTableRecVersion = purchTable.RecVersion;
          #    }
          #
          #    purchLine.data(defaultPurchLine);
          #    if (isPurchLine_INEnabled || isPurchLine_WEnabled)
          #    {
          #        // The defaulted extension table record are packed in defaultPurchLine
          #        // and been copied to purchLine.PackedExtensions field. Unpack it to apply
          #        // these default value to extension table data source.
          #        purchLine.SysExtensionSerializerMap::unpackAll();
          #    }
          #
          #    // For category based lines Name should be kept if manually modified.
          #    keepName = false;
          #
          #    if (defaultItemId)
          #    {
          #        purchLine.ItemId = defaultItemId;
          #    }
          #
          #    if (defaultDate)
          #    {
          #        purchLine.ShippingDateRequested = defaultDate;
          #    }
          #
          #    if (TaxParameters::isServiceTaxEnable_IN())
          #    {
          #        purchLine_IN.IsRecoverableServiceTax_IN = NoYes::Yes;
          #    }
          #    super();
          #}
        ENDSOURCE
        SOURCE #init
          #public void init()
          #{
          #    super();
          #
          #    this.query().dataSourceTable(tableNum(PurchLine)).addRange(fieldNum(PurchLine,IsDeleted)).value(queryValue(NoYes::No));
          #
          #    purchLine_ds.cacheAddMethod(tableMethodStr(PurchLine, whsGetLoads));
          #
          #    purchLine_ds.cacheAddMethod(tableMethodStr(PurchLine, receivedInTotal), false);
          #    purchLine_ds.cacheAddMethod(tableMethodStr(PurchLine, invoicedInTotal), false);
          #    purchLine_ds.cacheAddMethod(tableMethodStr(PurchLine, itemName), false);
          #    purchLine_ds.cacheAddMethod(tableMethodStr(PurchLine, displayBudgetCheckResult), false);
          #    purchLine_ds.cacheAddMethod(tableMethodStr(PurchLine, calcPendingQtyPurchDisplay));
          #    purchLine_ds.cacheAddMethod(tableMethodStr(PurchLine, getPurchReqItemName), false);
          #    if (InventParameters::find().UseQualityManagement)
          #    {
          #        purchLine_ds.cacheAddMethod(tableMethodStr(PurchLine, qualityOrderStatusDisplay), false);
          #    }
          #
          #    if (BrazilParameters::isEnabled())
          #    {
          #        purchLine_ds.cacheAddMethod(tableMethodStr(PurchLine, deliveryCNPJCPFNUM_BR));
          #        purchLine_ds.cacheAddMethod(tableMethodStr(PurchLine, deliveryIENum_BR));
          #    }
          #
          #    purchLine.setDepreciationStartDate(true);
          #    element.enableDepreciationStartDate();
          #
          #    element.invoiceMatchingAccess();
          #}
        ENDSOURCE
        SOURCE #leave
          #public boolean leave()
          #{
          #    boolean ret;
          #
          #    // PBA begin
          #    if( !purchLine.PBAItemLine::checkMandatory() )
          #    {
          #        return false;
          #    }
          #    // PBA end
          #
          #    ret = super();
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #linkActive
          #void  linkActive()
          #{
          #    #ISOCountryRegionCodes
          #    super();
          #
          #    /* Set Caption */
          #    if (!purchLine && purchTable)
          #    {
          #        purchTableForm.purchTable(purchTable);
          #        purchLine_ds.create();
          #    }
          #
          #    if(SysCountryRegionCode::isLegalEntityInCountryRegion([#isoIT]))
          #    {
          #        if(!purchLine.DepreciationStartDate)
          #        {
          #            purchLine.setDepreciationStartDate();
          #        }
          #        element.enableDepreciationStartDate(false);
          #    }
          #}
        ENDSOURCE
        SOURCE #purchTable_ds
          #FormDataSource purchTable_ds()
          #{
          #    return purchTable_ds;
          #}
        ENDSOURCE
        SOURCE #validateWrite
          #public boolean validateWrite()
          #{
          #    boolean ret = true;
          #
          #    //Set SubLedgerDistributions and SubLedgerJournalLines as needing to be created/updated
          #    purchTable_ds.setTouched();
          #
          #    ret = element.setupAsset(purchLine);
          #
          #    purchLine.InventDimId = InventDim::findOrCreate(inventDim).InventDimId;
          #
          #    if (!purchLine.isAgreementLinkValid(true))
          #    {
          #        ret = purchLine.unLinkAgreementLinePrompt(0, tableNum(PurchLine), false);
          #    }
          #
          #    copyTaxGroupToMarkupTrans = DialogButton::No;
          #    if (ret && purchLine.TaxGroup != purchLine.orig().TaxGroup)
          #    {
          #        copyTaxGroupToMarkupTrans   = MarkupTrans::promptCopyTaxGroupToMarkupTrans(purchLine.TableId, purchLine.RecId);
          #        ret                         = copyTaxGroupToMarkupTrans != DialogButton::Cancel;
          #    }
          #
          #
          #    ret = super() && ret;
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #write
          #void  write()
          #{
          #    PurchLine       localPurchLine;
          #    boolean         agreementWasChanged = (purchLine.MatchingAgreementLine != purchLine.orig().MatchingAgreementLine);
          #    boolean         isPurchLineReread;
          #    boolean         isPurchLineRefreshed;
          #
          #    PurchLineWritePreSuperInputContract     inputContractPre = PurchLineWritePreSuperInputContract::construct();
          #    PurchLineWritePreSuperOutputContract    outputContractPre;
          #    PurchLineWritePostSuperInputContract    inputContractPost = PurchLineWritePostSuperInputContract::construct();
          #    PurchLineWritePostSuperOutputContract   outputContractPost;
          #
          #    boolean             newTax1099Detail;
          #    Tax1099Fields       tax1099Fields;
          #
          #    newTax1099Detail = tax1099BoxDetail.RecId;
          #
          #    dimensionDefaultingControllerLine.writing();
          #
          #    inputContractPre.parmPurchTable(purchTable);
          #    inputContractPre.parmPurchLine(purchLine);
          #    outputContractPre   = purchTableForm.purchLine_WritePreSuper(inputContractPre);
          #    autoConfig          = outputContractPre.parmAutoConfig();
          #    inputContractPost.parmOrigTaxGroup(purchLine.orig().TaxGroup);
          #
          #    if (outputContractPre.parmPurchTableCheckUpdate())
          #    {
          #        buf2Buf(outputContractPre.parmPurchLine(), purchLine);
          #
          #        if (PurchLine::hasExensionTableEnabled())
          #        {
          #            purchLine.SysExtensionSerializerMap::unpackAll();
          #        }
          #
          #        purchLine.InventDimId = InventDim::findOrCreate(inventDim).InventDimId;
          #
          #        if (isConfigurationkeyEnabled(configurationKeyNum(PublicSector)) && (purchLine.Tax1099Fields || purchLine.Tax1099RecId))
          #        {
          #            //Must make sure we write tax1099Detail only when we are writing purchLine to maintain relationship
          #            if (purchLine.Tax1099Fields)
          #            {
          #                tax1099Fields = outputContractPre.parmTax1099Fields();
          #            }
          #
          #            if (tax1099Fields && (tax1099Fields.Tax1099Box == #G_1
          #                                    || tax1099Fields.Tax1099Box == #G_2
          #                                    || tax1099Fields.Tax1099Box == #S_2))
          #            {
          #                try
          #                {
          #                    tax1099BoxDetail_ds.write(true);
          #
          #                    if (!newTax1099Detail)
          #                    {
          #                        purchLine.Tax1099RecId = tax1099BoxDetail.RecId;
          #                    }
          #                }
          #                catch
          #                {
          #                    return;
          #                }
          #            }
          #            else
          #            {
          #                if (tax1099BoxDetail)
          #                {
          #                    tax1099BoxDetail.delete();
          #                }
          #                purchLine.Tax1099RecId = 0;
          #            }
          #        }
          #
          #        if (isConfigurationkeyEnabled(configurationKeyNum(Retail)) && outputContractPre.parmRetailSumLinesHasChanged())
          #        {
          #            retailSumLines_ds.research();
          #        }
          #
          #        if (isWHSPurchLineEnabled && !whsPurchLine.RecId)
          #        {
          #            purchLine.PackedWHSLine = buf2Con(whsPurchLine);
          #        }
          #
          #        super();
          #
          #        if (isWHSPurchLineEnabled)
          #        {
          #            whsPurchLine.data(WHSPurchLine::find(purchLine.InventTransId));
          #        }
          #
          #        if(SysExtensionSerializerExtensionMap::isExtensionEnabled(tableNum(PurchLine_Intrastat)))
          #        {
          #           purchLine_Intrastat.SysExtensionSerializerExtensionMap::insertAfterBaseTable(purchLine);
          #        }
          #        if (isPurchLine_INEnabled)
          #        {
          #            purchLine_IN.SysExtensionSerializerExtensionMap::insertAfterBaseTable(purchLine);
          #        }
          #        if (isPurchLine_WEnabled)
          #        {
          #            purchLine_W.SysExtensionSerializerExtensionMap::insertAfterBaseTable(purchLine);
          #        }
          #
          #        inputContractPost.parmPurchTableCheckUpdate(outputContractPre.parmPurchTableCheckUpdate());
          #        inputContractPost.parmPurchLine(purchLine);
          #        inputContractPost.parmAutoConfig(autoConfig);
          #
          #        if (copyTaxGroupToMarkupTrans == DialogButton::Yes || copyTaxGroupToMarkupTrans == DialogButton::YesToAll)
          #        {
          #            inputContractPost.parmCopyTaxGroupToMarkupTrans(copyTaxGroupToMarkupTrans);
          #            copyTaxGroupToMarkupTrans = DialogButton::No;
          #        }
          #
          #        purchTable_ds.onSummaryRecordsInvalid(tableNum(PurchTotalsSummary));
          #
          #        if (purchLine.isCategoryBased() && !purchLineForeignTradeCategory.PurchLineInventTransId)
          #        {
          #            purchLineForeignTradeCategory.initFromPurchLine(purchLine);
          #            purchLineForeignTradeCategory_ds.write();
          #            inputContractPost.parmUpdatePendingRegistrationsNonStocked(true);
          #        }
          #
          #        outputContractPost = purchTableForm.purchLine_WritePostSuper(inputContractPost);
          #
          #        if (isConfigurationkeyEnabled(configurationKeyNum(Retail)) && outputContractPost.parmRetailSumLinesHasChanged())
          #        {
          #            retailSumLines_ds.research();
          #            purchLine_ds.reread();
          #            isPurchLineReread = true;
          #            purchLine_ds.refresh();
          #            isPurchLineRefreshed = true;
          #        }
          #
          #        if (purchLine.InventDimId != inventDim.InventDimId)
          #        {
          #            inventDim.data(InventDim::find(purchLine.InventDimId));
          #            inventDim_ds.setCurrent();
          #        }
          #
          #        purchTableForm.refreshDeliverySchedule(purchLine, agreementWasChanged && !purchLine.MatchingAgreementLine);
          #
          #        if (TaxParameters::isCustomsEnable_IN()
          #            && purchTable_W.CustomsImportOrder_IN
          #            && TaxParameters::find().EximIncentiveSchemes_IN
          #            && eximPurchLine_IN)
          #        {
          #            eximPurchLine_IN.write();
          #        }
          #
          #        if (purchTable.InterCompanyOrder)
          #        {
          #            localPurchLine.data(purchLine.data());
          #            purchLine_ds.executeQuery();
          #            purchLine_ds.findRecord(localPurchLine);
          #        }
          #
          #        if (!(isPurchLineReread && isPurchLineRefreshed))
          #        {
          #            // update purchase order line budget check result display.
          #            purchLine_ds.updateBudgetCheckResultDisplay();
          #        }
          #        purchTable_ds.reread();
          #        purchTable_ds.refresh();
          #        purchLine_ds.reread();
          #        purchLine_ds.refresh();
          #    }
          #    else
          #    {
          #        outputContractPost = purchTableForm.purchLine_WritePostSuper(inputContractPost);
          #        purchLine_ds.reread();
          #        purchTable_ds.reread();
          #    }
          #
          #    if (isRU)
          #    {
          #        element.enableInvoice4PaymButtons();
          #    }
          #
          #    interCompanyIsPriceDiscSearchNeeded = 0;
          #
          #
          #    if (outputContractPost.parmCreditNoteCashDiscMessage())
          #    {
          #        info("@SYS99051");
          #    }
          #
          #    // <PubSect>
          #    if (purchLine.isBudgetReservationLineReferenced() && purchLine.LineAmount < 0)
          #    {
          #        purchLine.BudgetReservationLine_PSN = 0;
          #        info("@SYP4990146");
          #    }
          #    // </PubSect>
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #PurchLineForeignTradeCategory
          Table               #PurchLineForeignTradeCategory
          AllowCreate         #No
          AllowDelete         #No
          JoinSource          #PurchLine
          LinkType            #OuterJoin
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #allowEdtItemCodeId
          #void allowEdtItemCodeId()
          #{
          #    if (purchLine.isCategoryBased())
          #    {
          #        if (purchLine.receivedInTotal()    != 0
          #        ||  purchLine.registered()         != 0
          #        ||  purchLine.invoicedInTotal()    != 0)
          #        {
          #            purchLineForeignTradeCategory_ds.object(fieldNum(PurchLineForeignTradeCategory, ItemCodeId)).allowEdit(false);
          #            purchLineForeignTradeCategory_ds.object(fieldNum(PurchLineForeignTradeCategory, ItemCodeId)).skip(true);
          #        }
          #        else
          #        {
          #            purchLineForeignTradeCategory_ds.object(fieldNum(PurchLineForeignTradeCategory, ItemCodeId)).allowEdit(true);
          #            purchLineForeignTradeCategory_ds.object(fieldNum(PurchLineForeignTradeCategory, ItemCodeId)).skip(false);
          #        }
          #    }
          #}
        ENDSOURCE
        SOURCE #active
          #public int active()
          #{
          #    int     ret;
          #    boolean allowEditLine;
          #
          #    ret = super();
          #
          #    if (purchLine.isCategoryBased())
          #    {
          #        allowEditLine = purchTableForm.editLineAllowed(purchLine);
          #        purchLineForeignTradeCategory_ds.allowEdit(allowEditLine);
          #        if (allowEditLine)
          #        {
          #            purchLineForeignTradeCategory_ds.allowEdtItemCodeId();
          #        }
          #    }
          #    else
          #    {
          #        purchLineForeignTradeCategory_ds.allowEdit(false);
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #validateWrite
          #public boolean validateWrite()
          #{
          #    boolean ret = true;
          #
          #    if (purchLine.RecId && purchLine.isCategoryBased())
          #    {
          #        ret = super();
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #write
          #public void write()
          #{
          #    boolean             isPurchLineResearch;
          #    PurchTableVersion   purchTableVersion;
          #
          #    if (purchLine.RecId && purchLine.isCategoryBased())
          #    {
          #        if (!purchTable.ChangeRequestRequired && purchTable.DocumentState == VersioningDocumentState::Confirmed)
          #        {
          #            purchTableVersion = PurchTableVersion::findLatest(purchTable.PurchId, purchTable.DataAreaId);
          #            if (purchTableVersion && purchTableVersion.IsArchived == NoYes::No)
          #                isPurchLineResearch = true;
          #        }
          #
          #        super();
          #
          #        if (isPurchLineResearch)
          #            purchLine_ds.research(true);
          #    }
          #}
        ENDSOURCE
        SOURCE #create
          #public void create(boolean _append = false)
          #{
          #    if (purchLine.isCategoryBased())
          #    {
          #        super(_append);
          #    }
          #}
        ENDSOURCE
        SOURCE #init
          #public void init()
          #{
          #    super();
          #
          #    this.query().dataSourceTable(this.table()).addRange(fieldNum(PurchLineForeignTradeCategory, IsDeleted)).value(queryValue(NoYes::No));
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #InventDim
          Table               #InventDim
          JoinSource          #PurchLine
          LinkType            #InnerJoin
          DelayActive         #No
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
          DATAFIELD inventBatchId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    if (ret)
                #    {
                #        ret = purchLine.validateModifyInventDim(inventDim,fieldNum(InventDim,InventBatchId));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    purchLine.modifyInventDim(inventDim,fieldNum(InventDim,InventBatchId), !purchLine.MatchingAgreementLine);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD wMSLocationId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    purchLine.modifyInventDim(inventDim,fieldNum(InventDim,wmsLocationId), !purchLine.MatchingAgreementLine);
                #}
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    if (ret)
                #    {
                #        ret = purchLine.validateModifyInventDim(inventDim,fieldNum(InventDim,wmsLocationId));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD wMSPalletId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    purchLine.modifyInventDim(inventDim,fieldNum(InventDim,wmsPalletId), !purchLine.MatchingAgreementLine);
                #}
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    if (ret)
                #    {
                #        ret = purchLine.validateModifyInventDim(inventDim,fieldNum(InventDim,wmsPalletId));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD inventSerialId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    purchLine.modifyInventDim(inventDim,fieldNum(InventDim,InventSerialId), !purchLine.MatchingAgreementLine);
                #}
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    if (ret)
                #    {
                #        ret = purchLine.validateModifyInventDim(inventDim,fieldNum(InventDim,InventSerialId));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventLocationId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    if (inventDim.orig().InventSiteId != inventDim.InventSiteId)
                #    {
                #        purchLine.modifyInventDim(inventDim, fieldNum(InventDim, InventSiteId), !purchLine.MatchingAgreementLine);
                #    }
                #
                #    purchLine.modifyInventDim(inventDim,fieldNum(InventDim,InventLocationId), !purchLine.MatchingAgreementLine);
                #
                #    purchLine.setAddressFromInventDim(inventDim);
                #    purchLine_ds.rereadReferenceDataSources();
                #    purchLine_ds.refresh();
                #
                #    // <GIN>
                #    if (TaxParameters::checkTaxParameters_IN() || TaxWithholdParameters_IN::checkTaxParameters())
                #    {
                #        taxInformation_IN_DS.linkActive();
                #        purchLine_IN_ds.refresh();
                #    }
                #    // </GIN>
                #}
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #    RetailStoreTable                    rboStoreTable;
                #    RetailChannelTable                  retailChannelTable;
                #    RetailChannelAssortedProductView    retailChannelAssortedProductView;
                #    InventTable                         inventTable;
                #
                #    ret = super();
                #
                #    if (ret)
                #    {
                #        ret = purchLine.validateModifyInventDim(inventDim,fieldNum(InventDim,InventLocationId));
                #    }
                #
                #    if (isConfigurationkeyEnabled(configurationKeyNum(Retail))
                #        && ret)
                #    {
                #        select firstonly InventLocation, RecId, PoItemFilter, StoreNumber from rboStoreTable where
                #            rboStoreTable.InventLocation == inventDim.InventLocationId;
                #
                #        if (rboStoreTable.RecId && rboStoreTable.PoItemFilter == true)
                #        {
                #            select firstonly RecId
                #                from retailChannelTable
                #                    where retailChannelTable.RecId == rboStoreTable.RecId
                #                join omOperatingUnitId, ProductID, InventLocationDataAreaId from retailChannelAssortedProductView
                #                    where retailChannelAssortedProductView.omOperatingUnitId == retailChannelTable.omOperatingUnitID
                #                join ItemId, Product, DataAreaId from inventTable
                #                    where inventTable.Product == retailChannelAssortedProductView.ProductID &&
                #                    inventTable.DataAreaId == retailChannelAssortedProductView.InventLocationDataAreaId &&
                #                    inventTable.DataAreaId == purchLine.DataAreaId &&
                #                    inventTable.ItemId == purchLine.ItemId;
                #
                #
                #            if (!retailChannelTable)
                #            {
                #                return checkFailed(strFmt("@RET4631", purchLine.ItemId, rboStoreTable.StoreNumber));
                #            }
                #        }
                #    }
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD configId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    purchLine.modifyInventDim(inventDim,fieldNum(InventDim,ConfigId), !purchLine.MatchingAgreementLine);
                #
                #    purchLine_ds.cacheCalculateMethod(tableMethodStr(PurchLine, itemName));
                #}
              ENDSOURCE
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    if(!EcoResProductMasterConfigurationMgr::configure(  _formControl,
                #                                                        purchLine.ItemId,
                #                                                        InventDim::findOrCreate(inventDim).InventDimId,
                #                                                        purchLine.deliveryDate(),
                #                                                        purchLine.ItemBOMId,
                #                                                        purchLine.QtyOrdered))
                #    {
                #        super(_formControl, _filterStr);
                #    }
                #}
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    if (ret)
                #    {
                #        ret = purchLine.validateModifyInventDim(inventDim,fieldNum(InventDim,ConfigId));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventSizeId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    purchLine.modifyInventDim(inventDim,fieldNum(InventDim,InventSizeId), !purchLine.MatchingAgreementLine);
                #
                #    purchLine_ds.cacheCalculateMethod(tableMethodStr(PurchLine, itemName));
                #}
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    if (ret)
                #    {
                #        ret = purchLine.validateModifyInventDim(inventDim,fieldNum(InventDim,InventSizeId));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventColorId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    purchLine.modifyInventDim(inventDim,fieldNum(InventDim,InventColorId), !purchLine.MatchingAgreementLine);
                #
                #    purchLine_ds.cacheCalculateMethod(tableMethodStr(PurchLine, itemName));
                #}
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    if (ret)
                #    {
                #        ret = purchLine.validateModifyInventDim(inventDim,fieldNum(InventDim,InventColorId));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventSiteId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    if (ret)
                #    {
                #        ret = purchLine.validateModifyInventDim(inventDim,fieldNum(InventDim,InventSiteId));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    purchLine.modifyInventDim(inventDim,fieldNum(InventDim,InventSiteId), !purchLine.MatchingAgreementLine);
                #
                #    purchLine.setAddressFromInventDim(inventDim);
                #    purchLine_ds.rereadReferenceDataSources();
                #    purchLine_ds.refresh();
                #
                #    // <GIN>
                #    if (TaxParameters::checkTaxParameters_IN() || TaxWithholdParameters_IN::checkTaxParameters())
                #    {
                #        taxInformation_IN_DS.linkActive();
                #        purchLine_IN_ds.refresh();
                #    }
                #    // </GIN>
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventGtdId_RU
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    purchLine.modifyInventDim(inventDim,
                #                              fieldNum(InventDim, InventGtdId_RU));
                #}
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret = super();
                #
                #    if (ret)
                #    {
                #        ret = purchLine.validateModifyInventDim(inventDim,
                #                                                fieldNum(InventDim, InventGtdId_RU));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventProfileId_RU
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    purchLine.modifyInventDim(inventDim, fieldNum(InventDim, InventProfileId_RU));
                #}
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    if (ret)
                #    {
                #        ret = purchLine.validateModifyInventDim(inventDim, fieldNum(InventDim, InventProfileId_RU));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventOwnerId_RU
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    if (ret)
                #    {
                #        ret = purchLine.validateModifyInventDim(inventDim, fieldNum(InventDim, InventOwnerId_RU));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    purchLine.modifyInventDim(inventDim,
                #                            fieldNum(InventDim, InventOwnerId_RU));
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventStyleId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    purchLine.modifyInventDim(inventDim,fieldNum(InventDim,InventStyleId), !purchLine.MatchingAgreementLine);
                #
                #    purchLine_ds.cacheCalculateMethod(tableMethodStr(PurchLine, itemName));
                #}
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    if (ret)
                #    {
                #        ret = purchLine.validateModifyInventDim(inventDim,fieldNum(InventDim,InventStyleId));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventStatusId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    if (ret)
                #    {
                #        ret = purchLine.validateModifyInventDim(inventDim,fieldNum(InventDim, InventStatusId));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    purchLine.modifyInventDim(inventDim,fieldNum(InventDim, InventStatusId), !purchLine.MatchingAgreementLine);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #write
          #public void write()
          #{
          #//    super();
          #}
        ENDSOURCE
        SOURCE #initValue
          #void initValue()
          #{
          #    purchLine_ds.initInventDim();
          #
          #    super();
          #}
        ENDSOURCE
        SOURCE #FiscalEstablishment
          #display FiscalEstablishmentId_BR FiscalEstablishment()
          #{
          #    return inventDim.inventSite().fiscalEstablishment().FiscalEstablishmentId;
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #EMSPurchOrderFlowRelation
          Table               #EMSPurchOrderFlowRelation
          AllowCheck          #No
          JoinSource          #PurchLine
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #init
          #public void init()
          #{
          #    super();
          #    hasEMSAccess = element.hasTableAccess(this.table());
          #    element.handleSecurity(this, hasEMSAccess);
          #}
        ENDSOURCE
        SOURCE #create
          #public void create(boolean _append = false)
          #{
          #    element.numberSeqFormHandler().formMethodDataSourceCreatePre();
          #
          #    super(_append);
          #
          #    element.numberSeqFormHandler().formMethodDataSourceCreate();
          #}
        ENDSOURCE
        SOURCE #delete
          #public void delete()
          #{
          #    element.numberSeqFormHandler().formMethodDataSourceDelete();
          #    super();
          #}
        ENDSOURCE
        SOURCE #write
          #public void write()
          #{
          #    element.numberSeqFormHandler().formMethodDataSourceWrite();
          #    super();
          #}
        ENDSOURCE
        SOURCE #validateWrite
          #public boolean validateWrite()
          #{
          #    boolean isValid;
          #
          #    isValid = super();
          #
          #    if (isValid)
          #    {
          #        isValid = element.numberSeqFormHandler().formMethodDataSourceValidateWrite(isValid);
          #    }
          #
          #    return isValid;
          #}
        ENDSOURCE
        SOURCE #initValue
          #public void initValue()
          #{
          #    super();
          #
          #    emsPurchOrderFlowRelation.RefRecId = purchLine.RecId;
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #EMSFlow
          Table               #EMSFlow
          AllowCheck          #No
          JoinSource          #EMSPurchOrderFlowRelation
          LinkType            #OuterJoin
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
          DATAFIELD SubstanceId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    // The lookup should only be available if Source is set, otherwise this field is disabled.
                #    // The lookup should only show the substances associated to the source, as well as with destination
                #    // if the destination has a value.
                #    SysTableLookup       sysTableLookup = SysTableLookup::newParameters(tableNum(EMSSubstance), _formControl);
                #    Query                query;
                #    QueryBuildDataSource qbsEMSSubstance, qbsEMSProcessReference;
                #    QueryBuildRange      queryBuildRange;
                #
                #    if (emsFlow.SourceProcessId != '' && emsFlow.IsAccidental == false)
                #    {
                #        sysTableLookup.addLookupfield(fieldNum(EMSSubstance, SubstanceId));
                #        sysTableLookup.addLookupfield(fieldNum(EMSSubstance, Description));
                #
                #        query = new Query();
                #        qbsEMSSubstance = query.addDataSource(tableNum(EMSSubstance));
                #        qbsEMSProcessReference = qbsEMSSubstance.addDataSource(tableNum(EMSProcessReference));
                #        qbsEMSProcessReference.joinMode(JoinMode::ExistsJoin);
                #        queryBuildRange = qbsEMSProcessReference.addRange(fieldNum(EMSProcessReference,SubstanceId));
                #
                #        if (emsFlow.DestinationProcessId != '')
                #        {
                #            queryBuildRange.value(
                #                    strFmt('((%2.%3 == \"%5\") && (%2.%4 == \"%6\")) && ((%1.%7 == %2.%7) || (%1.%8 == %2.%8))',
                #                       query.dataSourceTable(tableNum(EMSSubstance)).name(),
                #                       query.dataSourceTable(tableNum(EMSProcessReference)).name(),
                #                       fieldStr(EMSProcessReference,SourceProcessId),
                #                       fieldStr(EMSProcessReference,DestinationProcessId),
                #                       emsFlow.SourceProcessId,
                #                       emsFlow.DestinationProcessId,
                #                       fieldStr(EMSSubstance, SubstanceId),
                #                       fieldStr(EMSSubstance, SubstanceCategoryId)));
                #        }
                #        else
                #        {
                #             queryBuildRange.value(
                #                    strFmt('(%2.%3 == \"%5\") && ((%1.%6 == %2.%6) || (%1.%7 == %2.%7))',
                #                       query.dataSourceTable(tableNum(EMSSubstance)).name(),
                #                       query.dataSourceTable(tableNum(EMSProcessReference)).name(),
                #                       fieldStr(EMSProcessReference,SourceProcessId),
                #                       fieldStr(EMSProcessReference,DestinationProcessId),
                #                       emsFlow.SourceProcessId,
                #                       fieldStr(EMSSubstance, SubstanceId),
                #                       fieldStr(EMSSubstance, SubstanceCategoryId)));
                #        }
                #
                #        sysTableLookup.parmQuery(query);
                #        sysTableLookup.performFormLookup();
                #    }
                #}
              ENDSOURCE
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    emsFlow.UnitOfMeasure = EMSSubstance::find(emsFlow.SubstanceId).UnitOfMeasure;
                #    emsFlow_UnitOfMeasure.value(emsFlow.UnitOfMeasure);
                #    if (UnitOfMeasureConverter::canBeConverted(
                #            UnitOfMeasure::unitOfMeasureIdBySymbol(purchLine.PurchUnit),
                #            emsFlow.UnitOfMeasure))
                #    {
                #        emsFlow.UnitOfMeasure = UnitOfMeasure::findBySymbol(purchLine.PurchUnit).RecId;
                #        emsFlow.SubstanceEntryQty = purchLine.PurchQty;
                #    }
                #    else
                #    {
                #        emsFlow.SubstanceEntryQty = 0;
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD SourceProcessId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    SysTableLookup          sysTableLookup = SysTableLookup::newParameters(tableNum(EMSProcess), _formControl);
                #    Query                   query;
                #    QueryBuildDataSource    qbsEMSProcess, qbsEMSProcessReference;
                #    QueryBuildRange         queryBuildRange;
                #    EMSSubstanceCategoryId  substanceCategoryId;
                #
                #    if (emsFlow.DestinationProcessId != '')
                #    {
                #        sysTableLookup.addLookupfield(fieldNum(EMSProcess, ProcessId));
                #        sysTableLookup.addLookupfield(fieldNum(EMSProcess, Description));
                #
                #        query = new Query();
                #        qbsEMSProcess = query.addDataSource(tableNum(EMSProcess));
                #        qbsEMSProcess.addGroupByField(fieldNum(EMSProcess,ProcessId));
                #        qbsEMSProcess.addGroupByField(fieldNum(EMSProcess,Description));
                #        qbsEMSProcessReference = qbsEMSProcess.addDataSource(tableNum(EMSProcessReference));
                #        qbsEMSProcessReference.addLink(fieldNum(EMSProcess,ProcessId),fieldNum(EMSProcessReference,SourceProcessId));
                #        qbsEMSProcessReference.joinMode(JoinMode::ExistsJoin);
                #
                #        queryBuildRange = qbsEMSProcessReference.addRange(fieldNum(EMSProcessReference,DestinationProcessId));
                #        queryBuildRange.value(queryValue(emsFlow.DestinationProcessId));
                #        if (emsFlow.SubstanceId != '')
                #        {
                #            queryBuildRange = qbsEMSProcessReference.addRange(fieldNum(EMSProcessReference,SubstanceId));
                #            substanceCategoryId = EMSSubstance::find(emsFlow.SubstanceId).SubstanceCategoryId;
                #            queryBuildRange.value(
                #                  strFmt('(%1 == "%3") || (%2 == "%4")',
                #                       fieldStr(EMSProcessReference,SubstanceId),
                #                       fieldStr(EMSProcessReference,SubstanceCategoryId),
                #                       emsFlow.SubstanceId,
                #                       substanceCategoryId));
                #        }
                #
                #        sysTableLookup.parmQuery(query);
                #        sysTableLookup.performFormLookup();
                #    }
                #    else if (emsFlow.SubstanceId != '')
                #    {
                #        sysTableLookup.addLookupfield(fieldNum(EMSProcess, ProcessId));
                #        sysTableLookup.addLookupfield(fieldNum(EMSProcess, Description));
                #
                #        query = new Query();
                #        qbsEMSProcess = query.addDataSource(tableNum(EMSProcess));
                #        qbsEMSProcess.addGroupByField(fieldNum(EMSProcess,ProcessId));
                #        qbsEMSProcess.addGroupByField(fieldNum(EMSProcess,Description));
                #        qbsEMSProcessReference = qbsEMSProcess.addDataSource(tableNum(EMSProcessReference));
                #        qbsEMSProcessReference.addLink(fieldNum(EMSProcess,ProcessId),fieldNum(EMSProcessReference,SourceProcessId));
                #        qbsEMSProcessReference.joinMode(JoinMode::ExistsJoin);
                #        queryBuildRange = qbsEMSProcessReference.addRange(fieldNum(EMSProcessReference,SubstanceId));
                #        substanceCategoryId = EMSSubstance::find(emsFlow.SubstanceId).SubstanceCategoryId;
                #        queryBuildRange.value(
                #              strFmt('(%1 == "%3") || (%2 == "%4")',
                #                   fieldStr(EMSProcessReference,SubstanceId),
                #                   fieldStr(EMSProcessReference,SubstanceCategoryId),
                #                   emsFlow.SubstanceId,
                #                   substanceCategoryId));
                #
                #        sysTableLookup.parmQuery(query);
                #        sysTableLookup.performFormLookup();
                #    }
                #    else
                #    {
                #        super(_formControl, _filterStr);
                #    }
                #}
              ENDSOURCE
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    // This should control and disable the Substance and Destination if the
                #    // Source is cleared out.
                #    element.setControls();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD DestinationProcessId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    // The lookup should only be available if Source is set, otherwise this field is disabled.
                #    // The lookup should only show the processes associated to the source, as well as with the substance
                #    // if the substance has a value.
                #
                #    SysTableLookup          sysTableLookup = SysTableLookup::newParameters(tableNum(EMSProcess), _formControl);
                #    Query                   query;
                #    QueryBuildDataSource    qbsEMSProcess, qbsEMSProcessReference;
                #    QueryBuildRange         queryBuildRange;
                #    EMSSubstanceCategoryId  substanceCategoryId;
                #
                #    if (emsFlow.SourceProcessId != '' && emsFlow.IsAccidental == false)
                #    {
                #        sysTableLookup.addLookupfield(fieldNum(EMSProcess, ProcessId));
                #        sysTableLookup.addLookupfield(fieldNum(EMSProcess, Description));
                #
                #        query = new Query();
                #        qbsEMSProcess = query.addDataSource(tableNum(EMSProcess));
                #        qbsEMSProcessReference = qbsEMSProcess.addDataSource(tableNum(EMSProcessReference));
                #        qbsEMSProcessReference.addLink(fieldNum(EMSProcess,ProcessId),fieldNum(EMSProcessReference,DestinationProcessId));
                #        qbsEMSProcessReference.joinMode(JoinMode::ExistsJoin);
                #
                #        queryBuildRange = qbsEMSProcessReference.addRange(fieldNum(EMSProcessReference,SourceProcessId));
                #        queryBuildRange.value(queryValue(emsFlow.SourceProcessId));
                #
                #        if (emsFlow.SubstanceId != '')
                #        {
                #            queryBuildRange = qbsEMSProcessReference.addRange(fieldNum(EMSProcessReference,SubstanceId));
                #            substanceCategoryId = EMSSubstance::find(emsFlow.SubstanceId).SubstanceCategoryId;
                #            queryBuildRange.value(
                #                  strFmt('(%1 == "%3") || (%2 == "%4")',
                #                       fieldStr(EMSProcessReference,SubstanceId),
                #                       fieldStr(EMSProcessReference,SubstanceCategoryId),
                #                       emsFlow.SubstanceId,
                #                       substanceCategoryId));
                #        }
                #
                #        sysTableLookup.parmQuery(query);
                #        sysTableLookup.performFormLookup();
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #init
          #public void init()
          #{
          #    super();
          #    hasEMSAccess = element.hasTableAccess(this.table());
          #    element.handleSecurity(this, hasEMSAccess);
          #}
        ENDSOURCE
        SOURCE #validateWrite
          #public boolean validateWrite()
          #{
          #    boolean isValid;
          #
          #    // Because of the join type between EMSFlow and EMSInvoiceRegisterFlowRelation tables,
          #    // the FlowId is not set during EMSFlow.initValue that's why setting FlowID is
          #    // intentionally done in this method, before writing to the table.
          #    emsFlow.FlowId = !emsFlow.FlowId ? emsPurchOrderFlowRelation.FlowId : emsFlow.FlowId;
          #
          #    isValid = super();
          #
          #    return isValid;
          #}
        ENDSOURCE
        SOURCE #create
          #public void create(boolean _append = false)
          #{
          #    super(_append);
          #
          #    // This should control and disable the Substance and Destination since the
          #    // Source is still empty at this point.
          #    element.setControls();
          #}
        ENDSOURCE
        SOURCE #initValue
          #public void initValue()
          #{
          #
          #    super();
          #
          #    // Set the sourceProcessId if only one is available.
          #    if (EMSProcessRelation::typeLikeCount(EMSRelationTypes::Vendor,
          #                                      tableNum(VendTable),
          #                                      VendTable::find(purchTable.OrderAccount).RecId) == 1)
          #    {
          #        emsFlow.SourceProcessId = EMSProcessRelation::find(EMSRelationTypes::Vendor,
          #                                          tableNum(VendTable),
          #                                          VendTable::find(purchTable.OrderAccount).RecId).ProcessID;
          #    }
          #    // Set the substanceId if only one is available.
          #    if (EMSSubstance::itemLikeCount(purchLine.ItemId, purchLine.InventDimId) == 1)
          #    {
          #        emsFlow.SubstanceId = EMSSubstance::findbyItemId(purchLine.ItemId, purchLine.InventDimId).SubstanceId;
          #        emsFlow.UnitOfMeasure = EMSSubstance::find(emsFlow.SubstanceId).UnitOfMeasure;
          #        if (UnitOfMeasureConverter::canBeConverted(
          #                UnitOfMeasure::unitOfMeasureIdBySymbol(purchLine.PurchUnit),
          #                emsFlow.UnitOfMeasure))
          #        {
          #            emsFlow.UnitOfMeasure = UnitOfMeasure::findBySymbol(purchLine.PurchUnit).RecId;
          #            emsFlow.SubstanceEntryQty = purchLine.PurchQty;
          #        }
          #    }
          #    // Set the destinationprocessId if only one is available.
          #    if (EMSProcessReference::destinationProcessLikeCount(emsFlow.SourceProcessId, emsFlow.SubstanceId) == 1)
          #    {
          #        emsFlow.DestinationProcessId = EMSProcessReference::find(emsFlow.SourceProcessId, emsFlow.SubstanceId).DestinationProcessId;
          #    }
          #
          #
          #    emsFlow.FlowOriginType = EMSFlowOriginType::PurchaseOrder;
          #    emsFlow.TransactionCurrencyAmount = purchLine.LineAmount;
          #    emsFlow.TransactionCurrency       = purchLine.CurrencyCode;
          #    emsFlow.TransDate                 = purchLine.DeliveryDate;
          #}
        ENDSOURCE
        SOURCE #write
          #public void write()
          #{
          #    emsFlow.ScopeType = EMSProcessReference::find(emsFlow.SourceProcessId, emsFlow.SubstanceId).ScopeType;
          #    super();
          #}
        ENDSOURCE
        SOURCE #active
          #public int active()
          #{
          #    int ret;
          #
          #    ret = super();
          #
          #    flow_SourceProcessId.allowEdit(!emsFlow.IsProcessed);
          #    flow_SubstanceId.allowEdit(!emsFlow.IsProcessed);
          #    flow_SubstanceEntryQty.allowEdit(!emsFlow.IsProcessed);
          #    emsFlow_UnitOfMeasure.allowEdit(!emsFlow.IsProcessed);
          #    flow_DestinationProcessId.allowEdit(!emsFlow.IsProcessed);
          #    flow_FromDateTime.allowEdit(!emsFlow.IsProcessed);
          #    flow_ToDateTime.allowEdit(!emsFlow.IsProcessed);
          #    flow_Amount.allowEdit(!emsFlow.IsProcessed);
          #    emsFlow_TransactionCurrency.allowEdit(!emsFlow.IsProcessed);
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #delete
          #public void delete()
          #{
          #    element.numberSeqFormHandler().formMethodDataSourceDelete();
          #    super();
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #PDSAdvancedPriceInfo
          Table               #PDSAdvancedPriceInfo
          AllowCheck          #No
          AllowEdit           #No
          AllowCreate         #No
          AllowDelete         #No
          JoinSource          #PurchLine
          LinkType            #OuterJoin
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #init
          #public void init()
          #{
          #    if (!#PDSPotencyEnabled)
          #    {
          #        pdsAdvancedPriceInfo_DS.joinSource(null);
          #        pdsAdvancedPriceInfo_DS.linkType(QueryDataLinkType::None);
          #    }
          #    super();
          #}
        ENDSOURCE
        SOURCE #write
          #public void write()
          #{
          #    //super();
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #PurchTable_Intrastat
          Table               #PurchTable_Intrastat
          JoinSource          #PurchTable
          LinkType            #OuterJoin
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #PurchLine_Intrastat
          Table               #PurchLine_Intrastat
          JoinSource          #PurchLine
          LinkType            #OuterJoin
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #PurchTable_BR
          Table               #PurchTable_BR
          JoinSource          #PurchTable
          LinkType            #Passive
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
          DATAFIELD CFPSId_BR
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    CFPSTable_BR::lookup(_formControl, SalesPurchBoth_BR::Purch);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          REFERENCEFIELD SalesPurchOperationType_BR
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #validate
                #public boolean validate()
                #{
                #    CFOPAttributesDeterminer_BR cfopAttributesDeterminer;
                #    boolean                     ret;
                #
                #    cfopAttributesDeterminer = CFOPAttributesDeterminer_BR::construct(purchLine);
                #
                #    ret = salesPurchOperationTypeController_BR.validate(purchTable_BR.SalesPurchOperationType_BR, cfopAttributesDeterminer);
                #
                #    if (ret && !purchTable.createInventTrans_BR())
                #    {
                #        if (Box::yesNo("@GLS104", DialogButton::No) == DialogButton::No)
                #        {
                #            return false;
                #        }
                #    }
                #
                #    return super() && ret;
                #}
              ENDSOURCE
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    CFOPAttributesDeterminer_BR cfopAttributesDeterminer;
                #    SalesPurchOperationTypeController_BR s;
                #
                #    cfopAttributesDeterminer = CFOPAttributesDeterminer_BR::construct(purchLine);
                #    s = new SalesPurchOperationTypeController_BR (element.name());
                #    return s.lookupReference(_formReferenceControl, cfopAttributesDeterminer);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #init
          #public void init()
          #{
          #    if (isPurchTableEnabled_BR)
          #    {
          #        this.linkType(FormLinkType::OuterJoin);
          #    }
          #    super();
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #RetailPackagePurch
          Table               #RetailPackagePurch
          AllowCheck          #No
          JoinSource          #PurchLine
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
          DATAFIELD PackageId
            PROPERTIES
              AllowEdit           #No
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD Qty
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #/// <summary>
                #/// Retail Package Purchase - Qty - Modified
                #/// </summary>
                #public void modified()
                #{
                #    super();
                #
                #    purchTable_ds.reReadLines();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD QtyReceived
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #/// <summary>
                #/// Retail Package Purch - Qty Received - Modified
                #/// </summary>
                #public void modified()
                #{
                #    super();
                #
                #    purchTable_ds.reReadLines();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #delete
          #/// <summary>
          #/// Retail Package Purch - Delete
          #/// </summary>
          #public void delete()
          #{
          #    super();
          #
          #    purchTable_ds.reread();
          #    purchTable_ds.reReadLines();
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #RetailSumLines
          Table               #RetailSumLines
          Index               #PurchLineIdx
          CounterField        #LineNum
          AllowCheck          #No
          JoinSource          #PurchTable
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
          DATAFIELD ItemId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #/// <summary>
                #/// Retail Sum Lines - Item ID - Modified
                #/// </summary>
                #public void modified()
                #{
                #    ;
                #
                #    retailSumLines_DS.inventLocationIdActive();
                #
                #    super();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #write
          #/// <summary>
          #/// Retail Sum Lines - Write
          #/// </summary>
          #public void write()
          #{
          #    super();
          #
          #    purchLine_ds.refresh();
          #    purchLine_ds.research();
          #    purchLine_ds.active();
          #
          #}
        ENDSOURCE
        SOURCE #active
          #/// <summary>
          #/// Retail Sum LInes - Active
          #/// </summary>
          #/// <returns>
          #/// boolean
          #/// </returns>
          #public int active()
          #{
          #    int ret;
          #
          #    ret = super();
          #
          #    this.inventLocationIdActive();
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #inventLocationIdActive
          #/// <summary>
          #/// Retail Sum Lines - Invent Location ID active
          #/// </summary>
          #void inventLocationIdActive()
          #{
          #    InventDimGroupFieldSetup inventDimGroupFieldSetup = InventDimGroupSetup::newItemId(retailSumLines.ItemId).getFieldSetup(fieldNum(InventDim,InventLocationId));
          #
          #    fshSumLines_InventLocationId.allowEdit(inventDimGroupFieldSetup.isActive());
          #}
        ENDSOURCE
        SOURCE #initValue
          #/// <summary>
          #/// Retail Sum Lines - Initilize Value
          #/// </summary>
          #public void initValue()
          #{
          #    super();
          #
          #    retailSumlines.InventLocationId = purchTable.InventLocationId;
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #EximPurchLine_IN
          Table               #EximPurchLine_IN
          Index               #PurchLineRecIdx
          AllowCheck          #No
          AllowDelete         #No
          JoinSource          #PurchLine
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
          REFERENCEFIELD EximIncentiveSchemeGroup
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    if (eximPurchLine_IN.EximIncentiveSchemeGroup)
                #    {
                #        eximPurchLine_IN.EximPorts = EximIncentiveSchemeGroup_IN::find(eximPurchLine_IN.EximIncentiveSchemeGroup).EximPortId;
                #    }
                #
                #    eximPurchLine_IN_ds.object(fieldNum(EximPurchLine_IN, ApplyDEPB)).allowEdit(element.enableApplyDEPB_IN());
                #    eximPurchLine_IN_ds.rereadReferenceDataSources();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #active
          #public int active()
          #{
          #    int ret;
          #
          #    ret = super();
          #    if (ret)
          #    {
          #        eximPurchLine_IN_ApplyDEPB.allowEdit(element.enableApplyDEPB_IN());
          #    }
          #
          #    return ret;
          #}
          #
        ENDSOURCE
        SOURCE #prev
          #int prev()
          #{
          #    int ret;
          #
          #    ret = purchLine_ds.prev();
          #
          #    return ret;
          #}
          #
        ENDSOURCE
        SOURCE #next
          #int next()
          #{
          #    int ret;
          #
          #    ret = purchLine_ds.next();
          #
          #    return ret;
          #}
          #
        ENDSOURCE
        SOURCE #last
          #int last()
          #{
          #    int ret;
          #
          #    ret = purchLine_ds.last();
          #
          #    return ret;
          #}
          #
        ENDSOURCE
        SOURCE #first
          #int first()
          #{
          #    int ret;
          #
          #    ret = purchLine_ds.first();
          #
          #    return ret;
          #}
          #
        ENDSOURCE
        SOURCE #create
          #public void create(boolean _append = false)
          #{
          #    purchLine_ds.create();
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #Tax1099BoxDetail
          Table               #Tax1099BoxDetail
          AllowCheck          #No
          JoinSource          #PurchLine
        ENDPROPERTIES
        
        FIELDLIST
          DATAFIELD State
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    tax1099BoxDetail.Tax1099StateTaxID = VendStateTaxID::findByVendState(purchTable.InvoiceAccount,tax1099BoxDetail.State).StateTaxID;
                #
                #    element.redraw();
                #}
              ENDSOURCE
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    Tax1099BoxDetail::lookupTax1099State(_formControl, purchTable.InvoiceAccount);
                #}
              ENDSOURCE
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    Tax1099BoxDetail::jumpRefTax1099State(purchTable.InvoiceAccount,tax1099BoxDetail.State);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #write
          #public void write(boolean _tax1099DetailRequired = false)
          #{
          #
          #    Tax1099Fields tax1099Fields;
          #
          #    if (_tax1099DetailRequired)
          #    {
          #        //Called as a child record for PurchLine
          #        super();
          #        tax1099Fields = Tax1099Fields::find(purchLine.Tax1099Fields);
          #
          #        if (tax1099Fields.Tax1099Box == #G_2)
          #        {
          #            if(tax1099BoxDetail.Tax1099TaxYear > year(systemDateGet()) && tax1099BoxDetail.Tax1099TaxYear < (year(systemDateGet()) + 15))
          #            {
          #                warning("@SPS2");
          #            }
          #        }
          #    }
          #
          #    else if(purchLine.validateWrite())
          #    {
          #        purchline_ds.write();
          #    }
          #}
        ENDSOURCE
        SOURCE #validateWrite
          #public boolean validateWrite()
          #{
          #    boolean         isValid;
          #    Tax1099Fields   tax1099Fields;
          #
          #
          #    isValid = super();
          #    tax1099Fields = Tax1099Fields::find(purchLine.Tax1099Fields);
          #
          #    if(isValid)
          #    {
          #        if (isValid && tax1099Fields.Tax1099Box == #G_1)
          #        {
          #            if ((abs(tax1099BoxDetail.Tax1099StateTaxWithheld) > abs(purchLine.Tax1099Amount)))
          #            {
          #                isValid = checkFailed(strFmt("@SPS1943"));
          #            }
          #        }
          #
          #        if (tax1099Fields.Tax1099Box == #S_2)
          #        {
          #            if ((tax1099BoxDetail.Tax1099DateOfClosing == dateNull()) || (tax1099BoxDetail.Tax1099AddressorLegalDesc ==""))
          #            {
          #                isValid = checkFailed("@SPS3");
          #            }
          #        }
          #
          #        else if (tax1099Fields.Tax1099Box == #G_2)
          #        {
          #            if ((tax1099BoxDetail.Tax1099TaxYear < (year(systemDateGet())-15)) || (tax1099BoxDetail.Tax1099TaxYear > (year(systemDateGet()) + 10)) )
          #            {
          #                isValid = checkFailed(strFmt("@SPS17", "@SPS1064", int2str(year(systemDateGet()) - 15), int2str(year(systemDateGet()) + 10)));
          #            }
          #        }
          #    }
          #
          #    return isValid;
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #RAssetPurchTrans
          Table               #RAssetPurchTrans
          Index               #TableRecAssetIdx
          AllowCheck          #No
          JoinSource          #PurchLine
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #active
          #public int active()
          #{
          #    int ret = super();
          #
          #    rassetpurchTrans_ds.allowDelete(rAssetPurchTrans.Posted ?
          #                                    false :
          #                                    purchTableForm.editLineAllowed(purchLine) && (element.allowEditAsset_RU() || purchLine.ProcurementCategory));
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #write
          #public void write()
          #{
          #    super();
          #    purchTable_ds.reread();
          #    purchTable_ds.refresh();
          #    purchTable_ds.selectionChanged();
          #}
        ENDSOURCE
        SOURCE #delete
          #public void delete()
          #{
          #    super();
          #    purchTable_ds.reread();
          #    purchTable_ds.refresh();
          #    purchTable_ds.selectionChanged();
          #}
        ENDSOURCE
        SOURCE #initValue
          #public void initValue()
          #{
          #    super();
          #    rAssetPurchTrans.initFromPurchLine(purchLine);
          #}
        ENDSOURCE
        SOURCE #linkActive
          #public void linkActive()
          #{
          #    boolean allowEdit;
          #
          #    super();
          #
          #    allowEdit = purchTableForm.editLineAllowed(purchLine) && (element.allowEditAsset_RU() || purchLine.ProcurementCategory);
          #
          #    rassetpurchTrans_ds.allowEdit(allowEdit);
          #    rassetpurchTrans_ds.allowCreate(allowEdit);
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #TaxInformation_IN
          Table               #TaxInformation_IN
          AllowCheck          #No
          AllowEdit           #No
          AllowCreate         #No
          AllowDelete         #No
          JoinSource          #PurchLine_IN
        ENDPROPERTIES
        
        FIELDLIST
          REFERENCEFIELD SalesTaxRegistrationNumber
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    TaxRegistrationNumbers_IN::jumpRef(
                #        TaxRegistrationNumbers_IN::find(taxInformation_IN.SalesTaxRegistrationNumber).RegistrationNumber,
                #        TaxType_IN::SalesTax,
                #        purchLine);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD TIN
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    TaxRegistrationNumbers_IN::jumpRef(
                #        TaxRegistrationNumbers_IN::find(taxInformation_IN.tin).RegistrationNumber,
                #        TaxType_IN::VAT,
                #        purchLine);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD TAN
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    TaxWithholdRegNumbers_IN::jumpRef(
                #        TaxWithholdRegNumbers_IN::find(taxInformation_IN.tin).RegistrationNumber,
                #        purchLine);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD ManECCRegistrationNumberTable
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    TaxRegistrationNumbers_IN::jumpRef(
                #        TaxRegistrationNumbers_IN::find(taxInformation_IN.ManECCRegistrationNumberTable).RegistrationNumber,
                #        TaxType_IN::Excise,
                #        purchLine);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD TraderECCRegistrationNumberTable
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    TaxRegistrationNumbers_IN::jumpRef(
                #        TaxRegistrationNumbers_IN::find(taxInformation_IN.TraderECCRegistrationNumberTable).RegistrationNumber,
                #        TaxType_IN::Excise,
                #        purchLine);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD IECRegistrationNumberTable
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    TaxRegistrationNumbers_IN::jumpRef(
                #        TaxRegistrationNumbers_IN::find(taxInformation_IN.iecRegistrationNumberTable).RegistrationNumber,
                #        TaxType_IN::Customs,
                #        purchLine);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD STCRegistrationNumberTable
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    TaxRegistrationNumbers_IN::jumpRef(
                #        TaxRegistrationNumbers_IN::find(taxInformation_IN.stcRegistrationNumberTable).RegistrationNumber,
                #        TaxType_IN::ServiceTax,
                #        purchLine);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD ECCNumber
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    TaxRegistrationNumbers_IN::jumpRef(
                #        TaxRegistrationNumbers_IN::find(taxInformation_IN.eccNumber).RegistrationNumber,
                #        TaxType_IN::Excise,
                #        purchLine);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #PurchLine_IN
          Table               #PurchLine_IN
          JoinSource          #PurchLine
          LinkType            #Passive
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
          REFERENCEFIELD CompanyLocation_IN
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    TaxInformation_IN::jumpRefLocationAddressForm(purchLine_IN.CompanyLocation_IN, this);
                #}
                #
              ENDSOURCE
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    purchLine_IN_DS.object(fieldNum(PurchLine_IN, TaxInformation_IN)).modified();
                #    purchLine.DeliveryPostalAddress = LogisticsPostalAddress::findByLocation(purchLine_IN.CompanyLocation_IN).RecId;
                #    purchLine_DS.object(fieldNum(PurchLine, DeliveryPostalAddress)).modified();
                #}
              ENDSOURCE
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    return TaxLogisticsLocationControllerHelper_IN::lookupAllLogisticsLocation(_formReferenceControl,inventDim.InventLocationId,inventDim.InventSiteId,true);
                #}
                #
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD CustomsTariffCodeTable_IN
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #resolveReference
                #public Common resolveReference(FormReferenceControl _formReferenceControl)
                #{
                #    return CustomsTariffCodeTable_IN::resolveCustomsTariffCode(_formReferenceControl, Direction_IN::Import);
                #}
              ENDSOURCE
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    Common ret;
                #
                #    ret = CustomsTariffCodeTable_IN::lookupDirectionImportExport(_formReferenceControl, enum2str(Direction_IN::Import));
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          DATAFIELD DirectSettlement_IN
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    if (purchLine_IN.DirectSettlement_IN != DirectSettlement_IN::PLA)
                #    {
                #        purchLine_IN.cenvatCreditAvailed_IN = NoYes::No;
                #    }
                #    element.enableFieldsActive_IN();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ExciseRecordType_IN
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    if (purchLine_IN.ExciseRecordType_IN != ExciseRecordType_IN::RG23C)
                #    {
                #        purchLine_IN.cenvatCreditAvailed_IN = NoYes::No;
                #    }
                #    element.enableFieldsActive_IN();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ExciseType_IN
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    purchLine_IN.SalesPurchJournalLineExtension_IN::initFromPrimaryTable(purchLine);
                #
                #    purchLine_IN_ds.enableExciseFields_IN();
                #    purchLine_IN_DS.refresh();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          REFERENCEFIELD TaxInformation_IN
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    TaxInformation_IN::jumpRef(purchLine_IN.TaxInformation_IN, this);
                #}
              ENDSOURCE
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    taxInformation_IN_DS.linkActive();
                #}
              ENDSOURCE
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    return TaxInformation_IN::lookup(_formReferenceControl, purchline_IN.CompanyLocation_IN);
                #}
                #
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          DATAFIELD TCSGroup_IN
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    TaxWithholdGroupHeading::lookupTaxComponentGroup_IN(_formControl, TaxWithholdCodeType_IN::TCS);
                #}
              ENDSOURCE
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    element.setTaxWithholdEnabled_IN();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD TDSGroup_IN
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    TaxWithholdGroupHeading::lookupTaxComponentGroup_IN(_formControl, TaxWithholdCodeType_IN::TDS);
                #}
              ENDSOURCE
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    element.setTaxWithholdEnabled_IN();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #active
          #public int active()
          #{
          #    int ret;
          #
          #    ret = super();
          #
          #    if (ret)
          #    {
          #        purchLine_IN_ds.rereadReferenceDataSources();
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #write
          #public void write()
          #{
          #    if (purchLine.RecId && purchLine_IN.RecId)
          #    {
          #        purchLine.type().update_IN();
          #    }
          #
          #    super();
          #}
        ENDSOURCE
        SOURCE #leaveRecord
          #public boolean leaveRecord(boolean _forceUpdate = false)
          #{
          #    boolean ret;
          #
          #    if (purchLine_IN.PurchLine)
          #    {
          #        ret = super(_forceUpdate);
          #    }
          #    else
          #    {
          #        ret = true;
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #validateWrite
          #public boolean validateWrite()
          #{
          #    boolean ret = true;
          #
          #    if (purchLine_IN.PurchLine)
          #    {
          #        ret = super();
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #exciseNone_IN
          #edit ExciseNone_IN exciseNone_IN(
          #    boolean         _set,
          #    ExciseNone_IN   _exciseNone_IN)
          #{
          #    ExciseNone_IN           exciseNone;
          #    purchLine_IN.ExciseRecordType_IN = TaxExciseTypeController_IN::exciseNone(_set,_exciseNone_IN, purchLine_IN.ExciseRecordType_IN);
          #
          #    exciseNone = taxExciseTypeController.exciseRecordType2ExciseNone(purchLine_IN.ExciseRecordType_IN);
          #    return exciseNone;
          #}
        ENDSOURCE
        SOURCE #init
          #public void init()
          #{
          #    if (isPurchLine_INEnabled)
          #    {
          #        this.linkType(FormLinkType::OuterJoin);
          #    }
          #    super();
          #}
        ENDSOURCE
        SOURCE #exciseManufacture_IN
          #edit ExciseManufacture_IN exciseManufacture_IN(
          #    boolean                 _set,
          #    ExciseManufacture_IN    _exciseManufacture_IN)
          #{
          #    ExciseManufacture_IN    exciseManufacture;
          #
          #    purchLine_IN.ExciseRecordType_IN = TaxExciseTypeController_IN::exciseManufacture(
          #        _set,
          #        _exciseManufacture_IN,
          #        purchLine_IN.ExciseRecordType_IN);
          #
          #    exciseManufacture = taxExciseTypeController.exciseRecordType2ExciseManufacture(purchLine_IN.ExciseRecordType_IN);
          #
          #    return exciseManufacture;
          #}
        ENDSOURCE
        SOURCE #exciseTraders_IN
          #edit ExciseTraders_IN exciseTraders_IN(
          #    boolean          _set,
          #    ExciseTraders_IN _exciseTraders_IN)
          #{
          #    ExciseTraders_IN        exciseTraders;
          #
          #    purchLine_IN.ExciseRecordType_IN = TaxExciseTypeController_IN::exciseTraders(_set,_exciseTraders_IN, purchLine_IN.ExciseRecordType_IN);
          #
          #    exciseTraders = taxExciseTypeController.exciseRecordType2ExciseTraders(purchLine_IN.ExciseRecordType_IN);
          #
          #    return exciseTraders;
          #}
        ENDSOURCE
        SOURCE #enableExciseFields_IN
          #public void enableExciseFields_IN()
          #{
          #    if (TaxParameters::isExciseEnable_IN())
          #    {
          #        taxExciseTypeController.buildUI(
          #            purchLine_IN.ExciseType_IN,
          #            purchLine_IN.ExciseRecordType_IN,
          #            purchLine.ItemId,
          #            purchLine.PurchQty > 0 ? TaxDirection::IncomingTax : TaxDirection::OutgoingTax);
          #    }
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #PurchLine_W
          Table               #PurchLine_W
          JoinSource          #PurchLine
          LinkType            #Passive
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
          DATAFIELD CountryRegionName_RU
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    PurchLine::lookupCountryRegionName_RU(_formControl, purchTable.LanguageId);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD MarkupCode_RU
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    element.enableLedgerDimensionDefaultAccount();
                #}
              ENDSOURCE
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    MarkupTable::serviceMarkupCodeLookup_RU(_formControl);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #write
          #public void write()
          #{
          #    super();
          #
          #    // <GMY>
          #    if (isIsoMY)
          #    {
          #        if (purchTable.hasLinesWithoutRefrence_MY() && purchTable.hasLinesWithRefrence_MY())
          #        {
          #            if (!isWrnPrintedMY)
          #            {
          #                warning("@SYP4860678");
          #                isWrnPrintedMY = true;
          #            }
          #        }
          #        else
          #        {
          #            isWrnPrintedMY = false;
          #        }
          #    }
          #    // </GMY>
          #}
        ENDSOURCE
        SOURCE #validateWrite
          #public boolean validateWrite()
          #{
          #    boolean ret;
          #
          #    if (purchLine_W.PurchLine)
          #    {
          #        ret = super();
          #    }
          #    else
          #    {
          #        ret = true;
          #    }
          #
          #    // <GMY>
          #    if (ret && isIsoMY)
          #    {
          #        if (purchLine_W.RefInvoiceId_MY && purchLine_W.RefInvoiceDate_MY)
          #        {
          #            if(!VendInvoiceJour::existByInvoiceIdTransDate(purchLine_W.RefInvoiceId_MY, purchLine_W.RefInvoiceDate_MY))
          #            {
          #                ret = checkFailed("@SYP4860680");
          #            }
          #        }
          #        else if ((purchLine_W.RefInvoiceId_MY && !purchLine_W.RefInvoiceDate_MY) || (!purchLine_W.RefInvoiceId_MY && purchLine_W.RefInvoiceDate_MY))
          #        {
          #            ret = checkFailed("@SYP4860689");
          #        }
          #    }
          #    // <GMY>
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #init
          #public void init()
          #{
          #    if (isPurchLine_WEnabled)
          #    {
          #        this.linkType(FormLinkType::OuterJoin);
          #    }
          #    super();
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #PurchTable_W
          Table               #PurchTable_W
          JoinSource          #PurchTable
          LinkType            #Passive
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
          DATAFIELD TCSGroup_IN
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    element.setTaxWithholdEnabled_IN();
                #}
              ENDSOURCE
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    TaxWithholdGroupHeading::lookupTaxComponentGroup_IN(_formControl, TaxWithholdCodeType_IN::TCS);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD TDSGroup_IN
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    element.setTaxWithholdEnabled_IN();
                #}
              ENDSOURCE
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    TaxWithholdGroupHeading::lookupTaxComponentGroup_IN(_formControl, TaxWithholdCodeType_IN::TDS);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          REFERENCEFIELD InvoicePostalAddress_TH
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    Common      ret;
                #    VendTable   vendTable = VendTable::find(purchTable.InvoiceAccount);
                #
                #    ret = LogisticsLocationSelectionLookup::lookupAddressForm(_formReferenceControl, vendTable, [LogisticsLocationRoleType::Invoice], false);
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          DATAFIELD GSTApprovalNumber_MY
            PROPERTIES
              AllowEdit           #No
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #init
          #public void init()
          #{
          #    if (isPurchTableEnabled_W)
          #    {
          #        this.linkType(FormLinkType::OuterJoin);
          #    }
          #    super();
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #PurchTable_RU
          Table               #PurchTable_RU
          JoinSource          #PurchTable
          LinkType            #Passive
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
          REFERENCEFIELD AgreementHeaderExt_RU
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    // force a refresh because the agreement document title is indirectly related on a different datasource
                #    purchTable_DS.cacheCalculateMethod(tableMethodStr(PurchTable, agreementDocumentTitle_RU));
                #    purchTable_DS.refresh();
                #}
                #
              ENDSOURCE
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    Common ret;
                #
                #    ret = PurchAgreementHeaderExt_RU::purchAgreementReferenceLookup(_formReferenceControl,
                #        purchTable.OrderAccount,
                #        purchTable.AccountingDate,
                #        purchTable.InvoiceAccount);
                #
                #    return ret;
                #}
                #
              ENDSOURCE
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    PurchAgreementHeaderExt_RU::purchAgreementJumpRef(purchTable_RU.AgreementHeaderExt_RU);
                #}
                #
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #init
          #public void init()
          #{
          #    if (isPurchTableEnabled_RU)
          #    {
          #        this.linkType(FormLinkType::OuterJoin);
          #    }
          #    super();
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #WHSLoadLine
          Table               #WHSLoadLine
          AllowCheck          #No
          AllowEdit           #No
          AllowCreate         #No
          AllowDelete         #No
          JoinSource          #PurchLine
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #executeQuery
          #public void executeQuery()
          #{
          #    if (tabLoad.isActivePage())
          #    {
          #        super();
          #    }
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #TMSPurchTable
          Table               #TMSPurchTable
          AllowCheck          #No
          JoinSource          #PurchTable
          LinkType            #OuterJoin
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
          DATAFIELD CarrierCode
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    if (tmsPurchTable.RecId == 0)
                #    {
                #        tmsPurchTable.initFromPurchTable(purchTable.PurchId);
                #    }
                #
                #    super();
                #
                #    tmsPurchTable.ModeCode  = TMSCarrier::find(tmsPurchTable.CarrierCode).ModeCode;
                #
                #    if (!tmsPurchTable.CarrierCode
                #    || !TMSCarrierService::exist(tmsPurchTable.CarrierServiceCode, tmsPurchTable.CarrierCode))
                #    {
                #        tmsPurchTable.CarrierServiceCode    = "";
                #    }
                #
                #    tmsPurchTable_ds.refresh();
                #
                #    element.tmsUpdatePurchTable();
                #
                #    element.enableTMSFields();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CarrierServiceCode
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    if (tmsPurchTable.RecId == 0)
                #    {
                #        tmsPurchTable.initFromPurchTable(purchTable.PurchId);
                #    }
                #
                #    super();
                #
                #    element.tmsUpdatePurchTable();
                #
                #    element.enableTMSFields();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ModeCode
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    if (tmsPurchTable.RecId == 0)
                #    {
                #        tmsPurchTable.initFromPurchTable(purchTable.PurchId);
                #    }
                #
                #    super();
                #
                #    purchTable_ds.reread();
                #    purchTable_ds.refresh();
                #
                #    element.enableTMSFields();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #validateWrite
          #/// <summary>
          #/// Determines whether the current record is valid and ready to be written to the database.
          #/// </summary>
          #/// <returns>
          #/// true if the record is valid; otherwise, false.
          #/// </returns>
          #/// <remarks>
          #/// Some purchase table records don't have a corresponding tms transportation table record
          #/// so call super only if corresponding record exists
          #/// </remarks>
          #public boolean validateWrite()
          #{
          #    boolean ret = true;
          #
          #    if (tmsPurchTable.CarrierCode != "" && tmsPurchTable.CarrierServiceCode == "")
          #    {
          #        ret = checkFailed("@TRX733");
          #    }
          #
          #    if (ret
          #    && tmsPurchTable.CarrierCode
          #    && tmsPurchTable.CarrierServiceCode
          #    && !TMSCarrierService::exist(tmsPurchTable.CarrierServiceCode, tmsPurchTable.CarrierCode))
          #    {
          #        ret = checkFailed("@TRX734");
          #    }
          #
          #    if (ret && tmsPurchTable.RecId != 0)
          #    {
          #        ret = super();
          #    }
          #
          #    return ret;
          #}
          #
        ENDSOURCE
        SOURCE #write
          #/// <summary>
          #///    Persists a record in the database when super is called.
          #/// </summary>
          #/// <remarks>
          #/// Some purchase table records don't have a corresponding tms transportation table record
          #/// so call write method and not super and it will update database properly
          #/// </remarks>
          #public void write()
          #{
          #    if (!tmsPurchTable.RecId)
          #    {
          #        tmsPurchTable.initFromPurchTable(purchTable.PurchId);
          #    }
          #
          #    tmsPurchTable.write();
          #}
          #
        ENDSOURCE
        SOURCE #active
          #public int active()
          #{
          #    int ret;
          #
          #    ret = super();
          #
          #    element.enableTMSFields();
          #
          #    return ret;
          #}
          #
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #PurchRFQReplyLinePurchLine
          Table               #PurchRFQReplyLinePurchLine
          Index               #PurchRFQReplyLineIdx
          AllowCheck          #No
          AllowEdit           #No
          AllowCreate         #No
          AllowDelete         #No
          JoinSource          #PurchLine
          LinkType            #OuterJoin
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #validateWrite
          #public boolean validateWrite()
          #{
          #    return true;
          #}
        ENDSOURCE
        SOURCE #write
          #public void write()
          #{
          #    // Commented out call to Super() to avoid unintentional insert of new record
          #    // or updating an existing record ( Kernel behavior caused by Outerjoin to PurchLine)
          #
          #    //super();
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #WHSPurchLine
          Table               #WHSPurchLine
          AllowCheck          #No
          JoinSource          #PurchLine
          LinkType            #OuterJoin
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #validateWrite
          #public boolean validateWrite()
          #{
          #    boolean ret;
          #
          #    if (whsPurchLine.RecId)
          #    {
          #        ret = super();
          #    }
          #    else
          #    {
          #        ret = true;
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #write
          #public void write()
          #{
          #    if (whsPurchLine.RecId)
          #    {
          #        super();
          #    }
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
  ENDOBJECTBANK
  
  REFERENCEDATASOURCES
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #LogisticsPostalAddressHeader
          Table               #LogisticsPostalAddress
          JoinSource          #PurchTable
          JoinRelation        #DeliveryPostalAddress
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #LogisticsPostalAddressLine
          Table               #LogisticsPostalAddress
          JoinSource          #PurchLine
          JoinRelation        #DeliveryPostalAddress
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #CustomsTariffCodeTable_IN
          Table               #CustomsTariffCodeTable_IN
          JoinSource          #PurchLine_IN
          JoinRelation        #CustomsTariffCodeTable_IN
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #ExciseTariffCodes_IN
          Table               #ExciseTariffCodes_IN
          JoinSource          #PurchLine_IN
          JoinRelation        #ExciseTariffCodes_IN
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #SalesTaxFormTypes_IN
          Table               #SalesTaxFormTypes_IN
          JoinSource          #PurchLine_IN
          JoinRelation        #SalesTaxFormTypes_IN
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #ServiceCodeTable_IN
          Table               #ServiceCodeTable_IN
          JoinSource          #PurchLine_IN
          JoinRelation        #ServiceCodeTable_IN
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #InvoicePostalAddress
          Table               #LogisticsPostalAddress
          JoinSource          #PurchTable_W
          JoinRelation        #InvoicePostalAddress_TH
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
    ENDDATASOURCE
  ENDREFERENCEDATASOURCES
  
  JOINS
    PurchLine PurchTable
    PurchLineForeignTradeCategory PurchLine
    InventDim PurchLine
    EMSPurchOrderFlowRelation PurchLine
    EMSFlow EMSPurchOrderFlowRelation
    PDSAdvancedPriceInfo PurchLine
    PurchTable_Intrastat PurchTable
    PurchLine_Intrastat PurchLine
    PurchTable_BR PurchTable
    RetailPackagePurch PurchLine
    RetailSumLines PurchTable
    EximPurchLine_IN PurchLine
    Tax1099BoxDetail PurchLine
    RAssetPurchTrans PurchLine
    TaxInformation_IN PurchLine_IN
    PurchLine_IN PurchLine
    PurchLine_W PurchLine
    PurchTable_W PurchTable
    PurchTable_RU PurchTable
    WHSLoadLine PurchLine
    TMSPurchTable PurchTable
    PurchRFQReplyLinePurchLine PurchLine
    WHSPurchLine PurchLine
    LogisticsPostalAddressHeader PurchTable
    LogisticsPostalAddressLine PurchLine
    CustomsTariffCodeTable_IN PurchLine_IN
    ExciseTariffCodes_IN PurchLine_IN
    SalesTaxFormTypes_IN PurchLine_IN
    ServiceCodeTable_IN PurchLine_IN
    InvoicePostalAddress PurchTable_W
  ENDJOINS
  
  PARTREFERENCES
    PARTREFERENCE #PurchLatestOrdersPart
      PROPERTIES
        Name                #PurchLatestOrdersPart
        MenuItemName        #PurchLatestOrdersPart
        DataSource          #PurchTable
        DataSourceRelation  #EDT.PurchTable.OrderAccount
        ElementPosition     #536870911
      ENDPROPERTIES
      
    ENDPARTREFERENCE
    
    PARTREFERENCE #PurchTotalsSummaryPart
      PROPERTIES
        Name                #PurchTotalsSummaryPart
        MenuItemName        #PurchTotalsSummaryPart
        DataSource          #PurchTable
        DataSourceRelation  #EDT.PurchTable.PurchId
        ElementPosition     #1073741822
      ENDPROPERTIES
      
    ENDPARTREFERENCE
    
    PARTREFERENCE #PurchEncumbranceSummaryPart
      PROPERTIES
        Name                #PurchEncumbranceSummaryPart
        MenuItemName        #PurchEncumbranceSummaryPart
        DataSource          #PurchTable
        DataSourceRelation  #EDT.PurchTable.PurchId
        ElementPosition     #1610612733
      ENDPROPERTIES
      
    ENDPARTREFERENCE
    
  ENDPARTREFERENCES
  
  DESIGN
    PROPERTIES
      Caption             #@SYS15812
      TitleDatasource     #PurchTable
      DataSource          #PurchTable
      HideIfEmpty         #No
      WorkflowEnabled     #Yes
      WorkflowDatasource  #PurchTable
      WorkflowType        #PurchTableTemplate
      Style               #DetailsFormTransaction
    ENDPROPERTIES
    
    CONTAINER
      CONTROL ACTIONPANE
        PROPERTIES
          Name                #ActionPane
          ElementPosition     #1073741822
          HierarchyParent     #FSHSum
          Style               #Strip
          DataSource          #RetailSumLines
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANE
        PROPERTIES
          Name                #ActionPaneHeader
          AutoDeclaration     #Yes
          ElementPosition     #357913941
          DataSource          #PurchTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANE
        PROPERTIES
          Name                #EnvironmentActionPane
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #Environment
          Style               #Strip
          DataSource          #EMSPurchOrderFlowRelation
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANE
        PROPERTIES
          Name                #LineOverviewActionStrip
          ElementPosition     #1073741822
          HierarchyParent     #LineViewLines
          Style               #Strip
          DataSource          #PurchLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANE
        PROPERTIES
          Name                #RAssetActionPane
          ElementPosition     #1073741822
          HierarchyParent     #Asset_RU
          Style               #Strip
          DataSource          #RAssetPurchTrans
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #ActionPaneTab
          ElementPosition     #1431655764
          HierarchyParent     #ActionPane
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #Customs
          AutoDeclaration     #Yes
          CountryRegionCodes  #IN
          ElementPosition     #1932735276
          HierarchyParent     #ActionPaneHeader
          Caption             #@GLS5007
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #EnvironmentActionPaneTab
          ElementPosition     #1431655764
          HierarchyParent     #EnvironmentActionPane
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #General
          AutoDeclaration     #Yes
          ElementPosition     #1717986912
          HierarchyParent     #ActionPaneHeader
          Caption             #@SYS114913
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #GeneralSMB
          AutoDeclaration     #Yes
          Visible             #No
          ConfigurationKey    #Retail
          ElementPosition     #1825361094
          HierarchyParent     #ActionPaneHeader
          Caption             #@SYS114913
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #Invoice
          AutoDeclaration     #Yes
          ElementPosition     #1288490184
          HierarchyParent     #ActionPaneHeader
          Caption             #@SYS14204
        ENDPROPERTIES
        
        METHODS
          SOURCE #selectionChanged
            #public void selectionChanged()
            #{
            #    PurchLine purchLineLoc;
            #
            #    super();
            #
            #    if (isConfigurationkeyEnabled(configurationKeyNum(PSAAPRetainage)))
            #    {
            #        if(!buttonUpdateInvoice.enabled())
            #        {
            #            select firstonly purchLineLoc
            #                where purchLineLoc.PurchId == purchTable.PurchId &&
            #                      purchLineLoc.psaTotalRetainAmount > 0;
            #
            #            if(purchLineLoc)
            #            {
            #                buttonUpdateInvoice.enabled(true);
            #            }
            #        }
            #    }
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #LineOverviewActionTab
          ElementPosition     #1431655764
          HierarchyParent     #LineOverviewActionStrip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #Manage
          AutoDeclaration     #Yes
          ElementPosition     #858993456
          HierarchyParent     #ActionPaneHeader
          Caption             #@SYS115306
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #Purchase
          AutoDeclaration     #Yes
          ElementPosition     #644245092
          HierarchyParent     #ActionPaneHeader
          Caption             #@SYS53872
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #PurchOrder
          AutoDeclaration     #Yes
          ElementPosition     #429496728
          HierarchyParent     #ActionPaneHeader
          Caption             #@SYS25545
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #RAssetActionPaneTab
          ElementPosition     #1431655764
          HierarchyParent     #RAssetActionPane
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #Receive
          AutoDeclaration     #Yes
          ElementPosition     #1073741820
          HierarchyParent     #ActionPaneHeader
          Caption             #@SYS52744
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #Retail
          AutoDeclaration     #Yes
          ConfigurationKey    #RetailHeadquarters
          ElementPosition     #1503238548
          HierarchyParent     #ActionPaneHeader
          Caption             #@RET4885
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #TMS
          ElementPosition     #1646404124
          HierarchyParent     #ActionPaneHeader
          Caption             #@TRX1
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #WHS
          ElementPosition     #1574821336
          HierarchyParent     #ActionPaneHeader
          Caption             #@WAX13
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ButtonGroup
          ElementPosition     #1431655764
          HierarchyParent     #ActionPaneTab
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ButtonGroupTMS
          HelpText            #@TRX617
          ElementPosition     #1610612733
          HierarchyParent     #TMS
          Caption             #@TRX597
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ButtonGroupWHS
          ElementPosition     #1431655764
          HierarchyParent     #WHS
          Caption             #@SYS40422
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #CustomsGenerate
          ElementPosition     #1288490187
          HierarchyParent     #Customs
          Caption             #@SYS26349
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #CustomsJournal
          ElementPosition     #1717986916
          HierarchyParent     #Customs
          Caption             #@SYS2827
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #CustomsMaintain
          ElementPosition     #858993458
          HierarchyParent     #Customs
          Caption             #@SYS316594
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #EnvironmentButtonGroup
          ElementPosition     #1431655764
          HierarchyParent     #EnvironmentActionPaneTab
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #Functions
          ElementPosition     #1476395005
          HierarchyParent     #Retail
          Caption             #@RET4211
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #FunctionsSMB
          ElementPosition     #1431655764
          HierarchyParent     #GeneralSMB
          Caption             #@RET4211
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #GeneralMaintain
          ElementPosition     #1533916890
          HierarchyParent     #General
          Caption             #@SYS316594
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #GeneralRelatedInfo
          ElementPosition     #1840700268
          HierarchyParent     #General
          Caption             #@SYS111665
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #GeneralSetup
          AutoDeclaration     #Yes
          ElementPosition     #613566756
          HierarchyParent     #General
          Caption             #@SYS342635
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #GeneralSetupSMB
          AutoDeclaration     #Yes
          ElementPosition     #1789569705
          HierarchyParent     #GeneralSMB
          Caption             #@SYS342635
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #GeneralVendor
          ElementPosition     #920350134
          HierarchyParent     #General
          Caption             #@SYS8079
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #Inquiries
          Visible             #No
          ElementPosition     #1073741822
          HierarchyParent     #Retail
          Caption             #@RET5171
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #IntercompanyTracing
          ConfigurationKey    #TradeInterCompany
          ElementPosition     #1227133512
          HierarchyParent     #Manage
          Caption             #@SYS317473
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #InvoiceBill
          ElementPosition     #805306365
          HierarchyParent     #Invoice
          Caption             #@SYS114665
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #InvoiceChange
          AutoDeclaration     #Yes
          ElementPosition     #1610612730
          HierarchyParent     #Invoice
          Caption             #@SYS317554
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #InvoiceIntroduce
          AutoDeclaration     #Yes
          ElementPosition     #1342177275
          HierarchyParent     #Invoice
          Caption             #@SYS317556
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #InvoiceJournals
          ElementPosition     #1879048185
          HierarchyParent     #Invoice
          Caption             #@SYS9020
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #InvoiceJournalsSMB
          ElementPosition     #1073741823
          HierarchyParent     #GeneralSMB
          Caption             #@SYS9020
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #InvoiceProcess
          AutoDeclaration     #Yes
          ElementPosition     #536870910
          HierarchyParent     #Invoice
          Caption             #@SYS26349
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #InvoiceProcessSMB
          AutoDeclaration     #Yes
          ElementPosition     #715827882
          HierarchyParent     #GeneralSMB
          Caption             #@SYS26349
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #InvoiceSettle
          AutoDeclaration     #Yes
          ElementPosition     #1073741820
          HierarchyParent     #Invoice
          Caption             #@SYS114666
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #LabelChangeJournal
          CountryRegionCodes  #RU
          ConfigurationKey    #Retail
          ElementPosition     #2013265917
          HierarchyParent     #Retail
          Caption             #@SYP4880932
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #LineOverviewActionButtonGroup
          ElementPosition     #1610612733
          HierarchyParent     #LineOverviewActionTab
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #LineOverviewCoreActionButtonGroup
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #LineOverviewActionTab
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #LineOverviewWHS
          ElementPosition     #1879048189
          HierarchyParent     #LineOverviewActionTab
          Caption             #@WAX374
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ManageBankDocument
          AutoDeclaration     #Yes
          ElementPosition     #1533916890
          HierarchyParent     #Manage
          Caption             #@SYS313653
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ManageBudget
          AutoDeclaration     #Yes
          ElementPosition     #920350134
          HierarchyParent     #Manage
          Caption             #@SYS80981
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ManageHistory
          ElementPosition     #1840700268
          HierarchyParent     #Manage
          Caption             #@SYS35017
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ManageView
          ElementPosition     #613566756
          HierarchyParent     #Manage
          Caption             #@SYS53394
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #MCRPurchaseRelease
          ElementPosition     #2004318066
          HierarchyParent     #Purchase
          Caption             #@SYS16190
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #MCRReceiveDeliver
          ElementPosition     #1932735281
          HierarchyParent     #Receive
          Caption             #@SYS78211
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #Post
          ElementPosition     #1073741822
          HierarchyParent     #TMS
          Caption             #@SYS41360
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ProductLabels
          AutoDeclaration     #Yes
          ElementPosition     #1879048189
          HierarchyParent     #Retail
          Caption             #@RET4915
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ProductLabelsSMB
          AutoDeclaration     #Yes
          ElementPosition     #1968526675
          HierarchyParent     #GeneralSMB
          Caption             #@RET4915
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #PurchaseAccounting
          ElementPosition     #1717986912
          HierarchyParent     #Purchase
          Caption             #@SYS314071
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #PurchaseCalculate
          AutoDeclaration     #Yes
          ElementPosition     #1073741820
          HierarchyParent     #Purchase
          Caption             #@SYS1085
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #PurchaseCreate
          AutoDeclaration     #Yes
          ElementPosition     #429496728
          HierarchyParent     #Purchase
          Caption             #@SYS112171
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #PurchaseGenerate
          AutoDeclaration     #Yes
          ElementPosition     #1503238548
          HierarchyParent     #Purchase
          Caption             #@SYS26349
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #PurchaseJournals
          ElementPosition     #1861152489
          HierarchyParent     #Purchase
          Caption             #@SYS2827
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #PurchasePrepay
          AutoDeclaration     #Yes
          ElementPosition     #1288490184
          HierarchyParent     #Purchase
          Caption             #@SYS319483
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #PurchaseTax
          ElementPosition     #858993456
          HierarchyParent     #Purchase
          Caption             #@SYS333536
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #PurchOrderAttachments
          ElementPosition     #1908874352
          HierarchyParent     #PurchOrder
          Caption             #@SYS316708
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #PurchOrderCopy
          AutoDeclaration     #Yes
          ElementPosition     #1193046470
          HierarchyParent     #PurchOrder
          Caption             #@SYS80350
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #PurchOrderList
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1670265058
          HierarchyParent     #PurchOrder
          Caption             #@SYS118440
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #PurchOrderMaintain
          AutoDeclaration     #Yes
          ElementPosition     #715827882
          HierarchyParent     #PurchOrder
          Caption             #@SYS316703
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #PurchOrderMiscCharges
          AutoDeclaration     #Yes
          ElementPosition     #644245092
          HierarchyParent     #Purchase
          Caption             #@SYS114608
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #PurchOrderNew
          ElementPosition     #477218588
          HierarchyParent     #PurchOrder
          Caption             #@SYS2055
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #PurchOrderView
          ElementPosition     #1431655764
          HierarchyParent     #PurchOrder
          Caption             #@SYS53394
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #RAssetButtonGroup
          ElementPosition     #1431655764
          HierarchyParent     #RAssetActionPaneTab
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ReceiveDelivery
          ElementPosition     #1503238551
          HierarchyParent     #Receive
          Caption             #@SYS4508
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ReceiveJournals
          ElementPosition     #1717986916
          HierarchyParent     #Receive
          Caption             #@SYS9020
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ReceiveProcess
          AutoDeclaration     #Yes
          ElementPosition     #858993458
          HierarchyParent     #Receive
          Caption             #@SYS26349
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ReceiveQualityManagement
          ElementPosition     #1288490187
          HierarchyParent     #Receive
          Caption             #@SYS113616
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ShowGroup
          AutoDeclaration     #Yes
          ElementPosition     #954437176
          HierarchyParent     #PurchOrder
          Caption             #@SYS317437
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GRID
        PROPERTIES
          Name                #Flow
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1431655764
          HierarchyParent     #EnvironmentGroup
          DataSource          #EMSPurchOrderFlowRelation
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GRID
        PROPERTIES
          Name                #Grid
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1431655764
          HierarchyParent     #GridGroup
          VisibleRows         #10
          DataSource          #PurchTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GRID
        PROPERTIES
          Name                #Grid1
          ElementPosition     #1610612733
          HierarchyParent     #FSHSum
          DataSource          #RetailSumLines
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GRID
        PROPERTIES
          Name                #GridAsset
          Height              #Column height
          ElementPosition     #1610612733
          HierarchyParent     #Asset_RU
          DataSource          #RAssetPurchTrans
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GRID
        PROPERTIES
          Name                #GridLoads
          Width               #Column width
          Height              #Column height
          ElementPosition     #1431655764
          HierarchyParent     #GroupLoads
          DataSource          #WHSLoadLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GRID
        PROPERTIES
          Name                #LineSpec
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1610612734
          HierarchyParent     #LineViewLines
          VisibleRows         #5
          DataSource          #PurchLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GRID
        PROPERTIES
          Name                #PackageGrid
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1431655764
          HierarchyParent     #GridGroup1
          DataSource          #RetailPackagePurch
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Account
          VerticalSpacing     #5
          ElementPosition     #715827882
          HierarchyParent     #Vendor
          FrameType           #None
          DataSource          #PurchTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #AdministrationForSubcontract
          ElementPosition     #2139095038
          HierarchyParent     #TabLineGeneral
          Caption             #@SYS40777
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #AdministrationGroup
          ElementPosition     #1431655764
          HierarchyParent     #GroupSetupMid
          DataSource          #PurchTable
          DataGroup           #Administration
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Agreement_RU
          CountryRegionCodes  #RU
          ElementPosition     #1932735281
          HierarchyParent     #GroupGeneralRight
          DataSource          #PurchTable_RU
          DataGroup           #Agreement_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Asset_RU
          CountryRegionCodes  #RU
          Height              #Column height
          ConfigurationKey    #RAsset
          ElementPosition     #1879048189
          HierarchyParent     #TabLineFixedAsset
          Caption             #@GLS106645
          DataSource          #RAssetPurchTrans
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Barcode
          ElementPosition     #1073741822
          HierarchyParent     #TabLinePicking
          DataSource          #PurchLine
          DataGroup           #Barcode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #BaseInfo
          ElementPosition     #1073741822
          HierarchyParent     #GroupGeneralLeft
          Caption             #@SYS15812
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #BudgetReservation
          AutoDeclaration     #Yes
          ElementPosition     #1968526675
          HierarchyParent     #GeneralMid
          Caption             #@SYP4990143
          DataSource          #PurchLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ChooseGroup
          ElementPosition     #1717986916
          HierarchyParent     #RBOItemPackage
          FrameType           #None
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Commitment_PSN
          AutoDeclaration     #Yes
          ConfigurationKey    #PurchFrenchRegulatory_PSN
          ElementPosition     #1968526675
          HierarchyParent     #GeneralLeft
          Caption             #@SPS1834
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #CompanyInformation
          AutoDeclaration     #Yes
          ElementPosition     #314964266
          HierarchyParent     #TabTaxInformation_IN
          Caption             #@SYS103911
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ConfirmingPO
          ElementPosition     #2143289342
          HierarchyParent     #TabHeaderSetup
          DataSource          #PurchTable
          DataGroup           #ConfirmingPO
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ConsTarget_JP
          AutoDeclaration     #Yes
          CountryRegionCodes  #JP
          ElementPosition     #2013265918
          HierarchyParent     #GroupGeneralLeft
          DataSource          #PurchTable
          DataGroup           #ConsTarget_JP
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ContactInfo
          ElementPosition     #1073741822
          HierarchyParent     #GroupGeneralMid
          Caption             #@SYS21663
          DataSource          #PurchTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #CrossDock
          AutoDeclaration     #Yes
          ElementPosition     #1879048189
          HierarchyParent     #TabLinePicking
          DataSource          #WHSPurchLine
          DataGroup           #CrossDock
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Crossdocking
          ElementPosition     #715827882
          HierarchyParent     #RetailHeader
          DataSource          #PurchTable
          DataGroup           #Crossdocking
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #CrossdockingDates
          ElementPosition     #1073741823
          HierarchyParent     #RetailHeader
          DataSource          #PurchTable
          DataGroup           #CrossdockingDates
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Currency
          ElementPosition     #858993458
          HierarchyParent     #TabHeaderPriceCalc
          DataSource          #PurchTable
          DataGroup           #Currency
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Customs_IN
          AutoDeclaration     #Yes
          ElementPosition     #816043782
          HierarchyParent     #TabTaxInformation_IN
          Caption             #@GLS5007
          DataSource          #PurchLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #CustReference
          ElementPosition     #1431655763
          HierarchyParent     #GeneralMid
          DataSource          #PurchLine
          DataGroup           #DeliveryRef
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #DateAndTime
          ElementPosition     #1840700268
          HierarchyParent     #GroupSetupRight
          Caption             #@SYS112412
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #DateAndTimeLine
          ElementPosition     #1757032074
          HierarchyParent     #TabLineSetup
          Caption             #@SYS112412
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Delivery
          ElementPosition     #1073741822
          HierarchyParent     #DeliveryExt
          DataSource          #PurchTable
          DataGroup           #Delivery
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Delivery_RU
          ElementPosition     #1610612733
          HierarchyParent     #DeliveryExt
          FrameType           #None
          DataSource          #PurchTable_RU
          DataGroup           #Delivery
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #DeliveryDateLine
          ElementPosition     #1073741822
          HierarchyParent     #TabLineDelivery
          Caption             #@SYS16056
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #DeliveryExt
          ElementPosition     #1073741822
          HierarchyParent     #TabHeaderDelivery
          FrameType           #None
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #DeliveryHeader
          ElementPosition     #858993458
          HierarchyParent     #LineViewHeader
          Caption             #@SYS4508
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #DeliveryLine
          ElementPosition     #1610612734
          HierarchyParent     #TabLineDelivery
          Caption             #@SYS4508
          DataSource          #PurchLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #DeliveryLineForSubcontracts
          ElementPosition     #2146435070
          HierarchyParent     #TabLineSetup
          Caption             #@SYS4508
          DataSource          #PurchLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Dimension
          ElementPosition     #1431655764
          HierarchyParent     #TabHeaderDimension
          DataSource          #PurchTable
          DataGroup           #Dimension
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #DIOTInformation_MX
          CountryRegionCodes  #MX
          ElementPosition     #1952257860
          HierarchyParent     #TabLineSetup
          DataSource          #PurchLine
          DataGroup           #DIOTInformation_MX
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Disc
          ElementPosition     #1073741822
          HierarchyParent     #TabLinePriceDisc
          Caption             #@SYS11829
          DataSource          #PurchLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #DiscMarkup
          ElementPosition     #1717986916
          HierarchyParent     #TabHeaderPriceCalc
          DataSource          #PurchTable
          DataGroup           #DiscountMiscCharges
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #DiscountsHeader
          ElementPosition     #1288490187
          HierarchyParent     #LineViewHeader
          Caption             #@SYS335044
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #EnvironmentGroup
          ElementPosition     #1610612733
          HierarchyParent     #Environment
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Excise_IN
          AutoDeclaration     #Yes
          ElementPosition     #687194763
          HierarchyParent     #TabTaxInformation_IN
          Caption             #@GLS5005
          DataSource          #PurchLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Exim_IN
          AutoDeclaration     #Yes
          ElementPosition     #1073741820
          HierarchyParent     #TabTaxInformation_IN
          Caption             #@GLS61737
          DataSource          #EximPurchLine_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #FiscalInformation
          ElementPosition     #1193046470
          HierarchyParent     #TabHeaderFiscalInformation_BR
          Caption             #@GLS56
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #FiscalInformation_BR
          ElementPosition     #1431655764
          HierarchyParent     #TabLineFiscalInformation_BR
          DataSource          #PurchLine
          DataGroup           #FiscalInformation_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #FiscalInformationGroup_BR
          Visible             #No
          CountryRegionCodes  #BR
          ElementPosition     #1946157053
          HierarchyParent     #TabLineFixedAsset
          Caption             #@GLS56
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #FixedAssets
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #TabLineFixedAsset
          FrameType           #None
          DataSource          #PurchLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ForeignTrade
          ElementPosition     #429496729
          HierarchyParent     #TabLineForeignTrade
          FrameType           #None
          DataSource          #PurchLine
          DataGroup           #ForeignTrade
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ForeignTrade_RU
          ElementPosition     #858993458
          HierarchyParent     #TabLineForeignTrade
          FrameType           #None
          DataSource          #PurchLine_W
          DataGroup           #ForeignTrade
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ForeignTradeCategory
          ElementPosition     #1288490187
          HierarchyParent     #TabLineForeignTrade
          FrameType           #None
          DataSource          #PurchLineForeignTradeCategory
          DataGroup           #ForeignTrade
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ForeignTradeForSubContracts
          ElementPosition     #1993133258
          HierarchyParent     #TabLineProduct
          Caption             #@SYS27650
          DataSource          #PurchLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #FSHConcession
          ElementPosition     #1431655764
          HierarchyParent     #RetailHeader
          DataSource          #PurchTable
          DataGroup           #RetailConcession
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #g1099Fields
          AutoDeclaration     #Yes
          ElementPosition     #1073741823
          HierarchyParent     #TabLineTax1099
          DataSource          #PurchLine
          DataGroup           #g1099Fields
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GeneralLeft
          ElementPosition     #858993458
          HierarchyParent     #TabLineGeneral
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GeneralMid
          ElementPosition     #1288490187
          HierarchyParent     #TabLineGeneral
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GeneralReference
          ElementPosition     #1073741822
          HierarchyParent     #GeneralMid
          Caption             #@SYS21697
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GeneralRight
          ElementPosition     #1717986916
          HierarchyParent     #TabLineGeneral
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GridGroup
          ElementPosition     #1431655764
          HierarchyParent     #TabPageGrid
          Style               #BorderlessGridContainer
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GridGroup1
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #858993458
          HierarchyParent     #RBOItemPackage
          FrameType           #None
          DataSource          #RetailPackagePurch
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Group
          ElementPosition     #715827882
          HierarchyParent     #Account
          FrameType           #None
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupAddressLeft
          ElementPosition     #858993458
          HierarchyParent     #HeaderAddress
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupaddressMid
          ElementPosition     #1288490187
          HierarchyParent     #HeaderAddress
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupDistributionTemplateHeader
          ElementPosition     #1073741822
          HierarchyParent     #TabFinancialDimensionsHeader
          FrameType           #None
          DataSource          #PurchTable
          LeftMargin          #10
          HideIfEmpty         #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupDistributionTemplateLine
          ElementPosition     #1073741822
          HierarchyParent     #TabFinancialDimensionsLine
          FrameType           #None
          DataSource          #PurchLine
          LeftMargin          #10
          HideIfEmpty         #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupEmail
          ElementPosition     #1610612733
          HierarchyParent     #ContactInfo
          FrameType           #None
          Columns             #2
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupFinancialDimensionHeader
          AutoDeclaration     #Yes
          NeededPermission    #Manual
          ElementPosition     #1610612733
          HierarchyParent     #TabFinancialDimensionsHeader
          FrameType           #None
          DataSource          #PurchTable
          HideIfEmpty         #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupFinancialDimensionLine
          AutoDeclaration     #Yes
          NeededPermission    #Manual
          ElementPosition     #1610612733
          HierarchyParent     #TabFinancialDimensionsLine
          FrameType           #None
          DataSource          #PurchLine
          HideIfEmpty         #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupForeignTrade_MY
          Visible             #No
          ElementPosition     #1825361098
          HierarchyParent     #GroupGeneralRight
          FrameType           #None
          DataSource          #PurchTable_W
          DataGroup           #ForeignTrade_MY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupGeneralLeft
          ElementPosition     #858993458
          HierarchyParent     #TabHeaderGeneral
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupGeneralMid
          ElementPosition     #1288490187
          HierarchyParent     #TabHeaderGeneral
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupGeneralRight
          ElementPosition     #1717986916
          HierarchyParent     #TabHeaderGeneral
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupLeft
          ElementPosition     #858993458
          HierarchyParent     #TabLineProject
          DataSource          #PurchLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupLineDeliveryAddressRef
          ElementPosition     #1288490187
          HierarchyParent     #TabLineAddress
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupLoads
          Width               #Column width
          Height              #Column height
          ElementPosition     #1610612733
          HierarchyParent     #TabLoad
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupMid
          ElementPosition     #1288490187
          HierarchyParent     #TabLineProject
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupNotificationToTheCentralBank
          AutoDeclaration     #Yes
          ElementPosition     #1227133512
          HierarchyParent     #GroupSetupRight
          DataSource          #PurchTable
          DataGroup           #NotificationToTheCentralBank
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupRight
          ElementPosition     #1717986916
          HierarchyParent     #TabLineProject
          FrameType           #None
          DataSource          #PurchLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupSetupLeft
          ElementPosition     #858993458
          HierarchyParent     #TabHeaderSetup
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupSetupMid
          ElementPosition     #1288490187
          HierarchyParent     #TabHeaderSetup
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupSetupRight
          ElementPosition     #1717986916
          HierarchyParent     #TabHeaderSetup
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupURL
          ElementPosition     #1073741822
          HierarchyParent     #ContactInfo
          FrameType           #None
          Columns             #2
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupWithholdingTax
          ElementPosition     #601295417
          HierarchyParent     #TabTaxInformation_IN
          FrameType           #None
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #grpAssetQualifier
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #TabLineFixedAsset
          FrameType           #None
          Caption             #@SYS136021
          Columnspace         #0
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GSTHSTTaxType_CA
          ElementPosition     #1610612733
          HierarchyParent     #SalesTaxLine
          FrameType           #None
          DataSource          #PurchLine
          DataGroup           #GSTHSTTaxType_CA
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GSTInvoice_MY
          ElementPosition     #2040109463
          HierarchyParent     #GroupGeneralRight
          DataSource          #PurchTable_W
          DataGroup           #GSTInvoice_MY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #HeaderAddress
          Width               #Column width
          ElementPosition     #1610612734
          HierarchyParent     #TabHeaderAddress
          FrameType           #None
          Caption             #@SYS9362
          Columns             #3
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #HeaderAddressDisplayForSubcontracts
          ElementPosition     #1879048190
          HierarchyParent     #HeaderAddress
          Caption             #@SYS36203
          DataSource          #PurchTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #HeaderAttention
          ElementPosition     #1717986916
          HierarchyParent     #HeaderAddress
          DataSource          #PurchTable
          DataGroup           #Attention
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #HeaderDlvAddressFiscalInformation_BR
          AutoDeclaration     #Yes
          CountryRegionCodes  #BR
          ElementPosition     #1932735281
          HierarchyParent     #HeaderAddress
          Caption             #@GLS368
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #HeaderForeignTrade
          ElementPosition     #1431655764
          HierarchyParent     #TabHeaderForeignTrade
          FrameType           #None
          DataSource          #PurchTable
          Columns             #Auto
          DataGroup           #ForeignTrade
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #HeaderInfo
          Width               #Column width
          ElementPosition     #1073741822
          HierarchyParent     #TabPageDetails
          FrameType           #None
          Style               #DetailTitleContainer
          DataSource          #PurchTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #HeaderInterCompany
          ConfigurationKey    #TradeInterCompany
          ElementPosition     #1533916890
          HierarchyParent     #GroupSetupRight
          FrameType           #None
          Caption             #@SYS74106
          Columns             #2
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #HeaderInvoiceAddress_TH
          CountryRegionCodes  #TH
          ElementPosition     #2040109463
          HierarchyParent     #HeaderAddress
          Caption             #@SYS54098
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ICMSCreditInformation_BR
          CountryRegionCodes  #BR
          ElementPosition     #2013265917
          HierarchyParent     #TabLineFixedAsset
          Caption             #@SYP4882383
          DataSource          #PurchLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #IndiaSalesTax
          AutoDeclaration     #Yes
          ElementPosition     #515396072
          HierarchyParent     #TabTaxInformation_IN
          Caption             #@SYS5878
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #IndiaVAT
          AutoDeclaration     #Yes
          ElementPosition     #472446400
          HierarchyParent     #TabTaxInformation_IN
          Caption             #@GLS5004
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #InterestAndFine_BR
          ElementPosition     #1503238551
          HierarchyParent     #TabHeaderPriceCalc
          DataSource          #PurchTable_BR
          DataGroup           #InterestAndFine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Intrastat
          ElementPosition     #1789569705
          HierarchyParent     #TabHeaderForeignTrade
          FrameType           #None
          DataSource          #PurchTable_Intrastat
          DataGroup           #Intrastat
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Intrastat1
          ElementPosition     #1073741822
          HierarchyParent     #TabLineForeignTrade
          FrameType           #None
          DataSource          #PurchLine_Intrastat
          DataGroup           #Intrastat
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #InventoryDimensionsGrid
          AutoDeclaration     #Yes
          ElementPosition     #904203640
          HierarchyParent     #LineSpec
          BackgroundColor     #Window background
          DataSource          #InventDim
          DataGroup           #InventoryDimensions
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #InventProfile_RU
          ElementPosition     #1859754391
          HierarchyParent     #TabHeaderSetup
          DataSource          #PurchTable_RU
          DataGroup           #InventProfile_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #InvoiceMatching
          AutoDeclaration     #Yes
          ElementPosition     #585677358
          HierarchyParent     #TabLineSetup
          DataSource          #PurchLine
          DataGroup           #InvoiceMatching
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ItemOrderCreation
          ElementPosition     #1789569705
          HierarchyParent     #RetailHeader
          DataSource          #PurchTable
          DataGroup           #ItemOrderCreation
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ItemReference
          AllowEdit           #No
          ElementPosition     #1838782871
          HierarchyParent     #TabLineProduct
          DataSource          #PurchLine
          DataGroup           #ItemReference
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Line1099Fields
          ElementPosition     #2130706430
          HierarchyParent     #TabLineSetup
          DataSource          #PurchLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #LineAddress
          Width               #Column width
          ElementPosition     #1546188222
          HierarchyParent     #TabLineAddress
          FrameType           #None
          Columns             #3
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #LineAddressDisplayForSubcontracts
          ElementPosition     #1460288877
          HierarchyParent     #TabLineAddress
          Caption             #@SYS36203
          DataSource          #PurchLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #LineDeliveryAddress
          ElementPosition     #858993458
          HierarchyParent     #TabLineAddress
          Caption             #@SYS7924
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #LineDeliveryAddressForSubcontracts
          ElementPosition     #1374389532
          HierarchyParent     #TabLineAddress
          Caption             #@SYS88743
          DataSource          #PurchLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #LineDlvAddressFiscalInformation_BR
          AutoDeclaration     #Yes
          CountryRegionCodes  #BR
          ElementPosition     #1431655764
          HierarchyParent     #LineAddress
          Caption             #@GLS368
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #LineIntercompany
          ElementPosition     #1789569704
          HierarchyParent     #GeneralMid
          DataSource          #PurchLine
          DataGroup           #Intercompany
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #LineInventory
          ElementPosition     #390451572
          HierarchyParent     #TabLineSetup
          Caption             #@SYS981
          DataSource          #PurchLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #LineInventoryForSubcontracts
          ElementPosition     #2145386494
          HierarchyParent     #TabLineSetup
          Caption             #@SYS981
          DataSource          #PurchLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #LinePosting_RU
          ElementPosition     #1879048190
          HierarchyParent     #TabLineDelivery
          DataSource          #PurchLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #LineSalesTax
          ElementPosition     #1073741822
          HierarchyParent     #SalesTaxLine
          DataSource          #PurchLine
          DataGroup           #SalesTax
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Markup_RU
          ElementPosition     #2041482145
          HierarchyParent     #TabLineSetup
          DataSource          #PurchLine_W
          DataGroup           #Markup_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #MCRDropShip
          ElementPosition     #2013265918
          HierarchyParent     #TabLineDelivery
          DataSource          #PurchLine
          DataGroup           #MCRDropShip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Measurement
          ElementPosition     #1717986916
          HierarchyParent     #TabLineForeignTrade
          Caption             #@SYS34825
          DataSource          #PurchLineForeignTradeCategory
          DataGroup           #Measurement
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #OrderLine
          ElementPosition     #1431655764
          HierarchyParent     #GeneralLeft
          Caption             #@SYS22920
          DataSource          #PurchLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Payment
          ElementPosition     #1073741822
          HierarchyParent     #PaymentExt
          DataSource          #PurchTable
          DataGroup           #Payment
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Payment_RU
          ElementPosition     #1610612734
          HierarchyParent     #PaymentExt
          FrameType           #None
          DataSource          #PurchTable_W
          DataGroup           #Payment
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #PaymentExt
          ElementPosition     #1431655762
          HierarchyParent     #TabHeaderPriceCalc
          FrameType           #None
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #PhysDims
          ElementPosition     #1073741822
          HierarchyParent     #TabLoad
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #PISCOFINSCreditInformation_BR
          CountryRegionCodes  #BR
          ElementPosition     #2080374781
          HierarchyParent     #TabLineFixedAsset
          Caption             #@SYP4882384
          DataSource          #PurchLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #PlannedOrderLine
          AllowEdit           #No
          ElementPosition     #1431655764
          HierarchyParent     #PlannedOrderReferenceLine
          FrameType           #None
          DataSource          #PurchLine
          DataGroup           #PlannedOrder
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #PlannedOrderReferenceLine
          ElementPosition     #1563636529
          HierarchyParent     #TabLineProduct
          Caption             #@SYS24657
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #POExim
          ElementPosition     #1431655764
          HierarchyParent     #POImport
          FrameType           #None
          DataSource          #PurchTable
          Columns             #2
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Posting
          ElementPosition     #1610612733
          HierarchyParent     #GroupSetupLeft
          DataSource          #PurchTable
          DataGroup           #Posting
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #PostingLine
          ElementPosition     #1464193395
          HierarchyParent     #TabLineSetup
          Caption             #@SYS5943
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Potency
          ElementPosition     #1879048189
          HierarchyParent     #TabLinePriceDisc
          DataSource          #PDSAdvancedPriceInfo
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Price
          ElementPosition     #1610612734
          HierarchyParent     #TabLinePriceDisc
          Caption             #@SYS12983
          DataSource          #PurchLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Price_RU
          ElementPosition     #1145324610
          HierarchyParent     #TabHeaderPriceCalc
          DataSource          #PurchTable_RU
          DataGroup           #Price_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ProductDimensions
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #ProductLeft
          Caption             #@SYS133228
          DataSource          #InventDim
          DataGroup           #ProductDimensions
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ProductLeft
          ElementPosition     #858993458
          HierarchyParent     #TabLineProduct
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ProductMid
          ElementPosition     #1288490187
          HierarchyParent     #TabLineProduct
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ProjectCostPrice
          ConfigurationKey    #ProjBasic
          ElementPosition     #1073741822
          HierarchyParent     #GroupRight
          DataSource          #PurchLine
          DataGroup           #ProjectCostPrice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ProjectIdentification
          ConfigurationKey    #ProjBasic
          ElementPosition     #1431655764
          HierarchyParent     #GroupLeft
          DataSource          #PurchLine
          DataGroup           #ProjectIdentification
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ProjectSalesPrice
          ConfigurationKey    #ProjBasic
          ElementPosition     #1073741822
          HierarchyParent     #GroupMid
          DataSource          #PurchLine
          DataGroup           #ProjectSalesPrice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Project-salestax
          ConfigurationKey    #ProjBasicTimeMaterial
          ElementPosition     #1610612733
          HierarchyParent     #GroupMid
          DataSource          #PurchLine
          DataGroup           #ProjectSalesTax
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ProjTransaction
          ElementPosition     #1610612733
          HierarchyParent     #GroupRight
          DataSource          #PurchLine
          DataGroup           #ProjTransaction
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #PurchLine_AttentionInfo
          ElementPosition     #1717986916
          HierarchyParent     #TabLineAddress
          Caption             #@SYS107382
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #PurchLine_DeliveryPostalAddressGrp
          ElementPosition     #1610612734
          HierarchyParent     #LineDeliveryAddress
          Style               #MarginlessContainer
          Columns             #3
          Columnspace         #4
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #PurchReq
          ElementPosition     #1789569705
          HierarchyParent     #GeneralLeft
          DataSource          #PurchLine
          DataGroup           #PurchReq
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #PurchRFQReplyLine
          ElementPosition     #954437176
          HierarchyParent     #GeneralLeft
          DataSource          #PurchRFQReplyLinePurchLine
          DataGroup           #PurchRFQReplyLineRFQ
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #PurchTable_DeliveryPostalAddressGrp
          ElementPosition     #1610612734
          HierarchyParent     #GroupAddressLeft
          Style               #MarginlessContainer
          Columns             #3
          Columnspace         #4
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #QtyUnitLine
          ElementPosition     #988972731
          HierarchyParent     #LineSpec
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Reasons
          AutoDeclaration     #Yes
          ElementPosition     #1288490187
          HierarchyParent     #GroupGeneralRight
          Caption             #@SYS111245
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ReductionEntry_JP
          AutoDeclaration     #Yes
          CountryRegionCodes  #JP
          ConfigurationKey    #Asset
          ElementPosition     #1744830461
          HierarchyParent     #TabLineFixedAsset
          FrameType           #None
          Caption             #@SYS4004969
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Reference
          ElementPosition     #1717986916
          HierarchyParent     #GroupGeneralRight
          Caption             #@SYS15217
          DataSource          #PurchTable
          DataGroup           #ExternalReference
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #References
          ElementPosition     #613566756
          HierarchyParent     #GroupSetupRight
          Caption             #@SYS14018
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #RetailHeader
          ConfigurationKey    #RetailHeadquarters
          ElementPosition     #1861152492
          HierarchyParent     #LineViewHeader
          Caption             #@RET3066
          Columns             #2
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ReturnedItem
          ElementPosition     #780903144
          HierarchyParent     #TabLineSetup
          DataSource          #PurchLine
          DataGroup           #ReturnedItem
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #RFIDTagging
          ElementPosition     #1610612733
          HierarchyParent     #TabLinePicking
          DataSource          #PurchLine
          DataGroup           #RFIDTagging
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #SalesTax
          ElementPosition     #1073741822
          HierarchyParent     #GroupSetupLeft
          DataSource          #PurchTable
          DataGroup           #SalesTax
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #SalesTaxLine
          ElementPosition     #976128930
          HierarchyParent     #TabLineSetup
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ServiceRef
          ElementPosition     #1632087567
          HierarchyParent     #TabLineAddress
          Caption             #@PSA10204
          DataSource          #PurchLine
          DataGroup           #DeliveryRef
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ServiceTax_IN
          AutoDeclaration     #Yes
          ElementPosition     #944892801
          HierarchyParent     #TabTaxInformation_IN
          Caption             #@GLS63865
          DataSource          #PurchLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #status
          ElementPosition     #1610612733
          HierarchyParent     #GroupGeneralMid
          Caption             #@SYS36398
          DataSource          #PurchTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #statusLine
          ElementPosition     #1288490187
          HierarchyParent     #GeneralRight
          Caption             #@SYS36398
          DataSource          #PurchLine
          DataGroup           #Status
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #StorageDimensions
          ElementPosition     #858993458
          HierarchyParent     #GroupGeneralRight
          Caption             #@SYS108783
          DataSource          #PurchTable
          DataGroup           #Inventory
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #StorageDimensionsLine
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #ProductMid
          Caption             #@SYS108783
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #TAMRebate1
          ElementPosition     #1849222027
          HierarchyParent     #TabLinePriceDisc
          DataSource          #PurchLine
          DataGroup           #TAMRebate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Tax1099G1Fields
          AutoDeclaration     #Yes
          ElementPosition     #1312351117
          HierarchyParent     #TabLineTax1099
          Caption             #@SPS1936
          DataSource          #Tax1099BoxDetail
          DataGroup           #Tax1099G1Fields
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Tax1099GFields
          AutoDeclaration     #Yes
          ElementPosition     #1550960411
          HierarchyParent     #TabLineTax1099
          Caption             #@SPS1093
          DataSource          #Tax1099BoxDetail
          DataGroup           #Tax1099GFields
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Tax1099SFields
          AutoDeclaration     #Yes
          ElementPosition     #1849222028
          HierarchyParent     #TabLineTax1099
          DataSource          #Tax1099BoxDetail
          DataGroup           #Tax1099SFields
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #TMSTransportation
          ElementPosition     #1879048189
          HierarchyParent     #TabHeaderDelivery
          Caption             #@TRX1
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #TMSTransportationHeader
          ElementPosition     #2004318069
          HierarchyParent     #LineViewHeader
          Caption             #@TRX1
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #TrackingDimesions
          AutoDeclaration     #Yes
          ElementPosition     #1610612734
          HierarchyParent     #ProductLeft
          Caption             #@SYS317445
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Transport
          ElementPosition     #1610612733
          HierarchyParent     #TabHeaderDelivery
          DataSource          #PurchTable
          DataGroup           #Transport
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #TreeGroup
          AutoDeclaration     #Yes
          Visible             #No
          Width               #Column width
          Height              #Column height
          ElementPosition     #1288490187
          HierarchyParent     #RBOItemPackage
          FrameType           #None
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #VATTaxAgent_RU
          AutoDeclaration     #Yes
          ElementPosition     #2001521866
          HierarchyParent     #TabHeaderSetup
          DataSource          #PurchTable_RU
          DataGroup           #VATTaxAgent_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #VendInvoiceDeclaration
          ElementPosition     #920350134
          HierarchyParent     #GroupSetupRight
          DataSource          #PurchTable
          DataGroup           #VendInvoiceDeclaration
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Vendor
          ElementPosition     #1610612733
          HierarchyParent     #GroupGeneralLeft
          Caption             #@SYS8079
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #VendorHeader
          ElementPosition     #1717986916
          HierarchyParent     #LineViewHeader
          Caption             #@SYS128916
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #WithholdingTax
          AutoDeclaration     #Yes
          ElementPosition     #613566756
          HierarchyParent     #GroupWithholdingTax
          DataSource          #TaxInformation_IN
          DataGroup           #WithholdingTax
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #WithholdingTax_IN
          AutoDeclaration     #Yes
          ElementPosition     #1503238551
          HierarchyParent     #TabHeaderSetup
          DataSource          #PurchTable_W
          DataGroup           #WithholdingTax_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #WithholdingTax_IN1
          AutoDeclaration     #Yes
          ElementPosition     #1342177277
          HierarchyParent     #SalesTaxLine
          DataSource          #PurchLine_IN
          DataGroup           #WithholdingTax_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #WithholdTax
          CountryRegionCodes  #TH,SA,GB,IE,BR
          ElementPosition     #1220161162
          HierarchyParent     #TabLineSetup
          DataSource          #PurchLine
          DataGroup           #WithholdingTax
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUBUTTON
        PROPERTIES
          Name                #ButtonHeaderTradeAgreements
          AutoDeclaration     #Yes
          HelpText            #@SYS69472
          ElementPosition     #715827882
          HierarchyParent     #GeneralVendor
          Text                #@SYS13768
          ButtonDisplay       #Text & Image above
          NormalImage         #12430
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          NeedsRecord         #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUBUTTON
        PROPERTIES
          Name                #ButtonLineInventory
          AutoDeclaration     #Yes
          HelpText            #@SYS69645
          ElementPosition     #1227133512
          HierarchyParent     #LineOverviewActionButtonGroup
          Text                #@SYS981
          ButtonDisplay       #Text & Image left
          NormalImage         #10932
          ImageLocation       #EmbeddedResource
          SaveRecord          #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUBUTTON
        PROPERTIES
          Name                #ButtonLineInventorySMB
          AutoDeclaration     #Yes
          Visible             #No
          HelpText            #@SYS69645
          ElementPosition     #1380525201
          HierarchyParent     #LineOverviewActionButtonGroup
          Text                #@SYS981
          ButtonDisplay       #Text & Image left
          NormalImage         #10932
          ImageLocation       #EmbeddedResource
          SaveRecord          #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUBUTTON
        PROPERTIES
          Name                #CreateActivity
          AutoDeclaration     #Yes
          HelpText            #@SYS26027
          ElementPosition     #1073741823
          HierarchyParent     #GeneralVendor
          Text                #@SYS38378
          ButtonDisplay       #Text & Image left
          NormalImage         #10197
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
          NeedsRecord         #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUBUTTON
        PROPERTIES
          Name                #GeneralVendorCases
          HelpText            #@SYS131506
          ElementPosition     #1431655764
          HierarchyParent     #GeneralVendor
          Text                #@SYS191442
          ButtonDisplay       #Text & Image left
          NormalImage         #11229
          ImageLocation       #EmbeddedResource
          NeedsRecord         #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUBUTTON
        PROPERTIES
          Name                #LineStripFinancials
          HelpText            #@SYS316591
          ElementPosition     #920350134
          HierarchyParent     #LineOverviewActionButtonGroup
          Text                #@SYS80043
          ButtonDisplay       #Text & Image left
          NormalImage         #10694
          ImageLocation       #EmbeddedResource
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #public void clicked()
            #{
            #    super();
            #
            #    purchTableForm.enableLineCreditInvoiceButton(purchLine, buttonCustVendCreditInvoicingLines);
            #
            #    if (isConfigurationkeyEnabled(configurationKeyNum(PSAPWP)))
            #    {
            #        if (purchLine.IsPwp)
            #        {
            #            buttonSubledgerdistribution.enabled(false);
            #        }
            #        else
            #        {
            #            buttonSubledgerdistribution.enabled(true);
            #        }
            #    }
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUBUTTON
        PROPERTIES
          Name                #LineStripFinancialsSMB
          Visible             #No
          HelpText            #@SYS316591
          ElementPosition     #1073741823
          HierarchyParent     #LineOverviewActionButtonGroup
          Text                #@SYS80043
          ButtonDisplay       #Text & Image left
          NormalImage         #10694
          ImageLocation       #EmbeddedResource
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #public void clicked()
            #{
            #    super();
            #
            #    purchTableForm.enableLineCreditInvoiceButton(purchLine, buttonCustVendCreditInvoicingLines);
            #
            #    if (isConfigurationkeyEnabled(configurationKeyNum(PSAPWP)))
            #    {
            #        if (purchLine.IsPwp)
            #        {
            #            buttonSubledgerdistribution.enabled(false);
            #        }
            #        else
            #        {
            #            buttonSubledgerdistribution.enabled(true);
            #        }
            #    }
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUBUTTON
        PROPERTIES
          Name                #LineStripProduct
          HelpText            #@SYS317849
          ElementPosition     #1533916890
          HierarchyParent     #LineOverviewActionButtonGroup
          Text                #@SYS317847
          ButtonDisplay       #Text & Image left
          NormalImage         #12422
          ImageLocation       #EmbeddedResource
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUBUTTON
        PROPERTIES
          Name                #LineStripPurchLine
          HelpText            #@SYS328718
          ElementPosition     #511305630
          HierarchyParent     #LineOverviewActionButtonGroup
          Text                #@SYS22957
          ButtonDisplay       #Text & Image left
          NormalImage         #11046
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    if (TaxParameters::isCustomsEnable_IN())
            #    {
            #        purchTableForm.enableEximInquiry_IN(purchLine.PurchQty,
            #                                            purchTable_W.CustomsImportOrder_IN,
            #                                            eximAA_IN,
            #                                            eximDFIA_IN,
            #                                            eximDEPB_IN,
            #                                            eximEPCG_IN);
            #    }
            #    super();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUBUTTON
        PROPERTIES
          Name                #LineStripPurchLineSMB
          Visible             #No
          HelpText            #@SYS328718
          ElementPosition     #766958445
          HierarchyParent     #LineOverviewActionButtonGroup
          Text                #@SYS22957
          ButtonDisplay       #Text & Image left
          NormalImage         #11046
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    if (TaxParameters::isCustomsEnable_IN())
            #    {
            #        purchTableForm.enableEximInquiry_IN(purchLine.PurchQty,
            #                                            purchTable_W.CustomsImportOrder_IN,
            #                                            eximAA_IN,
            #                                            eximDFIA_IN,
            #                                            eximDEPB_IN,
            #                                            eximEPCG_IN);
            #    }
            #    super();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUBUTTON
        PROPERTIES
          Name                #LineStripUpdate
          HelpText            #@SYS28285
          ElementPosition     #1840700268
          HierarchyParent     #LineOverviewActionButtonGroup
          Text                #@SYS58728
          ButtonDisplay       #Text & Image left
          NormalImage         #12545
          ImageLocation       #EmbeddedResource
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUBUTTON
        PROPERTIES
          Name                #LineStripUpdateSMB
          Visible             #No
          HelpText            #@SYS28285
          ElementPosition     #1991994805
          HierarchyParent     #LineOverviewActionButtonGroup
          Text                #@SYS58728
          ButtonDisplay       #Text & Image left
          NormalImage         #12545
          ImageLocation       #EmbeddedResource
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUBUTTON
        PROPERTIES
          Name                #ManageBudgetMenuButton
          HelpText            #@SYS310258
          ElementPosition     #1431655764
          HierarchyParent     #ManageBudget
          Text                #@SYS80981
          ButtonDisplay       #Text & Image above
          NormalImage         #10915
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          NeedsRecord         #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUBUTTON
        PROPERTIES
          Name                #mbTemplatesButton
          AutoDeclaration     #Yes
          HelpText            #@SYS345469
          ElementPosition     #954437176
          HierarchyParent     #PurchOrderAttachments
          Text                #@SYS345468
          NormalImage         #12723
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #AdministrationGroup_Requester
          ElementPosition     #1879048185
          HierarchyParent     #AdministrationGroup
          DataSource          #PurchTable
          ReferenceField      #Requester
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #AdministrationGroup_WorkerPurchPlacer
          ElementPosition     #805306365
          HierarchyParent     #AdministrationGroup
          DataSource          #PurchTable
          ReferenceField      #WorkerPurchPlacer
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #Customs_IN_CustomsTariffCodeTable_IN
          ElementPosition     #1610612733
          HierarchyParent     #Customs_IN
          DataSource          #PurchLine_IN
          ReferenceField      #CustomsTariffCodeTable_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #EMSFlow_UnitOfMeasure
          AutoDeclaration     #Yes
          ElementPosition     #1073741820
          HierarchyParent     #Flow
          DataSource          #EMSFlow
          ReferenceField      #UnitOfMeasure
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #Excise_IN_ExciseTariffCodes_IN
          ElementPosition     #1331873693
          HierarchyParent     #Excise_IN
          DataSource          #PurchLine_IN
          ReferenceField      #ExciseTariffCodes_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #Exim_EximIncentiveSchemeGroup
          ElementPosition     #715827882
          HierarchyParent     #Exim_IN
          DataSource          #EximPurchLine_IN
          ReferenceField      #EximIncentiveSchemeGroup
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #Exim_EximPorts
          ElementPosition     #1073741823
          HierarchyParent     #Exim_IN
          DataSource          #EximPurchLine_IN
          ReferenceField      #EximPorts
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #Exim_EximProductGroupTable
          ElementPosition     #1431655764
          HierarchyParent     #Exim_IN
          DataSource          #EximPurchLine_IN
          ReferenceField      #EximProductGroupTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #FiscalInformation_BR1_CFOPTable_BR
          ElementPosition     #613566756
          HierarchyParent     #FiscalInformation_BR
          DataSource          #PurchLine
          ReferenceField      #CFOPTable_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #g1099Fields_Tax1099Fields
          ElementPosition     #2013265918
          HierarchyParent     #g1099Fields
          DataSource          #PurchLine
          ReferenceField      #Tax1099Fields
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #Line1099Fields_Tax1099Fields
          ElementPosition     #1789569705
          HierarchyParent     #Line1099Fields
          DataSource          #PurchLine
          ReferenceField      #Tax1099Fields
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #Purch_ProcurementCategory
          ElementPosition     #715827882
          HierarchyParent     #OrderLine
          DataSource          #PurchLine
          ReferenceField      #ProcurementCategory
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #PurchCommitmentLineLookup_PSN
          AutoDeclaration     #Yes
          HelpText            #@SPS2047
          ConfigurationKey    #PurchFrenchRegulatory_PSN
          ElementPosition     #946588185
          HierarchyParent     #LineSpec
          DataSource          #PurchLine
          ReferenceField      #PurchCommitmentLine_PSN
          Label               #@SPS1834
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #PurchCommitmentLineLookup2_PSN
          AutoDeclaration     #Yes
          HelpText            #@SPS2047
          ConfigurationKey    #PurchFrenchRegulatory_PSN
          ElementPosition     #1431655764
          HierarchyParent     #Commitment_PSN
          DataSource          #PurchLine
          ReferenceField      #PurchCommitmentLine_PSN
          Label               #@SPS1834
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #PurchLine_BudgetReservationLine_PSN
          HelpText            #@SYP4990116
          ElementPosition     #1073741822
          HierarchyParent     #BudgetReservation
          DataSource          #PurchLine
          ReferenceField      #BudgetReservationLine_PSN
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #public void lookup()
            #{
            #    BudgetReservation_PSN::showBudgetReservationLookup(purchLine, this.formRun(), this);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #PurchLine_CFOPTable_BR
          ElementPosition     #715827882
          HierarchyParent     #LineSpec
          DataSource          #PurchLine
          ReferenceField      #CFOPTable_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #PurchLine_CompanyLocation_IN
          HelpText            #@GLS222760
          ElementPosition     #858993458
          HierarchyParent     #CompanyInformation
          DataSource          #PurchLine_IN
          ReferenceField      #CompanyLocation_IN
          Label               #@SYS33556
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #PurchLine_DeliveryPostalAddress
          ElementPosition     #858993458
          HierarchyParent     #PurchLine_DeliveryPostalAddressGrp
          DataSource          #PurchLine
          ReferenceField      #DeliveryPostalAddress
          ReplacementFieldGroup #LocationReference
          Label               #@SYS7924
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #PurchLine_IN_TaxWithholdCountryRegionToRemittance
          ElementPosition     #1840700268
          HierarchyParent     #GroupWithholdingTax
          DataSource          #PurchLine_IN
          ReferenceField      #TaxWithholdCountryRegionToRemittance
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #PurchLine_IN_TaxWithholdNatureOfRemittance
          ElementPosition     #1227133512
          HierarchyParent     #GroupWithholdingTax
          DataSource          #PurchLine_IN
          ReferenceField      #TaxWithholdNatureOfRemittance
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #PurchLine_ProcurementCategory
          ElementPosition     #791178185
          HierarchyParent     #LineSpec
          DataSource          #PurchLine
          ReferenceField      #ProcurementCategory
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #PurchLine_Requester
          ElementPosition     #1610612733
          HierarchyParent     #PurchLine_AttentionInfo
          DataSource          #PurchLine
          ReferenceField      #Requester
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #PurchLine_SalesTaxFormTypes_IN
          ElementPosition     #1610612734
          HierarchyParent     #IndiaSalesTax
          DataSource          #PurchLine_IN
          ReferenceField      #SalesTaxFormTypes_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #PurchTable_DeliveryPostalAddress
          ElementPosition     #858993458
          HierarchyParent     #PurchTable_DeliveryPostalAddressGrp
          DataSource          #PurchTable
          ReferenceField      #DeliveryPostalAddress
          ReplacementFieldGroup #LocationReference
          Label               #@SYS7924
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #PurchTable_SalesPurchOperationType_BR
          ElementPosition     #715827882
          HierarchyParent     #FiscalInformation
          DataSource          #PurchTable_BR
          ReferenceField      #SalesPurchOperationType_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #PurchTable_W_InvoicePostalAddress_TH
          ElementPosition     #1073741822
          HierarchyParent     #HeaderInvoiceAddress_TH
          DataSource          #PurchTable_W
          ReferenceField      #InvoicePostalAddress_TH
          ReplacementFieldGroup #LocationReference
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #ServiceTax_IN_ServiceCodeTable_IN
          ElementPosition     #1073741823
          HierarchyParent     #ServiceTax_IN
          DataSource          #PurchLine_IN
          ReferenceField      #ServiceCodeTable_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #TaxInformation_IN_ECCNumber
          AutoDeclaration     #Yes
          Visible             #No
          HelpText            #@GLS5156
          ElementPosition     #878516035
          HierarchyParent     #Excise_IN
          DataSource          #TaxInformation_IN
          ReferenceField      #ECCNumber
          Label               #@GLS5102
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #TaxInformation_IN_IECRegistrationNumberTable
          ElementPosition     #1073741822
          HierarchyParent     #Customs_IN
          DataSource          #TaxInformation_IN
          ReferenceField      #IECRegistrationNumberTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #TaxInformation_IN_ManECCRegistrationNumberTable
          AutoDeclaration     #Yes
          Visible             #No
          HelpText            #@GLS5156
          ElementPosition     #1054219242
          HierarchyParent     #Excise_IN
          DataSource          #TaxInformation_IN
          ReferenceField      #ManECCRegistrationNumberTable
          Label               #@GLS5102
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #TaxInformation_IN_SalesTaxRegistrationNumber
          HelpText            #@GLS5917
          ElementPosition     #1073741822
          HierarchyParent     #IndiaSalesTax
          DataSource          #TaxInformation_IN
          ReferenceField      #SalesTaxRegistrationNumber
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #TaxInformation_IN_STCRegistrationNumberTable
          ElementPosition     #715827882
          HierarchyParent     #ServiceTax_IN
          DataSource          #TaxInformation_IN
          ReferenceField      #STCRegistrationNumberTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #TaxInformation_IN_TraderECCRegistrationNumberTable
          AutoDeclaration     #Yes
          Visible             #No
          HelpText            #@GLS5156
          ElementPosition     #1229922449
          HierarchyParent     #Excise_IN
          DataSource          #TaxInformation_IN
          ReferenceField      #TraderECCRegistrationNumberTable
          Label               #@GLS5102
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #TaxInformation_TaxInformation_IN
          ElementPosition     #1717986916
          HierarchyParent     #CompanyInformation
          DataSource          #PurchLine_IN
          ReferenceField      #TaxInformation_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #VAT_TIN
          ElementPosition     #286331152
          HierarchyParent     #IndiaVAT
          DataSource          #TaxInformation_IN
          ReferenceField      #TIN
          ReplacementFieldGroup #Identification
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TAB
        PROPERTIES
          Name                #DetailsTab
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1610612733
          HierarchyParent     #TabPageDetails
          ShowTabs            #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TAB
        PROPERTIES
          Name                #HeaderDetailsTab
          Width               #Column width
          Height              #Column height
          ElementPosition     #1431655764
          HierarchyParent     #HeaderView
          Style               #FastTabs
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TAB
        PROPERTIES
          Name                #LineDetailsTab
          AutoDeclaration     #Yes
          Width               #Column width
          ElementPosition     #1431655764
          HierarchyParent     #LineViewLineDetails
          Style               #IndexTabs
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TAB
        PROPERTIES
          Name                #LineViewTab
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1431655764
          HierarchyParent     #LineView
          Style               #FastTabs
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TAB
        PROPERTIES
          Name                #MainTab
          Width               #Column width
          Height              #Column height
          ElementPosition     #715827882
          ShowTabs            #No
        ENDPROPERTIES
        
        METHODS
          SOURCE #tabChanged
            #public void tabChanged(int _fromTab, int _toTab)
            #{
            #    super(_fromTab, _toTab);
            #    element.lock();
            #
            #    // Buttons to show in Grid View
            #    editDetailsButton.visible(tabPageGrid.isActivePage());
            #    purchOrderList.visible(tabPageGrid.isActivePage());
            #
            #    // Buttons to show in Details View
            #    editPurchOrder.visible(!tabPageGrid.isActivePage());
            #    showGroup.visible(!tabPageGrid.isActivePage());
            #
            #    element.unLock();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #Environment
          AutoDeclaration     #Yes
          Visible             #No
          NeededPermission    #Manual
          ConfigurationKey    #EMS
          SecurityKey         #EMSJournals
          ElementPosition     #1994091957
          HierarchyParent     #LineDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS137477
          DataSource          #EMSPurchOrderFlowRelation
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #FSHSum
          Height              #Column height
          ConfigurationKey    #RetailHeadquarters
          ElementPosition     #1930178752
          HierarchyParent     #LineDetailsTab
          Caption             #@RET4160650
          DataSource          #RetailSumLines
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #HeaderView
          ElementPosition     #1610612733
          HierarchyParent     #DetailsTab
          BackgroundColor     #Dyn Background blue
          LeftMargin          #0
          RightMargin         #0
          Style               #DetailsFormDetails
          PanelStyle          #DetailsHeader
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #LineView
          ElementPosition     #1073741822
          HierarchyParent     #DetailsTab
          BackgroundColor     #Dyn Background blue
          LeftMargin          #0
          RightMargin         #0
          Style               #DetailsFormDetails
          PanelStyle          #DetailsLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #LineViewHeader
          AutoDeclaration     #Yes
          ElementPosition     #858993458
          HierarchyParent     #LineViewTab
          Caption             #@SYS16574
          Columns             #3
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
          FastTabExpanded     #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #LineViewLineDetails
          Width               #Column width
          Height              #Column height
          ElementPosition     #1717986916
          HierarchyParent     #LineViewTab
          Caption             #@SYS23823
          DataSource          #PurchLine
          TopMargin           #0
          BottomMargin        #0
          LeftMargin          #0
          RightMargin         #0
          FastTabExpanded     #No
          Scrollbars          #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #LineViewLines
          Height              #Column height
          ElementPosition     #1288490187
          HierarchyParent     #LineViewTab
          Caption             #@SYS9664
          FastTabExpanded     #Always
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #POImport
          AutoDeclaration     #Yes
          ElementPosition     #1700091215
          HierarchyParent     #HeaderDetailsTab
          BackgroundColor     #Window background
          Caption             #PO Import
          Columns             #Auto
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #RBOItemPackage
          AutoDeclaration     #Yes
          ConfigurationKey    #RetailHeadquarters
          ElementPosition     #1917396112
          HierarchyParent     #LineDetailsTab
          Caption             #@RET4999
        ENDPROPERTIES
        
        METHODS
          SOURCE #pageActivated
            #/// <summary>
            #/// Retail Item Package - Page Activated
            #/// </summary>
            #public void pageActivated()
            #{
            #    ;
            #    if (treeView.value())
            #        element.fillPackageTree();
            #
            #    super();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabFinancialDimensionsHeader
          AutoDeclaration     #Yes
          ElementPosition     #1789569700
          HierarchyParent     #HeaderDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS101181
          DataSource          #PurchTable
          HideIfEmpty         #No
        ENDPROPERTIES
        
        METHODS
          SOURCE #pageActivated
            #public void pageActivated()
            #{
            #    dimensionDefaultingControllerHeader.pageActivated();
            #
            #    super();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabFinancialDimensionsLine
          AutoDeclaration     #Yes
          ElementPosition     #1981309312
          HierarchyParent     #LineDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS101181
          DataSource          #PurchLine
          HideIfEmpty         #No
        ENDPROPERTIES
        
        METHODS
          SOURCE #pageActivated
            #public void pageActivated()
            #{
            #    dimensionDefaultingControllerLine.pageActivated();
            #
            #    super();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabHeaderAddress
          AutoDeclaration     #Yes
          ElementPosition     #894784850
          HierarchyParent     #HeaderDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS9362
          DataSource          #PurchTable
        ENDPROPERTIES
        
        METHODS
          SOURCE #pageActivated
            #public void pageActivated()
            #{
            #    super();
            #
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabHeaderDelivery
          AutoDeclaration     #Yes
          ElementPosition     #1073741820
          HierarchyParent     #HeaderDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS4508
          Columns             #2
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabHeaderDimension
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1879048185
          HierarchyParent     #HeaderDetailsTab
          Caption             #@SYS14926
          DataSource          #PurchTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabHeaderFiscalInformation_BR
          CountryRegionCodes  #BR
          ElementPosition     #2058005158
          HierarchyParent     #HeaderDetailsTab
          BackgroundColor     #Window background
          Caption             #@GLS56
          DataSource          #PurchTable
          Columns             #2
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabHeaderForeignTrade
          AutoDeclaration     #Yes
          ElementPosition     #1610612730
          HierarchyParent     #HeaderDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS27650
          Columns             #Auto
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabHeaderGeneral
          AutoDeclaration     #Yes
          ElementPosition     #357913940
          HierarchyParent     #HeaderDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS2952
          DataSource          #PurchTable
          Columns             #3
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
          FastTabExpanded     #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabHeaderPriceCalc
          AutoDeclaration     #Yes
          ElementPosition     #1252698790
          HierarchyParent     #HeaderDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS328717
          DataSource          #PurchTable
          Columns             #3
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabHeaderSetup
          AutoDeclaration     #Yes
          ElementPosition     #626349395
          HierarchyParent     #HeaderDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS2186
          DataSource          #PurchTable
          Columns             #3
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabLineAddress
          AutoDeclaration     #Yes
          ConfigurationKey    #TradeMultiShipTo
          ElementPosition     #613566756
          HierarchyParent     #LineDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS9362
          DataSource          #PurchLine
          Columns             #3
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
          SOURCE #pageActivated
            #public void pageActivated()
            #{
            #    super();
            #
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabLineDelivery
          ElementPosition     #882002211
          HierarchyParent     #LineDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS4508
          Columns             #2
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabLineFiscalInformation_BR
          CountryRegionCodes  #BR
          ElementPosition     #2070656729
          HierarchyParent     #LineDetailsTab
          BackgroundColor     #Window background
          Caption             #@GLS56
          DataSource          #PurchLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabLineFixedAsset
          AutoDeclaration     #Yes
          ElementPosition     #1955744032
          HierarchyParent     #LineDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS12578
          DataSource          #PurchLine
          Columns             #2
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
          SOURCE #pageActivated
            #public void pageActivated()
            #{
            #    super();
            #
            #    element.setupAsset(purchLine);
            #}
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabLineForeignTrade
          ElementPosition     #1942961392
          HierarchyParent     #LineDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS27650
          Columns             #3
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabLineGeneral
          AutoDeclaration     #Yes
          ElementPosition     #81808900
          HierarchyParent     #LineDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS2952
          DataSource          #PurchLine
          Columns             #3
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabLinePicking
          AutoDeclaration     #Yes
          ElementPosition     #1035393900
          HierarchyParent     #LineDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS132701
          DataSource          #PurchLine
          Columns             #2
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabLinePriceDisc
          AutoDeclaration     #Yes
          ElementPosition     #1227133512
          HierarchyParent     #LineDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS328717
          DataSource          #PurchLine
          Columns             #2
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabLineProduct
          ElementPosition     #728610522
          HierarchyParent     #LineDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS103105
          Columns             #3
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabLineProject
          AutoDeclaration     #Yes
          ElementPosition     #1380525201
          HierarchyParent     #LineDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS4534
          DataSource          #PurchLine
          Columns             #3
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabLineSetup
          AutoDeclaration     #Yes
          ElementPosition     #460175067
          HierarchyParent     #LineDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS2186
          DataSource          #PurchLine
          Columns             #3
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabLineTax1099
          AutoDeclaration     #Yes
          CountryRegionCodes  #US
          ElementPosition     #1968526672
          HierarchyParent     #LineDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS118159
          DataSource          #PurchLine
          Columns             #Auto
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabLoad
          AutoDeclaration     #Yes
          ConfigurationKey    #WHSandTMS
          ElementPosition     #2046754813
          HierarchyParent     #LineDetailsTab
          Caption             #@WAX312
        ENDPROPERTIES
        
        METHODS
          SOURCE #pageActivated
            #public void pageActivated()
            #{
            #    whsLoadLine_ds.executeQuery();
            #    super();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabPageDetails
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #MainTab
          Style               #DetailsFormDetails
          PanelStyle          #Details
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabPageGrid
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1610612734
          HierarchyParent     #MainTab
          ViewEditMode        #Edit
          Style               #DetailsFormGrid
          PanelStyle          #Grid
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabTaxInformation_IN
          AutoDeclaration     #Yes
          CountryRegionCodes  #IN
          ElementPosition     #2109070187
          HierarchyParent     #LineDetailsTab
          Caption             #@SYS33652
          DataSource          #PurchLine_IN
          Columns             #2
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #Zakat_SA
          AutoDeclaration     #Yes
          CountryRegionCodes  #SA
          ElementPosition     #1968526670
          HierarchyParent     #HeaderDetailsTab
          Caption             #@SYS321586
          DataSource          #PurchTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #BudgetControl
          AutoDeclaration     #Yes
          NeededPermission    #Create
          HelpText            #@SYS137083
          ConfigurationKey    #LedgerAdv2BudgetCtrl
          ElementPosition     #858993458
          HierarchyParent     #ManageBudgetMenuButton
          Text                #@SYS317355
          ButtonDisplay       #Text & Image left
          NormalImage         #12313
          ImageLocation       #EmbeddedResource
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    if (purchTable)
            #    {
            #        // <PubSect>
            #        if (PublicSectorUtils::isBudgetReservationEnabled())
            #        {
            #            // Perform document balance check against a referenced general budget reservation document if any.
            #            PurchTable::checkBudgetReservationBalance_PSN(purchTable.PurchId, purchTable.SourceDocumentHeader);
            #        }
            #        // </PubSect>
            #
            #        // Submit to source document processor for an on-demand GL budget check
            #        SourceDocumentProcessorFacade::submitOnDemandSourceDocumentImpl(
            #            purchTable,
            #            false,
            #            SourceDocumentHeader::find(purchTable.SourceDocumentHeader).AccountingStatus,
            #            null,
            #            curUserId());
            #
            #        purchTable_ds.updateBudgetCheckResultDisplay();
            #    }
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #BudgetControlLine
          AutoDeclaration     #Yes
          NeededPermission    #Create
          HelpText            #@SYS137084
          ConfigurationKey    #LedgerAdv2BudgetCtrl
          ElementPosition     #757935402
          HierarchyParent     #LineStripFinancials
          Text                #@SYS317355
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    element.budgetControlLine();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #ButtonInterCompanyCustInvoiceJournal
          AutoDeclaration     #Yes
          NeededPermission    #Manual
          HelpText            #@SYS85665
          ElementPosition     #1789569705
          HierarchyParent     #IntercompanyTracing
          Text                #@SYS15721
          ButtonDisplay       #Text & Image left
          NormalImage         #10612
          ImageLocation       #EmbeddedResource
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void  clicked()
            #{
            #    super();
            #
            #    TradeInterCompany::construct(purchTable).formRun(formStr(CustInvoiceJournal),element);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #ButtonInterCompanyCustPackingSlipJournal
          AutoDeclaration     #Yes
          NeededPermission    #Manual
          HelpText            #@SYS85660
          ElementPosition     #1431655764
          HierarchyParent     #IntercompanyTracing
          Text                #@SYS23155
          ButtonDisplay       #Text & Image left
          NormalImage         #10667
          ImageLocation       #EmbeddedResource
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void  clicked()
            #{
            #    super();
            #
            #    TradeInterCompany::construct(purchTable).formRun(formStr(CustPackingSlipJournal),element);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #ButtonInterCompanyInventOnHandReserve
          AutoDeclaration     #Yes
          NeededPermission    #Manual
          HelpText            #@SYS21870
          ConfigurationKey    #TradeInterCompany
          ElementPosition     #1768515938
          HierarchyParent     #ButtonLineInventory
          Text                #@SYS7120
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void  clicked()
            #{
            #    super();
            #
            #    PurchTableForm::interCompanyInventOnHandReserve(purchLine);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #ButtonInterCompanyInventTrans
          AutoDeclaration     #Yes
          NeededPermission    #Manual
          HelpText            #@SYS28328
          ConfigurationKey    #TradeInterCompany
          ElementPosition     #1642193371
          HierarchyParent     #ButtonLineInventory
          Text                #@SYS1084
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void  clicked()
            #{
            #    super();
            #
            #    PurchTableForm::openIterCompanyInventTransForm(purchLine);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #ButtonInterCompanySalesFormLetter_Pickinglist
          AutoDeclaration     #Yes
          NeededPermission    #Manual
          HelpText            #@SYS94424
          ConfigurationKey    #TradeInterCompany
          ElementPosition     #1227133512
          HierarchyParent     #ReceiveProcess
          Text                #@SYS114678
          ButtonDisplay       #Text & Image left
          NormalImage         #10602
          ImageLocation       #EmbeddedResource
          Big                 #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void  clicked()
            #{
            #    if (!purchTable.RecId && !purchTable.InterCompanySalesId)
            #    {
            #        throw(error("@SYS28047"));
            #    }
            #
            #    TradeInterCompany::construct(purchTable).menuFunction(classStr(SalesFormLetter_PickingList),MenuItemType::Action,element);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #ButtonInterCompanySalesTable
          AutoDeclaration     #Yes
          NeededPermission    #Manual
          HelpText            #@SYS75330
          ElementPosition     #715827882
          HierarchyParent     #IntercompanyTracing
          Text                #@SYS93291
          ButtonDisplay       #Text & Image above
          NormalImage         #10604
          ImageLocation       #EmbeddedResource
          Big                 #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void  clicked()
            #{
            #    super();
            #
            #    if (purchTable.PurchaseType == PurchaseType::ReturnItem)
            #    {
            #        TradeInterCompany::construct(purchTable).formRun(formStr(ReturnTable),element);
            #    }
            #    else
            #    {
            #        TradeInterCompany::construct(purchTable).formRun(formStr(SalesTable),element);
            #    }
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #CreateLink
          AutoDeclaration     #Yes
          NeededPermission    #Create
          HelpText            #@SYS306899
          ConfigurationKey    #TradeBlanketOrder
          ElementPosition     #1687308579
          HierarchyParent     #LineStripUpdate
          Text                #@SYS132301
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    super();
            #    element.createAgreementLink();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #EndDiscAction
          AutoDeclaration     #Yes
          NeededPermission    #Create
          HelpText            #@SYS68934
          ConfigurationKey    #PriceDisc
          ElementPosition     #1610612733
          HierarchyParent     #PurchaseCalculate
          Text                #@SYS6465
          ButtonDisplay       #Text & Image left
          NormalImage         #10831
          ImageLocation       #EmbeddedResource
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #public void  clicked()
            #{
            #    super();
            #
            #    element.endDiscount();
            #}
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #MultiLineDiscAction
          AutoDeclaration     #Yes
          NeededPermission    #Create
          HelpText            #@SYS68933
          ConfigurationKey    #PriceDisc
          ElementPosition     #1073741822
          HierarchyParent     #PurchaseCalculate
          Text                #@SYS11440
          ButtonDisplay       #Text & Image left
          NormalImage         #10647
          ImageLocation       #EmbeddedResource
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void  clicked()
            #{
            #    super();
            #
            #    element.multiLineDiscount();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #PBAExecute
          AutoDeclaration     #Yes
          NeededPermission    #Create
          HelpText            #@SYS40755
          ElementPosition     #325957337
          HierarchyParent     #LineStripProduct
          Text                #@SYS40223
          ShowShortCut        #No
          SaveRecord          #No
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    element.pbaConfigureLine();
            #}
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #PrintMgmt
          NeededPermission    #Manual
          HelpText            #@SYS68918
          ConfigurationKey    #LogisticsBasic
          SecurityKey         #VendMisc
          ElementPosition     #1073741822
          HierarchyParent     #GeneralSetup
          Text                #@SYS54502
          ButtonDisplay       #Text & Image above
          NormalImage         #10698
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          NeedsRecord         #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    if (purchTable_ds.cursor() == null)
            #    {
            #        return;
            #    }
            #
            #    super();
            #
            #    element.PrintManagement();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #PrintMgmtSMB
          NeededPermission    #Manual
          HelpText            #@SYS68918
          ConfigurationKey    #LogisticsBasic
          SecurityKey         #VendMisc
          ElementPosition     #1073741822
          HierarchyParent     #GeneralSetupSMB
          Text                #@SYS54502
          ButtonDisplay       #Text & Image above
          NormalImage         #10698
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          NeedsRecord         #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    if (purchTable_ds.cursor() == null)
            #    {
            #        return;
            #    }
            #
            #    super();
            #
            #    element.PrintManagement();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #RemoveLink
          AutoDeclaration     #Yes
          NeededPermission    #Create
          HelpText            #@SYS306901
          ConfigurationKey    #TradeBlanketOrder
          ElementPosition     #1994091957
          HierarchyParent     #LineStripUpdate
          Text                #@SYS67038
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    super();
            #
            #    element.removeAgreementLink();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #AdministrationGroup_ChangeRequestRequired
          ElementPosition     #1610612730
          HierarchyParent     #AdministrationGroup
          DataSource          #PurchTable
          DataField           #ChangeRequestRequired
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #Excise_IN_CENVATCreditAvailed_IN
          ElementPosition     #2045532401
          HierarchyParent     #Excise_IN
          DataSource          #PurchLine_IN
          DataField           #CENVATCreditAvailed_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #Excise_IN_Consignment_IN
          ElementPosition     #1841629913
          HierarchyParent     #Excise_IN
          DataSource          #PurchLine_IN
          DataField           #Consignment_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #EximPurchLine_IN_ApplyDEPB
          AutoDeclaration     #Yes
          ElementPosition     #1789569705
          HierarchyParent     #Exim_IN
          DataSource          #EximPurchLine_IN
          DataField           #ApplyDEPB
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #FixedAssets_CreateFixedAsset
          AutoDeclaration     #Yes
          ElementPosition     #536870910
          HierarchyParent     #FixedAssets
          DataSource          #PurchLine
          DataField           #CreateFixedAsset
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #ForeignTradeForSubContracts_StatTriangul
          ElementPosition     #1879048190
          HierarchyParent     #ForeignTradeForSubContracts
          DataSource          #PurchLine
          DataField           #StatTriangularDeal
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #ForeignTradeForSubContracts_StatTriangul1
          Visible             #No
          ElementPosition     #1946157054
          HierarchyParent     #ForeignTradeForSubContracts
          DataSource          #PurchLine
          DataField           #StatTriangularDeal
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #ICMSReceivableLongTerm_BR
          HelpText            #@GLS676
          ElementPosition     #1073741822
          HierarchyParent     #ICMSCreditInformation_BR
          Label               #@GLS321
          DataSource          #PurchLine
          DataMethod          #ICMSReceivableLongTerm_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #InclTax
          ElementPosition     #1431655764
          HierarchyParent     #SalesTax
          DataSource          #PurchTable
          DataField           #InclTax
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #MCRDropShip_MCRDropShipment
          ElementPosition     #858993458
          HierarchyParent     #MCRDropShip
          DataSource          #PurchLine
          DataField           #MCRDropShipment
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #PISCOFINSReceivableLongTerm_BR
          HelpText            #@GLS62986
          ElementPosition     #715827882
          HierarchyParent     #PISCOFINSCreditInformation_BR
          Label               #@SYP4882389
          DataSource          #PurchLine
          DataMethod          #PISCOFINSReceivableLongTerm_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #POExim_AZ_ChArrivedWh
          ElementPosition     #1503238548
          HierarchyParent     #POExim
          DataSource          #PurchTable
          DataField           #AZ_ChArrivedWh
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #POExim_AZ_ChBackContainer
          ElementPosition     #1610612730
          HierarchyParent     #POExim
          DataSource          #PurchTable
          DataField           #AZ_ChBackContainer
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #POExim_AZ_ChContainerNumber
          ElementPosition     #1181116002
          HierarchyParent     #POExim
          Label               #Container Number
          DataSource          #PurchTable
          DataField           #AZ_ChContainerNumber
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #POExim_AZ_ChContainerOnPort
          ElementPosition     #1342177275
          HierarchyParent     #POExim
          DataSource          #PurchTable
          DataField           #AZ_ChContainerOnPort
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #POExim_AZ_ChDocReceipt
          ElementPosition     #1288490184
          HierarchyParent     #POExim
          DataSource          #PurchTable
          DataField           #AZ_ChDocReceipt
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #POExim_AZ_ChLocationReleased
          ElementPosition     #1449551457
          HierarchyParent     #POExim
          DataSource          #PurchTable
          DataField           #AZ_CHRealeasedContainer
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #POExim_AZ_ChPaymentTax
          ElementPosition     #1395864366
          HierarchyParent     #POExim
          DataSource          #PurchTable
          DataField           #AZ_CHTaxPaid
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #POExim_AZ_ChProductReceipt
          ElementPosition     #1556925639
          HierarchyParent     #POExim
          DataSource          #PurchTable
          DataField           #AZ_ChProductReceipt
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #POExim_AZ_ChSupplierReleased
          ElementPosition     #1234803093
          HierarchyParent     #POExim
          DataSource          #PurchTable
          DataField           #AZ_CHInvoiceDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #PurchLine_DSA_IN
          ElementPosition     #1943581157
          HierarchyParent     #Excise_IN
          DataSource          #PurchLine_IN
          DataField           #DSA_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #PurchLine_IN_SoftwareDeclReceived_IN
          ElementPosition     #920350134
          HierarchyParent     #GroupWithholdingTax
          DataSource          #PurchLine_IN
          DataField           #SoftwareDeclReceived_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #PurchLine_IsPwp
          AutoDeclaration     #Yes
          Visible             #No
          ConfigurationKey    #PSAPwp
          ElementPosition     #2147473406
          HierarchyParent     #LineSpec
          BackgroundColor     #Window background
          DataSource          #PurchLine
          DataField           #IsPwp
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    if (isConfigurationkeyEnabled(configurationKeyNum(Project3)))
            #    {
            #        if (purchLine.IsPwp)
            #        {
            #            buttonSourceDocumentDistributionHeader.enabled(false);
            #        }
            #        else
            #        {
            #            buttonSourceDocumentDistributionHeader.enabled(true);
            #        }
            #    }
            #    return ret;
            #}
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #PurchTable_AgreementIsLinked
          ElementPosition     #1840700268
          HierarchyParent     #Grid
          BackgroundColor     #Window background
          DataSource          #PurchTable
          DataMethod          #AgreementIsLinked
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #PurchTable_CustomsImportOrder_IN
          AllowEdit           #No
          Skip                #Yes
          ElementPosition     #1431655764
          HierarchyParent     #Group
          DataSource          #PurchTable_W
          DataField           #CustomsImportOrder_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #PurchTable_MCRDropShipment
          ElementPosition     #2070787801
          HierarchyParent     #Grid
          BackgroundColor     #Window background
          DataSource          #PurchTable
          DataField           #MCRDropShipment
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #PurchTable_MCRDropShipment_Status
          AllowEdit           #No
          ElementPosition     #1923787428
          HierarchyParent     #status
          DataSource          #PurchTable
          DataField           #MCRDropShipment
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #PurchTable_OneTimeVendor
          AllowEdit           #No
          Skip                #Yes
          ElementPosition     #1073741822
          HierarchyParent     #Account
          DataSource          #PurchTable
          DataField           #OneTimeVendor
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #PurchTable_ServiceCodeOnDlvAddress_BR
          ElementPosition     #1789569705
          HierarchyParent     #FiscalInformation
          DataSource          #PurchTable_BR
          DataField           #ServiceCodeOnDlvAddress_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #PurchTable_VendFinalUser_BR
          ElementPosition     #1431655764
          HierarchyParent     #FiscalInformation
          DataSource          #PurchTable_BR
          DataField           #VendFinalUser_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #RAssetPurchTrans_Posted
          ElementPosition     #715827880
          HierarchyParent     #GridAsset
          BackgroundColor     #Window background
          DataSource          #RAssetPurchTrans
          DataField           #Posted
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #SalesTax_UnitedVATInvoice_LT
          HelpText            #@GLS220218
          ElementPosition     #1610612734
          HierarchyParent     #SalesTax
          DataSource          #PurchTable
          DataField           #UnitedVATInvoice_LT
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #ServiceTax_IN_IsRecoverableServiceTax_IN
          ElementPosition     #1789569705
          HierarchyParent     #ServiceTax_IN
          DataSource          #PurchLine_IN
          DataField           #IsRecoverableServiceTax_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #statusLine_Blocked
          ElementPosition     #1342177275
          HierarchyParent     #statusLine
          DataSource          #PurchLine
          DataField           #Blocked
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #statusLine_Complete
          ElementPosition     #1610612730
          HierarchyParent     #statusLine
          DataSource          #PurchLine
          DataField           #Complete
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #statusLine_IsFinalized
          ElementPosition     #536870910
          HierarchyParent     #statusLine
          DataSource          #PurchLine
          DataField           #IsFinalized
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #TreeView
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #ChooseGroup
          Label               #@RET4404
          LabelAlignment      #Right
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #/// <summary>
            #/// Tree View - Clicked
            #/// </summary>
            #public void clicked()
            #{
            #    super();
            #
            #    if (this.value())
            #    {
            #        gridGroup1.visible(false);
            #        treeGroup.visible(true);
            #        element.fillPackageTree();
            #    }
            #    else
            #    {
            #        treeGroup.visible(false);
            #        gridGroup1.visible(true);
            #    }
            #
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #DeliveryLine_DeliveryType
          ElementPosition     #1073741820
          HierarchyParent     #DeliveryLine
          DataSource          #PurchLine
          DataField           #DeliveryType
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #DeliveryLine_LineDeliveryType
          ElementPosition     #1342177275
          HierarchyParent     #DeliveryLine
          DataSource          #PurchLine
          DataField           #LineDeliveryType
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #DeliveryLineForSubcontracts_DeliveryType
          ElementPosition     #1610612734
          HierarchyParent     #DeliveryLineForSubcontracts
          DataSource          #PurchLine
          DataField           #DeliveryType
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #Excise_IN_DirectSettlement_IN
          ElementPosition     #1739678669
          HierarchyParent     #Excise_IN
          DataSource          #PurchLine_IN
          DataField           #DirectSettlement_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #Excise_IN_ExciseType_IN
          AutoDeclaration     #Yes
          ElementPosition     #585677356
          HierarchyParent     #Excise_IN
          Label               #@GLS5244
          DataSource          #PurchLine_IN
          DataField           #ExciseType_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #ExciseManufacture_IN
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1535776181
          HierarchyParent     #Excise_IN
          DataSource          #PurchLine_IN
          DataMethod          #exciseManufacture_IN
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    purchLine_IN_DS.enableExciseFields_IN();
            #
            #    purchLine_IN.modifiedField(fieldNum(PurchLine_IN, ExciseRecordType_IN));
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #ExciseNone_IN
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1433824937
          HierarchyParent     #Excise_IN
          DataSource          #PurchLine_IN
          DataMethod          #exciseNone_IN
        ENDPROPERTIES
        
        METHODS
          SOURCE #enter
            #public void enter()
            #{
            #    if (ExciseRecordTypeTable_IN::existForceBatchValidation(ExciseRecordType_IN::RG23D))
            #    {
            #        this.delete(enum2str(ExciseNone_IN::RG23D));
            #    }
            #
            #    super();
            #}
          ENDSOURCE
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    purchLine_IN_DS.enableExciseFields_IN();
            #
            #    purchLine_IN.modifiedField(fieldNum(PurchLine_IN, ExciseRecordType_IN));
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #ExciseTraders_IN
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1637727425
          HierarchyParent     #Excise_IN
          DataSource          #PurchLine_IN
          DataMethod          #exciseTraders_IN
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    purchLine_IN_DS.enableExciseFields_IN();
            #
            #    purchLine_IN.modifiedField(fieldNum(PurchLine_IN, ExciseRecordType_IN));
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #FiscalInformation_BR1_M_taxationOrigin_BR
          AllowEdit           #No
          ElementPosition     #920350134
          HierarchyParent     #FiscalInformation_BR
          DataSource          #PurchLine
          DataMethod          #taxationOrigin_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #FixedAssets_AssetTransTypePurch
          AutoDeclaration     #Yes
          ElementPosition     #1610612730
          HierarchyParent     #FixedAssets
          DataSource          #PurchLine
          DataField           #AssetTransTypePurch
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #HeaderForeignTrade_ListCode
          AutoDeclaration     #Yes
          ElementPosition     #1879048189
          HierarchyParent     #HeaderForeignTrade
          DataSource          #PurchTable
          DataField           #ListCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #MCRDropShip_MCRDropShipStatus
          ElementPosition     #1288490187
          HierarchyParent     #MCRDropShip
          DataSource          #PurchLine
          DataField           #MCRDropShipStatus
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #PISCOFINSFixedAssetCreditAppropMethod_BR
          ElementPosition     #1968526675
          HierarchyParent     #PISCOFINSCreditInformation_BR
          DataSource          #PurchLine
          DataMethod          #PISCOFINSFixedAssetCreditAppropMethod_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #PISCOFINSFixedAssetCreditGroup_BR
          ElementPosition     #1431655764
          HierarchyParent     #PISCOFINSCreditInformation_BR
          DataSource          #PurchLine
          DataMethod          #PISCOFINSFixedAssetCreditGroup_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #PISCOFINSFixedAssetCreditPurpose_BR
          ElementPosition     #1789569705
          HierarchyParent     #PISCOFINSCreditInformation_BR
          DataSource          #PurchLine
          DataMethod          #PISCOFINSFixedAssetCreditPurpose_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #PurchLine_OperationType_MX
          ElementPosition     #1808407280
          HierarchyParent     #LineSpec
          DataSource          #PurchLine
          DataField           #OperationType_MX
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #PurchLine_qualityOrderStatusDisplay
          AutoDeclaration     #Yes
          AllowEdit           #No
          ElementPosition     #1921432735
          HierarchyParent     #LineSpec
          DataSource          #PurchLine
          DataMethod          #qualityOrderStatusDisplay
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #PurchLine_VATGoodsType_IN
          ElementPosition     #906715316
          HierarchyParent     #IndiaVAT
          DataSource          #PurchLine_IN
          DataField           #VATGoodsType_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #PurchStatus
          Left                #Right edge
          Skip                #Yes
          ElementPosition     #1610612734
          HierarchyParent     #HeaderInfo
          ShowLabel           #No
          DataSource          #PurchTable
          DataField           #PurchStatus
          ViewEditMode        #View
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #PurchTable_BR_PresenceType
          ElementPosition     #1968526675
          HierarchyParent     #FiscalInformation
          DataSource          #PurchTable_BR
          DataField           #PresenceType
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #PurchTable_PurchaseType
          ElementPosition     #1431655764
          HierarchyParent     #BaseInfo
          DataSource          #PurchTable
          DataField           #PurchaseType
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #PurchTable_PurchaseTypeGrid
          AutoDeclaration     #Yes
          ElementPosition     #766958445
          HierarchyParent     #Grid
          DataSource          #PurchTable
          DataField           #PurchaseType
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #PurchTable_PurchStatusGrid
          ElementPosition     #1073741823
          HierarchyParent     #Grid
          DataSource          #PurchTable
          DataField           #PurchStatus
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #PurchTable_qualityOrderStatusDisplay
          AutoDeclaration     #Yes
          AllowEdit           #No
          ElementPosition     #1994091957
          HierarchyParent     #Grid
          DataSource          #PurchTable
          DataMethod          #qualityOrderStatusDisplay
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #PurchTable_State
          ElementPosition     #920350134
          HierarchyParent     #Grid
          DataSource          #PurchTable
          DataField           #DocumentState
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #PurchTable_W_ExciseVendorType_IN
          ElementPosition     #1968526675
          HierarchyParent     #Vendor
          DataSource          #PurchTable_W
          DataField           #ExciseVendorType_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #ServiceTax_IN_GTAServiceCategory_IN
          AutoDeclaration     #Yes
          ElementPosition     #1550960411
          HierarchyParent     #ServiceTax_IN
          DataSource          #PurchLine_IN
          DataField           #GTAServiceCategory_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #status_DocumentState
          ElementPosition     #1073741820
          HierarchyParent     #status
          DataSource          #PurchTable
          DataField           #DocumentState
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #status_PurchStatus
          ElementPosition     #536870910
          HierarchyParent     #status
          DataSource          #PurchTable
          DataField           #PurchStatus
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #status_qualityOrderStatusDisplay
          AutoDeclaration     #Yes
          AllowEdit           #No
          ElementPosition     #1879048185
          HierarchyParent     #status
          DataSource          #PurchTable
          DataMethod          #qualityOrderStatusDisplay
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #statusLine_PurchStatus
          ElementPosition     #805306365
          HierarchyParent     #statusLine
          DataSource          #PurchLine
          DataField           #PurchStatus
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #statusLine_qualityOrderStatusDisplay
          AutoDeclaration     #Yes
          AllowEdit           #No
          ElementPosition     #1879048185
          HierarchyParent     #statusLine
          DataSource          #PurchLine
          DataMethod          #qualityOrderStatusDisplay
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #statusLine_WorkflowState
          ElementPosition     #1073741820
          HierarchyParent     #statusLine
          DataSource          #PurchLine
          DataField           #WorkflowState
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #Attachments
          ElementPosition     #1431655764
          HierarchyParent     #PurchOrderAttachments
          Text                #@SYS316708
          ButtonDisplay       #Text & Image above
          NormalImage         #10442
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          Command             #2853
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #DeletePurchOrder
          ElementPosition     #1476395004
          HierarchyParent     #PurchOrderMaintain
          Text                #@SYS14425
          ButtonDisplay       #Text & Image left
          NormalImage         #10121
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          SaveRecord          #No
          MultiSelect         #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          Command             #2832
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #DeleteRAsset
          NeededPermission    #Delete
          HelpText            #@SYS331950
          ElementPosition     #1610612734
          HierarchyParent     #RAssetButtonGroup
          Text                #@SYS311855
          ButtonDisplay       #Text & Image left
          NormalImage         #11438
          ImageLocation       #EmbeddedResource
          SaveRecord          #No
          NeedsRecord         #Yes
          Command             #2832
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #EditPurchOrder
          AutoDeclaration     #Yes
          NeededPermission    #Update
          ElementPosition     #536870910
          HierarchyParent     #PurchOrderMaintain
          Text                #@SYS317438
          ButtonDisplay       #Text & Image above
          NormalImage         #10040
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          Command             #4471
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #EnvironmentDeleteButton
          ElementPosition     #1610612733
          HierarchyParent     #EnvironmentButtonGroup
          Text                #@SYS26394
          ButtonDisplay       #Text & Image left
          NormalImage         #11438
          ImageLocation       #EmbeddedResource
          SaveRecord          #No
          Primary             #Yes
          Command             #2832
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #EnvironmentNewButton
          ElementPosition     #1073741822
          HierarchyParent     #EnvironmentButtonGroup
          Text                #@SYS60080
          ButtonDisplay       #Text & Image left
          NormalImage         #11421
          ImageLocation       #EmbeddedResource
          Primary             #Yes
          Command             #260
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #HeaderViewButton
          ElementPosition     #1073741822
          HierarchyParent     #ShowGroup
          NormalImage         #12133
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          Primary             #Yes
          Command             #1320
          ToggleButton        #Radio
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    super();
            #
            #    // Since the client doesn't reactivate the controls that were previously hidden we must force update to default dimensions
            #    dimensionDefaultingControllerHeader.activated(true);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #LineAttachmentsStrip
          ElementPosition     #1241513979
          HierarchyParent     #LineStripPurchLine
          Text                #@SYS114630
          ShowShortCut        #No
          NeedsRecord         #Yes
          Command             #2853
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #LineStripDelete
          AutoDeclaration     #Yes
          HelpText            #@SYS328874
          ElementPosition     #1717986916
          HierarchyParent     #LineOverviewCoreActionButtonGroup
          Text                #@SYS135131
          ButtonDisplay       #Text & Image left
          NormalImage         #11400
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          SaveRecord          #No
          MultiSelect         #Yes
          Primary             #Yes
          Command             #2832
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #LineStripNew
          AutoDeclaration     #Yes
          ElementPosition     #858993458
          HierarchyParent     #LineOverviewCoreActionButtonGroup
          Text                #@SYS319116
          ButtonDisplay       #Text & Image left
          NormalImage         #10009
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #Yes
          Primary             #Yes
          Command             #260
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #LineViewButton
          ElementPosition     #1610612733
          HierarchyParent     #ShowGroup
          NormalImage         #12134
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          Primary             #Yes
          Command             #1321
          ToggleButton        #Radio
          ToggleValue         #On
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #NewPurchOrder
          HelpText            #@SYS26198
          ElementPosition     #1073741822
          HierarchyParent     #PurchOrderNew
          Text                #@SYS25545
          ButtonDisplay       #Text & Image above
          NormalImage         #10874
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #Yes
          Big                 #Yes
          Primary             #Yes
          Command             #260
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #newRAsset
          NeededPermission    #Create
          HelpText            #@GLS220512
          ElementPosition     #1073741822
          HierarchyParent     #RAssetButtonGroup
          Text                #@SYS2318
          ButtonDisplay       #Text & Image left
          NormalImage         #11421
          ImageLocation       #EmbeddedResource
          Command             #260
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #Refresh
          HelpText            #@SYS315818
          ElementPosition     #1073741822
          HierarchyParent     #PurchOrderList
          ButtonDisplay       #Text & Image left
          NormalImage         #11437
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          KeyTip              #@SYS315818
          Command             #2875
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #SendToExcel
          DisplayTarget       #Client
          ElementPosition     #1610612734
          HierarchyParent     #PurchOrderList
          ButtonDisplay       #Text & Image left
          NormalImage         #10156
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #Yes
          Big                 #Yes
          KeyTip              #@SYS315819
          NeedsRecord         #Yes
          Command             #4436
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #SumLineDelete
          ElementPosition     #1610612733
          HierarchyParent     #ButtonGroup
          Text                #@SYS135131
          ButtonDisplay       #Text & Image left
          NormalImage         #11400
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          SaveRecord          #No
          MultiSelect         #Yes
          Primary             #Yes
          Command             #2832
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #SumLineNew
          ElementPosition     #1073741822
          HierarchyParent     #ButtonGroup
          Text                #@SYS319116
          ButtonDisplay       #Text & Image left
          NormalImage         #10009
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          SaveRecord          #No
          Primary             #Yes
          Command             #260
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #ConfirmedDlv
          ElementPosition     #1610612733
          HierarchyParent     #DeliveryDateLine
          DataSource          #PurchLine
          DataField           #ConfirmedDlv
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #Delivery_ConfirmedDlvEarliest
          ElementPosition     #1073741823
          HierarchyParent     #Delivery
          DataSource          #PurchTable
          DataField           #ConfirmedDlvEarliest
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #Delivery_DeliveryDate
          ElementPosition     #715827882
          HierarchyParent     #Delivery
          DataSource          #PurchTable
          DataField           #DeliveryDate
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #DeliveryDate
          ElementPosition     #1073741822
          HierarchyParent     #DeliveryDateLine
          DataSource          #PurchLine
          DataField           #DeliveryDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #DeliveryLineForSubcontracts_ConfirmedDlv
          ElementPosition     #1073741823
          HierarchyParent     #DeliveryLineForSubcontracts
          DataSource          #PurchLine
          DataField           #ConfirmedDlv
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #DepreciationStartDate
          AutoDeclaration     #Yes
          ElementPosition     #1879048185
          HierarchyParent     #FixedAssets
          DataSource          #PurchLine
          DataField           #DepreciationStartDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #Group1_PriceAgreementDate_RU
          ElementPosition     #1431655764
          HierarchyParent     #Price_RU
          DataSource          #PurchTable_RU
          DataField           #PriceAgreementDate_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #HeaderDelivery_ConfirmedDlvEarliest
          ElementPosition     #1610612733
          HierarchyParent     #DeliveryHeader
          DataSource          #PurchTable
          DataField           #ConfirmedDlvEarliest
          FastTabSummary      #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #HeaderDelivery_DeliveryDate
          ElementPosition     #1073741822
          HierarchyParent     #DeliveryHeader
          DataSource          #PurchTable
          DataField           #DeliveryDate
          FastTabSummary      #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #LoadSchedShipDate
          ElementPosition     #1136903103
          HierarchyParent     #GridLoads
          DataSource          #WHSLoadLine
          DataMethod          #displayLoadSchedShipDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #Payment_FixedDueDate
          ElementPosition     #644245092
          HierarchyParent     #Payment
          DataSource          #PurchTable
          DataField           #FixedDueDate
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #enter
            #public void enter()
            #{
            #    super();
            #
            #    priorDueDate = this.dateValue();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #POExim_AZ_ArrivedWH
          ElementPosition     #1986422367
          HierarchyParent     #POExim
          ShowLabel           #No
          DataSource          #PurchTable
          DataField           #AZ_ArrivedWH
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #POExim_AZ_BackContainer
          ElementPosition     #2093796549
          HierarchyParent     #POExim
          ShowLabel           #No
          DataSource          #PurchTable
          DataField           #AZ_BackContainer
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #POExim_AZ_CountainerOnPort
          ElementPosition     #1825361094
          HierarchyParent     #POExim
          ShowLabel           #No
          DataSource          #PurchTable
          DataField           #AZ_CountainerOnPort
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #POExim_AZ_DocReceipt
          ElementPosition     #1771674003
          HierarchyParent     #POExim
          ShowLabel           #No
          DataSource          #PurchTable
          DataField           #AZ_DocReceipt
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #POExim_AZ_LocationReleased
          ElementPosition     #1932735276
          HierarchyParent     #POExim
          ShowLabel           #No
          DataSource          #PurchTable
          DataField           #AZ_ReleasedContainer
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #POExim_AZ_PaymentTax
          ElementPosition     #1879048185
          HierarchyParent     #POExim
          ShowLabel           #No
          DataSource          #PurchTable
          DataField           #AZ_TaxPaid
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #POExim_AZ_ProductReceipt
          ElementPosition     #2040109458
          HierarchyParent     #POExim
          ShowLabel           #No
          DataSource          #PurchTable
          DataField           #AZ_ProductReceipt
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #POExim_AZ_SupplierReleased
          ElementPosition     #1717986912
          HierarchyParent     #POExim
          ShowLabel           #No
          DataSource          #PurchTable
          DataField           #AZ_InvoiceDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #Posting_AccountingDate
          ConfigurationKey    #LedgerAdv2BudgetCtrl
          ElementPosition     #1789569705
          HierarchyParent     #Posting
          DataSource          #PurchTable
          DataField           #AccountingDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #PurchLine_PriceAgreementDate_RU
          ElementPosition     #2013265917
          HierarchyParent     #Price
          DataSource          #PurchLine_W
          DataField           #PriceAgreementDate_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #PurchLine_W_RefInvoiceDate_MY
          ElementPosition     #2147482280
          HierarchyParent     #LineSpec
          DataSource          #PurchLine_W
          DataField           #RefInvoiceDate_MY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #PurchTable_DeliveryDateGrid
          ElementPosition     #1380525201
          HierarchyParent     #Grid
          DataSource          #PurchTable
          DataField           #DeliveryDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL INT64EDIT
        PROPERTIES
          Name                #PurchLine_LineNumber
          ElementPosition     #452101820
          HierarchyParent     #LineSpec
          DataSource          #PurchLine
          DataField           #LineNumber
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL INTEDIT
        PROPERTIES
          Name                #ICMSCreditInstallments_BR
          ElementPosition     #1610612733
          HierarchyParent     #ICMSCreditInformation_BR
          DataSource          #PurchLine
          DataMethod          #ICMSCreditInstallments_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL INTEDIT
        PROPERTIES
          Name                #PISCOFINSFixedAssetCreditInstallments_BR
          ElementPosition     #1073741823
          HierarchyParent     #PISCOFINSCreditInformation_BR
          DataSource          #PurchLine
          DataMethod          #PISCOFINSFixedAssetCreditInstallments_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL INTEDIT
        PROPERTIES
          Name                #Tax1099GFields_Tax1099TaxYear
          ElementPosition     #1073741822
          HierarchyParent     #Tax1099GFields
          LimitText           #4
          DataSource          #Tax1099BoxDetail
          DataField           #Tax1099TaxYear
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #AdvanceInvoiceCreate_CZ
          HelpText            #@GLS220282
          ElementPosition     #1879048190
          HierarchyParent     #InvoiceProcess
          Text                #@GLS107927
          ButtonDisplay       #Text & Image above
          Primary             #Yes
          DataSource          #PurchTable
          MenuItemName        #CzVendAdvanceInvoiceCreate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #AgreementLine
          AutoDeclaration     #Yes
          ElementPosition     #1840700268
          HierarchyParent     #LineStripUpdate
          Text                #@SYS26568
          DataSource          #PurchLine
          MenuItemName        #PurchAgreementLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #AllocateMarkup
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #PurchOrderMiscCharges
          Text                #@SYS313571
          ButtonDisplay       #Text & Image left
          NormalImage         #10440
          ImageLocation       #EmbeddedResource
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #MarkupAllocation
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #BankLGRequestForm
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #ManageBankDocument
          ButtonDisplay       #Text & Image above
          NormalImage         #12519
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #BankLGRequestForm
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #BudgetCheckResultsInquiryHeader
          ElementPosition     #1288490187
          HierarchyParent     #ManageBudgetMenuButton
          ButtonDisplay       #Text & Image left
          DataSource          #PurchTable
          MenuItemName        #BudgetCheckResults
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #BudgetCheckResultsInquiryLine
          AutoDeclaration     #Yes
          ElementPosition     #884257969
          HierarchyParent     #LineStripFinancials
          Text                #@SYS128629
          NeedsRecord         #Yes
          DataSource          #PurchLine
          MenuItemName        #BudgetCheckResults
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #BudgetReservationSelector_PSN
          ElementPosition     #1610612734
          HierarchyParent     #BudgetReservation
          Border              #None
          ColorScheme         #RGB
          BackStyle           #Transparent
          BackgroundColor     #255 255 255
          ForegroundColor     #255 255 255
          Style               #Link
          MenuItemName        #BudgetResLineSelector_PSN
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #// <PubSect>
            #void clicked()
            #{
            #    BudgetResLineSelectorContract_PSN   budgetResLineSelectorContract;
            #    BudgetReservationLineRecId_PSN      budgetReservationLineRecId;
            #
            #    budgetResLineSelectorContract = BudgetResLineSelectorContract_PSN::newFromParameters(
            #        BudgetReservationRelievingDocument_PSN::PurchaseOrder,
            #        purchTable.AccountingDate);
            #
            #    budgetResLineSelectorContract.parmDoShowEditableSelectorForm(PurchTableForm.canBudgetReservationLineBeEdited_PSN(purchLine_ds));
            #
            #    BudgetResLineSelectorForm_PSN::showBudgetResLineSelector(
            #        budgetResLineSelectorContract,
            #        purchLine,
            #        element);
            #
            #    budgetReservationLineRecId = budgetResLineSelectorContract.getSingleBudgetReservationLineRecId();
            #
            #    if (budgetReservationLineRecId)
            #    {
            #        purchLine.BudgetReservationLine_PSN = budgetReservationLineRecId;
            #
            #        if (purchLine.validateField(fieldNum(PurchLine, BudgetReservationLine_PSN)))
            #        {
            #            purchLine.modifiedField(fieldNum(PurchLine, BudgetReservationLine_PSN));
            #
            #            purchLine_ds.refresh();
            #
            #            purchTableForm.setAllowEditProjectFields(purchLine, purchLine_ds);
            #            purchLine_ds.updateDesignForProject();
            #            element.enableProjSalesPrice();
            #        }
            #        else
            #        {
            #            purchLine.BudgetReservationLine_PSN = purchLine.orig().BudgetReservationLine_PSN;
            #        }
            #    }
            #}
            #// </PubSect>
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ButtonAccountingDistributionButtonView
          HelpText            #@SYS333722
          ElementPosition     #1073741823
          HierarchyParent     #PurchaseAccounting
          Text                #@SYS323891
          ButtonDisplay       #Text & Image left
          NormalImage         #12439
          ImageLocation       #EmbeddedResource
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #AccountingDistributionsDocumentView
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonConfirm
          AutoDeclaration     #Yes
          ElementPosition     #1521134249
          HierarchyParent     #PurchaseGenerate
          ButtonDisplay       #Text & Image left
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #PurchFormLetter_Confirm
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    PurchTable      purchTableSelection;
            #    Common          firstDatasourceCursor;
            #    boolean         tax1099SFieldsOK = true;
            #    int             originalPosition;
            #
            #    if (isConfigurationkeyEnabled(configurationKeyNum(PublicSector)))
            #    {
            #        originalPosition = purchTable_DS.getPosition();
            #        element.lockWindowUpdate(true);
            #        firstDatasourceCursor = purchTable_ds.getFirst(true);
            #
            #        for (purchTableSelection = (firstDatasourceCursor ? firstDatasourceCursor : purchTable_ds.cursor()) ; purchTableSelection && tax1099SFieldsOK == true ; purchTableSelection = purchTable_ds.getNext())
            #        {
            #            tax1099SFieldsOK = Tax1099BoxDetail::checkTax1099Fields(purchTableSelection.PurchId);
            #        }
            #
            #        purchTable_DS.setPosition(originalPosition);
            #        element.lockWindowUpdate(false);
            #
            #        if(tax1099SFieldsOK)
            #        {
            #            super();
            #        }
            #
            #        purchTable_ds.updateBudgetCheckResultDisplay();
            #    }
            #    else
            #    {
            #        try
            #        {
            #            super();
            #
            #            purchTable_ds.updateBudgetCheckResultDisplay();
            #
            #            purchTableForm.parmIsHeaderVersioned(true);
            #        }
            #        catch
            #        {
            #            purchTable_ds.updateBudgetCheckResultDisplay();
            #        }
            #    }
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonConfirmationRequest
          AutoDeclaration     #Yes
          ElementPosition     #477218588
          HierarchyParent     #PurchaseGenerate
          ButtonDisplay       #Text & Image above
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #PurchFormLetter_PurchOrder_ConfRequest
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ButtonCreateBankLCImport
          AutoDeclaration     #Yes
          HelpText            #@SYS316146
          ConfigurationKey    #BankDocument
          ElementPosition     #1073741822
          HierarchyParent     #ManageBankDocument
          ButtonDisplay       #Text & Image above
          NormalImage         #12518
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemName        #BankLCImport
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ButtonCreateBudgetTransfer
          AutoDeclaration     #Yes
          HelpText            #@SYS306914
          ElementPosition     #631612835
          HierarchyParent     #LineStripFinancials
          Text                #@SYS306913
          NeedsRecord         #Yes
          MenuItemName        #BudgetCreateTransfer
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #public void clicked()
            #{
            #    element.budgetCreateTransfer();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonCustVendCreditInvoicingHeader
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #InvoiceIntroduce
          ButtonDisplay       #Text & Image above
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #CustVendCreditInvoicing
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonCustVendCreditInvoicingLines
          AutoDeclaration     #Yes
          ElementPosition     #1642193371
          HierarchyParent     #LineStripFinancials
          NeedsRecord         #Yes
          DataSource          #PurchLine
          MenuItemName        #CustVendCreditInvoicing
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonDeliverySchedule
          AutoDeclaration     #Yes
          ElementPosition     #268435455
          HierarchyParent     #LineStripPurchLine
          DataSource          #PurchLine
          MenuItemName        #PurchDeliverySchedule
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    if (PurchTableForm::openDeliveryScheduleForm(this, purchLine).closedOk())
            #    {
            #        purchLine_ds.research(true);
            #        purchTable_ds.reread();
            #        purchTable_ds.refresh();
            #    }
            #}
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonFinalizePurchaseOrder
          AutoDeclaration     #Yes
          ElementPosition     #1789569705
          HierarchyParent     #PurchaseGenerate
          ButtonDisplay       #Text & Image left
          ImageLocation       #EmbeddedResource
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #PurchTableFinalize
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonHeaderFiscalDocumentText_BR
          AutoDeclaration     #Yes
          AllowEdit           #No
          CountryRegionCodes  #BR
          HelpText            #@GLS63737
          ElementPosition     #1610612734
          HierarchyParent     #PurchOrderAttachments
          NormalImage         #10099
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #FiscalDocumentText_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonInventPackingSlipExtJour
          AutoDeclaration     #Yes
          ElementPosition     #1879048189
          HierarchyParent     #ReceiveJournals
          NormalImage         #12830
          ImageLocation       #EmbeddedResource
          MenuItemName        #PLInventPackingSlipExtJour
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonJournalBillOfEntry_IN
          AutoDeclaration     #Yes
          Enabled             #No
          ElementPosition     #1431655764
          HierarchyParent     #CustomsJournal
          ButtonDisplay       #Text & Image above
          NormalImage         #10739
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemName        #CustomsBillOfEntryJournal_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonJournalConfirmationReq
          AutoDeclaration     #Yes
          ElementPosition     #954437176
          HierarchyParent     #PurchaseJournals
          Text                #@SYS4004797
          ButtonDisplay       #Text & Image above
          NormalImage         #10725
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #VendConfirmationRequestJournal
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonJournalFacture_RU
          AutoDeclaration     #Yes
          ElementPosition     #1879048189
          HierarchyParent     #InvoiceJournals
          ButtonDisplay       #Text & Image above
          NormalImage         #10733
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemName        #FactureJournalVend_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonJournalFacture_RU_SMB
          AutoDeclaration     #Yes
          ElementPosition     #429496729
          HierarchyParent     #InvoiceJournalsSMB
          ButtonDisplay       #Text & Image above
          NormalImage         #10733
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemName        #FactureJournalVend_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonJournalInvoice
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #InvoiceJournals
          Text                #@SYS114667
          ButtonDisplay       #Text & Image above
          NormalImage         #10612
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemName        #VendInvoiceJournal
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonJournalInvoice4Paym_RU
          AutoDeclaration     #Yes
          ElementPosition     #1789569705
          HierarchyParent     #PurchaseJournals
          ButtonDisplay       #Text & Image above
          NormalImage         #10498
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemName        #VendInvoice4PaymJournal_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonJournalInvoiceSMB
          AutoDeclaration     #Yes
          ElementPosition     #858993458
          HierarchyParent     #InvoiceJournalsSMB
          Text                #@SYS114667
          ButtonDisplay       #Text & Image above
          NormalImage         #10612
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemName        #VendInvoiceJournal
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonJournalPackingSlip
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #ReceiveJournals
          ButtonDisplay       #Text & Image left
          NormalImage         #10667
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
          DataSource          #PurchTable
          MenuItemName        #VendPackingSlipJournal
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonJournalPendingInvoice
          AutoDeclaration     #Yes
          HelpText            #@SYS112154
          ElementPosition     #1610612733
          HierarchyParent     #InvoiceJournals
          Text                #@SYS114694
          ButtonDisplay       #Text & Image above
          NormalImage         #10675
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemName        #VendUnpostedInvoiceJournal
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonJournalPurchaseOrder
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #PurchaseJournals
          Text                #@SYS310758
          ButtonDisplay       #Text & Image above
          NormalImage         #10725
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemName        #VendPurchOrderJournal
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonJournalReceiptsList
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #ReceiveJournals
          Text                #@SYS114691
          ButtonDisplay       #Text & Image left
          NormalImage         #10739
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
          DataSource          #PurchTable
          MenuItemName        #VendReceiptsJournal
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonLineExpandBOM
          AutoDeclaration     #Yes
          ElementPosition     #894784850
          HierarchyParent     #LineStripPurchLine
          MenuItemType        #Action
          MenuItemName        #PurchLineExplodeBOM
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonLineFiscalDocumentText_BR
          AutoDeclaration     #Yes
          AllowEdit           #No
          CountryRegionCodes  #BR
          HelpText            #@GLS63738
          ElementPosition     #1319807653
          HierarchyParent     #LineStripPurchLine
          ButtonDisplay       #Text & Image left
          NormalImage         #10099
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          NeedsRecord         #Yes
          MenuItemName        #FiscalDocumentText_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonLineLot
          AutoDeclaration     #Yes
          ElementPosition     #1136903103
          HierarchyParent     #ButtonLineInventory
          DataSource          #PurchLine
          MenuItemName        #InventLot
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonLineOnHand
          AutoDeclaration     #Yes
          ElementPosition     #1010580536
          HierarchyParent     #ButtonLineInventory
          DataSource          #PurchLine
          MenuItemName        #InventOnhand
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonLineOnHandSMB
          AutoDeclaration     #Yes
          ElementPosition     #1288490187
          HierarchyParent     #ButtonLineInventorySMB
          DataSource          #PurchLine
          MenuItemName        #InventOnhand
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ButtonLineQuickQuote
          AutoDeclaration     #Yes
          ElementPosition     #1288490187
          HierarchyParent     #LineOverviewCoreActionButtonGroup
          Text                #@SYS54992
          ButtonDisplay       #Text & Image left
          NormalImage         #12489
          ImageLocation       #EmbeddedResource
          DataSource          #PurchTable
          MenuItemName        #PurchQuickQuote
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonLineTransact
          AutoDeclaration     #Yes
          ElementPosition     #1263225670
          HierarchyParent     #ButtonLineInventory
          DataSource          #PurchLine
          MenuItemName        #InventTrans
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonLineTransactSMB
          AutoDeclaration     #Yes
          ElementPosition     #1717986916
          HierarchyParent     #ButtonLineInventorySMB
          DataSource          #PurchLine
          MenuItemName        #InventTrans
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ButtonOriginalSalesTable
          AutoDeclaration     #Yes
          ElementPosition     #1073741823
          HierarchyParent     #IntercompanyTracing
          Text                #@SYS93292
          ButtonDisplay       #Text & Image above
          NormalImage         #10664
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          MenuItemName        #SalesTable
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    TradeInterCompany::construct(purchTable).referenceForm();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonPaymentSchedule
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #InvoiceBill
          ButtonDisplay       #Text & Image left
          NormalImage         #10673
          ImageLocation       #EmbeddedResource
          DataSource          #PurchTable
          MenuItemName        #VendPaymSchedule
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    CustVendPaymSched   custVendPaymSched;
            #
            #    element.automaticTotalDiscount();
            #
            #    if (purchTable.PaymentSched && !VendPaymSched::exist(purchTable.TableId,purchTable.RecId))
            #    {
            #        custVendPaymSched = CustVendPaymSched::construct(SysModule::Vend,purchTable);
            #        custVendPaymSched.copyPaymSched(PaymSched::find(purchTable.PaymentSched));
            #        purchTable.createPaymentSched();
            #    }
            #    super();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonProformaFacture_RU
          AutoDeclaration     #Yes
          ElementPosition     #1610612734
          HierarchyParent     #InvoiceProcess
          Text                #@GLS116069
          ButtonDisplay       #Text & Image above
          NormalImage         #10731
          ImageLocation       #EmbeddedResource
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #PurchFormLetter_Proforma_Facture_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonProformaInvoice
          AutoDeclaration     #Yes
          ElementPosition     #1476395006
          HierarchyParent     #InvoiceProcess
          Text                #@SYS4701
          ButtonDisplay       #Text & Image above
          NormalImage         #10703
          ImageLocation       #EmbeddedResource
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #PurchFormLetter_Proforma_Invoice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonProformaInvoice4Paym_RU
          AutoDeclaration     #Yes
          ElementPosition     #1252698793
          HierarchyParent     #PurchaseGenerate
          Text                #@GLS116067
          ButtonDisplay       #Text & Image left
          NormalImage         #12380
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #PurchFormLetter_Proforma_Invoice4Paym_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonProformaPackingSlip
          AutoDeclaration     #Yes
          ElementPosition     #1840700268
          HierarchyParent     #ReceiveProcess
          ButtonDisplay       #Text & Image above
          NormalImage         #10704
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #PurchFormLetter_Proforma_PackingSlip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonProformaPurchaseOrder
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #PurchaseGenerate
          Text                #@SYS114652
          ButtonDisplay       #Text & Image left
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #PurchFormLetter_Proforma_PurchaseOrder
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonProformaReceiptsList
          AutoDeclaration     #Yes
          ElementPosition     #1533916890
          HierarchyParent     #ReceiveProcess
          Text                #@SYS53077
          ButtonDisplay       #Text & Image above
          NormalImage         #10707
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #PurchFormLetter_Proforma_ReceiptsList
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonPurchAgreement
          AutoDeclaration     #Yes
          ElementPosition     #1879048185
          HierarchyParent     #GeneralRelatedInfo
          ButtonDisplay       #Text & Image left
          MenuItemName        #PurchAgreement
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonPurchCancel
          AutoDeclaration     #Yes
          ElementPosition     #1879048188
          HierarchyParent     #PurchOrderMaintain
          ButtonDisplay       #Text & Image left
          NormalImage         #10017
          ImageLocation       #EmbeddedResource
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #PurchCancel
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonPurchTableCompare
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #ManageHistory
          ButtonDisplay       #Text & Image left
          MenuItemName        #PurchTableCompare
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonPurchTableVersion
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #ManageHistory
          ButtonDisplay       #Text & Image left
          MenuItemName        #PurchTableVersion
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonRemovePurchPrepayTable
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #PurchasePrepay
          ButtonDisplay       #Text & Image left
          Big                 #Yes
          MenuItemType        #Action
          MenuItemName        #PurchPrepayRemove
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonRequestChange
          AutoDeclaration     #Yes
          ElementPosition     #1073741820
          HierarchyParent     #PurchOrderMaintain
          Big                 #Yes
          AutoRefreshData     #Yes
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #purchRequestChange
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ButtonSourceDocumentDistributionHeader
          AutoDeclaration     #Yes
          HelpText            #@SYS136029
          ElementPosition     #715827882
          HierarchyParent     #PurchaseAccounting
          Text                #@SYS304290
          ButtonDisplay       #Text & Image left
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #AccountingDistPurchTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ButtonSubledgerdistribution
          AutoDeclaration     #Yes
          HelpText            #@SYS136029
          ElementPosition     #378967701
          HierarchyParent     #LineStripFinancials
          DataSource          #PurchLine
          MenuItemName        #AccountingDistPurchTable
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    // Ensure there is a record existing with an amount to distribute
            #    if (!purchLine.SourceDocumentLine)
            #    {
            #        info("@SYS311174");
            #    }
            #    else
            #    {
            #        super();
            #    }
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonSubLedgerJournalLines
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #PurchaseAccounting
          Text                #@SYS135346
          ButtonDisplay       #Text & Image left
          NormalImage         #12429
          ImageLocation       #EmbeddedResource
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #SubledgerJournalAccEntry_PurchTable
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    buttonSubLedgerJournalLines.dataSource(purchTable_ds.id());
            #    super();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonUpdateBillOfEntry_IN
          AutoDeclaration     #Yes
          Enabled             #No
          ElementPosition     #1431655764
          HierarchyParent     #CustomsGenerate
          ButtonDisplay       #Text & Image above
          NormalImage         #10738
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #PurchFormLetter_BillOfEntry_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonUpdateFacture_RU
          AutoDeclaration     #Yes
          ElementPosition     #1207959550
          HierarchyParent     #InvoiceProcess
          ButtonDisplay       #Text & Image above
          NormalImage         #10731
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #PurchFormLetter_Facture_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonUpdateInvoice
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #InvoiceProcess
          Text                #@SYS114667
          ButtonDisplay       #Text & Image above
          NormalImage         #10610
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #PurchFormLetter_Invoice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonUpdateInvoice4Paym_RU
          AutoDeclaration     #Yes
          ElementPosition     #894784852
          HierarchyParent     #PurchaseGenerate
          ButtonDisplay       #Text & Image left
          NormalImage         #12519
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #PurchFormLetter_Invoice4Paym_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonUpdateInvoiceRegistration_IN
          AutoDeclaration     #Yes
          Enabled             #No
          ElementPosition     #1431655764
          HierarchyParent     #CustomsMaintain
          ButtonDisplay       #Text & Image above
          NormalImage         #10610
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemName        #CustomsInvoiceRegistrate_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonUpdateInvoiceSMB
          AutoDeclaration     #Yes
          ElementPosition     #1073741823
          HierarchyParent     #InvoiceProcessSMB
          Text                #@SYS114667
          ButtonDisplay       #Text & Image above
          NormalImage         #10610
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #PurchFormLetter_Invoice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonUpdatePackingSlip
          AutoDeclaration     #Yes
          ElementPosition     #920350134
          HierarchyParent     #ReceiveProcess
          ButtonDisplay       #Text & Image above
          NormalImage         #10665
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #PurchFormLetter_PackingSlip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonUpdatePrepayInvoice
          AutoDeclaration     #Yes
          ElementPosition     #2013265918
          HierarchyParent     #InvoiceProcess
          ButtonDisplay       #Text & Image below
          NormalImage         #12310
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #PurchFormLetter_PrepayInvoice_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonUpdatePurchaseOrder
          AutoDeclaration     #Yes
          ElementPosition     #686001720
          HierarchyParent     #PurchaseGenerate
          Text                #@SYS4006395
          ButtonDisplay       #Text & Image above
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #PurchFormLetter_PurchaseOrder
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    super();
            #
            #    purchTable_ds.updateBudgetCheckResultDisplay();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonUpdateReceiptsList
          AutoDeclaration     #Yes
          ElementPosition     #613566756
          HierarchyParent     #ReceiveProcess
          ButtonDisplay       #Text & Image above
          NormalImage         #10738
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #PurchFormLetter_ReceiptsList
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ButtonWithholdTax_IN
          AutoDeclaration     #Yes
          ElementPosition     #2143289342
          HierarchyParent     #LineOverviewActionButtonGroup
          Text                #@SYS33817
          ImageLocation       #EmbeddedResource
          DataSource          #PurchLine
          MenuItemName        #TaxWithholdTmpWorkTrans_IN
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void  clicked()
            #{
            #    if (!tmpPurchTableTaxWithholdTransForm || (tmpPurchTableTaxWithholdTransForm && tmpPurchTableTaxWithholdTransForm.closed()))
            #    {
            #        tmpPurchTableTaxWithholdTransForm = PurchTotals::showWithholdTaxLine_IN(purchTable,purchLine);
            #    }
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CaseButton
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #GeneralVendorCases
          ButtonDisplay       #Text & Image left
          NormalImage         #12198
          ImageLocation       #EmbeddedResource
          DataSource          #PurchTable
          MenuItemName        #CaseDetail
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CFMPaymentRequestCreate
          AutoDeclaration     #Yes
          ElementPosition     #2028178999
          HierarchyParent     #PurchaseGenerate
          ButtonDisplay       #Text & Image left
          ImageLocation       #EmbeddedResource
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #CFMPaymentRequestCreate_PO
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CFMPaymentRequestView
          AutoDeclaration     #Yes
          ElementPosition     #1968526675
          HierarchyParent     #PurchaseJournals
          ButtonDisplay       #Text & Image above
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #CFMPaymentRequestGrid_PO
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CFMPlannedPaymentTable
          ElementPosition     #1879048190
          HierarchyParent     #InvoiceBill
          ButtonDisplay       #Text & Image left
          NormalImage         #10593
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          DataSource          #PurchTable
          MenuItemName        #CFMPlannedPaymentTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ContactPerson
          AutoDeclaration     #Yes
          ElementPosition     #1789569705
          HierarchyParent     #GeneralVendor
          ButtonDisplay       #Text & Image left
          NormalImage         #11118
          ImageLocation       #EmbeddedResource
          DataSource          #PurchTable
          MenuItemName        #ContactPerson
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #Cov
          ElementPosition     #1610612734
          HierarchyParent     #InvoiceBill
          ButtonDisplay       #Text & Image left
          NormalImage         #10474
          ImageLocation       #EmbeddedResource
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #LedgerCoverage
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    element.automaticTotalDiscount();
            #
            #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
            #    {
            #        if (purchTable.checkMarkupTrans())
            #        {
            #            super();
            #        }
            #    }
            #    else
            #    {
            #        super();
            #    }
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #Create
          ElementPosition     #920350134
          HierarchyParent     #CreateActivity
          Text                #@SYS114625
          NormalImage         #10430
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
          MenuItemName        #smmactivitiesactionNew
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CreateCase
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #GeneralVendorCases
          ButtonDisplay       #Text & Image left
          DataSource          #PurchTable
          MenuItemName        #CaseDetailNewPurchase
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CreateTask
          ElementPosition     #1840700268
          HierarchyParent     #CreateActivity
          Text                #@SYS114680
          NormalImage         #10431
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
          MenuItemName        #smmActivitiesTaskNew
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CustomsImportAssessableValue_IN
          AutoDeclaration     #Yes
          ElementPosition     #1610612730
          HierarchyParent     #LineStripPurchLine
          ButtonDisplay       #Text & Image left
          ImageLocation       #EmbeddedResource
          DataSource          #PurchLine
          MenuItemName        #CustomsImportAssessableValue_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #DirPartyPostalAddressNewHeader
          AutoDeclaration     #Yes
          HelpText            #@SYS342027
          ElementPosition     #1717986916
          HierarchyParent     #PurchTable_DeliveryPostalAddressGrp
          Text                #@SYS111834
          ButtonDisplay       #Image only
          NormalImage         #11421
          ImageLocation       #EmbeddedResource
          MenuItemName        #CompanyDirPartyPostalAddressNew
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #DirPartyPostalAddressNewLine
          AutoDeclaration     #Yes
          HelpText            #@SYS342027
          ElementPosition     #1717986916
          HierarchyParent     #PurchLine_DeliveryPostalAddressGrp
          Text                #@SYS111834
          ButtonDisplay       #Image only
          NormalImage         #11421
          ImageLocation       #EmbeddedResource
          MenuItemName        #CompanyDirPartyPostalAddressNew
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #// <GIN>
            #void clicked()
            #{
            #    super();
            #
            #    if ((TaxParameters::checkTaxParameters_IN() || TaxWithholdParameters_IN::checkTaxParameters()) && purchLine.DeliveryPostalAddress != purchLine.orig().DeliveryPostalAddress)
            #    {
            #        purchLine_IN.CompanyLocation_IN = LogisticsPostalAddress::getLocation(purchLine.DeliveryPostalAddress);
            #        purchLine_IN.TaxInformation_IN = TaxInformation_IN::findDefaultbyLocation(purchLine_IN.CompanyLocation_IN).RecId;
            #        purchLine_IN_ds.refresh();
            #    }
            #}
            #// </GIN>
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #DocuActionTemplateUndefined
          AutoDeclaration     #Yes
          Enabled             #No
          ElementPosition     #1431655764
          HierarchyParent     #mbTemplatesButton
          NeedsRecord         #Yes
          MenuItemName        #DocuActionTemplateUndefined
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #EditDetailsButton
          AutoDeclaration     #Yes
          Visible             #No
          HelpText            #@SYS340465
          ElementPosition     #805306365
          HierarchyParent     #PurchOrderMaintain
          Text                #@SYS317438
          ButtonDisplay       #Text & Image above
          NormalImage         #10040
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          DataSource          #PurchTable
          OpenMode            #Edit
          CopyCallerQuery     #Yes
          MenuItemName        #PurchTable_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #EncumbranceSummary
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #ManageView
          ButtonDisplay       #Text & Image left
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemName        #AccountingDistributionOrderSummary
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ExciseManufacturerImporterInvDetails_IN
          AutoDeclaration     #Yes
          ElementPosition     #2013265918
          HierarchyParent     #PurchOrderAttachments
          ButtonDisplay       #Text & Image above
          NormalImage         #12239
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #ExciseManufactureImporterInvoiceLine_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ExciseRegisterBalance_IN
          ElementPosition     #1521134245
          HierarchyParent     #LineStripPurchLine
          Text                #@GLS5618
          ButtonDisplay       #Text & Image left
          ImageLocation       #EmbeddedResource
          DataSource          #PurchLine
          MenuItemName        #ExciseRegisterBalance_In
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #EximAA_IN
          AutoDeclaration     #Yes
          HelpText            #@GLS61753
          ElementPosition     #1789569700
          HierarchyParent     #LineStripPurchLine
          Text                #@GLS61755
          ButtonDisplay       #Text & Image left
          ImageLocation       #EmbeddedResource
          MenuItemName        #EximImportDetailsAA_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #EximDEPB_IN
          AutoDeclaration     #Yes
          ElementPosition     #1879048185
          HierarchyParent     #LineStripPurchLine
          Text                #@GLS61906
          ButtonDisplay       #Text & Image left
          ImageLocation       #EmbeddedResource
          DataSource          #EximPurchLine_IN
          MenuItemName        #EximDEPBEntitlementDetails_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #EximDFIA_IN
          AutoDeclaration     #Yes
          HelpText            #@GLS61754
          ElementPosition     #1968526670
          HierarchyParent     #LineStripPurchLine
          Text                #@GLS61756
          ButtonDisplay       #Text & Image left
          ImageLocation       #EmbeddedResource
          MenuItemName        #EximImportDetailsDFIA_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #EximEPCG_IN
          AutoDeclaration     #Yes
          HelpText            #@GLS62208
          ElementPosition     #2058005155
          HierarchyParent     #LineStripPurchLine
          Text                #@GLS62209
          ButtonDisplay       #Text & Image left
          ImageLocation       #EmbeddedResource
          MenuItemName        #EximEPCGImportTrans_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #FactureEditLinesVend_Proforma_RU
          AutoDeclaration     #Yes
          HelpText            #@GLS104543
          ElementPosition     #1744830462
          HierarchyParent     #InvoiceProcess
          Text                #@GLS116069
          ButtonDisplay       #Text & Image above
          NormalImage         #10731
          ImageLocation       #EmbeddedResource
          DataSource          #PurchTable
          MenuItemName        #FactureEditLinesVend_Proforma_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #FactureEditLinesVend_RU
          AutoDeclaration     #Yes
          HelpText            #@GLS104543
          ElementPosition     #1342177278
          HierarchyParent     #InvoiceProcess
          Text                #@GLS104802
          ButtonDisplay       #Text & Image above
          NormalImage         #10731
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemName        #FactureEditLinesVend_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #GenerateLabelChangeJournals
          ElementPosition     #1073741822
          HierarchyParent     #LabelChangeJournal
          NormalImage         #12269
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #RetailLabelChangeJournalGenerate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #HeaderInquiry_CostControlCommittedCost
          AutoDeclaration     #Yes
          AllowEdit           #No
          ElementPosition     #1610612730
          HierarchyParent     #GeneralRelatedInfo
          ButtonDisplay       #Text & Image left
          NormalImage         #11032
          ImageLocation       #EmbeddedResource
          SaveRecord          #No
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #costcontrolCommittedCost
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #HeaderTaxForms_IN
          ElementPosition     #1879048190
          HierarchyParent     #PurchOrderAttachments
          ButtonDisplay       #Text & Image above
          NormalImage         #10837
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #Yes
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #TransitDocumentsalesTaxForm_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #IncentiveSchemeGroup_IN
          AutoDeclaration     #Yes
          HelpText            #@GLS61731
          ElementPosition     #1700091215
          HierarchyParent     #LineStripPurchLine
          Text                #@GLS61496
          ButtonDisplay       #Text & Image left
          ImageLocation       #EmbeddedResource
          DataSource          #EximPurchLine_IN
          MenuItemName        #EximIncentiveSchemeGroupsForm_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #InventDimParmFixedAction
          ElementPosition     #1946157048
          HierarchyParent     #LineStripPurchLine
          Text                #@SYS5951
          SaveRecord          #No
          MenuItemName        #InventDimParmFixed
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #InventDimParmFixedActionSMB
          ElementPosition     #1503238548
          HierarchyParent     #LineStripPurchLineSMB
          Text                #@SYS5951
          SaveRecord          #No
          MenuItemName        #InventDimParmFixed
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #InventDimTracking
          AutoDeclaration     #Yes
          ElementPosition     #2021161072
          HierarchyParent     #ButtonLineInventory
          Text                #@SYS5951
          DataSource          #PurchLine
          MenuItemName        #InventDimTracking
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #InventMarking
          AutoDeclaration     #Yes
          ElementPosition     #757935402
          HierarchyParent     #ButtonLineInventory
          DataSource          #PurchLine
          MenuItemName        #inventmarking
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    super();
            #    purchTableForm.setAllowEditAssetFields(purchTable, purchLine, purchLine_ds);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #InventNonConformanceTableLine
          AutoDeclaration     #Yes
          ElementPosition     #976128930
          HierarchyParent     #LineStripProduct
          NeedsRecord         #Yes
          DataSource          #PurchLine
          MenuItemName        #InventNonConformanceTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #InventNonConformanceTableTableHeader
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #ReceiveQualityManagement
          ButtonDisplay       #Text & Image above
          NormalImage         #11134
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #InventNonConformanceTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #InventOnhandInterCompany
          AutoDeclaration     #Yes
          ElementPosition     #1515870804
          HierarchyParent     #ButtonLineInventory
          DataSource          #PurchLine
          MenuItemName        #InventOnhandInterCompany
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #InventQualityOrderTableLine
          AutoDeclaration     #Yes
          ElementPosition     #1171354716
          HierarchyParent     #LineStripProduct
          NeedsRecord         #Yes
          DataSource          #PurchLine
          MenuItemName        #InventQualityOrderTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #InventQualityOrderTableTableHeader
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #ReceiveQualityManagement
          ButtonDisplay       #Text & Image above
          NormalImage         #11135
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #InventQualityOrderTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #InventReserve
          AutoDeclaration     #Yes
          ElementPosition     #631612835
          HierarchyParent     #ButtonLineInventory
          DataSource          #PurchLine
          MenuItemName        #InventReserve
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #InventTransPick
          AutoDeclaration     #Yes
          ElementPosition     #1380525201
          HierarchyParent     #LineStripUpdate
          DataSource          #PurchLine
          MenuItemName        #InventTransPick
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #LedgerTransact
          AutoDeclaration     #Yes
          ElementPosition     #1789569705
          HierarchyParent     #PurchaseAccounting
          Text                #@SYS115715
          NormalImage         #10859
          ImageLocation       #EmbeddedResource
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #LedgerTransVoucher1
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #LineAmounts_PSN
          ElementPosition     #1610612734
          HierarchyParent     #ManageView
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemName        #TradeAmountsSummary_PSN
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    SourceDocumentProcessorCaller processorCaller = null;
            #
            #    if (purchTable.RecId > 0 && purchTable.DocumentState < VersioningDocumentState::Confirmed && !AccountingDistribution::existEventAndSourceDocumentLine(AccountingEvent::findBySourceDocumentHeader(purchTable.SourceDocumentHeader).RecId, purchTable.SourceDocumentLine))
            #    {
            #        purchTable.checkFullyDistributedAndQualified(processorCaller);
            #    }
            #
            #    super();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #LineFinalize
          AutoDeclaration     #Yes
          ElementPosition     #920350134
          HierarchyParent     #LineStripUpdate
          MenuItemType        #Action
          MenuItemName        #PurchLineFinalize
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #LineFinalizeSMB
          AutoDeclaration     #Yes
          ElementPosition     #1610612734
          HierarchyParent     #LineStripUpdateSMB
          MenuItemType        #Action
          MenuItemName        #PurchLineFinalize
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #LineInquiry_CostControlCommittedCost
          AutoDeclaration     #Yes
          AllowEdit           #No
          ElementPosition     #1894838507
          HierarchyParent     #LineStripFinancials
          SaveRecord          #No
          NeedsRecord         #Yes
          DataSource          #PurchLine
          MenuItemName        #costcontrolCommittedCost
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #LineQuantity
          ElementPosition     #1073741820
          HierarchyParent     #GeneralRelatedInfo
          ButtonDisplay       #Text & Image above
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #PurchTableLineQuantity
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #LineTaxForms_IN
          ElementPosition     #1280660816
          HierarchyParent     #LineStripPurchLine
          MultiSelect         #No
          NeedsRecord         #Yes
          DataSource          #PurchLine
          MenuItemName        #TransitDocumentSalesTaxForm_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #LineTaxTransSource
          AutoDeclaration     #Yes
          ElementPosition     #1452709520
          HierarchyParent     #LineStripFinancials
          DataSource          #PurchLine
          MenuItemName        #TaxTransSourcePurchOrder
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void  clicked()
            #{
            #    element.lineTaxTransSource();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #LineTaxTransSourceSMB
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #LineStripFinancialsSMB
          DataSource          #PurchLine
          MenuItemName        #TaxTransSourcePurchOrder
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void  clicked()
            #{
            #    element.lineTaxTransSource();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #LogisticsLocationSelectHeader
          AutoDeclaration     #Yes
          NeededPermission    #Update
          HelpText            #@SYS342026
          ElementPosition     #1288490187
          HierarchyParent     #PurchTable_DeliveryPostalAddressGrp
          ButtonDisplay       #Image only
          MenuItemName        #LogisticsLocationSelect
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #LogisticsLocationSelectLine
          AutoDeclaration     #Yes
          HelpText            #@SYS342026
          ElementPosition     #1288490187
          HierarchyParent     #PurchLine_DeliveryPostalAddressGrp
          ButtonDisplay       #Image only
          MenuItemName        #LogisticsLocationSelect
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #// <GIN>
            #void clicked()
            #{
            #    super();
            #
            #    if ((TaxParameters::checkTaxParameters_IN() || TaxWithholdParameters_IN::checkTaxParameters()) && purchLine.DeliveryPostalAddress != purchLine.orig().DeliveryPostalAddress)
            #    {
            #        purchLine_IN.CompanyLocation_IN = LogisticsPostalAddress::getLocation(purchLine.DeliveryPostalAddress);
            #        purchLine_IN.TaxInformation_IN = TaxInformation_IN::findDefaultbyLocation(purchLine_IN.CompanyLocation_IN).RecId;
            #        purchLine_IN_ds.refresh();
            #    }
            #}
            #// </GIN>
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #MarkupTrans_HeadingPurchTable
          ElementPosition     #1073741822
          HierarchyParent     #PurchOrderMiscCharges
          Text                #@SYS313570
          ButtonDisplay       #Text & Image left
          NormalImage         #10639
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #MarkupTrans_HeadingPurchTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #MarkupTrans_LinePurchTable
          AutoDeclaration     #Yes
          ElementPosition     #1136903103
          HierarchyParent     #LineStripFinancials
          Text                #@SYS313570
          DataSource          #PurchLine
          MenuItemName        #MarkupTrans_LinePurchTable
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #// <PubSect>
            #void clicked()
            #{
            #    Args args;
            #    PurchLine purchLineLocal;
            #
            #    if (purchTableForm.editLineAllowedIfBudgetResReferenced(purchLine))
            #    {
            #        super();
            #    }
            #    else
            #    {
            #        purchLineLocal = PurchLine::find(purchLine.PurchID);
            #        args = new Args();
            #
            #        args.caller(element);
            #        args.record(purchLineLocal);
            #        args.openMode(OpenMode::View);
            #        new MenuFunction(menuitemDisplayStr(MarkupTrans_LinePurchTable), MenuItemType::Display).run(args);
            #    }
            #}
            #// </PubSect>
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #MarkupTrans_LinePurchTableSMB
          AutoDeclaration     #Yes
          ElementPosition     #805306366
          HierarchyParent     #LineStripFinancialsSMB
          Text                #@SYS313570
          DataSource          #PurchLine
          MenuItemName        #MarkupTrans_LinePurchTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #MCRButtonDeliverMenuItemButton
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #MCRReceiveDeliver
          Text                #@MCR12185
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #MCRPurchOrderProcess_PackingSlip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #MCRButtonProformaDeliver
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #MCRReceiveDeliver
          Text                #@MCR35779
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #MCRPurchOrderProcess_ProformaPackingSlip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #MCRButtonProformaRelease
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #MCRPurchaseRelease
          Text                #@MCR35591
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #MCRPurchOrderProcess_Proforma_PurchOrder
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #MCRButtonReleaseMenuItemButton
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #MCRPurchaseRelease
          Text                #@MCR10650
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #MCRPurchOrderProcess_PurchaseOrder
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    super();
            #    // js-moved from confirm button
            #    purchTable_ds.updateBudgetCheckResultDisplay();
            #
            #    purchTable_ds.reread();
            #    purchTable_ds.refresh();
            #    purchTable_ds.reReadLines();
            #    purchTable_ds.active();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #MCRPriceHistory
          AutoDeclaration     #Yes
          ElementPosition     #1487579812
          HierarchyParent     #LineStripPurchLine
          DataSource          #PurchLine
          MenuItemName        #MCRPriceHistory
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #MenuItemButton
          ElementPosition     #1431655764
          HierarchyParent     #ButtonGroupWHS
          ButtonDisplay       #Text & Image above
          NormalImage         #3488
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemName        #whsloadplanningworkbench
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #OfbuttonJournalPendingInvoiceSMB
          AutoDeclaration     #Yes
          HelpText            #@SYS112154
          ElementPosition     #1288490187
          HierarchyParent     #InvoiceJournalsSMB
          Text                #@SYS114694
          ButtonDisplay       #Text & Image above
          NormalImage         #10675
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemName        #VendUnpostedInvoiceJournal
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #OrderReferences
          AutoDeclaration     #Yes
          ElementPosition     #536870910
          HierarchyParent     #GeneralRelatedInfo
          ButtonDisplay       #Text & Image above
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #PurchTableReferences
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PdsApprovedVendorListByVend
          ElementPosition     #2013265915
          HierarchyParent     #GeneralRelatedInfo
          Text                #@PRO2880
          ShowShortCut        #No
          DataSource          #PurchTable
          MenuItemName        #PdsInventInquiryApprovedVendorListByVend
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    VendTable       vendTable;
            #    Args            args = new Args();
            #    MenuFunction    menuFunction = new MenuFunction(
            #        menuitemDisplayStr(PdsInventInquiryApprovedVendorListByVend),
            #        MenuItemType::Display);
            #
            #    vendTable = purchTable.vendTable_OrderAccount();
            #    if (vendTable)
            #    {
            #        args.caller(this);
            #        args.record(vendTable);
            #        menuFunction.run(args);
            #    }
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PdsMRCDocumentLog
          AutoDeclaration     #Yes
          ElementPosition     #2054114788
          HierarchyParent     #ButtonLineInventory
          ButtonDisplay       #Text & Image left
          MenuItemName        #PdsMRCVendorHistory
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PdsMRCDocuments
          AutoDeclaration     #Yes
          ElementPosition     #2043130216
          HierarchyParent     #ButtonLineInventory
          ButtonDisplay       #Text & Image left
          MenuItemName        #pdsMRCDocument
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PdsResetShelfDates
          AutoDeclaration     #Yes
          ElementPosition     #821096685
          HierarchyParent     #ButtonLineInventory
          ButtonDisplay       #Text & Image above
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchLine
          MenuItemName        #PdsResetShelfDates
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PdsResetVendBatchInfo
          AutoDeclaration     #Yes
          ElementPosition     #1002159032
          HierarchyParent     #LineStripUpdate
          ButtonDisplay       #Text & Image left
          ImageLocation       #EmbeddedResource
          DataSource          #PurchLine
          MenuItemName        #pdsresetvendorBatchInfo
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PlannedOrder
          ElementPosition     #1342177275
          HierarchyParent     #GeneralRelatedInfo
          ButtonDisplay       #Text & Image left
          NormalImage         #10687
          ImageLocation       #EmbeddedResource
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #ReqTransPoPurch
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PmfMultiDimProcessInventory
          AutoDeclaration     #Yes
          ElementPosition     #1305333192
          HierarchyParent     #ButtonLineInventory
          ButtonDisplay       #Text & Image above
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          MenuItemName        #PmfMultiDimProcessInventory
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PmfPackOnHand
          AutoDeclaration     #Yes
          ElementPosition     #1347440714
          HierarchyParent     #ButtonLineInventory
          ButtonDisplay       #Text & Image above
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchLine
          MenuItemName        #PmfPackOnHand
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #Postings
          ElementPosition     #805306365
          HierarchyParent     #GeneralRelatedInfo
          ButtonDisplay       #Text & Image above
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #PurchTablePostings
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PrepayPurchTableHeading
          AutoDeclaration     #Yes
          Enabled             #No
          HelpText            #@SYS330181
          ElementPosition     #1073741822
          HierarchyParent     #PurchasePrepay
          NormalImage         #12310
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemName        #PurchTableHeadingPrepay
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PriceDiscAdmTable_PurchCreate
          ElementPosition     #1879048185
          HierarchyParent     #ButtonHeaderTradeAgreements
          Text                #@SYS319115
          MenuItemName        #PriceDiscAdmTable_PurchCreate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PriceDiscTable_Purch
          ElementPosition     #536870910
          HierarchyParent     #ButtonHeaderTradeAgreements
          MenuItemName        #PriceDiscTable_Purch
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ProjBudgetDisplay
          ElementPosition     #2021161076
          HierarchyParent     #LineStripFinancials
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #ProjBudgetDisplay
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ProjBudgetDisplay1
          ElementPosition     #1717986916
          HierarchyParent     #ManageBudgetMenuButton
          NormalImage         #10001
          ImageLocation       #EmbeddedResource
          DataSource          #PurchTable
          MenuItemName        #ProjBudgetDisplay
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PurchCopyAllHeader
          ElementPosition     #1073741822
          HierarchyParent     #PurchOrderCopy
          Text                #@SYS317844
          ButtonDisplay       #Text & Image left
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #PurchCopyAllHeader
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PurchCopyAllLines
          AutoDeclaration     #Yes
          ElementPosition     #536870910
          HierarchyParent     #LineStripPurchLine
          Text                #@SYS317844
          DataSource          #PurchTable
          MenuItemName        #PurchCopyAllLines
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PurchCopyAllLinesSMB
          AutoDeclaration     #Yes
          ElementPosition     #644245092
          HierarchyParent     #LineStripPurchLineSMB
          Text                #@SYS317844
          DataSource          #PurchTable
          MenuItemName        #PurchCopyAllLines
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PurchCopyJournalHeader
          ElementPosition     #1610612733
          HierarchyParent     #PurchOrderCopy
          Text                #@SYS317845
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #PurchCopyJournalHeader
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PurchCopyJournalLines
          AutoDeclaration     #Yes
          ElementPosition     #626349395
          HierarchyParent     #LineStripPurchLine
          Text                #@SYS317845
          DataSource          #PurchTable
          MenuItemName        #PurchCopyJournalLines
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PurchCopyJournalLinesSMB
          AutoDeclaration     #Yes
          ElementPosition     #858993456
          HierarchyParent     #LineStripPurchLineSMB
          Text                #@SYS317845
          DataSource          #PurchTable
          MenuItemName        #PurchCopyJournalLines
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PurchCreateFromSalesorderPurchase
          ElementPosition     #1610612733
          HierarchyParent     #PurchOrderNew
          Text                #@SYS114686
          ButtonDisplay       #Text & Image left
          NormalImage         #10454
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #PurchCreateFromSalesorderPurchase
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PurchCreditNoteHeader
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #PurchaseCreate
          Text                #@SYS8125
          ButtonDisplay       #Text & Image above
          NormalImage         #10534
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemName        #PurchCreditNoteHeader
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PurchCreditNoteLines
          AutoDeclaration     #Yes
          ElementPosition     #357913940
          HierarchyParent     #LineStripPurchLine
          Text                #@SYS8125
          DataSource          #PurchTable
          MenuItemName        #PurchCreditNoteLines
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PurchEndDisc
          ElementPosition     #1610612730
          HierarchyParent     #ButtonHeaderTradeAgreements
          DataSource          #PurchTable
          MenuItemName        #PriceDiscTable_EndDiscPurch
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PurchJournalAutoSummary_Purch
          ElementPosition     #1610612733
          HierarchyParent     #GeneralSetup
          Text                #@SYS114681
          ButtonDisplay       #Text & Image above
          NormalImage         #10819
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #PurchJournalAutoSummary_Purch
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PurchJournalAutoSummary_PurchSMB
          ElementPosition     #1610612733
          HierarchyParent     #GeneralSetupSMB
          Text                #@SYS114681
          ButtonDisplay       #Text & Image above
          NormalImage         #10819
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #PurchJournalAutoSummary_Purch
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PurchLineCopy
          AutoDeclaration     #Yes
          ElementPosition     #676059664
          HierarchyParent     #LineStripPurchLine
          Text                #@SYS35635
          SaveRecord          #No
          DataSource          #PurchLine
          MenuItemName        #PurchLineCopy
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PurchLineCopySMB
          AutoDeclaration     #Yes
          ElementPosition     #1073741820
          HierarchyParent     #LineStripPurchLineSMB
          Text                #@SYS35635
          SaveRecord          #No
          DataSource          #PurchLine
          MenuItemName        #PurchLineCopy
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PurchLineDisc
          ElementPosition     #1073741820
          HierarchyParent     #ButtonHeaderTradeAgreements
          DataSource          #PurchTable
          MenuItemName        #PriceDiscTable_LineDiscPurch
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PurchLineSplit_PL
          ElementPosition     #775480202
          HierarchyParent     #LineStripPurchLine
          DataSource          #PurchLine
          MenuItemType        #Action
          MenuItemName        #PlPurchLineSplit
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PurchMultiLineDisc
          ElementPosition     #1342177275
          HierarchyParent     #ButtonHeaderTradeAgreements
          DataSource          #PurchTable
          MenuItemName        #PriceDiscTable_MultiLineDiscPurch
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PurchPrice
          ElementPosition     #805306365
          HierarchyParent     #ButtonHeaderTradeAgreements
          DataSource          #PurchTable
          MenuItemName        #PriceDiscTable_PricePurch
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PurchUpdateRemain
          AutoDeclaration     #Yes
          ElementPosition     #766958445
          HierarchyParent     #LineStripUpdate
          DataSource          #PurchLine
          MenuItemName        #PurchUpdateRemain
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PurchUpdateRemainSMB
          AutoDeclaration     #Yes
          ElementPosition     #1073741823
          HierarchyParent     #LineStripUpdateSMB
          DataSource          #PurchLine
          MenuItemName        #PurchUpdateRemain
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PurchVoidFiscalDocument_BR
          AutoDeclaration     #Yes
          ElementPosition     #1789569705
          HierarchyParent     #PurchaseCreate
          ButtonDisplay       #Text & Image above
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemName        #PurchVoidFiscalDocument_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #RecordEvent
          ElementPosition     #1533916890
          HierarchyParent     #CreateActivity
          Text                #@SYS114679
          NormalImage         #10432
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
          MenuItemName        #smmactivitieseventNew
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #Register
          AutoDeclaration     #Yes
          ElementPosition     #1227133512
          HierarchyParent     #LineStripUpdate
          DataSource          #PurchLine
          MenuItemType        #Action
          MenuItemName        #TradeOrderLineRegister
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #RenumberLineNumber
          AutoDeclaration     #Yes
          ElementPosition     #460175067
          HierarchyParent     #LineStripUpdate
          DataSource          #PurchLine
          MenuItemType        #Action
          MenuItemName        #TradeLineRenumbering
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    super();
            #    purchLine_ds.research(true);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ReqMultiLevelPegging
          ElementPosition     #1952257860
          HierarchyParent     #LineStripProduct
          NeedsRecord         #Yes
          DataSource          #PurchLine
          MenuItemName        #ReqMultiLevelPegging
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ReqTransExplosion
          AutoDeclaration     #Yes
          ElementPosition     #1757032074
          HierarchyParent     #LineStripProduct
          DataSource          #PurchLine
          MenuItemName        #ReqTransexplosion
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ReqTransNet
          AutoDeclaration     #Yes
          ElementPosition     #1561806288
          HierarchyParent     #LineStripProduct
          MenuItemName        #ReqTransNet
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #RetailAddItemMenuItem
          AutoDeclaration     #Yes
          ConfigurationKey    #Retail
          ElementPosition     #1503238551
          HierarchyParent     #LineOverviewCoreActionButtonGroup
          ButtonDisplay       #Text & Image left
          NormalImage         #11373
          ImageLocation       #EmbeddedResource
          DataSource          #PurchTable
          MenuItemName        #RetailAddItems
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #RetailBuyersPush
          HelpText            #@RET800
          ElementPosition     #1431655764
          HierarchyParent     #Functions
          Text                #@RET992
          NormalImage         #12796
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          MenuItemName        #RetailBuyersPush
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #RetailBuyersPushPerPackage
          ElementPosition     #1789569705
          HierarchyParent     #Functions
          NormalImage         #12796
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          MenuItemName        #RetailBuyersPushPerPackage
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #RetailBuyersPushSMB
          HelpText            #@RET800
          ElementPosition     #1431655764
          HierarchyParent     #FunctionsSMB
          Text                #@RET992
          NormalImage         #12796
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          MenuItemName        #RetailBuyersPush
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #RetailConcessionFeesOverview
          ElementPosition     #1431655764
          HierarchyParent     #Inquiries
          NormalImage         #10772
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          MenuItemName        #RetailConcessionFeesOverview
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #RetailLabelChangeJournalTable
          ElementPosition     #1610612733
          HierarchyParent     #LabelChangeJournal
          Text                #@SYS30351
          NormalImage         #10729
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #RetailLabelChangeJournalTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #RetailPackagePurchQuick
          ConfigurationKey    #RetailHeadquarters
          ElementPosition     #2117657481
          HierarchyParent     #LineStripPurchLine
          DataSource          #PurchTable
          MenuItemName        #RetailPackagePurchQuick
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #RetailPackagePurchQuickSMB
          HelpText            #@RET4401
          ConfigurationKey    #RetailHeadquarters
          ElementPosition     #1932735279
          HierarchyParent     #LineStripPurchLineSMB
          DataSource          #PurchTable
          MenuItemName        #RetailPackagePurchQuick
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #RetailPrintItemLabel
          HelpText            #@RET3836
          ElementPosition     #1610612733
          HierarchyParent     #ProductLabels
          Text                #@RET3836
          NormalImage         #1083
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #Yes
          DataSource          #PurchLine
          MenuItemName        #RetailCreateMultipleItemsLabel
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #RetailPrintItemLabelSMB
          HelpText            #@RET3836
          ElementPosition     #1610612733
          HierarchyParent     #ProductLabelsSMB
          Text                #@RET3836
          NormalImage         #1083
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #Yes
          DataSource          #PurchLine
          MenuItemName        #RetailCreateMultipleItemsLabel
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #RetailPrintShelfLabel
          HelpText            #@RET3837
          ElementPosition     #1073741822
          HierarchyParent     #ProductLabels
          Text                #@RET3837
          NormalImage         #1083
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #Yes
          DataSource          #PurchLine
          MenuItemName        #RetailCreateMultipleShelfsLabel
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #RetailPrintShelfLabelSMB
          HelpText            #@RET3837
          ElementPosition     #1073741822
          HierarchyParent     #ProductLabelsSMB
          Text                #@RET3837
          NormalImage         #1083
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #Yes
          DataSource          #PurchLine
          MenuItemName        #RetailCreateMultipleShelfsLabel
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ScheduleAppointment
          ElementPosition     #1227133512
          HierarchyParent     #CreateActivity
          Text                #@SYS114626
          NormalImage         #10433
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
          MenuItemName        #smmActivitiesAppointmentNew
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ServicingViewActivities
          AllowEdit           #No
          ElementPosition     #613566756
          HierarchyParent     #CreateActivity
          Text                #@SYS114624
          NormalImage         #10434
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
          MenuItemName        #ActivitiesMain
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SuppItemCalc_Purch
          AutoDeclaration     #Yes
          ElementPosition     #1073741820
          HierarchyParent     #LineStripPurchLine
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #SuppItemCalc_Purch
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    element.automaticTotalDiscount();
            #
            #    super();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SuppItemTable_Purch
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #GeneralMaintain
          Text                #@SYS58282
          ButtonDisplay       #Text & Image above
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemName        #SuppItemTable_Purch
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SysSendMail
          ElementPosition     #1610612733
          HierarchyParent     #GroupEmail
          ButtonDisplay       #Image only
          NormalImage         #2631
          ImageLocation       #EmbeddedResource
          Border              #Flat
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #SysSendMail
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SysUrlLookup
          ElementPosition     #1610612733
          HierarchyParent     #GroupURL
          ButtonDisplay       #Image only
          NormalImage         #2632
          ImageLocation       #EmbeddedResource
          Border              #Flat
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #SysUrlLookup
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TaxRegisterBalance_IN
          CountryRegionCodes  #IN
          ElementPosition     #1565873487
          HierarchyParent     #LineStripPurchLine
          MenuItemName        #TaxRegisterbalance_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TaxTransSource
          ElementPosition     #1431655764
          HierarchyParent     #PurchaseTax
          ButtonDisplay       #Text & Image above
          NormalImage         #10827
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #TaxTransSourcePurchOrder
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void  clicked()
            #{
            #    element.automaticTotalDiscount();
            #
            #    if (!tmpPurchTableTaxTransForm || (tmpPurchTableTaxTransForm && tmpPurchTableTaxTransForm.closed()))
            #    {
            #        tmpPurchTableTaxTransForm = PurchTotals::showTax(menuitemDisplayStr(TaxTmpWorkPurchOrder), purchTable, element);
            #    }
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TMSRateRouteWorkbench
          ElementPosition     #1610612730
          HierarchyParent     #ButtonGroupTMS
          ButtonDisplay       #Text & Image above
          NormalImage         #11092
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          MenuItemName        #tmsraterouteWorkbench
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TMSRateRouteWorkbench_Rate
          AutoDeclaration     #Yes
          HelpText            #@TRX609
          ElementPosition     #536870910
          HierarchyParent     #ButtonGroupTMS
          Text                #@TRX509
          ButtonDisplay       #Text & Image above
          NormalImage         #12203
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemName        #TMSRateRouteWorkbench_rate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TMSRateRouteWorkbench_RateRoute
          AutoDeclaration     #Yes
          HelpText            #@TRX612
          ElementPosition     #1342177275
          HierarchyParent     #ButtonGroupTMS
          Text                #@TRX531
          ButtonDisplay       #Text & Image above
          NormalImage         #10796
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemName        #tmsraterouteworkbench_rateroute
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TMSRateRouteWorkbench_RateShop
          AutoDeclaration     #Yes
          HelpText            #@TRX610
          ElementPosition     #805306365
          HierarchyParent     #ButtonGroupTMS
          Text                #@TRX510
          ButtonDisplay       #Text & Image above
          NormalImage         #12138
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemName        #tmsraterouteworkbench_rateshop
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TMSRateRouteWorkbench_Route
          AutoDeclaration     #Yes
          HelpText            #@TRX611
          ElementPosition     #1073741820
          HierarchyParent     #ButtonGroupTMS
          Text                #@TRX519
          ButtonDisplay       #Text & Image above
          NormalImage         #12132
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemName        #tmsraterouteworkbench_route
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TMSRouteWorkbench
          ElementPosition     #1879048185
          HierarchyParent     #ButtonGroupTMS
          ButtonDisplay       #Text & Image above
          NormalImage         #12304
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemName        #tmsrouteworkbench
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TMSSendPurchaseOrderElectronically
          ElementPosition     #1431655764
          HierarchyParent     #Post
          ButtonDisplay       #Text & Image below
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #TMSSendPurchaseOrderElectronically
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #Totals
          ElementPosition     #1431655764
          HierarchyParent     #PurchOrderView
          ButtonDisplay       #Text & Image above
          NormalImage         #10832
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #PurchTotals
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void  clicked()
            #{
            #    PartList partList;
            #    FormRun formPart;
            #    int counter;
            #
            #    element.automaticTotalDiscount();
            #
            #    if (purchTable.checkMarkupTrans())
            #    {
            #        super();
            #    }
            #    // Refresh the Totals Fact Box
            #    partList = new PartList(element);
            #    for (counter = 1; counter <= partList.partCount(); counter++)
            #    {
            #        if (partList.getPartById(counter) && partList.getPartById(counter).name() == formStr(PurchTotalsSummaryPart))
            #        {
            #            formPart = partList.getPartById(counter);
            #            purchTable_ds.active();
            #            break;
            #        }
            #    }
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TradeBLWIChangeCode
          ElementPosition     #1431655764
          HierarchyParent     #InvoiceChange
          ButtonDisplay       #Text & Image above
          Big                 #Yes
          DataSource          #PurchTable
          MenuItemType        #Action
          MenuItemName        #TradeBLWIChangePurchTable
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    if (! purchTable.RecId)
            #    {
            #        purchTable.write();
            #    }
            #
            #    super();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TransportationDocument
          ElementPosition     #1431655764
          HierarchyParent     #ReceiveDelivery
          ButtonDisplay       #Text & Image above
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #TransportationDocument
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #VendOpenTrans
          ElementPosition     #1431655764
          HierarchyParent     #InvoiceSettle
          Text                #@SYS3500
          ButtonDisplay       #Text & Image above
          NormalImage         #10793
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #PurchTable
          MenuItemName        #VendOpenTrans
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    if (TaxWithholdParameters_IN::checkTaxParameters())
            #    {
            #        TaxWithholdUncommitted_IN::deleteForDocumentHeader(purchTable.TableId, purchTable.RecId);
            #    }
            #    super();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #WHSWorkTable
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #LineOverviewWHS
          ButtonDisplay       #Text & Image left
          NormalImage         #3462
          ImageLocation       #EmbeddedResource
          DataSource          #PurchLine
          MenuItemName        #whsworktable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #WMSOrderAllowCreate
          AutoDeclaration     #Yes
          ElementPosition     #378967701
          HierarchyParent     #ButtonLineInventory
          DataSource          #PurchLine
          MenuItemName        #WMSOrderAllowCreate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #DeliveryLine_OverDeliveryPct
          ElementPosition     #536870910
          HierarchyParent     #DeliveryLine
          DataSource          #PurchLine
          DataField           #OverDeliveryPct
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #DeliveryLine_UnderDeliveryPct
          ElementPosition     #805306365
          HierarchyParent     #DeliveryLine
          DataSource          #PurchLine
          DataField           #UnderDeliveryPct
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #Flow_Amount
          AutoDeclaration     #Yes
          ElementPosition     #1789569700
          HierarchyParent     #Flow
          DataSource          #EMSFlow
          DataField           #TransactionCurrencyAmount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #Flow_SubstanceEntryQty
          AutoDeclaration     #Yes
          ElementPosition     #894784850
          HierarchyParent     #Flow
          DataSource          #EMSFlow
          DataField           #SubstanceEntryQty
          MinNoOfDecimals     #2
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #FSHSumLines_LinePercent
          ElementPosition     #1879048188
          HierarchyParent     #Grid1
          ShowZero            #No
          DataSource          #RetailSumLines
          DataField           #LinePercent
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #FSHSumLines_PurchPrice
          ElementPosition     #1610612730
          HierarchyParent     #Grid1
          DataSource          #RetailSumLines
          DataField           #PurchPrice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #FSHSumLines_PurchQty
          ElementPosition     #1073741820
          HierarchyParent     #Grid1
          DataSource          #RetailSumLines
          DataField           #PurchQty
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #g1099Fields_Tax1099Amount
          AutoDeclaration     #Yes
          ElementPosition     #1073741823
          HierarchyParent     #g1099Fields
          DataSource          #PurchLine
          DataField           #Tax1099Amount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #g1099Fields_Tax1099StateAmount
          ElementPosition     #1879048190
          HierarchyParent     #g1099Fields
          DataSource          #PurchLine
          DataField           #Tax1099StateAmount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #HeaderDiscMarkup_DiscPercent
          ElementPosition     #1431655764
          HierarchyParent     #DiscountsHeader
          DataSource          #PurchTable
          DataField           #DiscPercent
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ItemVolume
          ConfigurationKey    #WHSandTMS
          ElementPosition     #1610612733
          HierarchyParent     #PhysDims
          DataSource          #PurchLine
          DataMethod          #whsItemUnitVolume
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ItemWeight
          ConfigurationKey    #WHSandTMS
          ElementPosition     #1073741822
          HierarchyParent     #PhysDims
          DataSource          #PurchLine
          DataMethod          #whsItemGrossWeight
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #Line1099Fields_Tax1099Amount
          AutoDeclaration     #Yes
          ElementPosition     #715827882
          HierarchyParent     #Line1099Fields
          DataSource          #PurchLine
          DataField           #Tax1099Amount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #Line1099Fields_Tax1099StateAmount
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #Line1099Fields
          DataSource          #PurchLine
          DataField           #Tax1099StateAmount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #LineDisc
          AutoDeclaration     #Yes
          Width               #Column width
          ElementPosition     #715827882
          HierarchyParent     #Disc
          ShowZero            #No
          DataSource          #PurchLine
          DataField           #LineDisc
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #LineInventoryForSubcontracts_RemainInven
          ElementPosition     #2080374782
          HierarchyParent     #LineInventoryForSubcontracts
          DataSource          #PurchLine
          DataField           #RemainInventFinancial
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #LinePercent
          AutoDeclaration     #Yes
          Width               #Column width
          ElementPosition     #1073741823
          HierarchyParent     #Disc
          ShowZero            #No
          Label               #@SYS333047
          DataSource          #PurchLine
          DataField           #LinePercent
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #LoadGrossWeight
          ElementPosition     #1894838505
          HierarchyParent     #GridLoads
          Label               #@SYS53799
          DataSource          #WHSLoadLine
          DataMethod          #displayLoadGrossWeight
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #LoadNetWeight
          ElementPosition     #2021161072
          HierarchyParent     #GridLoads
          DataSource          #WHSLoadLine
          DataMethod          #displayLoadNetWeight
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #LoadVolume
          ElementPosition     #631612835
          HierarchyParent     #GridLoads
          DataSource          #WHSLoadLine
          DataMethod          #displayLoadVolume
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #LoadWeight
          ElementPosition     #505290268
          HierarchyParent     #GridLoads
          DataSource          #WHSLoadLine
          DataMethod          #displayLoadWeight
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #MultiLnDisc
          AutoDeclaration     #Yes
          Width               #Column width
          ElementPosition     #1431655764
          HierarchyParent     #Disc
          ShowZero            #No
          DataSource          #PurchLine
          DataField           #MultiLnDisc
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #MultiLnPercent
          AutoDeclaration     #Yes
          Width               #Column width
          ElementPosition     #1789569705
          HierarchyParent     #Disc
          ShowZero            #No
          Label               #@SYS22555
          DataSource          #PurchLine
          DataField           #MultiLnPercent
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PDSAdvancedPriceInfo_CalculatedLineAmount
          ElementPosition     #1638869097
          HierarchyParent     #LineSpec
          DataSource          #PDSAdvancedPriceInfo
          DataField           #CalculatedLineAmount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PDSAdvancedPriceInfo_CalculatedUnitPrice
          ElementPosition     #1299792732
          HierarchyParent     #LineSpec
          DataSource          #PDSAdvancedPriceInfo
          DataField           #CalculatedUnitPrice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #Potency_CalculatedLineAmount
          ElementPosition     #1717986916
          HierarchyParent     #Potency
          DataSource          #PDSAdvancedPriceInfo
          DataField           #CalculatedLineAmount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #Potency_CalculatedUnitPrice
          ElementPosition     #1288490187
          HierarchyParent     #Potency
          DataSource          #PDSAdvancedPriceInfo
          DataField           #CalculatedUnitPrice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ProjectCostPrice_LineAmount
          AutoDeclaration     #Yes
          ElementPosition     #1717986916
          HierarchyParent     #ProjectCostPrice
          DataSource          #PurchLine
          DataField           #LineAmount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ProjectCostPrice_PurchPrice
          AutoDeclaration     #Yes
          ElementPosition     #1288490187
          HierarchyParent     #ProjectCostPrice
          DataSource          #PurchLine
          DataField           #PurchPrice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ProjectCostPrice_PurchQty
          AutoDeclaration     #Yes
          ElementPosition     #858993458
          HierarchyParent     #ProjectCostPrice
          DataSource          #PurchLine
          DataField           #PurchQty
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PSAPwpPercent
          AutoDeclaration     #Yes
          Visible             #No
          AllowEdit           #No
          ConfigurationKey    #PSAPwp
          ElementPosition     #2147479550
          HierarchyParent     #LineSpec
          Label               #@PSA11212
          DataSource          #PurchLine
          DataMethod          #psaPwpPercent
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PurchLine_AssessableValue_IN
          ElementPosition     #2146684926
          HierarchyParent     #LineSpec
          DataSource          #PurchLine_IN
          DataField           #AssessableValue_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PurchLine_CustomsMaxRetailPrice_IN
          AutoDeclaration     #Yes
          ElementPosition     #1879048189
          HierarchyParent     #Price
          DataSource          #PurchLine_IN
          DataField           #CustomsMaxRetailPrice_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PurchLine_IN_AssessableValueAccountingCurrency
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #2147071998
          HierarchyParent     #LineSpec
          DataSource          #PurchLine_IN
          DataField           #AssessableValueAccountingCurrency
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PurchLine_InventInvoiceNow
          Visible             #No
          ElementPosition     #1923787432
          HierarchyParent     #LineInventoryForSubcontracts
          DataSource          #PurchLine
          DataField           #InventInvoiceNow
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PurchLine_LineAmountGrid
          AutoDeclaration     #Yes
          ElementPosition     #1582356370
          HierarchyParent     #LineSpec
          ShowZero            #No
          DataSource          #PurchLine
          DataField           #LineAmount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PurchLine_LineDiscGrid
          AutoDeclaration     #Yes
          ElementPosition     #1356305460
          HierarchyParent     #LineSpec
          ShowZero            #No
          DataSource          #PurchLine
          DataField           #LineDisc
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PurchLine_LinePercentGrid
          AutoDeclaration     #Yes
          ElementPosition     #1469330915
          HierarchyParent     #LineSpec
          ShowZero            #No
          DataSource          #PurchLine
          DataField           #LinePercent
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PurchLine_MaximumRetailPrice_IN
          AutoDeclaration     #Yes
          ElementPosition     #1744830461
          HierarchyParent     #Price
          DataSource          #PurchLine_IN
          DataField           #MaximumRetailPrice_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PurchLine_NonRecoverablePercent_IN
          ElementPosition     #1527099480
          HierarchyParent     #IndiaVAT
          DataSource          #PurchLine_IN
          DataField           #NonRecoverablePercent_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PurchLine_PdsCWInventReceivedNow
          ElementPosition     #2147459070
          HierarchyParent     #LineSpec
          DataSource          #PurchLine
          DataField           #PdsCWInventReceivedNow
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PurchLine_PdsCWQty
          ElementPosition     #1073741822
          HierarchyParent     #QtyUnitLine
          DataSource          #PurchLine
          DataField           #PdsCWQty
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PurchLine_PriceUnit
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #Price
          DataSource          #PurchLine
          DataField           #PriceUnit
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PurchLine_PurchDeviationQty_RU
          ElementPosition     #2090571558
          HierarchyParent     #LineSpec
          DataSource          #PurchLine_W
          DataField           #DeviationQty_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PurchLine_PurchMarkup
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #Price
          ShowZero            #No
          DataSource          #PurchLine
          DataField           #PurchMarkup
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PurchLine_PurchPriceGrid
          AutoDeclaration     #Yes
          ElementPosition     #1243280005
          HierarchyParent     #LineSpec
          ShowZero            #No
          DataSource          #PurchLine
          DataField           #PurchPrice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PurchLine_PurchQtyGrid
          AutoDeclaration     #Yes
          ElementPosition     #1017229095
          HierarchyParent     #LineSpec
          ShowZero            #No
          DataSource          #PurchLine
          DataField           #PurchQty
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PurchLine_PurchReceivedNow
          ElementPosition     #2034458190
          HierarchyParent     #LineSpec
          ShowZero            #No
          DataSource          #PurchLine
          DataField           #PurchReceivedNow
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PurchLine_Remainder
          Visible             #No
          ElementPosition     #1767200083
          HierarchyParent     #LineInventoryForSubcontracts
          DataSource          #PurchLine
          DataField           #Remainder
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PurchLine_TaxWithholdBaseCur_TH
          ElementPosition     #1695381825
          HierarchyParent     #LineSpec
          DataSource          #PurchLine
          DataField           #TaxWithholdBaseCur_TH
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PurchTable_AZ_ContainerNumber
          ElementPosition     #1664299821
          HierarchyParent     #POExim
          ShowLabel           #No
          DataSource          #PurchTable
          DataField           #AZ_ContainerNumber
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #RBOPackagePurch_Qty
          ElementPosition     #1073741823
          HierarchyParent     #PackageGrid
          DataSource          #RetailPackagePurch
          DataField           #Qty
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #RBOPackagePurch_QtyReceived
          ElementPosition     #1431655764
          HierarchyParent     #PackageGrid
          DataSource          #RetailPackagePurch
          DataField           #QtyReceived
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #RealEdit
          ElementPosition     #1610612734
          HierarchyParent     #LineInventoryForSubcontracts
          DataSource          #PurchLine
          DataField           #QtyOrdered
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ReductionEntryAmount
          AutoDeclaration     #Yes
          CountryRegionCodes  #JP
          HelpText            #@SYS4006148
          ConfigurationKey    #Asset
          ElementPosition     #1610612733
          HierarchyParent     #ReductionEntry_JP
          DataSource          #PurchLine
          DataMethod          #reductionEntryAmount_JP
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEGMENTEDENTRY
        PROPERTIES
          Name                #PurchLine_LedgerDimension
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #PostingLine
          DataSource          #PurchLine
          ReferenceField      #LedgerDimension
        ENDPROPERTIES
        
        METHODS
          SOURCE #jumpRef
            #public void jumpRef()
            #{
            #    ledgerDefaultAccountControllerLine.jumpRef();
            #}
            #
          ENDSOURCE
          SOURCE #loadAutoCompleteData
            #public void loadAutoCompleteData(LoadAutoCompleteDataEventArgs _e)
            #{
            #    ledgerDefaultAccountControllerLine.loadAutoCompleteData(_e);
            #    super(_e);
            #}
          ENDSOURCE
          SOURCE #loadSegments
            #public void loadSegments()
            #{
            #    super();
            #    ledgerDefaultAccountControllerLine.loadSegments();
            #}
          ENDSOURCE
          SOURCE #segmentValueChanged
            #public void segmentValueChanged(SegmentValueChangedEventArgs _e)
            #{
            #    super(_e);
            #    ledgerDefaultAccountControllerLine.segmentValueChanged(_e);
            #}
          ENDSOURCE
          SOURCE #validate
            #public boolean validate()
            #{
            #    boolean isValid;
            #
            #    isValid = super();
            #    isValid = ledgerDefaultAccountControllerLine.validate() && isValid;
            #
            #    return isValid;
            #}
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LinePurchLineSplit
          CountryRegionCodes  #PL
          ElementPosition     #725769933
          HierarchyParent     #LineStripPurchLine
          Text                #@SYS4000283
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripFinancialsAccountingSeparator
          ElementPosition     #252645134
          HierarchyParent     #LineStripFinancials
          Text                #@SYS314071
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripFinancialsBudgetSeparator
          ElementPosition     #505290268
          HierarchyParent     #LineStripFinancials
          Text                #@SYS80981
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripFinancialsChargesSeparator
          ElementPosition     #1010580536
          HierarchyParent     #LineStripFinancials
          Text                #@SYS114608
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripFinancialsChargesSeparatorSMB
          ElementPosition     #536870910
          HierarchyParent     #LineStripFinancialsSMB
          Text                #@SYS114608
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripFinancialsTaxSeparator
          ElementPosition     #1263225670
          HierarchyParent     #LineStripFinancials
          Text                #@SYS28668
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripFinancialsTaxSeparatorSMB
          ElementPosition     #1073741822
          HierarchyParent     #LineStripFinancialsSMB
          Text                #@SYS28668
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripGeneralRelatedInfoSeparator
          ElementPosition     #1768515938
          HierarchyParent     #LineStripFinancials
          Text                #@SYS111665
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripInventoryInterCompanySeparator
          ConfigurationKey    #TradeInterCompany
          ElementPosition     #1389548237
          HierarchyParent     #ButtonLineInventory
          Text                #@SYS316397
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripInventoryMaintainSeparator
          ElementPosition     #505290268
          HierarchyParent     #ButtonLineInventory
          Text                #@SYS316594
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripInventoryNewSeparator
          ElementPosition     #252645134
          HierarchyParent     #ButtonLineInventory
          Text                #@SYS5480
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripInventoryRegulatorySeparator
          ElementPosition     #2032145644
          HierarchyParent     #ButtonLineInventory
          Text                #@PDS1378
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripInventoryTraceSeparator
          ElementPosition     #1894838505
          HierarchyParent     #ButtonLineInventory
          Text                #@SYS26038
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripInventoryViewSeparator
          ElementPosition     #884257969
          HierarchyParent     #ButtonLineInventory
          Text                #@SYS53654
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripInventoryViewSeparatorSMB
          ElementPosition     #858993458
          HierarchyParent     #ButtonLineInventorySMB
          Text                #@SYS53654
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripProductProductModelSeparator
          ElementPosition     #306783376
          HierarchyParent     #LineStripProduct
          Text                #@SYS316395
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripProductQualitySeparator
          AutoDeclaration     #Yes
          ElementPosition     #345131298
          HierarchyParent     #LineStripProduct
          Text                #@SYS113616
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripProductRequirementsSeparator
          ElementPosition     #1468006396
          HierarchyParent     #LineStripProduct
          Text                #@SYS118437
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripPurchLineAttachmentsSeparator
          ElementPosition     #1163220305
          HierarchyParent     #LineStripPurchLine
          Text                #@SYS316600
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripPurchLineBOMSeparator
          ElementPosition     #805306365
          HierarchyParent     #LineStripPurchLine
          Text                #@SYS69965
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripPurchLineCalculateSeparator
          ElementPosition     #984263335
          HierarchyParent     #LineStripPurchLine
          Text                #@SYS117
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripPurchLineCopySeparator
          ElementPosition     #447392425
          HierarchyParent     #LineStripPurchLine
          Text                #@SYS80350
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripPurchLineCopySeparatorSMB
          ElementPosition     #429496728
          HierarchyParent     #LineStripPurchLineSMB
          Text                #@SYS80350
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripPurchLineDisplaySeparator
          CountryRegionCodes  #IN
          ElementPosition     #1923787427
          HierarchyParent     #LineStripPurchLine
          Text                #@SYS53465
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripPurchLineNewSeparator
          ElementPosition     #178956970
          HierarchyParent     #LineStripPurchLine
          Text                #@SYS5480
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripRetailPackagePurchQuick
          ElementPosition     #2087831318
          HierarchyParent     #LineStripPurchLine
          Text                #@RET3014
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripRetailPackagePurchQuickSMB
          ElementPosition     #1717986912
          HierarchyParent     #LineStripPurchLineSMB
          Text                #@RET3014
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripUpdateAgreementSeparator
          ConfigurationKey    #TradeBlanketOrder
          ElementPosition     #1533916890
          HierarchyParent     #LineStripUpdate
          Text                #@SYS190134
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripUpdateLineNumberSeparator
          ElementPosition     #306783378
          HierarchyParent     #LineStripUpdate
          Text                #@SYS40505
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripUpdateProcessSeparator
          ElementPosition     #1073741823
          HierarchyParent     #LineStripUpdate
          Text                #@SYS122441
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripUpdateUpdateSeparator
          ElementPosition     #613566756
          HierarchyParent     #LineStripUpdate
          Text                #@SYS71207
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripUpdateUpdateSeparatorSMB
          ElementPosition     #715827882
          HierarchyParent     #LineStripUpdateSMB
          Text                #@SYS71207
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #ViewStrip
          CountryRegionCodes  #IN
          ElementPosition     #1386916516
          HierarchyParent     #LineStripPurchLine
          Text                #@SYS316707
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #ViewStripSMB
          CountryRegionCodes  #IN
          ElementPosition     #1288490184
          HierarchyParent     #LineStripPurchLineSMB
          Text                #@SYS316707
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STATICTEXT
        PROPERTIES
          Name                #txtAssetQualifier
          ElementPosition     #858993458
          HierarchyParent     #grpAssetQualifier
          Text                #@SYS136020
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STATICTEXT
        PROPERTIES
          Name                #txtAssetQualifierQuestion
          AutoDeclaration     #Yes
          ElementPosition     #1288490187
          HierarchyParent     #grpAssetQualifier
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #AdministrationGroup_ItemBuyerGroupId
          ElementPosition     #536870910
          HierarchyParent     #AdministrationGroup
          DataSource          #PurchTable
          DataField           #ItemBuyerGroupId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #AdministrationGroup_LanguageId
          ElementPosition     #1342177275
          HierarchyParent     #AdministrationGroup
          DataSource          #PurchTable
          DataField           #LanguageId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #AdministrationGroup_PurchPoolId
          ElementPosition     #1073741820
          HierarchyParent     #AdministrationGroup
          DataSource          #PurchTable
          DataField           #PurchPoolId
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Carrier
          ElementPosition     #884257969
          HierarchyParent     #GridLoads
          DataSource          #WHSLoadLine
          DataMethod          #displayLoadCarrierCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CarrierService
          ElementPosition     #1010580536
          HierarchyParent     #GridLoads
          DataSource          #WHSLoadLine
          DataMethod          #displayLoadCarrierServiceCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CompanyAddress
          HelpText            #@SYS840
          ElementPosition     #1288490187
          HierarchyParent     #CompanyInformation
          Label               #@SYS36203
          DataSource          #PurchLine_IN
          DataMethod          #displayAddress_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ContactInfo_Email
          ElementPosition     #1073741822
          HierarchyParent     #GroupEmail
          DataSource          #PurchTable
          DataField           #Email
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ContactInfo_URL
          ElementPosition     #1073741822
          HierarchyParent     #GroupURL
          DataSource          #PurchTable
          DataField           #URL
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Currency_CurrencyCode
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #Currency
          DataSource          #PurchTable
          DataField           #CurrencyCode
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Delivery_ConsigneeAccount_RU
          ElementPosition     #1610612733
          HierarchyParent     #Delivery_RU
          DataSource          #PurchTable_RU
          DataField           #ConsigneeAccount_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Delivery_ConsignorAccount_RU
          ElementPosition     #1073741822
          HierarchyParent     #Delivery_RU
          DataSource          #PurchTable_RU
          DataField           #ConsignorAccount_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Delivery_DlvMode
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #Delivery
          DataSource          #PurchTable
          DataField           #DlvMode
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Delivery_DlvTerm
          ElementPosition     #1789569705
          HierarchyParent     #Delivery
          DataSource          #PurchTable
          DataField           #DlvTerm
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #DistributionTemplateHeader
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #GroupDistributionTemplateHeader
          Label               #@sys30829
          DataSource          #PurchTable
          DataMethod          #templateName
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #public void lookup()
            #{
            #    AccountingDistributionTemplate::lookupTemplateName(distributionTemplateHeader);
            #}
          ENDSOURCE
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean                 ret;
            #    AccountingDistributionTemplate    distributionTemplate;
            #
            #    if (this.text())
            #    {
            #        distributionTemplate = AccountingDistributionTemplate::findByName(this.text());
            #
            #        if (distributionTemplate)
            #        {
            #            ret = super();
            #        }
            #        else
            #        {
            #            ret = checkFailed(strFmt("@SYS302773", this.text()));
            #            this.text('');
            #        }
            #    }
            #    else
            #    {
            #        ret = super();
            #    }
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #DistributionTemplateLine
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #GroupDistributionTemplateLine
          Label               #@sys30829
          DataSource          #PurchLine
          DataMethod          #templateName
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #public void lookup()
            #{
            #    AccountingDistributionTemplate::lookupTemplateName(distributionTemplateLine);
            #}
          ENDSOURCE
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean                 ret;
            #    AccountingDistributionTemplate    distributionTemplate;
            #
            #    if (this.text())
            #    {
            #        distributionTemplate = AccountingDistributionTemplate::findByName(this.text());
            #
            #        if (distributionTemplate)
            #        {
            #            ret = super();
            #        }
            #        else
            #        {
            #            ret = checkFailed(strFmt("@SYS302773", this.text()));
            #            this.text('');
            #        }
            #    }
            #    else
            #    {
            #        ret = super();
            #    }
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #editAssetQualifier
          AutoDeclaration     #Yes
          Width               #100
          AlignControl        #No
          ElementPosition     #1717986916
          HierarchyParent     #grpAssetQualifier
          DisplayHeight       #1
          ShowLabel           #No
          DataSource          #PurchLine
          DataMethod          #editAssetQualifier
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #public void lookup()
            #{
            #    AssetRuleTmpAssetQualifierLookup::lookupAssetQualifier(this, assetQualifierList);
            #}
            #
          ENDSOURCE
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    purchLine.AssetGroup        = AssetRuleTmpAssetQualifierLookup::getAssetGroupFromQualifier(selectedAssetQualifier, assetQualifierList);
            #    purchLine.DefaultDimension  = purchLine.copyDimension(purchLine.DefaultDimension);
            #    purchLine.CreateFixedAsset  = NoYes::Yes;
            #    purchLine_ds.refresh();
            #
            #    return ret;
            #}
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #editContactPersonName
          ElementPosition     #1431655764
          HierarchyParent     #Vendor
          LookupButton        #Always
          DataSource          #PurchTable
          DataMethod          #editContactPersonName
          PresenceDataSource  #PurchTable
          PresenceDataField   #ContactPersonId
        ENDPROPERTIES
        
        METHODS
          SOURCE #jumpRef
            #public void jumpRef()
            #{
            #    purchTable_ContactPersonId.jumpRef();
            #}
          ENDSOURCE
          SOURCE #lookup
            #void lookup()
            #{
            #    ContactPerson::lookupVendContactPerson(purchTable_ContactPersonId,
            #                                           purchTable.OrderAccount,
            #                                           this,
            #                                           purchTable.ContactPersonId);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #editReasonCode
          ElementPosition     #1073741822
          HierarchyParent     #Reasons
          Label               #@SYS114840
          DataSource          #PurchTable
          DataMethod          #editReasonCode
        ENDPROPERTIES
        
        METHODS
          SOURCE #jumpRef
            #/// <summary>
            #/// Adds the 'Go to Main Table Form' option to the context menu for reason code field.
            #/// </summary>
            #public void jumpRef()
            #{
            #    //Pass the account type of Vendor, so that the relevant form shows.
            #    ReasonTable::jumpRef(ReasonCodeAccountTypeAll::Vend, this.valueStr());
            #}
          ENDSOURCE
          SOURCE #lookup
            #/// <summary>
            #/// Constructs a lookup for the reason code field.
            #/// </summary>
            #/// <remarks>
            #/// The lookup shows the appropriate reason codes (if any) given the offset and main account selections.
            #/// </remarks>
            #public void lookup()
            #{
            #    //Calls the lookup method passing Vendor as both main and offset account types; boolean values of true
            #    //and false are passed for them respectively, since the offset account is not present in this journal.
            #    ReasonFormTable::reasonCodeLookup(this, LedgerJournalACType::Vend, LedgerJournalACType::Vend, true, false);
            #}
          ENDSOURCE
          SOURCE #modified
            #// <GMY>
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    // Update the cache for the ReasonComment value, which is changed during the call to super.
            #    purchTable_DS.cacheCalculateMethod(tableMethodStr(PurchTable,editReasonComment));
            #
            #    element.redraw();
            #
            #    return ret;
            #}
            #// </GMY>
          ENDSOURCE
          SOURCE #validate
            #/// <summary>
            #/// Validate existence of vendor type reason code in ReasonTable.
            #/// </summary>
            #/// <returns>
            #/// A boolean indicating whether the reason code was valid for vendor type reason or not.
            #/// </returns>
            #public boolean validate()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    ret = ReasonTable::validateReasonCode(this.text(), LedgerJournalACType::Vend, true, LedgerJournalACType::Vend);
            #
            #    if (ret &&
            #        BrazilParameters::isEnabled() &&
            #        purchTable_BR.InvoiceRefRecId_BR &&
            #        !strLRTrim(this.text()))
            #    {
            #        ret = checkFailed(strFmt("@SYS26332", fieldPName(ReasonTable, Reason)));
            #    }
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #editReasonComment
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #Reasons
          DataSource          #PurchTable
          DataMethod          #editReasonComment
        ENDPROPERTIES
        
        METHODS
          SOURCE #validate
            #public boolean validate()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    if (BrazilParameters::isEnabled() && purchTable_BR.InvoiceRefRecId_BR)
            #    {
            #        if (strLen(strLRTrim(this.text())) < 15)
            #        {
            #            ret = checkFailed("@SYS4002144");
            #        }
            #    }
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #EMSFlow_TransactionCurrency
          AutoDeclaration     #Yes
          ElementPosition     #1968526670
          HierarchyParent     #Flow
          DataSource          #EMSFlow
          DataField           #TransactionCurrency
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #FiscalEstablishment
          ElementPosition     #477218588
          HierarchyParent     #StorageDimensionsLine
          DataSource          #InventDim
          DataMethod          #FiscalEstablishment
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #FiscalInformation_BR1_M_exceptionCode_BR
          AllowEdit           #No
          ElementPosition     #1533916890
          HierarchyParent     #FiscalInformation_BR
          DataSource          #PurchLine
          DataMethod          #exceptionCode_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #FiscalInformation_BR1_M_taxFiscalClassification_BR
          AllowEdit           #No
          ElementPosition     #1227133512
          HierarchyParent     #FiscalInformation_BR
          DataSource          #PurchLine
          DataMethod          #taxFiscalClassification_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #FiscalInformation_BR1_TaxServiceCode_BR
          ElementPosition     #1840700268
          HierarchyParent     #FiscalInformation_BR
          DataSource          #PurchLine
          DataField           #TaxServiceCode_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #FixedAssets_AssetBookId
          AutoDeclaration     #Yes
          ElementPosition     #1342177275
          HierarchyParent     #FixedAssets
          DataSource          #PurchLine
          DataField           #AssetBookId
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #public void lookup()
            #{
            #    if (fixedAssets_AssetId.valueStr())
            #    {
            #        AssetBook::lookupAssetBook(this, fixedAssets_AssetId.valueStr(), curext());
            #    }
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #FixedAssets_AssetGroup
          AutoDeclaration     #Yes
          ElementPosition     #805306365
          HierarchyParent     #FixedAssets
          DataSource          #PurchLine
          DataField           #AssetGroup
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #FixedAssets_AssetId
          AutoDeclaration     #Yes
          ElementPosition     #1073741820
          HierarchyParent     #FixedAssets
          DataSource          #PurchLine
          DataField           #AssetId
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #public void lookup()
            #{
            #    AssetTable::lookupInvoiceAsset(this, curext());
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Flow_DestinationProcessId
          AutoDeclaration     #Yes
          ElementPosition     #1252698790
          HierarchyParent     #Flow
          DataSource          #EMSFlow
          DataField           #DestinationProcessId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Flow_SourceProcessId
          AutoDeclaration     #Yes
          ElementPosition     #536870910
          HierarchyParent     #Flow
          DataSource          #EMSFlow
          DataField           #SourceProcessId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Flow_SubstanceId
          AutoDeclaration     #Yes
          ElementPosition     #715827880
          HierarchyParent     #Flow
          DataSource          #EMSFlow
          DataField           #SubstanceId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #FlowId
          AllowEdit           #No
          ElementPosition     #357913940
          HierarchyParent     #Flow
          DataSource          #EMSPurchOrderFlowRelation
          DataField           #FlowId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ForeignTrade_CountryRegionName_RU
          ElementPosition     #1610612733
          HierarchyParent     #ForeignTrade_RU
          DataSource          #PurchLine_W
          DataField           #CountryRegionName_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ForeignTrade_InvoiceGTDId_RU
          ElementPosition     #1073741822
          HierarchyParent     #ForeignTrade_RU
          DataSource          #PurchLine_W
          DataField           #InvoiceGTDId_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ForeignTradeForSubContracts_CountyOrigDe
          ElementPosition     #2013265918
          HierarchyParent     #ForeignTradeForSubContracts
          DataSource          #PurchLine
          DataField           #CountyOrigDest
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ForeignTradeForSubContracts_StatProcId
          ElementPosition     #1610612734
          HierarchyParent     #ForeignTradeForSubContracts
          DataSource          #PurchLine
          DataField           #StatProcId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ForeignTradeForSubContracts_TransactionC
          ElementPosition     #1073741823
          HierarchyParent     #ForeignTradeForSubContracts
          DataSource          #PurchLine
          DataField           #TransactionCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #FSHSumLines_InventLocationId
          AutoDeclaration     #Yes
          ElementPosition     #805306365
          HierarchyParent     #Grid1
          DataSource          #RetailSumLines
          DataField           #InventLocationId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #FSHSumLines_ItemId
          ElementPosition     #536870910
          HierarchyParent     #Grid1
          DataSource          #RetailSumLines
          DataField           #ItemId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #FSHSumLines_PurchUnit
          ElementPosition     #1342177275
          HierarchyParent     #Grid1
          DataSource          #RetailSumLines
          DataField           #PurchUnit
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #g1099Fields_Tax1099State
          ElementPosition     #1610612734
          HierarchyParent     #g1099Fields
          DataSource          #PurchLine
          DataField           #Tax1099State
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #GSTInvoice_MY_M_editInvoiceType_MY
          AutoDeclaration     #Yes
          AllowEdit           #No
          HelpText            #@SYP4860685
          ElementPosition     #1073741822
          HierarchyParent     #GSTInvoice_MY
          DataSource          #PurchTable_W
          DataMethod          #editInvoiceType_MY
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #// <GMY>
            #public void lookup()
            #{
            #    TaxGSTDocInvoiceType_MY::construct(tableNum(PurchTable_W)).lookup(this);
            #}
            #// </GMY>
          ENDSOURCE
          SOURCE #modified
            #// <GMY>
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    if (ret)
            #    {
            #        element.updateDesignForGSTApprovalNumber_MY();
            #        purchTable_W_ds.refresh();
            #    }
            #
            #    return ret;
            #}
            #// </GMY>
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #HeaderDeliveryAddress_DeliveryName
          ElementPosition     #1073741822
          HierarchyParent     #GroupAddressLeft
          MultiLine           #Yes
          DataSource          #PurchTable
          DataField           #DeliveryName
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #HeaderForeignTrade_Port
          ElementPosition     #1073741820
          HierarchyParent     #HeaderForeignTrade
          DataSource          #PurchTable
          DataField           #Port
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #HeaderForeignTrade_StatProcId
          ElementPosition     #1342177275
          HierarchyParent     #HeaderForeignTrade
          DataSource          #PurchTable
          DataField           #StatProcId
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #HeaderForeignTrade_TransactionCode
          ElementPosition     #536870910
          HierarchyParent     #HeaderForeignTrade
          DataSource          #PurchTable
          DataField           #TransactionCode
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #HeaderForeignTrade_Transport
          ElementPosition     #805306365
          HierarchyParent     #HeaderForeignTrade
          DataSource          #PurchTable
          DataField           #Transport
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #HeaderPurchTable_ContactPersonId
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #VendorHeader
          DataSource          #PurchTable
          DataField           #ContactPersonId
          PresenceIndicatorAllowed    #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #HeaderTitle
          AutoDeclaration     #Yes
          Width               #Column width
          Skip                #Yes
          ElementPosition     #1073741822
          HierarchyParent     #HeaderInfo
          Text                #Purchase order
          ViewEditMode        #View
          Style               #TitleField
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #HeaderViewDeliveryCNPJCPFNUM_BR
          ElementPosition     #1073741822
          HierarchyParent     #HeaderDlvAddressFiscalInformation_BR
          DataSource          #PurchTable
          DataMethod          #deliveryCNPJCPFNUM_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #HeaderViewDeliveryIENum_BR
          ElementPosition     #1610612733
          HierarchyParent     #HeaderDlvAddressFiscalInformation_BR
          DataSource          #PurchTable
          DataMethod          #deliveryIENum_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #interCompanyAllowIndirectCreationOrig
          AutoDeclaration     #Yes
          AllowEdit           #No
          AlignControl        #No
          ElementPosition     #1610612733
          HierarchyParent     #HeaderInterCompany
          MultiLine           #Yes
          ShowLabel           #No
          DataSource          #PurchTable
          DataMethod          #interCompanyAllowIndirectCreationOrig
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #interCompanyOriginDisplay
          AllowEdit           #No
          ElementPosition     #1073741822
          HierarchyParent     #HeaderInterCompany
          DataSource          #PurchTable
          DataMethod          #interCompanyOriginDisplay
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventDim_WHSInventStatusId
          ElementPosition     #1968526675
          HierarchyParent     #StorageDimensionsLine
          DataSource          #InventDim
          DataField           #InventStatusId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventDim_WHSLicensePlateId
          ElementPosition     #1610612734
          HierarchyParent     #StorageDimensionsLine
          DataSource          #InventDim
          DataField           #LicensePlateId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Inventory_InventLocationId
          ElementPosition     #1610612733
          HierarchyParent     #StorageDimensions
          DataSource          #PurchTable
          DataField           #InventLocationId
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Inventory_InventSiteId
          ElementPosition     #1073741822
          HierarchyParent     #StorageDimensions
          DataSource          #PurchTable
          DataField           #InventSiteId
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensions_inventBatchId
          ElementPosition     #536870910
          HierarchyParent     #TrackingDimesions
          DataSource          #InventDim
          DataField           #inventBatchId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensions_InventGtdId_RU
          ElementPosition     #1879048185
          HierarchyParent     #TrackingDimesions
          DataSource          #InventDim
          DataField           #InventGtdId_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensions_InventLocationId
          ElementPosition     #1073741823
          HierarchyParent     #StorageDimensionsLine
          DataSource          #InventDim
          DataField           #InventLocationId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensions_InventOwnerId_RU
          ElementPosition     #1610612730
          HierarchyParent     #TrackingDimesions
          DataSource          #InventDim
          DataField           #InventOwnerId_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensions_InventProfileId_RU
          ElementPosition     #1073741820
          HierarchyParent     #TrackingDimesions
          DataSource          #InventDim
          DataField           #InventProfileId_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensions_inventSerialId
          ElementPosition     #805306365
          HierarchyParent     #TrackingDimesions
          DataSource          #InventDim
          DataField           #inventSerialId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensions_InventSiteId
          ElementPosition     #715827882
          HierarchyParent     #StorageDimensionsLine
          DataSource          #InventDim
          DataField           #InventSiteId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensions_wMSLocationId
          ElementPosition     #1431655764
          HierarchyParent     #StorageDimensionsLine
          DataSource          #InventDim
          DataField           #wMSLocationId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensions_wMSPalletId
          ElementPosition     #1789569705
          HierarchyParent     #StorageDimensionsLine
          DataSource          #InventDim
          DataField           #wMSPalletId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InvoicePostalAddress_Address
          ElementPosition     #1610612733
          HierarchyParent     #HeaderInvoiceAddress_TH
          DataSource          #InvoicePostalAddress
          DataField           #Address
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ItemName
          AllowEdit           #No
          Skip                #Yes
          ElementPosition     #678152730
          HierarchyParent     #LineSpec
          DataSource          #PurchLine
          DataMethod          #ItemName
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Line1099Fields_Tax1099State
          ElementPosition     #1073741823
          HierarchyParent     #Line1099Fields
          DataSource          #PurchLine
          DataField           #Tax1099State
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #LineDeliveryAddress_Name
          ElementPosition     #1073741822
          HierarchyParent     #LineDeliveryAddress
          MultiLine           #Yes
          DataSource          #PurchLine
          DataField           #DeliveryName
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #LineInventory_InventTransId
          ElementPosition     #1431655764
          HierarchyParent     #LineInventory
          DataSource          #PurchLine
          DataField           #InventTransId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #LineSalesTax_TaxGroup
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #LineSalesTax
          DataSource          #PurchLine
          DataField           #TaxGroup
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #LineSalesTax_TaxItemGroup
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #LineSalesTax
          DataSource          #PurchLine
          DataField           #TaxItemGroup
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #LineViewAddressDeliveryCNPJCPFNUM_BR
          AllowEdit           #No
          ElementPosition     #1073741822
          HierarchyParent     #LineDlvAddressFiscalInformation_BR
          DataSource          #PurchLine
          DataMethod          #deliveryCNPJCPFNUM_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #LineViewAddressDeliveryIENum_BR
          AllowEdit           #No
          ElementPosition     #1610612733
          HierarchyParent     #LineDlvAddressFiscalInformation_BR
          DataSource          #PurchLine
          DataMethod          #deliveryIENum_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #LoadAccountNum
          ElementPosition     #1642193371
          HierarchyParent     #GridLoads
          DataSource          #WHSLoadLine
          DataMethod          #displayLoadAccountNum
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #LoadCarNumber
          ElementPosition     #1515870804
          HierarchyParent     #GridLoads
          DataSource          #WHSLoadLine
          DataMethod          #displayLoadCarNumber
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #LoadOrderNum
          ElementPosition     #1768515938
          HierarchyParent     #GridLoads
          DataSource          #WHSLoadLine
          DataMethod          #displayLoadOrderNum
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Loads
          AutoDeclaration     #Yes
          ElementPosition     #2147462654
          HierarchyParent     #LineSpec
          DataSource          #PurchLine
          DataMethod          #whsGetLoads
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #LoadTractorNumber
          ElementPosition     #1263225670
          HierarchyParent     #GridLoads
          DataSource          #WHSLoadLine
          DataMethod          #displayLoadTractorNumber
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #LoadTrailerNumber
          ElementPosition     #1389548237
          HierarchyParent     #GridLoads
          DataSource          #WHSLoadLine
          DataMethod          #displayLoadTrailerNumber
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #LoadTypeId
          ElementPosition     #378967701
          HierarchyParent     #GridLoads
          DataSource          #WHSLoadLine
          DataMethod          #displayLoadTypeId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #LogisticsPostalAddressHeader_Address
          ElementPosition     #1431655764
          HierarchyParent     #GroupaddressMid
          DataSource          #LogisticsPostalAddressHeader
          DataField           #Address
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #LogisticsPostalAddressLine_Address
          ElementPosition     #1431655764
          HierarchyParent     #GroupLineDeliveryAddressRef
          DataSource          #LogisticsPostalAddressLine
          DataField           #Address
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #MCRDropShip_MCRDropShipComment
          ElementPosition     #1717986916
          HierarchyParent     #MCRDropShip
          DataSource          #PurchLine
          DataField           #MCRDropShipComment
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #packageName
          AllowEdit           #No
          Width               #Column width
          Height              #Column height
          ElementPosition     #1789569705
          HierarchyParent     #PackageGrid
          DataSource          #RetailPackagePurch
          DataMethod          #packageName
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Payment_Payment
          ElementPosition     #429496728
          HierarchyParent     #Payment
          DataSource          #PurchTable
          DataField           #Payment
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Payment_PaymentSched
          ElementPosition     #1288490184
          HierarchyParent     #Payment
          DataSource          #PurchTable
          DataField           #PaymentSched
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Payment_PaymMode
          ElementPosition     #858993456
          HierarchyParent     #Payment
          DataSource          #PurchTable
          DataField           #PaymMode
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjectIdentification_ActivityNumber
          AutoDeclaration     #Yes
          ElementPosition     #920350134
          HierarchyParent     #ProjectIdentification
          DataSource          #PurchLine
          DataField           #ActivityNumber
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjectIdentification_ProjId
          ElementPosition     #613566756
          HierarchyParent     #ProjectIdentification
          DataSource          #PurchLine
          DataField           #ProjId
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #    RecId   projRecId, smmActivityParentLink;
            #    str     currentActivityNumber;
            #
            #    ret = super();
            #
            #    if (isConfigurationkeyEnabled(configurationKeyNum(PSAPwp)))
            #    {
            #        if (ProjTable::setFieldPwpThresholdPercent(ProjTable::find(purchLine.ProjId)))
            #        {
            #            purchLine_IsPwp.visible(true);
            #            psaPwpPercent.visible(true);
            #        }
            #        else
            #        {
            #            purchLine_IsPwp.visible(false);
            #            psaPwpPercent.visible(false);
            #        }
            #    }
            #
            #    currentActivityNumber = projectIdentification_ActivityNumber.text();
            #    if (currentActivityNumber != '')
            #    {
            #        //validate activity is associated to Project
            #        projRecId = ProjTable::find(purchLine.ProjId).RecId;
            #        smmActivityParentLink = smmActivityParentLinkTable::find(currentActivityNumber, smmActivityParentType::Project, projRecId).RecId;
            #
            #        // Clear activity number if it's no longer a valid
            #        // combination with the new project ID
            #        if (smmActivityParentLink == 0)
            #        {
            #            purchLine.ActivityNumber = '';
            #            projectIdentification_ActivityNumber.update();
            #        }
            #    }
            #
            #    return ret;
            #}
            #
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjectIdentification_ProjLinePropertyId
          ElementPosition     #1840700268
          HierarchyParent     #ProjectIdentification
          DataSource          #PurchLine
          DataField           #ProjLinePropertyId
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #    if (isConfigurationkeyEnabled(configurationKeyNum(Project3)))
            #    {
            #        element.setIsPwpField();
            #    }
            #
            #    return ret;
            #}
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchLine_ExternalItemId
          Width               #Column width
          ElementPosition     #1431655764
          HierarchyParent     #GeneralReference
          DataSource          #PurchLine
          DataField           #ExternalItemId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchLine_IN_TaxWithholdAcknowledgementNumber
          ElementPosition     #1533916890
          HierarchyParent     #GroupWithholdingTax
          DataSource          #PurchLine_IN
          DataField           #TaxWithholdAcknowledgementNumber
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchLine_ItemId
          AutoDeclaration     #Yes
          ElementPosition     #565127275
          HierarchyParent     #LineSpec
          DataSource          #PurchLine
          DataField           #ItemId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchLine_ItemName
          AllowEdit           #No
          Skip                #Yes
          ElementPosition     #1431655764
          HierarchyParent     #OrderLine
          DataSource          #PurchLine
          DataMethod          #ItemName
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchLine_Name
          Width               #Column width
          ElementPosition     #1789569705
          HierarchyParent     #OrderLine
          MultiLine           #Yes
          DataSource          #PurchLine
          DataField           #Name
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchLine_PDSCalculationId
          ElementPosition     #858993458
          HierarchyParent     #Potency
          DataSource          #PurchLine
          DataField           #PDSCalculationId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchLine_PdsCWUnitId
          ElementPosition     #1610612734
          HierarchyParent     #QtyUnitLine
          DataSource          #PurchLine
          DataMethod          #pdsCWUnitId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchLine_PostingProfile_RU
          ElementPosition     #1789569705
          HierarchyParent     #PostingLine
          DataSource          #PurchLine_W
          DataField           #PostingProfile_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchLine_PSARetainScheduleId
          AutoDeclaration     #Yes
          ElementPosition     #2147466238
          HierarchyParent     #LineSpec
          DataSource          #PurchLine
          DataField           #PSARetainScheduleId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchLine_PurchUnitGrid
          AutoDeclaration     #Yes
          ElementPosition     #1130254550
          HierarchyParent     #LineSpec
          DataSource          #PurchLine
          DataField           #PurchUnit
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchLine_ReqAttention
          ElementPosition     #1073741822
          HierarchyParent     #PurchLine_AttentionInfo
          DataSource          #PurchLine
          DataField           #ReqAttention
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchLine_ServiceAddress
          ElementPosition     #1431655764
          HierarchyParent     #LineAddressDisplayForSubcontracts
          DataSource          #PurchLine
          DataField           #ServiceAddress
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchLine_VariantId
          ElementPosition     #847690912
          HierarchyParent     #LineSpec
          LabelAlignment      #Right
          DataSource          #PurchLine
          DataField           #VariantId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchLine_W_RefInvoiceId_MY
          ElementPosition     #2147480915
          HierarchyParent     #LineSpec
          DataSource          #PurchLine_W
          DataField           #RefInvoiceId_MY
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #public void lookup()
            #{
            #    element.performVendInvoiceJourLookup_MY(
            #        this,
            #        purchTable.OrderAccount);
            #}
          ENDSOURCE
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    if (ret)
            #    {
            #        if(this.text())
            #        {
            #            element.updateSourceRefControlsAfterLookup_MY();
            #        }
            #    }
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchReq_M_getPurchReqItemName
          AllowEdit           #No
          ElementPosition     #1789569705
          HierarchyParent     #PurchReq
          Label               #@SYS4003944
          DataSource          #PurchLine
          DataMethod          #getPurchReqItemName
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchReq_PurchReqId
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #PurchReq
          DataSource          #PurchLine
          DataField           #PurchReqId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchRFQReplyLine_PurchRFQReplyRFQId
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #PurchRFQReplyLine
          DataSource          #PurchRFQReplyLinePurchLine
          DataField           #PurchRFQReplyRFQId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchTable_CFPSId_BR
          ElementPosition     #1073741823
          HierarchyParent     #FiscalInformation
          DataSource          #PurchTable_BR
          DataField           #CFPSId_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchTable_ContactPersonId
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1789569705
          HierarchyParent     #Vendor
          DataSource          #PurchTable
          DataField           #ContactPersonId
          PresenceIndicatorAllowed    #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchTable_ContractNum_SA
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #Zakat_SA
          DataSource          #PurchTable
          DataField           #ContractNum_SA
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchTable_CurrencyCodeGrid
          ElementPosition     #1227133512
          HierarchyParent     #Grid
          DataSource          #PurchTable
          DataField           #CurrencyCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchTable_DlvModeGrid
          ElementPosition     #1533916890
          HierarchyParent     #Grid
          DataSource          #PurchTable
          DataField           #DlvMode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchTable_DlvTermGrid
          ElementPosition     #1687308579
          HierarchyParent     #Grid
          DataSource          #PurchTable
          DataField           #DlvTerm
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchTable_InvoiceAccount
          ElementPosition     #1073741823
          HierarchyParent     #Vendor
          DataSource          #PurchTable
          DataField           #InvoiceAccount
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchTable_InvoiceAccountGrid
          ElementPosition     #613566756
          HierarchyParent     #Grid
          DataSource          #PurchTable
          DataField           #InvoiceAccount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchTable_OrderAccount
          ElementPosition     #1610612733
          HierarchyParent     #Account
          DataSource          #PurchTable
          DataField           #OrderAccount
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchTable_OrderAccountAdv
          AutoDeclaration     #Yes
          ElementPosition     #460175067
          HierarchyParent     #Grid
          DataSource          #PurchTable
          DataField           #OrderAccount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchTable_ProjId
          ElementPosition     #1431655764
          HierarchyParent     #References
          DataSource          #PurchTable
          DataField           #ProjId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchTable_PurchId
          ElementPosition     #715827882
          HierarchyParent     #BaseInfo
          LookupButton        #Never
          DataSource          #PurchTable
          DataField           #PurchId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchTable_PurchIdAdvanced
          AutoDeclaration     #Yes
          ElementPosition     #306783378
          HierarchyParent     #Grid
          LookupButton        #Never
          DataSource          #PurchTable
          DataField           #PurchId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchTable_PurchName
          ElementPosition     #1073741823
          HierarchyParent     #BaseInfo
          DataSource          #PurchTable
          DataField           #PurchName
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchTable_ServiceAddress1
          ElementPosition     #1073741823
          HierarchyParent     #HeaderAddressDisplayForSubcontracts
          DataSource          #PurchTable
          DataField           #ServiceAddress
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchTable_TaxGroup
          ElementPosition     #715827882
          HierarchyParent     #SalesTax
          DataSource          #PurchTable
          DataField           #TaxGroup
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #RAssetPurchTrans_assetId
          ElementPosition     #477218586
          HierarchyParent     #GridAsset
          DataSource          #RAssetPurchTrans
          DataField           #AssetId
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #public void lookup()
            #{
            #    ;
            #    RAssetTable::lookupAccountNum(this, curext(), RAssetTransType::Acquisition);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #RBOPackagePurch_PackageId
          ElementPosition     #715827882
          HierarchyParent     #PackageGrid
          DataSource          #RetailPackagePurch
          DataField           #PackageId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ReductionEntryDocumentId
          AllowEdit           #No
          CountryRegionCodes  #JP
          HelpText            #@SYS4006142
          ConfigurationKey    #Asset
          ElementPosition     #1073741822
          HierarchyParent     #ReductionEntry_JP
          DataSource          #PurchLine
          DataMethod          #reductionEntryDocumentId_JP
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Route
          ElementPosition     #757935402
          HierarchyParent     #GridLoads
          DataSource          #WHSLoadLine
          DataMethod          #tmsDisplayRoute
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #SalesTax_EnterpriseNumber
          ElementPosition     #1789569705
          HierarchyParent     #SalesTax
          DataSource          #PurchTable
          DataField           #EnterpriseNumber
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #SalesTax_TaxPeriodPaymentCode_PL
          ElementPosition     #477218588
          HierarchyParent     #SalesTax
          DataSource          #PurchTable
          DataField           #TaxPeriodPaymentCode_PL
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ServiceCodeTable_IN_ServiceAccountingCode
          ElementPosition     #1312351117
          HierarchyParent     #ServiceTax_IN
          DataSource          #ServiceCodeTable_IN
          DataField           #ServiceAccountingCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ServiceCodeTable_IN_ServiceAccountingCode1
          Visible             #No
          ElementPosition     #1431655764
          HierarchyParent     #ServiceTax_IN
          DataSource          #ServiceCodeTable_IN
          DataField           #ServiceAccountingCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ServiceCodeTable_IN_ServiceAccountingCode11
          Visible             #No
          ElementPosition     #1193046470
          HierarchyParent     #ServiceTax_IN
          DataSource          #ServiceCodeTable_IN
          DataField           #ServiceAccountingCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #status_DocumentStatus
          ElementPosition     #805306365
          HierarchyParent     #status
          DataSource          #PurchTable
          DataMethod          #displayDocumentStatus
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #TMSPurchTable_CarrierCode
          AutoDeclaration     #Yes
          ElementPosition     #613566756
          HierarchyParent     #TMSTransportation
          DataSource          #TMSPurchTable
          DataField           #CarrierCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #TMSPurchTable_CarrierGroupCode
          AutoDeclaration     #Yes
          ElementPosition     #1227133512
          HierarchyParent     #TMSTransportation
          DataSource          #TMSPurchTable
          DataField           #CarrierGroupCode
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    if (tmsPurchTable.RecId == 0)
            #    {
            #        tmsPurchTable.initFromPurchTable(purchTable.PurchId);
            #    }
            #
            #    ret = super();
            #
            #    element.enableTMSFields();
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #TMSPurchTable_CarrierServiceCode
          AutoDeclaration     #Yes
          ElementPosition     #920350134
          HierarchyParent     #TMSTransportation
          DataSource          #TMSPurchTable
          DataField           #CarrierServiceCode
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #public void lookup()
            #{
            #    TMSCarrierService::lookupCarrierServiceCode(this, tmsPurchTable.CarrierCode);
            #}
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #TMSPurchTable_ModeCode
          AutoDeclaration     #Yes
          ElementPosition     #1533916890
          HierarchyParent     #TMSTransportation
          DataSource          #TMSPurchTable
          DataField           #ModeCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #TMSPurchTable_TransportationTemplateId
          AutoDeclaration     #Yes
          ElementPosition     #1840700268
          HierarchyParent     #TMSTransportation
          DataSource          #TMSPurchTable
          DataField           #TransportationTemplateId
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    if (tmsPurchTable.RecId == 0)
            #    {
            #        tmsPurchTable.initFromPurchTable(purchTable.PurchId);
            #    }
            #
            #    ret = super();
            #
            #    element.enableTMSFields();
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #VATNum
          AutoDeclaration     #Yes
          ElementPosition     #1073741823
          HierarchyParent     #SalesTax
          DataSource          #PurchTable
          DataField           #VATNum
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #WHSLoadLine_LoadId
          ElementPosition     #252645134
          HierarchyParent     #GridLoads
          DataSource          #WHSLoadLine
          DataField           #LoadId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TREE
        PROPERTIES
          Name                #PackageTree
          Width               #Column width
          Height              #Column height
          ElementPosition     #1431655764
          HierarchyParent     #TreeGroup
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL UTCDATETIMEEDIT
        PROPERTIES
          Name                #CreatedDateTime
          AllowEdit           #No
          Skip                #Yes
          HelpText            #@SYS69444
          ElementPosition     #1431655764
          HierarchyParent     #DateAndTimeLine
          DataSource          #PurchLine
          DataField           #createdDateTime
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL UTCDATETIMEEDIT
        PROPERTIES
          Name                #Flow_FromDateTime
          AutoDeclaration     #Yes
          ElementPosition     #1431655760
          HierarchyParent     #Flow
          DataSource          #EMSFlow
          DataField           #FromDateTime
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL UTCDATETIMEEDIT
        PROPERTIES
          Name                #Flow_ToDateTime
          AutoDeclaration     #Yes
          ElementPosition     #1610612730
          HierarchyParent     #Flow
          DataSource          #EMSFlow
          DataField           #ToDateTime
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL UTCDATETIMEEDIT
        PROPERTIES
          Name                #PurchTable_CreatedDateTime
          AllowEdit           #No
          Skip                #Yes
          HelpText            #@SYS69424
          ElementPosition     #1431655764
          HierarchyParent     #DateAndTime
          DataSource          #PurchTable
          DataField           #createdDateTime
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL WINDOW
        PROPERTIES
          Name                #lineDeliveryType
          AutoDeclaration     #Yes
          AllowEdit           #No
          Width               #16
          Height              #16
          AlignControl        #No
          ElementPosition     #226050910
          HierarchyParent     #LineSpec
          Imagemode           #Size to fit
          Label               #@sys1201
          DataSource          #PurchLine
          DataMethod          #lineDeliveryTypeImage
        ENDPROPERTIES
        
        METHODS
          SOURCE #toolTip
            #public str toolTip()
            #{
            #    DictEnum    dictEnum = new DictEnum(enumNum(LineDeliveryType));
            #
            #    return dictEnum.label() + ': ' + dictEnum.value2Name(purchLine.LineDeliveryType);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL WINDOW
        PROPERTIES
          Name                #PurchLineBudgetCheckResult
          AutoDeclaration     #Yes
          PreviewPartRef      #BudgetCheckResultPreview
          HelpText            #@SYS128633
          ConfigurationKey    #LedgerAdv2BudgetCtrl
          ElementPosition     #339076365
          HierarchyParent     #LineSpec
          Label               #@SYS342081
          DataSource          #PurchLine
          DataMethod          #displayBudgetCheckResult
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL WINDOW
        PROPERTIES
          Name                #PurchTableBudgetCheckResult
          AutoDeclaration     #Yes
          PreviewPartRef      #BudgetCheckResultPreview
          HelpText            #@SYS304309
          ConfigurationKey    #LedgerAdv2BudgetCtrl
          ElementPosition     #1476395002
          HierarchyParent     #status
          Label               #@SYS304310
          DataSource          #PurchTable
          DataMethod          #displayBudgetCheckResult
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
    ENDCONTAINER
    
  ENDDESIGN
  
  PERMISSIONS #Permissions
    PROPERTIES
    ENDPROPERTIES
    
    PERMISSIONSET #Read
      PROPERTIES
      ENDPROPERTIES
      
      FORM #Controls
        CONTROL #Environment
          PROPERTIES
            Control             #Environment
            EffectiveAccess     #Update
          ENDPROPERTIES
          
        ENDCONTROL
        
      CONTROL #GroupFinancialDimensionHeader
        PROPERTIES
          Control             #GroupFinancialDimensionHeader
          EffectiveAccess     #Update
        ENDPROPERTIES
        
      ENDCONTROL
      
    CONTROL #GroupFinancialDimensionLine
      PROPERTIES
        Control             #GroupFinancialDimensionLine
        EffectiveAccess     #Update
      ENDPROPERTIES
      
    ENDCONTROL
    
ENDFORM

TABLES #Tables
  TABLE #BudgetSource
    PROPERTIES
      Table               #BudgetSource
      EffectiveAccess     #Read
      ManagedBy           #Manual
    ENDPROPERTIES
    
  ENDTABLE
  
ENDTABLES

SERVERMETHODS #Server Methods
ENDSERVERMETHODS

ASSOCIATEDFORMS #Associated Forms
  ASSOCIATEDFORM #AgreementLinePrompt
    PROPERTIES
      Form                #AgreementLinePrompt
      AccessLevel         #Read
      SystemManaged       #No
      ManagedBy           #CodeAnalysis
    ENDPROPERTIES
    
  ENDASSOCIATEDFORM
  
ASSOCIATEDFORM #ConfigChooseFromRoute
  PROPERTIES
    Form                #ConfigChooseFromRoute
    AccessLevel         #Read
    SystemManaged       #No
    ManagedBy           #Manual
  ENDPROPERTIES
  
ENDASSOCIATEDFORM

ASSOCIATEDFORM #EcoResCategorySingleLookup
  PROPERTIES
    Form                #EcoResCategorySingleLookup
    AccessLevel         #Read
    SystemManaged       #No
    ManagedBy           #Manual
  ENDPROPERTIES
  
ENDASSOCIATEDFORM

ENDASSOCIATEDFORMS

ENDPERMISSIONSET

PERMISSIONSET #Update
  PROPERTIES
  ENDPROPERTIES
  
  FORM #Controls
    CONTROL #Environment
      PROPERTIES
        Control             #Environment
        EffectiveAccess     #Update
      ENDPROPERTIES
      
    ENDCONTROL
    
  CONTROL #GroupFinancialDimensionHeader
    PROPERTIES
      Control             #GroupFinancialDimensionHeader
      EffectiveAccess     #Update
    ENDPROPERTIES
    
  ENDCONTROL
  
CONTROL #GroupFinancialDimensionLine
  PROPERTIES
    Control             #GroupFinancialDimensionLine
    EffectiveAccess     #Update
  ENDPROPERTIES
  
ENDCONTROL

ENDFORM

TABLES #Tables
ENDTABLES

SERVERMETHODS #Server Methods
ENDSERVERMETHODS

ASSOCIATEDFORMS #Associated Forms
  ASSOCIATEDFORM #AgreementLinePrompt
    PROPERTIES
      Form                #AgreementLinePrompt
      AccessLevel         #Delete
      SystemManaged       #No
      ManagedBy           #CodeAnalysis
    ENDPROPERTIES
    
  ENDASSOCIATEDFORM
  
ASSOCIATEDFORM #ConfigChooseFromRoute
  PROPERTIES
    Form                #ConfigChooseFromRoute
    AccessLevel         #Read
    SystemManaged       #No
    ManagedBy           #Manual
  ENDPROPERTIES
  
ENDASSOCIATEDFORM

ASSOCIATEDFORM #EcoResCategorySingleLookup
  PROPERTIES
    Form                #EcoResCategorySingleLookup
    AccessLevel         #Read
    SystemManaged       #No
    ManagedBy           #Manual
  ENDPROPERTIES
  
ENDASSOCIATEDFORM

ENDASSOCIATEDFORMS

ENDPERMISSIONSET

PERMISSIONSET #Create
  PROPERTIES
  ENDPROPERTIES
  
  FORM #Controls
    CONTROL #Environment
      PROPERTIES
        Control             #Environment
        EffectiveAccess     #Update
      ENDPROPERTIES
      
    ENDCONTROL
    
  CONTROL #GroupFinancialDimensionHeader
    PROPERTIES
      Control             #GroupFinancialDimensionHeader
      EffectiveAccess     #Update
    ENDPROPERTIES
    
  ENDCONTROL
  
CONTROL #GroupFinancialDimensionLine
  PROPERTIES
    Control             #GroupFinancialDimensionLine
    EffectiveAccess     #Update
  ENDPROPERTIES
  
ENDCONTROL

ENDFORM

TABLES #Tables
ENDTABLES

SERVERMETHODS #Server Methods
ENDSERVERMETHODS

ASSOCIATEDFORMS #Associated Forms
  ASSOCIATEDFORM #AgreementLinePrompt
    PROPERTIES
      Form                #AgreementLinePrompt
      AccessLevel         #Delete
      SystemManaged       #No
      ManagedBy           #CodeAnalysis
    ENDPROPERTIES
    
  ENDASSOCIATEDFORM
  
ASSOCIATEDFORM #ConfigChooseFromRoute
  PROPERTIES
    Form                #ConfigChooseFromRoute
    AccessLevel         #Read
    SystemManaged       #No
    ManagedBy           #Manual
  ENDPROPERTIES
  
ENDASSOCIATEDFORM

ASSOCIATEDFORM #EcoResCategorySingleLookup
  PROPERTIES
    Form                #EcoResCategorySingleLookup
    AccessLevel         #Read
    SystemManaged       #No
    ManagedBy           #Manual
  ENDPROPERTIES
  
ENDASSOCIATEDFORM

ASSOCIATEDFORM #PurchCreateOrder
  PROPERTIES
    Form                #PurchCreateOrder
    AccessLevel         #Delete
    SystemManaged       #No
    ManagedBy           #Manual
  ENDPROPERTIES
  
ENDASSOCIATEDFORM

ENDASSOCIATEDFORMS

ENDPERMISSIONSET

PERMISSIONSET #Delete
  PROPERTIES
  ENDPROPERTIES
  
  FORM #Controls
    CONTROL #Environment
      PROPERTIES
        Control             #Environment
        EffectiveAccess     #Update
      ENDPROPERTIES
      
    ENDCONTROL
    
  CONTROL #GroupFinancialDimensionHeader
    PROPERTIES
      Control             #GroupFinancialDimensionHeader
      EffectiveAccess     #Update
    ENDPROPERTIES
    
  ENDCONTROL
  
CONTROL #GroupFinancialDimensionLine
  PROPERTIES
    Control             #GroupFinancialDimensionLine
    EffectiveAccess     #Update
  ENDPROPERTIES
  
ENDCONTROL

ENDFORM

TABLES #Tables
ENDTABLES

SERVERMETHODS #Server Methods
ENDSERVERMETHODS

ASSOCIATEDFORMS #Associated Forms
  ASSOCIATEDFORM #AgreementLinePrompt
    PROPERTIES
      Form                #AgreementLinePrompt
      AccessLevel         #Delete
      SystemManaged       #No
      ManagedBy           #CodeAnalysis
    ENDPROPERTIES
    
  ENDASSOCIATEDFORM
  
ASSOCIATEDFORM #ConfigChooseFromRoute
  PROPERTIES
    Form                #ConfigChooseFromRoute
    AccessLevel         #Read
    SystemManaged       #No
    ManagedBy           #Manual
  ENDPROPERTIES
  
ENDASSOCIATEDFORM

ASSOCIATEDFORM #EcoResCategorySingleLookup
  PROPERTIES
    Form                #EcoResCategorySingleLookup
    AccessLevel         #Read
    SystemManaged       #No
    ManagedBy           #Manual
  ENDPROPERTIES
  
ENDASSOCIATEDFORM

ASSOCIATEDFORM #PurchCreateOrder
  PROPERTIES
    Form                #PurchCreateOrder
    AccessLevel         #Delete
    SystemManaged       #No
    ManagedBy           #Manual
  ENDPROPERTIES
  
ENDASSOCIATEDFORM

ENDASSOCIATEDFORMS

ENDPERMISSIONSET

ENDPERMISSIONS

ENDFORM


***Element: FRM

; Microsoft Dynamics AX Forms unloaded
; --------------------------------------------------------------------------------
FRMVERSION 12

FORM #SalesTableListPage
  PROPERTIES
    Name                #SalesTableListPage
    FormTemplate        #ListPage
    InteractionClass    #SalesTableListPageInteraction
    Origin              #{19BA263F-0090-4DDD-A408-D1F688F1FB20}
  ENDPROPERTIES
  
  METHODS
    SOURCE #classDeclaration
      #public class FormRun extends ObjectRun
      #{
      #}
    ENDSOURCE
  ENDMETHODS
  OBJECTBANK
    PROPERTIES
      Query               #SalesTableListPage
      Version             #193
    ENDPROPERTIES
    
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #SalesTable
          Table               #SalesTable
          AllowEdit           #No
          AllowCreate         #No
          StartPosition       #Last
        ENDPROPERTIES
        
        FIELDLIST
          DATAFIELD SalesId
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD SalesName
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD Reservation
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CustAccount
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InvoiceAccount
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD DeliveryDate
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD URL
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD PurchOrderFormNum
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD SalesGroup
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD FreightSlipType
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD DocumentStatus
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InterCompanyOriginalSalesId
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CurrencyCode
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD Payment
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CashDisc
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD TaxGroup
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD LineDisc
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CustGroup
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD DiscPercent
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InterCompanyOriginalCustAccount
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD PriceGroupId
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD MultiLineDisc
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD EndDisc
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CustomerRef
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CountyOrigDest
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD Listcode
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD DlvTerm
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD DlvMode
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD PurchId
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD SalesStatus
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD MarkupGroup
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD SalesType
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD SalesPoolId
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD PostingProfile
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD TransactionCode
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InterCompanyAutoCreateOrders
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InterCompanyDirectDelivery
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InterCompanyDirectDeliveryOrig
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD SettleVoucher
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD EnterpriseNumber
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InterCompanyAllowIndirectCreation
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InterCompanyAllowIndirectCreationOrig
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD DeliveryName
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD OneTimeCustomer
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CovStatus
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CommissionGroup
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD PaymentSched
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InterCompanyOrigin
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD Email
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD FreightZone
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ReturnItemNum
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CashDiscPercent
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ContactPersonId
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD Deadline
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ProjId
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventLocationId
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD AddressRefTableId
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD VATNum
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD Port
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InclTax
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD EInvoiceLineSpec
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD NumberSequenceGroup
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD FixedExchRate
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD LanguageId
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD AutoSummaryModuleType
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD GiroType
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD SalesOriginId
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD Estimate
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD Touched
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD Transport
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD PaymMode
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD PaymSpec
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD FixedDueDate
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ExportReason
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD StatProcId
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD BankCentralBankPurposeText
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InterCompanyCompanyId
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InterCompanyPurchId
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InterCompanyOrder
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD DlvReason
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD QuotationId
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ReceiptDateRequested
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ReceiptDateConfirmed
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ShippingDateRequested
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ShippingDateConfirmed
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD BankCentralBankPurposeCode
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD EInvoiceAccountCode
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ItemTagging
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CaseTagging
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD PalletTagging
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD AddressRefRecId
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD SkipUpdate
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CustInvoiceId
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventSiteId
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          REFERENCEFIELD DefaultDimension
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD CreditCardCustRefId
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDREFERENCEFIELD
          
          DATAFIELD ShipCarrierAccount
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ShipCarrierId
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ShipCarrierFuelSurcharge
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ShipCarrierBlindShipment
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ShipCarrierDeliveryContact
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CreditCardApprovalAmount
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CreditCardAuthorization
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ReturnDeadline
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ReturnReplacementId
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ReturnStatus
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ReturnReasonCodeId
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CreditCardAuthorizationError
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ShipCarrierAccountCode
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ReturnReplacementCreated
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ShipCarrierDlvType
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD DeliveryDateControlType
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ShipCarrierExpeditedShipment
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ShipCarrierResidential
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          REFERENCEFIELD MatchingAgreement
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDREFERENCEFIELD
          
          DATAFIELD SystemEntrySource
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          REFERENCEFIELD SystemEntryChangePolicy
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD ManualEntryChangepolicy
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD DeliveryPostalAddress
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD ShipCarrierPostalAddress
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDREFERENCEFIELD
          
          DATAFIELD ShipCarrierName
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          REFERENCEFIELD WorkerSalesTaker
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD SourceDocumentHeader
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDREFERENCEFIELD
          
          DATAFIELD BankDocumentType
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD SalesUnitId
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD smmSalesAmountTotal
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD smmCampaignId
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD PdsBatchAttribAutoRes
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD PdsCustRebateGroupId
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD PdsRebateProgramTMAGroup
            PROPERTIES
              AllowAdd            #Yes
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD dataAreaId
            PROPERTIES
              AllowAdd            #No
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD RecId
            PROPERTIES
              AllowAdd            #No
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD TableId
            PROPERTIES
              AllowAdd            #No
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
      LINKTYPES
      ENDLINKTYPES
    ENDDATASOURCE
  ENDOBJECTBANK
  
  REFERENCEDATASOURCES
  ENDREFERENCEDATASOURCES
  
  JOINS
  ENDJOINS
  
  PARTREFERENCES
    PARTREFERENCE #PreviewPane
      PROPERTIES
        Name                #PreviewPane
        MenuItemName        #SalesTableListPagePreviewPane
        PartLocation        #PreviewPane
        DataSource          #SalesTable
        DataSourceRelation  #EDT.SalesTable.SalesId
        ElementPosition     #429496729
      ENDPROPERTIES
      
    ENDPARTREFERENCE
    
    PARTREFERENCE #LatestSalesOrders
      PROPERTIES
        Name                #LatestSalesOrders
        MenuItemName        #SalesLatestOrdersPart
        DataSource          #SalesTable
        DataSourceRelation  #EDT.SalesTable.CustAccount
        ElementPosition     #858993458
      ENDPROPERTIES
      
    ENDPARTREFERENCE
    
    PARTREFERENCE #CustRelatedInfo
      PROPERTIES
        Name                #CustRelatedInfo
        MenuItemName        #CustRelatedInfo
        DisplayTarget       #Client
        DataSource          #SalesTable
        IsLinked            #Yes
        ElementPosition     #1288490187
      ENDPROPERTIES
      
    ENDPARTREFERENCE
    
    PARTREFERENCE #EPCustRelatedInfo
      PROPERTIES
        Name                #EPCustRelatedInfo
        MenuItemName        #EPCustRelatedInfo
        DisplayTarget       #EP
        DataSource          #SalesTable
        IsLinked            #Yes
        ElementPosition     #1717986916
      ENDPROPERTIES
      
    ENDPARTREFERENCE
    
  ENDPARTREFERENCES
  
  DESIGN
    PROPERTIES
      Caption             #@SYS4363
      UseCaptionFromMenuItem  #Yes
      TitleDatasource     #SalesTable
      WindowType          #ContentPage
      DataSource          #SalesTable
      WorkflowEnabled     #Yes
      WorkflowDatasource  #SalesTable
      WorkflowType        #SalesOrderType
      Style               #ListPage
      NewRecordAction     #NewSalesOrder
    ENDPROPERTIES
    
    CONTAINER
      CONTROL ACTIONPANE
        PROPERTIES
          Name                #ActionPane
          VerticalSpacing     #0
          ElementPosition     #715827882
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #aptabRetail
          ConfigurationKey    #Retail
          ElementPosition     #1744830457
          HierarchyParent     #ActionPane
          Caption             #@RET3014
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #General
          ElementPosition     #1845493754
          HierarchyParent     #ActionPane
          Caption             #@SYS19924
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #Invoice
          ElementPosition     #1610612730
          HierarchyParent     #ActionPane
          Caption             #@SYS14204
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #Manage
          AutoDeclaration     #Yes
          ElementPosition     #1073741820
          HierarchyParent     #ActionPane
          Caption             #@SYS115306
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #PickAndPack
          AutoDeclaration     #Yes
          ElementPosition     #1342177275
          HierarchyParent     #ActionPane
          Caption             #@SYS114648
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #SalesOrder
          ElementPosition     #536870910
          HierarchyParent     #ActionPane
          Caption             #@SYS19627
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #Sell
          ElementPosition     #805306365
          HierarchyParent     #ActionPane
          Caption             #@SYS114644
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #TMS
          ElementPosition     #2046820348
          HierarchyParent     #ActionPane
          Caption             #@TRX1
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #WHS
          ElementPosition     #1946157051
          HierarchyParent     #ActionPane
          Caption             #@WAX13
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ActionButtonGroup
          ElementPosition     #1717986916
          HierarchyParent     #WHS
          Caption             #@SYS40422
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #Apply
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #Sell
          Caption             #@SYS24973
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #AttachedDocuments
          ElementPosition     #1895825402
          HierarchyParent     #SalesOrder
          Caption             #@SYS316708
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #BillInvoice
          AutoDeclaration     #Yes
          ElementPosition     #1073741823
          HierarchyParent     #Invoice
          Caption             #@SYS114665
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #btngrpAttribute
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #aptabRetail
          Caption             #@SYS334125
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #btngrpInquiries
          ElementPosition     #1789569705
          HierarchyParent     #aptabRetail
          Caption             #@SYS316992
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ButtonGroupAffiliations
          AutoDeclaration     #Yes
          ElementPosition     #1968526675
          HierarchyParent     #aptabRetail
          Caption             #@REX51
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ButtonGroupInvoice
          ElementPosition     #1610612733
          HierarchyParent     #TMS
          Caption             #@TRX1373
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ButtonGroupLoads
          ElementPosition     #1288490187
          HierarchyParent     #WHS
          Caption             #@WAX312
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ButtonGroupRating
          ElementPosition     #1431655764
          HierarchyParent     #TMS
          Caption             #@SYS27110
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #CalculateGroup
          ElementPosition     #1073741823
          HierarchyParent     #Sell
          Caption             #@SYS117
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #CalculateGroup1
          ElementPosition     #1073741823
          HierarchyParent     #Sell
          Caption             #@SYS117
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ChargesInvoice
          ElementPosition     #954437176
          HierarchyParent     #Sell
          Caption             #@SYS28668
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #CreditNote
          AutoDeclaration     #Yes
          ElementPosition     #477218588
          HierarchyParent     #Sell
          Caption             #@SYS114655
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #CustInfo
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #Manage
          Caption             #@SYS24704
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #Customer
          ElementPosition     #805306365
          HierarchyParent     #General
          Caption             #@SYS80104
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #GeneralMaintain
          ElementPosition     #1342177275
          HierarchyParent     #General
          Caption             #@SYS316594
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #GeneralRelatedInfo
          ElementPosition     #1744830460
          HierarchyParent     #General
          Caption             #@SYS111665
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #Generate
          AutoDeclaration     #Yes
          ElementPosition     #1193046470
          HierarchyParent     #Sell
          Caption             #@SYS26349
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #IntercompanyGeneral
          AutoDeclaration     #Yes
          ConfigurationKey    #TradeInterCompany
          DisplayTarget       #Client
          ElementPosition     #1610612734
          HierarchyParent     #Manage
          Caption             #@SYS121366
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #IssueInvoice
          AutoDeclaration     #Yes
          ElementPosition     #715827882
          HierarchyParent     #Invoice
          Caption             #@SYS26349
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #List
          ElementPosition     #1610612730
          HierarchyParent     #SalesOrder
          Caption             #@SYS118440
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #Maintain
          AutoDeclaration     #Yes
          ElementPosition     #939524092
          HierarchyParent     #SalesOrder
          Caption             #@SYS316703
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ManageBankDocument
          ElementPosition     #1342177278
          HierarchyParent     #Manage
          Caption             #@SYS313653
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ManageQuality
          AutoDeclaration     #Yes
          ElementPosition     #1073741823
          HierarchyParent     #PickAndPack
          Caption             #@SYS113616
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #MCRCoupon
          AutoDeclaration     #Yes
          ConfigurationKey    #MCRCallCenter
          ElementPosition     #1879048190
          HierarchyParent     #Manage
          Caption             #@MCR25553
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #MCRPayments
          ConfigurationKey    #MCRCallCenter
          ElementPosition     #1140850683
          HierarchyParent     #SalesOrder
          Caption             #@SYS58091
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #MCRSalesOrderFunctions
          AutoDeclaration     #Yes
          ConfigurationKey    #MCRCallCenter
          ElementPosition     #1543503866
          HierarchyParent     #SalesOrder
          Caption             #@SYS81103
          DataSource          #SalesTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #NewGroup
          AutoDeclaration     #Yes
          ElementPosition     #536870910
          HierarchyParent     #SalesOrder
          Caption             #@SYS2055
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #Perform
          ElementPosition     #1908874352
          HierarchyParent     #Sell
          Caption             #@SYS343776
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #PickAndPackDelivery
          ElementPosition     #1431655764
          HierarchyParent     #PickAndPack
          Caption             #@SYS4508
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #PickAndPackGenerate
          AutoDeclaration     #Yes
          ElementPosition     #715827882
          HierarchyParent     #PickAndPack
          Caption             #@SYS318742
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #PickAndPackJournals
          AutoDeclaration     #Yes
          ElementPosition     #1789569705
          HierarchyParent     #PickAndPack
          Caption             #@SYS9020
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ProcessGroup
          ElementPosition     #1312351117
          HierarchyParent     #Sell
          Caption             #@SYS114631
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #RelatedDetailsButtonGroup
          ElementPosition     #858993458
          HierarchyParent     #WHS
          Caption             #@WAX1948
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #RelatedDocuments
          AutoDeclaration     #Yes
          ElementPosition     #1670265058
          HierarchyParent     #Sell
          Caption             #@SYS9020
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #RelatedDocumentsInvoice
          AutoDeclaration     #Yes
          ElementPosition     #1789569705
          HierarchyParent     #Invoice
          Caption             #@SYS9020
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #Reporting
          AutoDeclaration     #Yes
          ElementPosition     #2013265917
          HierarchyParent     #SalesOrder
          Caption             #@sys4000774
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #RetailPrepaymentBalance
          ConfigurationKey    #Retail
          ElementPosition     #2028178999
          HierarchyParent     #Sell
          Caption             #@RET4990
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #SalesOrderCopy
          ElementPosition     #1342177275
          HierarchyParent     #SalesOrder
          Caption             #@SYS80350
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #SalesOrderView
          ElementPosition     #1476395002
          HierarchyParent     #SalesOrder
          Caption             #@SYS53394
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #SellCharges
          ElementPosition     #715827882
          HierarchyParent     #Sell
          Caption             #@SYS114608
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #SettleInvoice
          ElementPosition     #1431655764
          HierarchyParent     #Invoice
          Caption             #@SYS114666
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #SetupGeneral
          ElementPosition     #536870910
          HierarchyParent     #General
          Caption             #@SYS342635
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GRID
        PROPERTIES
          Name                #Grid
          AllowEdit           #No
          Width               #Column width
          Height              #Column height
          ElementPosition     #1610612734
          DataSource          #SalesTable
          DefaultAction       #ViewButton
          DefaultActionLabel  #@SYS122402
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Filter
          Visible             #No
          ElementPosition     #1073741822
          Style               #CustomFilter
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUBUTTON
        PROPERTIES
          Name                #ButtonHeaderTradeAgreements
          AutoDeclaration     #Yes
          HelpText            #@SYS69473
          ElementPosition     #715827882
          HierarchyParent     #Customer
          Text                #@SYS115266
          ButtonDisplay       #Text & Image above
          NormalImage         #12430
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUBUTTON
        PROPERTIES
          Name                #CreateActivity
          HelpText            #@SYS26027
          ElementPosition     #1073741823
          HierarchyParent     #Customer
          Text                #@SYS38378
          NormalImage         #10197
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
          NeedsRecord         #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUBUTTON
        PROPERTIES
          Name                #CreditCard
          AutoDeclaration     #Yes
          HelpText            #@SYS116961
          DisplayTarget       #Client
          ElementPosition     #1574821339
          HierarchyParent     #CustInfo
          Text                #@SYS101746
          ButtonDisplay       #Text & Image left
          NormalImage         #12446
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
          NeedsRecord         #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUBUTTON
        PROPERTIES
          Name                #GeneralCustomerCases
          HelpText            #@SYS310451
          ElementPosition     #1431655764
          HierarchyParent     #Customer
          Text                #@SYS130461
          ButtonDisplay       #Text & Image left
          NormalImage         #11229
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
          NeedsRecord         #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUBUTTON
        PROPERTIES
          Name                #mbTemplatesButton
          AutoDeclaration     #Yes
          HelpText            #@SYS345470
          DisplayTarget       #Client
          ElementPosition     #715827880
          HierarchyParent     #AttachedDocuments
          Text                #@SYS345468
          NormalImage         #ImageResourceOfficeTemplate_ico
          ImageLocation       #AOTResource
          ShowShortCut        #No
          Big                 #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #mouseDown
            #public int mouseDown(int _x, int _y, int _button, boolean _ctrl, boolean _shift)
            #{
            #    int ret;
            #
            #    if (DocuActionForTemplate::createTemplateOnMenuButton(this, salesTable.TableId))
            #    {
            #        docuActionTemplateUndefined.visible(NoYes::No);
            #    }
            #
            #    ret = super(_x, _y, _button, _ctrl, _shift);
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #SalesTable_WorkerSalesTaker
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1789569700
          HierarchyParent     #Grid
          DataSource          #SalesTable
          ReferenceField      #WorkerSalesTaker
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #EndDisc
          AutoDeclaration     #Yes
          NeededPermission    #Create
          HelpText            #@SYS68934
          ConfigurationKey    #PriceDisc
          DisplayTarget       #Client
          ElementPosition     #1717986916
          HierarchyParent     #CalculateGroup
          Text                #@SYS6465
          ButtonDisplay       #Text & Image left
          NormalImage         #10831
          ImageLocation       #EmbeddedResource
          NeedsRecord         #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #public void  clicked()
            #{
            #    super();
            #
            #    salesTable.updateFinalDisc();
            #    // CreditLimit calculation should only be triggered if updateFinalDisc() changes the DiscPercent which is indicated by touched.
            #    if (salesTable.Touched)
            #    {
            #        // Refresh if the final discount is updated
            #        salesTable_ds.reread();
            #        salesTable_ds.refresh();
            #
            #        //This will trigger the creditlimit calculation when salesTable.validateWrite is called
            #        if (salesTable.custTable_CustAccount().shouldEstimateBeCalculated())
            #        {
            #            salesTable.Touched = NoYes::Yes;
            #        }
            #    }
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #InterCompanyOriginalSalesTable
          AutoDeclaration     #Yes
          NeededPermission    #Manual
          HelpText            #@SYS94563
          ConfigurationKey    #TradeInterCompany
          DisplayTarget       #Client
          ElementPosition     #1073741823
          HierarchyParent     #IntercompanyGeneral
          Text                #@SYS114675
          ButtonDisplay       #Text & Image below
          NormalImage         #10664
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #/// <summary>
            #/// Opens the related taskpage to edit a record.
            #/// </summary>
            #void clicked()
            #{
            #    super();
            #
            #    TradeInterCompany::construct(salesTable,true).formRun(formStr(SalesTable));
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #InterCompanyPickinglist
          AutoDeclaration     #Yes
          HelpText            #@SYS94424
          ConfigurationKey    #TradeInterCompany
          DisplayTarget       #Client
          ElementPosition     #1073741820
          HierarchyParent     #PickAndPackGenerate
          Text                #@SYS114678
          ButtonDisplay       #Text & Image below
          NormalImage         #10602
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #/// <summary>
            #/// Opens the related taskpage to edit a record.
            #/// </summary>
            #void clicked()
            #{
            #    PurchTable                  purchTable_Reference = salesTable.referencePurchTable();
            #    SalesTableInteractionHelper salesTableInteractionHelper;
            #
            #    if (!purchTable_Reference.RecId && !purchTable_Reference.InterCompanySalesId)
            #    {
            #        throw(error("@SYS28047"));
            #    }
            #
            #    TradeInterCompany::construct(purchTable_Reference).menuFunction(classStr(SalesFormLetter_PickingList), MenuItemType::Action, element);
            #    salesTableInteractionHelper = SalesTableInteractionHelper::construct();
            #    salesTableInteractionHelper.initHeaderActions(salesTable);
            #    interCompanyPickinglist.enabled(salesTableInteractionHelper.parmEnableICPickingListButton());
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #InterCompanyPurchTable
          AutoDeclaration     #Yes
          NeededPermission    #Manual
          HelpText            #@SYS94560
          ConfigurationKey    #TradeInterCompany
          DisplayTarget       #Client
          ElementPosition     #1789569705
          HierarchyParent     #IntercompanyGeneral
          Text                #@SYS114677
          ButtonDisplay       #Text & Image below
          NormalImage         #10603
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #/// <summary>
            #/// Opens the related taskpage to edit a record.
            #/// </summary>
            #void clicked()
            #{
            #    super();
            #    TradeInterCompany::construct(salesTable).formRun(formStr(PurchTable));
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #InterCompanySalesTable
          AutoDeclaration     #Yes
          NeededPermission    #Manual
          HelpText            #@SYS94562
          ConfigurationKey    #TradeInterCompany
          DisplayTarget       #Client
          ElementPosition     #715827882
          HierarchyParent     #IntercompanyGeneral
          Text                #@SYS114674
          ButtonDisplay       #Text & Image below
          NormalImage         #10604
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #/// <summary>
            #/// Opens the related taskpage to edit a record.
            #/// </summary>
            #void clicked()
            #{
            #    super();
            #
            #    if (salesTable.SalesType == SalesType::ReturnItem)
            #    {
            #        TradeInterCompany::construct(salesTable.referencePurchTable()).formRun(formStr(ReturnTable),element);
            #    }
            #    else
            #    {
            #        TradeInterCompany::construct(salesTable.referencePurchTable()).formRun(formStr(SalesTable),element);
            #    }
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #MCROrderHolds
          AutoDeclaration     #Yes
          HelpText            #@MCR10900
          DisplayTarget       #Client
          ElementPosition     #1610612733
          HierarchyParent     #MCRSalesOrderFunctions
          Text                #@MCR10491
          ButtonDisplay       #Text & Image right
          NormalImage         #11153
          ImageLocation       #EmbeddedResource
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    super();
            #
            #    if (!SalesTableForm::mcrEnableOrderHoldsButton(SalesTable))
            #    {
            #        throw error("@SYS4160087");
            #    }
            #
            #    SalesTableForm::mcrPromptHoldOrder(salesTable);
            #
            #    salesTable_ds.reread();
            #    salesTable_ds.refresh();
            #    salesTable_ds.active();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #MCRRecap
          AutoDeclaration     #Yes
          HelpText            #@MCR21471
          ConfigurationKey    #MCRCallCenter
          DisplayTarget       #Client
          ElementPosition     #966367638
          HierarchyParent     #MCRSalesOrderFunctions
          Text                #@MCR11440
          ButtonDisplay       #Text & Image right
          NormalImage         #10010
          ImageLocation       #EmbeddedResource
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    SalesTableForm::mcrCompleteMarkupTransCalc(salesTable);
            #    //Show the recap form.
            #    SalesTableForm::mcrShowOrderRecap(salesTable);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #MultiLnDisc
          AutoDeclaration     #Yes
          NeededPermission    #Create
          HelpText            #@SYS68933
          ConfigurationKey    #PriceDisc
          DisplayTarget       #Client
          ElementPosition     #1288490187
          HierarchyParent     #CalculateGroup
          Text                #@SYS11440
          ButtonDisplay       #Text & Image left
          NormalImage         #10647
          ImageLocation       #EmbeddedResource
          NeedsRecord         #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void  clicked()
            #{
            #    super();
            #
            #    if (CustParameters::find().AutomaticTotalDiscount)
            #    {
            #        salesTable.updateFinalDisc();
            #        // CreditLimit calculation should only be triggered if updateFinalDisc() changes the DiscPercent which is indicated by touched.
            #        // save the value since it is lost by reread().
            #        if (salesTable.Touched)
            #        {
            #            // Reread the buffer since updateFinalDisc() can call update().
            #            salesTable_ds.reread();
            #            salesTable_ds.refresh();
            #
            #            // This will trigger the creditlimit calculation when salesTable.validateWrite is called.
            #            if (salesTable.custTable_CustAccount().shouldEstimateBeCalculated())
            #            {
            #                salesTable.Touched = NoYes::Yes;
            #            }
            #        }
            #    }
            #    salesTable.updateMultiLineDisc();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #PrintMgmt
          AutoDeclaration     #Yes
          NeededPermission    #Manual
          HelpText            #@SYS68918
          ConfigurationKey    #LogisticsBasic
          SecurityKey         #CustMisc
          DisplayTarget       #Client
          ElementPosition     #1073741822
          HierarchyParent     #SetupGeneral
          Text                #@SYS114627
          ButtonDisplay       #Text & Image left
          NormalImage         #10698
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          NeedsRecord         #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #/// <summary>
            #/// Sets up the context for print management
            #/// </summary>
            #void clicked()
            #{
            #    PrintMgmtSetupContext setupContext = new PrintMgmtSetupContext();
            #
            #    if (salesTable_ds.cursor() == null)
            #    {
            #        return;
            #    }
            #
            #    super();
            #
            #    setupContext.addHierarchyContext(PrintMgmtHierarchyType::Sales, PrintMgmtNodeType::SalesTable);
            #    setupContext.parmCaller(element);
            #    setupContext.parmReferencedTableBuffer(salesTable_ds.cursor());
            #    setupContext.parmCountryRegionId(salesTable.getCountryRegionIdByDocumentStatus());
            #
            #    PrintMgmt::launchSetup(setupContext);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #TieredCharges
          AutoDeclaration     #Yes
          NeededPermission    #Create
          HelpText            #@SYS4050023
          ConfigurationKey    #Markup
          DisplayTarget       #Client
          ElementPosition     #1932735281
          HierarchyParent     #CalculateGroup
          Text                #@SYS4050022
          ButtonDisplay       #Text & Image left
          NormalImage         #10639
          ImageLocation       #EmbeddedResource
          NeedsRecord         #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #public void  clicked()
            #{
            #    super();
            #
            #    salesTable.calculateTieredCharges();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #SalesTable_MCROrderStopped
          ElementPosition     #2147425390
          HierarchyParent     #Grid
          BackgroundColor     #Window background
          DataSource          #SalesTable
          DataField           #MCROrderStopped
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #SalesTable_AZ_SalesOrderWorkflowStatus
          ElementPosition     #1610612730
          HierarchyParent     #Grid
          DataSource          #SalesTable
          DataField           #AZ_SalesOrderWorkflowStatus
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #SalesTable_ReleaseStatus
          ElementPosition     #2028178995
          HierarchyParent     #Grid
          DataSource          #SalesTable
          DataField           #ReleaseStatus
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #SalesTable_SalesStatusGrid
          AutoDeclaration     #Yes
          ElementPosition     #1431655760
          HierarchyParent     #Grid
          DataSource          #SalesTable
          DataField           #SalesStatus
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #SalesTable_SalesType
          AutoDeclaration     #Yes
          ElementPosition     #1252698790
          HierarchyParent     #Grid
          DataSource          #SalesTable
          DataField           #SalesType
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #Attachments
          DisplayTarget       #Client
          ElementPosition     #1073741822
          HierarchyParent     #AttachedDocuments
          Text                #@SYS316708
          ButtonDisplay       #Text & Image below
          NormalImage         #10442
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          NeedsRecord         #Yes
          Command             #2853
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #Delete
          AutoDeclaration     #Yes
          ElementPosition     #1879048189
          HierarchyParent     #Maintain
          Text                #@SYS14425
          ButtonDisplay       #Text & Image below
          NormalImage         #10121
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          SaveRecord          #No
          MultiSelect         #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          Command             #2832
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #Refresh
          HelpText            #@SYS315818
          ElementPosition     #1073741822
          HierarchyParent     #List
          ButtonDisplay       #Text & Image left
          NormalImage         #11437
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #Yes
          Big                 #Yes
          KeyTip              #@SYS315818
          Command             #2875
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #SendToExcel
          ElementPosition     #1610612734
          HierarchyParent     #List
          NormalImage         #10156
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #Yes
          Big                 #Yes
          NeedsRecord         #Yes
          Command             #4436
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DROPDIALOGBUTTON
        PROPERTIES
          Name                #CancelOrderButton
          AutoDeclaration     #Yes
          ElementPosition     #2013265917
          HierarchyParent     #Maintain
          ButtonDisplay       #Text & Image left
          ShowShortCut        #No
          MenuItemName        #SalesCancelOrder
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #AnalyzeData
          ElementPosition     #1431655764
          HierarchyParent     #Reporting
          ShowShortCut        #No
          Big                 #Yes
          MenuItemType        #Action
          MenuItemName        #CreatePowerViewReportCustCube
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #AutoRate
          ElementPosition     #1252698790
          HierarchyParent     #ButtonGroupRating
          Big                 #Yes
          DataSource          #SalesTable
          MenuItemType        #Action
          MenuItemName        #TMSAutoRouteAssignment
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #BankLGRequestForm
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #ManageBankDocument
          ButtonDisplay       #Text & Image above
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemName        #BankLGRequestForm
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #btnLoadTable
          AutoDeclaration     #Yes
          ElementPosition     #1610612734
          HierarchyParent     #RelatedDetailsButtonGroup
          ButtonDisplay       #Text & Image above
          NormalImage         #10083
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #SalesTable
          MenuItemName        #WHSLoadTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #btnShipmentDetails
          ElementPosition     #1073741822
          HierarchyParent     #RelatedDetailsButtonGroup
          ButtonDisplay       #Text & Image above
          NormalImage         #10458
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #SalesTable
          MenuItemName        #WHSShipmentDetails
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonCalculateConfirmDates
          AutoDeclaration     #Yes
          DisplayTarget       #Client
          ElementPosition     #858993458
          HierarchyParent     #CalculateGroup
          Text                #@SYS342129
          ButtonDisplay       #Text & Image above
          ShowShortCut        #No
          MultiSelect         #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemType        #Action
          MenuItemName        #SalesUpdateConfirmDatesCommand
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ButtonCreateBankLCExport
          AutoDeclaration     #Yes
          HelpText            #@SYS316146
          ConfigurationKey    #BankDocument
          ElementPosition     #1073741822
          HierarchyParent     #ManageBankDocument
          Text                #@SYS317555
          ButtonDisplay       #Text & Image above
          NormalImage         #12518
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemName        #BankLCExport
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonCreateDropShipment
          AutoDeclaration     #Yes
          DisplayTarget       #Client
          ElementPosition     #1789569705
          HierarchyParent     #NewGroup
          Text                #@SYS78211
          ButtonDisplay       #Text & Image above
          ShowShortCut        #No
          Primary             #Yes
          NeedsRecord         #Yes
          MenuItemType        #Action
          MenuItemName        #SalesCreateDropShipment
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonCreatePurchOrder
          AutoDeclaration     #Yes
          DisplayTarget       #Client
          ElementPosition     #1431655764
          HierarchyParent     #NewGroup
          Text                #@SYS25545
          ButtonDisplay       #Text & Image above
          ShowShortCut        #No
          Primary             #Yes
          NeedsRecord         #Yes
          MenuItemType        #Action
          MenuItemName        #PurchCreateFromSalesorderSales
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonHeaderFiscalDocumentText_BR
          AutoDeclaration     #Yes
          AllowEdit           #No
          CountryRegionCodes  #BR
          HelpText            #@GLS63739
          ElementPosition     #1932735281
          HierarchyParent     #AttachedDocuments
          NormalImage         #10099
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          NeedsRecord         #Yes
          MenuItemName        #FiscalDocumentText_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonJournalConfirmation
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #RelatedDocuments
          NormalImage         #10511
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
          DataSource          #SalesTable
          MenuItemName        #CustConfirmJournal_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonJournalFacture_RU
          AutoDeclaration     #Yes
          CountryRegionCodes  #RU
          ElementPosition     #1789569705
          HierarchyParent     #RelatedDocumentsInvoice
          ButtonDisplay       #Text & Image left
          NormalImage         #10733
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          DataSource          #SalesTable
          MenuItemName        #facturejournalcust_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonJournalInvoice
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #RelatedDocumentsInvoice
          Text                #@SYS114667
          ButtonDisplay       #Text & Image left
          NormalImage         #10612
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          DataSource          #SalesTable
          MenuItemName        #CustInvoiceJournal_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonJournalInvoice4Paym_RU
          AutoDeclaration     #Yes
          CountryRegionCodes  #RU
          ElementPosition     #1342177277
          HierarchyParent     #RelatedDocuments
          ButtonDisplay       #Text & Image left
          NormalImage         #10498
          ImageLocation       #EmbeddedResource
          DataSource          #SalesTable
          MenuItemName        #CustInvoice4PaymJournal_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonJournalPackingSlip
          AutoDeclaration     #Yes
          ElementPosition     #1610612734
          HierarchyParent     #PickAndPackJournals
          ButtonDisplay       #Text & Image below
          NormalImage         #10667
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
          DataSource          #SalesTable
          MenuItemName        #CustPackingSlipJournal_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonJournalPickingList
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #PickAndPackJournals
          ButtonDisplay       #Text & Image below
          NormalImage         #10682
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
          DataSource          #SalesTable
          MenuItemName        #WMSPickingRoutesJournal
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonLineQuantity
          ElementPosition     #1073741820
          HierarchyParent     #GeneralRelatedInfo
          ButtonDisplay       #Text & Image above
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemName        #SalestableLineQuantity
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ButtonMarkupTransHeading
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #SellCharges
          Text                #@SYS8371
          ButtonDisplay       #Text & Image below
          NormalImage         #10639
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemName        #MarkupTrans_HeadingSales_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonPaymentSchedule
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #BillInvoice
          ButtonDisplay       #Text & Image below
          NormalImage         #10673
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          DataSource          #SalesTable
          MenuItemName        #CustPaymSchedule_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonPostings
          ElementPosition     #805306365
          HierarchyParent     #GeneralRelatedInfo
          ButtonDisplay       #Text & Image above
          Big                 #Yes
          NeedsRecord         #Yes
          MenuItemName        #SalesTablepostings
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonProcessEventKanbans
          AutoDeclaration     #Yes
          DisplayTarget       #Client
          ElementPosition     #1431655764
          HierarchyParent     #ProcessGroup
          MultiSelect         #No
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemType        #Action
          MenuItemName        #ReqEventProcessKanbanSalesTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonProformaConfirmation
          AutoDeclaration     #Yes
          DisplayTarget       #Client
          ElementPosition     #1610612733
          HierarchyParent     #Generate
          ButtonDisplay       #Text & Image below
          NormalImage         #10702
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemType        #Action
          MenuItemName        #SalesFormLetter_Proforma_Confirm_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonProformaFacture_RU
          AutoDeclaration     #Yes
          CountryRegionCodes  #RU
          ElementPosition     #1840700267
          HierarchyParent     #IssueInvoice
          Text                #@GLS116069
          ButtonDisplay       #Text & Image above
          NormalImage         #10731
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          MenuItemType        #Action
          MenuItemName        #SalesFormLetter_Proforma_Facture_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonProformaInvoice
          AutoDeclaration     #Yes
          DisplayTarget       #Client
          ElementPosition     #1533916889
          HierarchyParent     #IssueInvoice
          ButtonDisplay       #Text & Image below
          NormalImage         #10703
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          DataSource          #SalesTable
          MenuItemType        #Action
          MenuItemName        #SalesFormLetter_Proforma_Invoice_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonProformaInvoice4Paym_RU
          AutoDeclaration     #Yes
          CountryRegionCodes  #RU
          ElementPosition     #1968526675
          HierarchyParent     #Generate
          Text                #@GLS116067
          ButtonDisplay       #Text & Image left
          NormalImage         #12380
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemType        #Action
          MenuItemName        #SalesFormLetter_Proforma_Invoice4Paym_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonProformaPackingSlip
          AutoDeclaration     #Yes
          DisplayTarget       #Client
          ElementPosition     #1879048188
          HierarchyParent     #PickAndPackGenerate
          ButtonDisplay       #Text & Image below
          NormalImage         #10704
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          DataSource          #SalesTable
          MenuItemType        #Action
          MenuItemName        #SalesFormLetter_Proforma_Pack_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonReferences
          AutoDeclaration     #Yes
          ElementPosition     #536870910
          HierarchyParent     #GeneralRelatedInfo
          ButtonDisplay       #Text & Image above
          Big                 #Yes
          DataSource          #SalesTable
          MenuItemName        #SalesTableReferences
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonSalesAgreement
          AutoDeclaration     #Yes
          ElementPosition     #1879048185
          HierarchyParent     #GeneralRelatedInfo
          Text                #@SYS305726
          ButtonDisplay       #Text & Image left
          ShowShortCut        #No
          Primary             #Yes
          MenuItemName        #SalesAgreement
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonUpdateConfirmation
          AutoDeclaration     #Yes
          DisplayTarget       #Client
          ElementPosition     #1073741822
          HierarchyParent     #Generate
          ButtonDisplay       #Text & Image below
          NormalImage         #10510
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemType        #Action
          MenuItemName        #SalesFormLetter_Confirmation_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonUpdateDeliverySlip_BR
          AutoDeclaration     #Yes
          CountryRegionCodes  #BR
          DisplayTarget       #Client
          ElementPosition     #1610612732
          HierarchyParent     #PickAndPackGenerate
          NormalImage         #10665
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          Primary             #Yes
          MenuItemType        #Action
          MenuItemName        #SalesFormLetter_DeliverySlip_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonUpdateFacture_RU
          AutoDeclaration     #Yes
          CountryRegionCodes  #RU
          ElementPosition     #1227133511
          HierarchyParent     #IssueInvoice
          ButtonDisplay       #Text & Image above
          NormalImage         #10731
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemType        #Action
          MenuItemName        #SalesFormLetter_Facture_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonUpdateInvoice
          AutoDeclaration     #Yes
          DisplayTarget       #Client
          ElementPosition     #1073741822
          HierarchyParent     #IssueInvoice
          ButtonDisplay       #Text & Image below
          NormalImage         #10610
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          DataSource          #SalesTable
          MenuItemType        #Action
          MenuItemName        #SalesFormLetter_Invoice_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonUpdateInvoice4Paym_RU
          AutoDeclaration     #Yes
          CountryRegionCodes  #RU
          ElementPosition     #1789569704
          HierarchyParent     #Generate
          ButtonDisplay       #Text & Image left
          NormalImage         #12519
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemType        #Action
          MenuItemName        #SalesFormLetter_Invoice4Paym_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonUpdatePackingSlip
          AutoDeclaration     #Yes
          DisplayTarget       #Client
          ElementPosition     #1342177276
          HierarchyParent     #PickAndPackGenerate
          NormalImage         #10665
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          DataSource          #SalesTable
          MenuItemType        #Action
          MenuItemName        #SalesFormLetter_PackingSlip_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonUpdatePickingList
          AutoDeclaration     #Yes
          DisplayTarget       #Client
          ElementPosition     #536870910
          HierarchyParent     #PickAndPackGenerate
          ButtonDisplay       #Text & Image below
          NormalImage         #10681
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          DataSource          #SalesTable
          MenuItemType        #Action
          MenuItemName        #SalesFormLetter_PickingList_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonUpdatePickingListRegistrate
          AutoDeclaration     #Yes
          ElementPosition     #805306365
          HierarchyParent     #PickAndPackGenerate
          ButtonDisplay       #Text & Image below
          NormalImage         #10683
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          DataSource          #SalesTable
          MenuItemName        #WMSPickingRegistration_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CaseButton
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #GeneralCustomerCases
          Text                #@SYS317474
          ButtonDisplay       #Text & Image left
          NormalImage         #12198
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
          DataSource          #SalesTable
          MenuItemName        #CaseDetail
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CashFlowForecast
          AutoDeclaration     #Yes
          ElementPosition     #1610612734
          HierarchyParent     #BillInvoice
          ButtonDisplay       #Text & Image below
          NormalImage         #10474
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemName        #LedgerCoverage_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CFMPaymentRequestCreate
          AutoDeclaration     #Yes
          ElementPosition     #2058005160
          HierarchyParent     #Generate
          ShowShortCut        #No
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemType        #Action
          MenuItemName        #CFMPaymentRequestCreate_SO
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CFMPaymentRequestView
          AutoDeclaration     #Yes
          ElementPosition     #1879048189
          HierarchyParent     #RelatedDocuments
          ButtonDisplay       #Text & Image left
          ShowShortCut        #No
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemName        #CFMPaymentRequestGrid_SO
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CFMPlannedPaymentTable
          ElementPosition     #1879048190
          HierarchyParent     #BillInvoice
          ButtonDisplay       #Text & Image below
          NormalImage         #10593
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          DataSource          #SalesTable
          MenuItemName        #CFMPlannedPaymentTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CheckCreditLimit
          AutoDeclaration     #Yes
          DisplayTarget       #Client
          ElementPosition     #858993458
          HierarchyParent     #CustInfo
          ButtonDisplay       #Text & Image below
          NormalImage         #10492
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemType        #Action
          MenuItemName        #SalesCheckCreditLimit_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ContactPersonButton
          AutoDeclaration     #Yes
          ElementPosition     #1789569705
          HierarchyParent     #Customer
          ButtonDisplay       #Text & Image left
          NormalImage         #11118
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemName        #contactPerson
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CostControlCommittedCost
          AutoDeclaration     #Yes
          AllowEdit           #No
          ElementPosition     #1610612730
          HierarchyParent     #GeneralRelatedInfo
          ButtonDisplay       #Text & Image left
          NormalImage         #11032
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          SaveRecord          #No
          Primary             #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemName        #costcontrolCommittedCost
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #Create
          ElementPosition     #920350134
          HierarchyParent     #CreateActivity
          Text                #@SYS114625
          NormalImage         #10430
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          DataSource          #SalesTable
          MenuItemName        #smmactivitiesactionNew
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CreateCase
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #GeneralCustomerCases
          ButtonDisplay       #Text & Image left
          NormalImage         #12420
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
          DataSource          #SalesTable
          MenuItemName        #CaseDetailNewSales
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CreateTask
          ElementPosition     #1840700268
          HierarchyParent     #CreateActivity
          Text                #@SYS114680
          NormalImage         #10431
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
          DataSource          #SalesTable
          MenuItemName        #smmActivitiesTaskNew
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CreditCardAuthTrans
          ElementPosition     #1717986916
          HierarchyParent     #CreditCard
          Text                #@SYS317472
          DataSource          #SalesTable
          MenuItemName        #CreditCardAuthTrans
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CreditCardPreauthorize
          AutoDeclaration     #Yes
          ElementPosition     #1288490187
          HierarchyParent     #CreditCard
          ButtonDisplay       #Text & Image left
          ShowShortCut        #No
          Primary             #Yes
          DataSource          #SalesTable
          MenuItemType        #Action
          MenuItemName        #CreditCardPreauthorize
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CreditCardWizard
          AutoDeclaration     #Yes
          ElementPosition     #858993458
          HierarchyParent     #CreditCard
          Text                #@SYS32121
          ButtonDisplay       #Text & Image left
          ShowShortCut        #No
          Primary             #Yes
          DataSource          #SalesTable
          MenuItemName        #CreditCardCust
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CustAdvanceInvoiceCreate_CZ
          HelpText            #@GLS220282
          ElementPosition     #1687308578
          HierarchyParent     #IssueInvoice
          Text                #@GLS107927
          Primary             #Yes
          DataSource          #SalesTable
          MenuItemName        #CzCustAdvanceInvoiceCreate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #DocuActionTemplateUndefined
          AutoDeclaration     #Yes
          Enabled             #No
          DisplayTarget       #Client
          ElementPosition     #1431655764
          HierarchyParent     #mbTemplatesButton
          ShowShortCut        #No
          MenuItemName        #DocuActionTemplateUndefined
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #DocuViewAction
          DisplayTarget       #EP
          ElementPosition     #1610612733
          HierarchyParent     #AttachedDocuments
          ButtonDisplay       #Text & Image below
          ShowShortCut        #No
          Big                 #Yes
          NeedsRecord         #Yes
          MenuItemName        #DocuViewAction
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #EditButton
          AutoDeclaration     #Yes
          DisplayTarget       #Client
          ElementPosition     #805306365
          HierarchyParent     #Maintain
          Text                #@SYS317438
          ButtonDisplay       #Text & Image above
          NormalImage         #10040
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          OpenMode            #Edit
          CopyCallerQuery     #Yes
          MenuItemName        #SalesTableForEdit
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #EditInGridButton
          AutoDeclaration     #Yes
          DisplayTarget       #Client
          ElementPosition     #1610612732
          HierarchyParent     #Maintain
          Text                #@SYS319303
          NormalImage         #10011
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          DefaultButton       #Yes
          MultiSelect         #No
          Primary             #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          OpenMode            #Edit
          CopyCallerQuery     #Yes
          FormViewOption      #Grid
          MenuItemName        #SalesTableForEdit
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #EPEditButton
          AutoDeclaration     #Yes
          DisplayTarget       #EP
          ElementPosition     #1073741820
          HierarchyParent     #Maintain
          Text                #@SYS317438
          ButtonDisplay       #Text & Image above
          NormalImage         #10040
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #No
          Big                 #Yes
          DataSource          #SalesTable
          MenuItemName        #SalesTableForEdit
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #EPPurchTableGeneral
          AutoDeclaration     #Yes
          DisplayTarget       #EP
          ElementPosition     #1431655760
          HierarchyParent     #GeneralRelatedInfo
          NormalImage         #10724
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          DataSource          #SalesTable
          MenuItemName        #PurchTableDetails
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #EPViewButton
          DisplayTarget       #EP
          ElementPosition     #536870910
          HierarchyParent     #Maintain
          Text                #@SYS53394
          ShowShortCut        #No
          Big                 #Yes
          MenuItemName        #SalesTableDetails
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #FactureEditLinesCust_Proforma_RU
          AutoDeclaration     #Yes
          CountryRegionCodes  #RU
          HelpText            #@GLS104543
          ElementPosition     #1994091956
          HierarchyParent     #IssueInvoice
          Text                #@GLS116069
          ButtonDisplay       #Text & Image above
          NormalImage         #10731
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemName        #FactureEditLinesCust_Proforma_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #FactureEditLinesCust_RU
          AutoDeclaration     #Yes
          CountryRegionCodes  #RU
          HelpText            #@GLS104543
          ElementPosition     #1380525200
          HierarchyParent     #IssueInvoice
          Text                #@GLS104802
          ButtonDisplay       #Text & Image above
          NormalImage         #10731
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemName        #FactureEditLinesCust_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #HeaderPackageParm
          AutoDeclaration     #Yes
          ElementPosition     #2013265915
          HierarchyParent     #GeneralRelatedInfo
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemName        #PlInventPackageParm
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #InventNonConformanceTableHeader
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #ManageQuality
          NormalImage         #11134
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemName        #InventNonConformanceTableAction
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #InventQualityOrderTableHeader
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #ManageQuality
          NormalImage         #11135
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemName        #InventQualityOrderTableAction
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #MCRCatalog
          ConfigurationKey    #MCRCallCenter
          ElementPosition     #1908874352
          HierarchyParent     #Customer
          ButtonDisplay       #Text & Image right
          NormalImage         #10911
          ImageLocation       #EmbeddedResource
          MenuItemName        #MCRCatalogRequest
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #MCRCouponSalesTable_mcr
          AutoDeclaration     #Yes
          HelpText            #@MCR25553
          ConfigurationKey    #MCRCallCenter
          ElementPosition     #1431655764
          HierarchyParent     #MCRCoupon
          ButtonDisplay       #Text & Image below
          NormalImage         #10842
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #SalesTable
          MenuItemName        #MCRCouponSalesTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #MCRCreateCustHeaderCredit
          AutoDeclaration     #Yes
          ElementPosition     #644245092
          HierarchyParent     #MCRSalesOrderFunctions
          Text                #@MCR25766
          ButtonDisplay       #Text & Image right
          NormalImage         #10016
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MenuItemName        #MCRCreateCustCredit
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #MCRCustomerService
          AutoDeclaration     #Yes
          HelpText            #@MCR10077
          ConfigurationKey    #MCRCallCenter
          ElementPosition     #2028178999
          HierarchyParent     #Customer
          Text                #@MCR10553
          ButtonDisplay       #Text & Image right
          NormalImage         #10513
          ImageLocation       #EmbeddedResource
          DataSource          #SalesTable
          MenuItemName        #MCRCustomerService
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #MCRCustPaymTableButton
          AutoDeclaration     #Yes
          ConfigurationKey    #MCRCallCenter
          ElementPosition     #1431655764
          HierarchyParent     #MCRPayments
          Text                #@SYS58091
          ButtonDisplay       #Text & Image right
          NormalImage         #12405
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          MenuItemName        #MCRCustPaymTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #MCROrderEvent
          AutoDeclaration     #Yes
          HelpText            #@MCR24521
          ElementPosition     #1908874352
          HierarchyParent     #SalesOrderView
          NormalImage         #10067
          ImageLocation       #EmbeddedResource
          DataSource          #SalesTable
          MenuItemName        #MCROrderEventTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #MCROrderNotes
          AutoDeclaration     #Yes
          ElementPosition     #2040109463
          HierarchyParent     #AttachedDocuments
          Text                #@SYS40182
          ButtonDisplay       #Text & Image left
          NormalImage         #3061
          ImageLocation       #EmbeddedResource
          MenuItemName        #MCROrderNotes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #MCRSalesStatsCust
          ConfigurationKey    #MCRCallCenter
          ElementPosition     #1753778310
          HierarchyParent     #CustInfo
          Text                #@SYS28043
          ButtonDisplay       #Text & Image left
          NormalImage         #818
          ImageLocation       #EmbeddedResource
          MenuItemName        #MCRSalesStatsCust
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #MenuItemSalesPrepayment
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #RetailPrepaymentBalance
          DataSource          #SalesTable
          MenuItemName        #RetailSalesPrepaymentBalance
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #mibRetailAttribute
          HelpText            #@RET4170029
          ElementPosition     #1431655764
          HierarchyParent     #btngrpAttribute
          Text                #@RET490397
          NormalImage         #12857
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          MenuItemName        #RetailSalesTableAttributes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #mibSalesTransactions
          HelpText            #@RET4160318
          ElementPosition     #1431655764
          HierarchyParent     #btngrpInquiries
          Text                #@RET3214
          NormalImage         #10834
          ImageLocation       #EmbeddedResource
          MultiSelect         #No
          DataSource          #SalesTable
          MenuItemName        #RetailTransactionTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #NewSalesOrder
          AutoDeclaration     #Yes
          ElementPosition     #715827882
          HierarchyParent     #NewGroup
          NormalImage         #10874
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #Yes
          Big                 #Yes
          Primary             #Yes
          DataSource          #SalesTable
          OpenMode            #New
          CopyCallerQuery     #Yes
          MenuItemName        #SalesTableForNew
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #OpenTrans
          ElementPosition     #1431655764
          HierarchyParent     #SettleInvoice
          Text                #@SYS3500
          ButtonDisplay       #Text & Image below
          NormalImage         #10793
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemName        #CustOpenTrans_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PdsRebateTable
          ElementPosition     #1932735281
          HierarchyParent     #CustInfo
          NormalImage         #10693
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          DataSource          #SalesTable
          MenuItemName        #PdsRebateTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PriceDiscActual
          ElementPosition     #1288490187
          HierarchyParent     #CustInfo
          NormalImage         #10693
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemName        #PriceDiscActual_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PriceDiscAdmTable_SalesCreate
          ElementPosition     #1879048185
          HierarchyParent     #ButtonHeaderTradeAgreements
          MenuItemName        #PriceDiscAdmTable_SalesCreate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PriceDiscTable_Sales
          ElementPosition     #536870910
          HierarchyParent     #ButtonHeaderTradeAgreements
          MenuItemName        #PriceDiscTable_Sales
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PriceQuery
          DisplayTarget       #EP
          ElementPosition     #1431655764
          HierarchyParent     #Perform
          ShowShortCut        #No
          MenuItemName        #PriceQuery
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PurchTable
          AutoDeclaration     #Yes
          ConfigurationKey    #TradeInterCompany
          DisplayTarget       #Client
          ElementPosition     #1431655764
          HierarchyParent     #IntercompanyGeneral
          Text                #@SYS114676
          NormalImage         #10724
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          DataSource          #SalesTable
          MenuItemName        #PurchTable_Action
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    TradeInterCompany::construct(salesTable).referenceForm();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PurchTableGeneral
          AutoDeclaration     #Yes
          DisplayTarget       #Client
          ElementPosition     #1252698790
          HierarchyParent     #GeneralRelatedInfo
          ButtonDisplay       #Text & Image left
          NormalImage         #10724
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
          MenuItemType        #Action
          MenuItemName        #PurchaseOrderDetails
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #QuotationConfirmationJournal
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #RelatedDocuments
          NormalImage         #11044
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
          DataSource          #SalesTable
          MenuItemName        #CustQuotationJournalConfirm_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #RecordEvent
          ElementPosition     #1533916890
          HierarchyParent     #CreateActivity
          Text                #@SYS114679
          NormalImage         #10432
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
          DataSource          #SalesTable
          MenuItemName        #smmactivitieseventNew
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ReleaseToWarehouse
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #ActionButtonGroup
          Big                 #Yes
          DataSource          #SalesTable
          MenuItemType        #Action
          MenuItemName        #WHSReleaseToWarehouse
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #RetailSalesAffiliation
          ElementPosition     #1431655764
          HierarchyParent     #ButtonGroupAffiliations
          NormalImage         #1213
          ImageLocation       #EmbeddedResource
          DataSource          #SalesTable
          MenuItemName        #RetailSalesAffiliation
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SalesCopyAllHeader
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #SalesOrderCopy
          Text                #@SYS317844
          ButtonDisplay       #Text & Image left
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemName        #SalesCopyAllHeader
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SalesCopyJournalHeader
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #SalesOrderCopy
          Text                #@SYS317845
          ButtonDisplay       #Text & Image left
          ShowShortCut        #No
          Primary             #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemName        #SalesCopyJournalHeader
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SalesCreditNote
          AutoDeclaration     #Yes
          ElementPosition     #1193046470
          HierarchyParent     #CreditNote
          Text                #@SYS114655
          NormalImage         #10534
          ImageLocation       #EmbeddedResource
          DisabledImage       #10534
          DisabledImageLocation #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemName        #SalesCreditNoteHeader_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SalesEndDisc
          AutoDeclaration     #Yes
          ElementPosition     #1610612730
          HierarchyParent     #ButtonHeaderTradeAgreements
          DataSource          #SalesTable
          MenuItemName        #PriceDiscTable_EndDiscSales
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SalesLineDisc
          AutoDeclaration     #Yes
          ElementPosition     #1073741820
          HierarchyParent     #ButtonHeaderTradeAgreements
          DataSource          #SalesTable
          MenuItemName        #PriceDiscTable_LineDiscSales
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SalesMultiLineDisc
          AutoDeclaration     #Yes
          ElementPosition     #1342177275
          HierarchyParent     #ButtonHeaderTradeAgreements
          DataSource          #SalesTable
          MenuItemName        #PriceDiscTable_MultiLineDiscSales
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SalesPrice
          ElementPosition     #805306365
          HierarchyParent     #ButtonHeaderTradeAgreements
          DataSource          #SalesTable
          MenuItemName        #PriceDiscTable_PriceSales
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SalesTax
          AutoDeclaration     #Yes
          DisplayTarget       #Client
          ElementPosition     #1431655764
          HierarchyParent     #ChargesInvoice
          ButtonDisplay       #Text & Image below
          NormalImage         #10777
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          OpenMode            #View
          MenuItemName        #TaxTransSourceSalesOrder
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    if (CustParameters::find().AutomaticTotalDiscount)
            #    {
            #        salesTable.updateFinalDisc();
            #
            #        salesTable_ds.reread();
            #        salesTable_ds.refresh();
            #    }
            #
            #    SalesTotals::showTax(menuitemDisplayStr(TaxTmpWorkSalesOrder), salesTable);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SalesVoidFiscalDocument_BR
          ElementPosition     #1670265058
          HierarchyParent     #CreditNote
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          MenuItemName        #SalesVoidFiscalDocument_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ScheduleAppointment
          ElementPosition     #1227133512
          HierarchyParent     #CreateActivity
          Text                #@SYS114626
          NormalImage         #10433
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
          DataSource          #SalesTable
          MenuItemName        #smmActivitiesAppointmentNew
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ServicingViewActivities
          AllowEdit           #No
          ElementPosition     #613566756
          HierarchyParent     #CreateActivity
          Text                #@SYS114624
          NormalImage         #11200
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Primary             #Yes
          MenuItemName        #ActivitiesMain
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ShipCarrierEmailAddress
          ElementPosition     #1431655764
          HierarchyParent     #PickAndPackDelivery
          Text                #@SYS317471
          ButtonDisplay       #Text & Image above
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          MenuItemName        #ShipCarrierEmailAddress
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SMAAgreementWizard
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #Apply
          ButtonDisplay       #Text & Image below
          NormalImage         #10785
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemName        #SMAAgreementWizard_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SMAServiceOrderWizard_Action
          ElementPosition     #1073741823
          HierarchyParent     #NewGroup
          NormalImage         #10875
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemName        #SMAServiceOrderWizard_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #Summary
          ElementPosition     #1610612733
          HierarchyParent     #SetupGeneral
          NormalImage         #10819
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemName        #SalesJournalAutoSummary_Sales_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SuppItemTable_Sales
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #GeneralMaintain
          ButtonDisplay       #Text & Image above
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemName        #SuppItemTable_Sales
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TaxForms_IN
          ElementPosition     #2093796554
          HierarchyParent     #AttachedDocuments
          ButtonDisplay       #Text & Image above
          NormalImage         #10837
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemName        #TransitDocumentsalesTaxForm_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TMSInvoiceJournal
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #ButtonGroupInvoice
          ButtonDisplay       #Text & Image above
          NormalImage         #10612
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #SalesTable
          MenuItemName        #TMSInvoiceJournal
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TMSRateRouteWorkbench
          ElementPosition     #1610612730
          HierarchyParent     #ButtonGroupRating
          ButtonDisplay       #Text & Image above
          NormalImage         #11092
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          MenuItemName        #TMSRateRouteWorkbench
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TMSRateRouteWorkbench_Rate
          AutoDeclaration     #Yes
          HelpText            #@TRX609
          ElementPosition     #357913940
          HierarchyParent     #ButtonGroupRating
          Text                #@TRX509
          ButtonDisplay       #Text & Image above
          NormalImage         #12203
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #SalesTable
          MenuItemName        #TMSRateRouteWorkbench_rate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TMSRateRouteWorkbench_RateRoute
          AutoDeclaration     #Yes
          HelpText            #@TRX612
          ElementPosition     #894784850
          HierarchyParent     #ButtonGroupRating
          Text                #@TRX531
          ButtonDisplay       #Text & Image above
          NormalImage         #10796
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #SalesTable
          MenuItemName        #TMSRateRouteWorkbench_rateRoute
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TMSRateRouteWorkbench_RateShop
          AutoDeclaration     #Yes
          HelpText            #@TRX610
          ElementPosition     #536870910
          HierarchyParent     #ButtonGroupRating
          Text                #@TRX510
          ButtonDisplay       #Text & Image above
          NormalImage         #12138
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #SalesTable
          MenuItemName        #TMSRateRouteWorkbench_rateshop
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TMSRateRouteWorkbench_Route
          AutoDeclaration     #Yes
          HelpText            #@TRX611
          ElementPosition     #715827880
          HierarchyParent     #ButtonGroupRating
          Text                #@TRX519
          ButtonDisplay       #Text & Image above
          NormalImage         #12132
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #SalesTable
          MenuItemName        #TMSRateRouteWorkbench_route
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TMSRouteWorkbench
          ElementPosition     #1968526670
          HierarchyParent     #ButtonGroupRating
          ButtonDisplay       #Text & Image above
          NormalImage         #12304
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #SalesTable
          MenuItemName        #TMSRouteWorkbench
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #Totals
          ElementPosition     #1113510038
          HierarchyParent     #SalesOrderView
          ButtonDisplay       #Text & Image above
          NormalImage         #10832
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemName        #SalesTotals
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TransportationDocument
          ElementPosition     #1789569705
          HierarchyParent     #PickAndPackDelivery
          ButtonDisplay       #Text & Image above
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          MenuItemName        #TransportationDocument
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ViewButton
          Visible             #No
          ElementPosition     #1342177275
          HierarchyParent     #Maintain
          ShowShortCut        #No
          DefaultButton       #Yes
          MultiSelect         #No
          DataSource          #SalesTable
          CopyCallerQuery     #Yes
          FormViewOption      #Details
          MenuItemName        #SalesTableForEdit
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #WHSLoadPlanningWorkbench
          ElementPosition     #1431655764
          HierarchyParent     #ButtonGroupLoads
          ButtonDisplay       #Text & Image above
          NormalImage         #3488
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          MenuItemName        #WHSLoadPlanningWorkbench
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #Separator
          ElementPosition     #1073741820
          HierarchyParent     #ButtonGroupRating
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #Separator1
          ElementPosition     #1431655760
          HierarchyParent     #ButtonGroupRating
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #Separator2
          ElementPosition     #1789569700
          HierarchyParent     #ButtonGroupRating
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #SalesTable_CustAccountAdv
          AutoDeclaration     #Yes
          HyperLinkMenuItem   #CustTableDetails
          HyperLinkDataSource #SalesTable
          ElementPosition     #715827880
          HierarchyParent     #Grid
          DataSource          #SalesTable
          DataField           #CustAccount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #SalesTable_InvoiceAccountAdv
          AutoDeclaration     #Yes
          ElementPosition     #1073741820
          HierarchyParent     #Grid
          DataSource          #SalesTable
          DataField           #InvoiceAccount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #SalesTable_ProjId
          HyperLinkMenuItem   #ProjTable
          HyperLinkDataSource #SalesTable
          ElementPosition     #1968526670
          HierarchyParent     #Grid
          DataSource          #SalesTable
          DataField           #ProjId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #SalesTable_SalesIdAdvanced
          HyperLinkMenuItem   #SalesTableDetails
          HyperLinkDataSource #SalesTable
          ElementPosition     #357913940
          HierarchyParent     #Grid
          DataSource          #SalesTable
          DataField           #SalesId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #SalesTable_SalesName
          AutoDeclaration     #Yes
          ElementPosition     #894784850
          HierarchyParent     #Grid
          DataSource          #SalesTable
          DataField           #SalesName
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL UTCDATETIMEEDIT
        PROPERTIES
          Name                #SalesTable_createdDateTime
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #536870910
          HierarchyParent     #Grid
          DataSource          #SalesTable
          DataField           #createdDateTime
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL WINDOW
        PROPERTIES
          Name                #MCROnHoldIcon
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #2147454518
          HierarchyParent     #Grid
          Imagemode           #Center
          Label               #@MCR20463
          DataSource          #SalesTable
          DataMethod          #MCRDisplayOnHold
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
    ENDCONTAINER
    
  ENDDESIGN
  
  PERMISSIONS #Permissions
    PROPERTIES
    ENDPROPERTIES
    
    PERMISSIONSET #Read
      PROPERTIES
      ENDPROPERTIES
      
      FORM #Controls
      ENDFORM
      
    TABLES #Tables
    ENDTABLES
    
  SERVERMETHODS #Server Methods
  ENDSERVERMETHODS
  
ASSOCIATEDFORMS #Associated Forms
ENDASSOCIATEDFORMS

ENDPERMISSIONSET

PERMISSIONSET #Update
  PROPERTIES
  ENDPROPERTIES
  
  FORM #Controls
  ENDFORM
  
TABLES #Tables
ENDTABLES

SERVERMETHODS #Server Methods
ENDSERVERMETHODS

ASSOCIATEDFORMS #Associated Forms
ENDASSOCIATEDFORMS

ENDPERMISSIONSET

PERMISSIONSET #Create
  PROPERTIES
  ENDPROPERTIES
  
  FORM #Controls
  ENDFORM
  
TABLES #Tables
ENDTABLES

SERVERMETHODS #Server Methods
ENDSERVERMETHODS

ASSOCIATEDFORMS #Associated Forms
ENDASSOCIATEDFORMS

ENDPERMISSIONSET

PERMISSIONSET #Delete
  PROPERTIES
  ENDPROPERTIES
  
  FORM #Controls
  ENDFORM
  
TABLES #Tables
ENDTABLES

SERVERMETHODS #Server Methods
ENDSERVERMETHODS

ASSOCIATEDFORMS #Associated Forms
ENDASSOCIATEDFORMS

ENDPERMISSIONSET

ENDPERMISSIONS

ENDFORM


***Element: UTS

; Microsoft Dynamics AX String: InventSiteId unloaded
; --------------------------------------------------------------------------------
  USERTYPEVERSION 6
  
  USERTYPE #InventSiteId
  STRING
    PROPERTIES
      Name                #InventSiteId
      Label               #@SYS103211
      HelpText            #@SYS103217
      ConfigurationKey    #LogisticsBasic
      Origin              #{290C1541-0000-1000-85CD-A827C0835369}
      LegacyId            #5441
      ReferenceTable      #InventSite
      StringSize          #20
    ENDPROPERTIES
    
    TYPEELEMENTS
    ENDTYPEELEMENTS
    
    TYPEREFERENCES
      TYPEREFERENCETYPE DATASET
      PROPERTIES
        Table               #InventSite
        RelatedField        #SiteId
      ENDPROPERTIES
      
    ENDTYPEREFERENCES
    
    TYPELOOKUPS
      TYPELOOKUP LOOKUP
      PROPERTIES
        Table               #InventSite
        RelatedField        #SiteId
      ENDPROPERTIES
      
    ENDTYPELOOKUPS
    
  ENDUSERTYPE
  

***Element: DBT

; Microsoft Dynamics AX Table : PurchTable unloaded
; --------------------------------------------------------------------------------
  TABLEVERSION 1
  
  TABLE #PurchTable
    EnforceFKRelation 0
    PROPERTIES
      Name                #PurchTable
      Label               #@SYS25204
      SearchLinkRefName   #EPPurchTableInfo
      TitleField1         #PurchId
      TitleField2         #PurchName
      ConfigurationKey    #LogisticsBasic
      SecurityKey         #VendTables
      CacheLookup         #NotInTTS
      CreateRecIdIndex    #Yes
      TableGroup          #WorksheetHeader
      PrimaryIndex        #PurchIdx
      ClusterIndex        #PurchIdx
      SingularLabel       #@SYS15812
      CreatedDateTime     #Yes
      CreatedBy           #Yes
      DeveloperDocumentation  #@SYS124480
      Origin              #{2C0A0159-0000-1000-B49B-F07268546162}
      LegacyId            #345
    ENDPROPERTIES
    
    FIELDS
      FIELD #AccountingDate
        DATE
        PROPERTIES
          Name                #AccountingDate
          HelpText            #@SYS335634
          Table               #PurchTable
          Origin              #{196A26BA-FC36-4D9C-92D8-04A286C0C328}
          LegacyId            #244
          ExtendedDataType    #AccountingDate
        ENDPROPERTIES
        
      FIELD #AccountingDistributionTemplate
        INT64
        PROPERTIES
          Name                #AccountingDistributionTemplate
          Table               #PurchTable
          Origin              #{197E10C9-08A5-4FC5-A49A-FE0F16157CE7}
          LegacyId            #243
          ExtendedDataType    #RefRecId
        ENDPROPERTIES
        
      FIELD #AddressRefRecId
        INT64
        PROPERTIES
          Name                #AddressRefRecId
          AllowEditOnCreate   #No
          AllowEdit           #No
          Visible             #No
          Table               #PurchTable
          Origin              #{85F453BF-3D7C-4F97-BE60-B4305AF659ED}
          LegacyId            #9
          ExtendedDataType    #AddressRefRecId
        ENDPROPERTIES
        
      FIELD #AddressRefTableId
        INT
        PROPERTIES
          Name                #AddressRefTableId
          AllowEditOnCreate   #No
          AllowEdit           #No
          Visible             #No
          Table               #PurchTable
          Origin              #{D56F3EE6-990E-4F74-BDD9-6DE80F4F2904}
          LegacyId            #10
          ExtendedDataType    #AddressRefTableId
        ENDPROPERTIES
        
      FIELD #AutoSummaryModuleType
        ENUM
        PROPERTIES
          Name                #AutoSummaryModuleType
          Label               #@SYS57738
          AllowEditOnCreate   #No
          AllowEdit           #No
          Visible             #No
          Table               #PurchTable
          Origin              #{754527D8-990F-4AE7-9598-8D9A08A985EB}
          LegacyId            #75
          EnumType            #ModuleVendPurch
        ENDPROPERTIES
        
      FIELD #AvailSalesDate
        DATE
        PROPERTIES
          Name                #AvailSalesDate
          Table               #PurchTable
          Origin              #{35622941-0BB3-496D-B3AB-ECD8398E9A49}
          LegacyId            #16078
          ExtendedDataType    #RetailSalesDate
        ENDPROPERTIES
        
      FIELD #AZ_ArrivedWH
        DATE
        PROPERTIES
          Name                #AZ_ArrivedWH
          Label               #Arrived di WH ABU
          Table               #PurchTable
          Origin              #{9A65DFA1-1D4F-46DA-9DCB-6006030CC804}
          ExtendedDataType    #TransDate
        ENDPROPERTIES
        
      FIELD #AZ_BackContainer
        DATE
        PROPERTIES
          Name                #AZ_BackContainer
          Label               #Kembali Container
          Table               #PurchTable
          Origin              #{201373B0-174E-42ED-A393-18CBC55A401E}
          ExtendedDataType    #TransDate
        ENDPROPERTIES
        
      FIELD #AZ_ChArrivedWh
        ENUM
        PROPERTIES
          Name                #AZ_ChArrivedWh
          Label               #Arrived At WH
          Table               #PurchTable
          Origin              #{F227A2AD-4AD4-48D8-AD25-F9E106F8943F}
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #AZ_ChBackContainer
        ENUM
        PROPERTIES
          Name                #AZ_ChBackContainer
          Label               #Back Container
          Table               #PurchTable
          Origin              #{E2D924E6-A3B2-4AC5-A297-CD0AA72B1FB1}
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #AZ_ChContainerNumber
        ENUM
        PROPERTIES
          Name                #AZ_ChContainerNumber
          Label               #Container Number
          Table               #PurchTable
          Origin              #{E7363A0E-BA7D-4DD0-9BAD-9A8703766CBA}
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #AZ_ChContainerOnPort
        ENUM
        PROPERTIES
          Name                #AZ_ChContainerOnPort
          Label               #Container On Port
          Table               #PurchTable
          Origin              #{BE3A72AD-81C4-425E-8011-ADA388396978}
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #AZ_ChDocReceipt
        ENUM
        PROPERTIES
          Name                #AZ_ChDocReceipt
          Label               #Document Receipt
          Table               #PurchTable
          Origin              #{3955DFBC-BF38-4131-BEB3-CD178639BC5A}
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #AZ_CHInvoiceDate
        ENUM
        PROPERTIES
          Name                #AZ_CHInvoiceDate
          Label               #Invoice Date
          Table               #PurchTable
          Origin              #{5DF06471-9F40-4CE0-BCF7-2C494593E762}
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #AZ_ChProductReceipt
        ENUM
        PROPERTIES
          Name                #AZ_ChProductReceipt
          Label               #Product Receipt
          Table               #PurchTable
          Origin              #{7F1B6508-9B9C-4EE4-9333-888E1F26B78B}
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #AZ_CHRealeasedContainer
        ENUM
        PROPERTIES
          Name                #AZ_CHRealeasedContainer
          Label               #Released Container
          Table               #PurchTable
          Origin              #{67545FEE-638A-4D3A-AB3F-CBC4A7FC1BD7}
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #AZ_CHTaxPaid
        ENUM
        PROPERTIES
          Name                #AZ_CHTaxPaid
          Label               #Tax Paid
          Table               #PurchTable
          Origin              #{418444EF-5FE8-4F04-AB44-4BD88C2678AA}
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #AZ_ContainerNumber
        REAL
        PROPERTIES
          Name                #AZ_ContainerNumber
          Table               #PurchTable
          Origin              #{F34091CD-2598-4D9C-B84C-3AA73BA267D0}
          ExtendedDataType    #LineAmount
        ENDPROPERTIES
        
      FIELD #AZ_CountainerOnPort
        DATE
        PROPERTIES
          Name                #AZ_CountainerOnPort
          Label               #Container On Port
          Table               #PurchTable
          Origin              #{A9E055C4-C29E-496F-B09C-4A196ECF812A}
          ExtendedDataType    #TransDate
        ENDPROPERTIES
        
      FIELD #AZ_DocReceipt
        DATE
        PROPERTIES
          Name                #AZ_DocReceipt
          Label               #Receipt Dokumen Import
          Table               #PurchTable
          Origin              #{BF8EAA3A-908C-43F0-B9C9-4C6D7B5CDD8F}
          ExtendedDataType    #TransDate
        ENDPROPERTIES
        
      FIELD #AZ_InvoiceDate
        DATE
        PROPERTIES
          Name                #AZ_InvoiceDate
          Table               #PurchTable
          Origin              #{01902AE8-8145-4399-AD74-4CB4EF290304}
          ExtendedDataType    #TransDate
        ENDPROPERTIES
        
      FIELD #AZ_ProductReceipt
        DATE
        PROPERTIES
          Name                #AZ_ProductReceipt
          Label               #Bongkar Container
          Table               #PurchTable
          Origin              #{5CE5C84D-DCD6-4B60-8C39-0EF1ED2627DE}
          ExtendedDataType    #TransDate
        ENDPROPERTIES
        
      FIELD #AZ_ReleasedContainer
        DATE
        PROPERTIES
          Name                #AZ_ReleasedContainer
          Table               #PurchTable
          Origin              #{46203475-EA22-4ED3-A77C-1A8C077BCAD3}
          ExtendedDataType    #TransDate
        ENDPROPERTIES
        
      FIELD #AZ_SUPPLIERRELEASED
        DATE
        PROPERTIES
          Name                #AZ_SUPPLIERRELEASED
          Label               #Arrived di WH ABU
          Table               #PurchTable
          Origin              #{83A9B1EF-8202-4617-BB18-F9F2D008138D}
          ExtendedDataType    #TransDate
        ENDPROPERTIES
        
      FIELD #AZ_TaxPaid
        DATE
        PROPERTIES
          Name                #AZ_TaxPaid
          Table               #PurchTable
          Origin              #{144F74D7-E42D-4B25-BBC1-3FEC276A619E}
          ExtendedDataType    #TransDate
        ENDPROPERTIES
        
      FIELD #BankCentralBankPurposeCode
        STRING
        PROPERTIES
          Name                #BankCentralBankPurposeCode
          Table               #PurchTable
          CountryRegionCodes  #NO
          IgnoreEDTRelation   #Yes
          Origin              #{1835D8B5-4522-4264-8F2E-14CFA4B357B1}
          LegacyId            #63
          ExtendedDataType    #BankCentralBankPurposeCode
        ENDPROPERTIES
        
      FIELD #BankCentralBankPurposeText
        STRING
        PROPERTIES
          Name                #BankCentralBankPurposeText
          Table               #PurchTable
          CountryRegionCodes  #NO
          Origin              #{CF6DB1BB-3571-419E-BAC3-91ECB3790D82}
          LegacyId            #72
          ExtendedDataType    #BankCentralBankPurposeText
          StringSize          #140
        ENDPROPERTIES
        
      FIELD #BankDocumentType
        ENUM
        PROPERTIES
          Name                #BankDocumentType
          Label               #@SYS313726
          HelpText            #@SYS313643
          Table               #PurchTable
          Origin              #{6E0FEEBA-4803-4EC8-AB1F-0AB2ED36C360}
          LegacyId            #194
          ExtendedDataType    #BankDocumentFacilityNature
          EnumType            #BankDocumentType
        ENDPROPERTIES
        
      FIELD #CashDisc
        STRING
        PROPERTIES
          Name                #CashDisc
          HelpText            #@SYS5825
          Table               #PurchTable
          IgnoreEDTRelation   #Yes
          Origin              #{FDDAB1E6-EAEA-4468-BE9E-72C6175ECCD6}
          LegacyId            #15
          ExtendedDataType    #VendCashDiscCode
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #CashDiscPercent
        REAL
        PROPERTIES
          Name                #CashDiscPercent
          Table               #PurchTable
          Origin              #{6084F72E-7A80-4ECE-B97D-49AC9F13C085}
          LegacyId            #48
          ExtendedDataType    #DiscPct
        ENDPROPERTIES
        
      FIELD #ChangeRequestRequired
        ENUM
        PROPERTIES
          Name                #ChangeRequestRequired
          AllowEdit           #No
          Table               #PurchTable
          Origin              #{43A0C43A-7A79-4ED8-886C-BF6F3E44E542}
          LegacyId            #127
          ExtendedDataType    #VersioningChangeRequestRequired
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #ConfirmedDlv
        DATE
        PROPERTIES
          Name                #ConfirmedDlv
          Label               #@SYS4006394
          HelpText            #@SYS931
          Table               #PurchTable
          Origin              #{3CD0FB19-8418-4D66-9E85-40ED1A5D036F}
          LegacyId            #16057
          ExtendedDataType    #PurchLineDlvDate
        ENDPROPERTIES
        
      FIELD #ConfirmedDlvEarliest
        DATE
        PROPERTIES
          Name                #ConfirmedDlvEarliest
          Label               #@SYS138390
          HelpText            #@SYS138391
          AllowEditOnCreate   #No
          AllowEdit           #No
          Table               #PurchTable
          Origin              #{5B3438E4-FA6C-40D7-8CF0-9D43C42A7E96}
          LegacyId            #119
          ExtendedDataType    #PurchLineDlvDate
        ENDPROPERTIES
        
      FIELD #ConfirmingPO
        INT64
        PROPERTIES
          Name                #ConfirmingPO
          ConfigurationKey    #PublicSector
          Table               #PurchTable
          Origin              #{709496D1-C1B5-4A94-9ADB-A1FA52962571}
          LegacyId            #18000
          ExtendedDataType    #ConfirmingPORefRecId
        ENDPROPERTIES
        
      FIELD #ConsTarget_JP
        ENUM
        PROPERTIES
          Name                #ConsTarget_JP
          Table               #PurchTable
          Origin              #{2AD992D4-1221-45FC-A986-65C5249C5CBB}
          LegacyId            #8048
          ExtendedDataType    #VendConsTarget_JP
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #ContactPersonId
        STRING
        PROPERTIES
          Name                #ContactPersonId
          Table               #PurchTable
          IgnoreEDTRelation   #Yes
          Origin              #{7837341A-5ABD-4465-8ED9-BE041FB71E29}
          LegacyId            #57
          ExtendedDataType    #ContactPersonId
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #ContractNum_SA
        STRING
        PROPERTIES
          Name                #ContractNum_SA
          Table               #PurchTable
          Origin              #{C1D21789-5015-4924-8357-E73C574C9F4D}
          LegacyId            #126
          ExtendedDataType    #VendContractNumZakat_SA
          StringSize          #60
        ENDPROPERTIES
        
      FIELD #CountyOrigDest
        STRING
        PROPERTIES
          Name                #CountyOrigDest
          Table               #PurchTable
          Origin              #{8D4D0FCD-B3D8-47EB-91F7-456F85A1D9D2}
          LegacyId            #17
          ExtendedDataType    #AddressCountyOrigDest
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #CovStatus
        INT
        PROPERTIES
          Name                #CovStatus
          Table               #PurchTable
          Origin              #{5E443A82-57B5-4117-8B9A-DD6E5A4EA74E}
          LegacyId            #50
          ExtendedDataType    #CovStatus
        ENDPROPERTIES
        
      FIELD #CrossDockingDate
        DATE
        PROPERTIES
          Name                #CrossDockingDate
          Table               #PurchTable
          Origin              #{0FB51A82-2297-4AC2-8708-3B3750BF65C8}
          LegacyId            #16076
          ExtendedDataType    #RetailCrossDockingDate
        ENDPROPERTIES
        
      FIELD #CurrencyCode
        STRING
        PROPERTIES
          Name                #CurrencyCode
          HelpText            #@SYS5717
          Mandatory           #Yes
          Table               #PurchTable
          IgnoreEDTRelation   #Yes
          Origin              #{117BB636-BAE8-42B7-8C77-B891C4110B5B}
          LegacyId            #13
          ExtendedDataType    #VendCurrencyCode
          StringSize          #3
        ENDPROPERTIES
        
      FIELD #DefaultDimension
        INT64
        PROPERTIES
          Name                #DefaultDimension
          Table               #PurchTable
          Origin              #{562165EB-3DEB-4A04-8F2A-28D2782A1B30}
          LegacyId            #118
          ExtendedDataType    #DimensionDefault
        ENDPROPERTIES
        
      FIELD #DEL_PresenceType_BR
        ENUM
        PROPERTIES
          Name                #DEL_PresenceType_BR
          ConfigurationKey    #SysDeletedObjects60
          Table               #PurchTable
          Origin              #{04794961-1D32-40D1-BF75-01C1E4AAF1C2}
          LegacyId            #8120
          EnumType            #EFDocPresenceType_BR
        ENDPROPERTIES
        
      FIELD #DeliveryDate
        DATE
        PROPERTIES
          Name                #DeliveryDate
          HelpText            #@SYS2261
          Table               #PurchTable
          Origin              #{1869B0F0-9108-4B84-A369-57148BB58963}
          LegacyId            #7
          ExtendedDataType    #DlvDate
        ENDPROPERTIES
        
      FIELD #DeliveryName
        STRING
        PROPERTIES
          Name                #DeliveryName
          GroupPrompt         #@SYS7399
          Table               #PurchTable
          Origin              #{B48B85AC-EA73-4A01-9374-129A305AC717}
          LegacyId            #49
          ExtendedDataType    #LogisticsDeliveryName
          StringSize          #100
        ENDPROPERTIES
        
      FIELD #DeliveryPostalAddress
        INT64
        PROPERTIES
          Name                #DeliveryPostalAddress
          Table               #PurchTable
          Origin              #{D605ED99-6BB8-4077-9F9F-0B44F8A8FC80}
          LegacyId            #185
          ExtendedDataType    #LogisticsPostalAddressRecId
        ENDPROPERTIES
        
      FIELD #DeliveryType
        ENUM
        PROPERTIES
          Name                #DeliveryType
          Table               #PurchTable
          Origin              #{72CB10AB-B745-4E11-BFBB-6B786D93A603}
          LegacyId            #8
          ExtendedDataType    #PurchDlvAddrType
          EnumType            #PurchDlvAddr
        ENDPROPERTIES
        
      FIELD #DiscPercent
        REAL
        PROPERTIES
          Name                #DiscPercent
          Table               #PurchTable
          Origin              #{BCA31314-EA96-4D41-AD83-9A01338477BC}
          LegacyId            #21
          ExtendedDataType    #PurchEndDiscPct
        ENDPROPERTIES
        
      FIELD #DlvMode
        STRING
        PROPERTIES
          Name                #DlvMode
          HelpText            #@SYS12294
          Table               #PurchTable
          IgnoreEDTRelation   #Yes
          Origin              #{418C60E1-8FBC-4DBA-B50B-85C897C55C5E}
          LegacyId            #30
          ExtendedDataType    #VendDlvModeId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #DlvTerm
        STRING
        PROPERTIES
          Name                #DlvTerm
          HelpText            #@SYS13640
          Table               #PurchTable
          IgnoreEDTRelation   #Yes
          Origin              #{0B1FCDB4-2E45-4E75-AA85-F59AE3AA0032}
          LegacyId            #29
          ExtendedDataType    #VendDlvTermId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #DocumentState
        ENUM
        PROPERTIES
          Name                #DocumentState
          AllowEditOnCreate   #No
          AllowEdit           #No
          Table               #PurchTable
          Origin              #{BDCE9FB6-BB82-4E76-874E-833D81346B5F}
          LegacyId            #129
          EnumType            #VersioningDocumentState
        ENDPROPERTIES
        
      FIELD #DocumentStatus
        ENUM
        PROPERTIES
          Name                #DocumentStatus
          AllowEditOnCreate   #No
          AllowEdit           #No
          Table               #PurchTable
          Origin              #{24DC541C-E720-45D5-AE38-2561BA2E8A75}
          LegacyId            #56
          EnumType            #DocumentStatus
        ENDPROPERTIES
        
      FIELD #Email
        STRING
        PROPERTIES
          Name                #Email
          Table               #PurchTable
          Origin              #{E639273A-2DC3-493D-A3D4-BAE814B6E862}
          LegacyId            #6
          ExtendedDataType    #EmailBase
          StringSize          #80
        ENDPROPERTIES
        
      FIELD #EndDisc
        STRING
        PROPERTIES
          Name                #EndDisc
          Table               #PurchTable
          Origin              #{C3E5ACD9-23AC-4D47-9871-93188908E2E2}
          LegacyId            #25
          ExtendedDataType    #VendEndDiscCode
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #EnterpriseNumber
        STRING
        PROPERTIES
          Name                #EnterpriseNumber
          Table               #PurchTable
          Origin              #{DCBC71C8-493C-4EDA-AB79-CDCE8EC2E406}
          LegacyId            #40
          ExtendedDataType    #TaxEnterpriseNumber
          StringSize          #50
        ENDPROPERTIES
        
      FIELD #ExchangeRateDate
        DATE
        PROPERTIES
          Name                #ExchangeRateDate
          AllowEditOnCreate   #No
          AllowEdit           #No
          Visible             #No
          Table               #PurchTable
          Origin              #{AB94E725-E527-4ED9-9A3D-47CD21116C26}
          ExtendedDataType    #AccountingDate
        ENDPROPERTIES
        
      FIELD #FinalizeClosingDate
        DATE
        PROPERTIES
          Name                #FinalizeClosingDate
          Visible             #No
          Table               #PurchTable
          Origin              #{15DA79E8-131E-4DB2-98CE-2118606A61E2}
          LegacyId            #252
          ExtendedDataType    #PurchFinalizeClosingDate
        ENDPROPERTIES
        
      FIELD #FixedDueDate
        DATE
        PROPERTIES
          Name                #FixedDueDate
          Table               #PurchTable
          Origin              #{B57CDA12-496A-421B-A9DC-5A07D4479A80}
          LegacyId            #80
          ExtendedDataType    #PurchFixedDueDate
        ENDPROPERTIES
        
      FIELD #FixedExchRate
        REAL
        PROPERTIES
          Name                #FixedExchRate
          Visible             #No
          Table               #PurchTable
          Origin              #{E49C72B9-020D-415A-9BA5-3A5D6AD83838}
          ExtendedDataType    #PurchFixedExchRate
        ENDPROPERTIES
        
      FIELD #FreightSlipType
        ENUM
        PROPERTIES
          Name                #FreightSlipType
          Table               #PurchTable
          Origin              #{4A7513B3-4870-486F-843E-86D3290E9933}
          LegacyId            #55
          ExtendedDataType    #VendFreightSlipType
          EnumType            #FreightSlipType
        ENDPROPERTIES
        
      FIELD #FreightZone
        STRING
        PROPERTIES
          Name                #FreightZone
          Table               #PurchTable
          Origin              #{A144B183-DC0F-426F-B63B-2BD947E8F934}
          LegacyId            #5
          ExtendedDataType    #VendFreightZoneId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #FSHAutoCreated
        ENUM
        PROPERTIES
          Name                #FSHAutoCreated
          AllowEdit           #No
          Table               #PurchTable
          Origin              #{1A9B35F4-2438-41D1-86FA-558A5CF2971D}
          LegacyId            #16075
          ExtendedDataType    #RetailAutoCreatedPurch
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #InclTax
        ENUM
        PROPERTIES
          Name                #InclTax
          Table               #PurchTable
          Origin              #{B60DD1DA-6712-42F7-B4D8-3B4FE077A062}
          LegacyId            #71
          ExtendedDataType    #InclTax
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #InterCompanyAllowIndirectCreation
        ENUM
        PROPERTIES
          Name                #InterCompanyAllowIndirectCreation
          AllowEditOnCreate   #No
          AllowEdit           #No
          Visible             #No
          Table               #PurchTable
          Origin              #{EC08FD86-9B92-4B72-B8F8-77384842B8C8}
          LegacyId            #46
          ExtendedDataType    #InterCompanyAllowIndirectCreation
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #InterCompanyCompanyId
        STRING
        PROPERTIES
          Name                #InterCompanyCompanyId
          AllowEditOnCreate   #No
          AllowEdit           #No
          Table               #PurchTable
          IgnoreEDTRelation   #Yes
          Origin              #{0296DB1E-812E-4B42-95B6-BFEA90E787E1}
          LegacyId            #87
          ExtendedDataType    #InterCompanyCompanyId
          StringSize          #4
        ENDPROPERTIES
        
      FIELD #InterCompanyCustPurchOrderFormNum
        STRING
        PROPERTIES
          Name                #InterCompanyCustPurchOrderFormNum
          Table               #PurchTable
          Origin              #{B47BE2BB-388F-43E4-8BD1-128BEE3BF24C}
          LegacyId            #26
          ExtendedDataType    #CustPurchaseOrder
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #InterCompanyDirectDelivery
        ENUM
        PROPERTIES
          Name                #InterCompanyDirectDelivery
          Table               #PurchTable
          Origin              #{2BC00527-BF3C-4D48-A079-6732471BA796}
          LegacyId            #18
          ExtendedDataType    #InterCompanyDirectDelivery
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #InterCompanyOrder
        ENUM
        PROPERTIES
          Name                #InterCompanyOrder
          Table               #PurchTable
          Origin              #{F103156B-98EA-4372-B17E-646454921959}
          LegacyId            #89
          ExtendedDataType    #InterCompanyVendor
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #InterCompanyOrigin
        ENUM
        PROPERTIES
          Name                #InterCompanyOrigin
          AllowEditOnCreate   #No
          AllowEdit           #No
          Visible             #No
          Table               #PurchTable
          Origin              #{434F370F-429B-4026-B5D7-027D58A1A6AF}
          LegacyId            #47
          EnumType            #InterCompanyOrigin
        ENDPROPERTIES
        
      FIELD #InterCompanyOriginalCustAccount
        STRING
        PROPERTIES
          Name                #InterCompanyOriginalCustAccount
          Table               #PurchTable
          Origin              #{AFB047BC-DBAF-4EBA-B346-67CB5970E32F}
          LegacyId            #12
          ExtendedDataType    #InterCompanyOriginalCustAccount
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #InterCompanyOriginalSalesId
        STRING
        PROPERTIES
          Name                #InterCompanyOriginalSalesId
          AllowEditOnCreate   #No
          AllowEdit           #No
          Table               #PurchTable
          Origin              #{6BDBDFBC-93F2-44AF-B146-D0C425EF18A4}
          LegacyId            #11
          ExtendedDataType    #InterCompanyOriginalSalesId
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #InterCompanySalesId
        STRING
        PROPERTIES
          Name                #InterCompanySalesId
          AllowEditOnCreate   #No
          AllowEdit           #No
          Table               #PurchTable
          Origin              #{2A7DE94E-1315-488B-8D90-D35D723B0F02}
          LegacyId            #88
          ExtendedDataType    #InterCompanySalesId
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #IntrastatAddValue_LV
        REAL
        PROPERTIES
          Name                #IntrastatAddValue_LV
          Table               #PurchTable
          Origin              #{F30FAF9F-AF0F-4BD5-BC5A-E86DFC17F9A9}
          LegacyId            #16014
          ExtendedDataType    #LvIntrastatAddValue
        ENDPROPERTIES
        
      FIELD #IntrastatFulfillmentDate_HU
        DATE
        PROPERTIES
          Name                #IntrastatFulfillmentDate_HU
          Table               #PurchTable
          Origin              #{CA9F3ED9-54CC-4595-9740-13DAFC26045C}
          LegacyId            #8142
          ExtendedDataType    #IntrastatFulfillmentDate_HU
        ENDPROPERTIES
        
      FIELD #InventLocationId
        STRING
        PROPERTIES
          Name                #InventLocationId
          Table               #PurchTable
          IgnoreEDTRelation   #Yes
          Origin              #{3C988E04-D79D-4B63-AEFE-FF6E6DCA22DE}
          LegacyId            #61
          ExtendedDataType    #PurchInventLocationId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #InventSiteId
        STRING
        PROPERTIES
          Name                #InventSiteId
          Table               #PurchTable
          IgnoreEDTRelation   #Yes
          Origin              #{6EC57FA1-7C97-4197-9DD2-4A4F813157DD}
          LegacyId            #52
          ExtendedDataType    #InventSiteId
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #InvoiceAccount
        STRING
        PROPERTIES
          Name                #InvoiceAccount
          HelpText            #@SYS3548
          Mandatory           #Yes
          Table               #PurchTable
          Origin              #{08884263-311C-4D1D-B94E-0E8FBF75C666}
          LegacyId            #4
          ExtendedDataType    #VendInvoiceAccount
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #InvoiceRegister_LT
        ENUM
        PROPERTIES
          Name                #InvoiceRegister_LT
          Table               #PurchTable
          CountryRegionCodes  #LT,LV
          Origin              #{C076E569-34B5-4562-897D-BAD9FC4F6EA4}
          LegacyId            #16017
          ExtendedDataType    #LtInvoiceAutoNumbering
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #IsEncumbranceRequired
        ENUM
        PROPERTIES
          Name                #IsEncumbranceRequired
          Visible             #No
          Table               #PurchTable
          Origin              #{B724100D-9456-4AF8-94D2-77BDCB18EE86}
          LegacyId            #198
          EnumType            #UnknownNoYes
        ENDPROPERTIES
        
      FIELD #IsModified
        ENUM
        PROPERTIES
          Name                #IsModified
          AllowEditOnCreate   #No
          AllowEdit           #No
          Visible             #No
          Table               #PurchTable
          Origin              #{8FD35614-B508-4F6A-8138-E503283CF7AF}
          LegacyId            #132
          ExtendedDataType    #VersioningIsModified
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #ItemBuyerGroupId
        STRING
        PROPERTIES
          Name                #ItemBuyerGroupId
          Table               #PurchTable
          IgnoreEDTRelation   #Yes
          Origin              #{FFF4C29D-3434-4EFE-A904-5B4CD5148F2B}
          LegacyId            #64
          ExtendedDataType    #ItemBuyerGroupId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #LanguageId
        STRING
        PROPERTIES
          Name                #LanguageId
          HelpText            #@SYS8305
          Mandatory           #Yes
          Table               #PurchTable
          IgnoreEDTRelation   #Yes
          Origin              #{291423B8-E32F-46E0-B8C1-368A9C781DD1}
          LegacyId            #74
          ExtendedDataType    #VendLanguageId
          StringSize          #7
        ENDPROPERTIES
        
      FIELD #LineDisc
        STRING
        PROPERTIES
          Name                #LineDisc
          HelpText            #@SYS2174
          Table               #PurchTable
          Origin              #{9F394D6C-A0F5-4ECC-A388-D891CFB7D114}
          LegacyId            #20
          ExtendedDataType    #VendLineDiscCode
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #ListCode
        ENUM
        PROPERTIES
          Name                #ListCode
          Table               #PurchTable
          Origin              #{78A583ED-2B3D-4AB4-822B-0A361B430CDB}
          LegacyId            #195
          ExtendedDataType    #ListcodeId
          EnumType            #Listcode
        ENDPROPERTIES
        
      FIELD #LocalDeliveryDate
        DATE
        PROPERTIES
          Name                #LocalDeliveryDate
          Table               #PurchTable
          Origin              #{45A260E3-3C88-4F10-8DE9-53E1247AE41B}
          LegacyId            #16079
          ExtendedDataType    #RetailLocalDeliveryDate
        ENDPROPERTIES
        
      FIELD #ManualEntryChangepolicy
        INT64
        PROPERTIES
          Name                #ManualEntryChangepolicy
          AllowEditOnCreate   #No
          AllowEdit           #No
          Visible             #No
          Table               #PurchTable
          Origin              #{7BF71115-57CE-473B-B464-7CBDDC1EE89E}
          LegacyId            #168
          ExtendedDataType    #PriceDiscPolicyManual
        ENDPROPERTIES
        
      FIELD #MarkupGroup
        STRING
        PROPERTIES
          Name                #MarkupGroup
          HelpText            #@SYS9643
          Table               #PurchTable
          IgnoreEDTRelation   #Yes
          Origin              #{0AB933B5-46E8-463B-A36F-72ECD5C71104}
          LegacyId            #32
          ExtendedDataType    #VendMarkupGroupId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #MatchingAgreement
        INT64
        PROPERTIES
          Name                #MatchingAgreement
          Table               #PurchTable
          Origin              #{2F0A0A25-F9D5-45D6-AFE1-C186FA72FBC3}
          LegacyId            #153
          ExtendedDataType    #AgreementHeaderRecId
        ENDPROPERTIES
        
      FIELD #MCRDropShipment
        ENUM
        PROPERTIES
          Name                #MCRDropShipment
          Table               #PurchTable
          Origin              #{82E474ED-B98F-4D6C-BFE2-8EE16C0327C9}
          LegacyId            #30001
          ExtendedDataType    #MCRDropShipment
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #MultiLineDisc
        STRING
        PROPERTIES
          Name                #MultiLineDisc
          Table               #PurchTable
          Origin              #{BC90F13C-F021-4729-A395-84965264DBBB}
          LegacyId            #24
          ExtendedDataType    #VendMultiLineDiscCode
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #NumberSequenceGroup
        STRING
        PROPERTIES
          Name                #NumberSequenceGroup
          Table               #PurchTable
          IgnoreEDTRelation   #Yes
          Origin              #{7ADDCF5C-7697-49A6-90B4-DB3203A9FC26}
          LegacyId            #73
          ExtendedDataType    #NumberSequenceGroupId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #OneTimeSupplier
        ENUM
        PROPERTIES
          Name                #OneTimeSupplier
          Visible             #No
          Table               #PurchTable
          Origin              #{D27466B6-8B77-4676-B47A-C0ED3E5A2BF9}
          LegacyId            #16055
          ExtendedDataType    #OneTimeSupplier
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #OneTimeVendor
        ENUM
        PROPERTIES
          Name                #OneTimeVendor
          Table               #PurchTable
          Origin              #{C71ED56E-D8D1-44DC-9E7A-A772089FBC87}
          LegacyId            #53
          ExtendedDataType    #OneTimeSupplier
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #OrderAccount
        STRING
        PROPERTIES
          Name                #OrderAccount
          HelpText            #@SYS2496
          Mandatory           #Yes
          Table               #PurchTable
          Origin              #{7DBFBB33-D831-44FE-992A-6B2425D7C251}
          LegacyId            #3
          ExtendedDataType    #VendAccount
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #PackedExtensions
        QUEUE
        PROPERTIES
          Name                #PackedExtensions
          SaveContents        #No
          Visible             #No
          Table               #PurchTable
          Origin              #{778C186E-2C92-4FBC-866B-6A06A2E585C0}
          ExtendedDataType    #SysExtensionSerializerPackedContainer
        ENDPROPERTIES
        
      FIELD #PackingSlipRegister_LT
        ENUM
        PROPERTIES
          Name                #PackingSlipRegister_LT
          Table               #PurchTable
          CountryRegionCodes  #LT,LV
          Origin              #{5B77CD8A-E473-41DB-84F5-494ADD1126F4}
          LegacyId            #16018
          ExtendedDataType    #LtPackingSlipAutoNumbering
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #Payment
        STRING
        PROPERTIES
          Name                #Payment
          HelpText            #@SYS13766
          Table               #PurchTable
          IgnoreEDTRelation   #Yes
          Origin              #{1849A526-5CFA-44EB-82AA-A64CF21E9A5D}
          LegacyId            #14
          ExtendedDataType    #VendPaymTermId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #PaymentSched
        STRING
        PROPERTIES
          Name                #PaymentSched
          Table               #PurchTable
          IgnoreEDTRelation   #Yes
          Origin              #{0059B250-48FC-4560-B7CB-5CBE13840754}
          LegacyId            #51
          ExtendedDataType    #PaymSchedId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #PaymMode
        STRING
        PROPERTIES
          Name                #PaymMode
          Table               #PurchTable
          IgnoreEDTRelation   #Yes
          Origin              #{01A4003D-3508-4E32-8F39-4560AEA608B6}
          LegacyId            #78
          ExtendedDataType    #VendPaymMode
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #PaymSpec
        STRING
        PROPERTIES
          Name                #PaymSpec
          Table               #PurchTable
          Origin              #{35E3218E-EE8E-425B-AC33-BAA1CCD1181B}
          LegacyId            #79
          ExtendedDataType    #VendPaymSpec
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #Port
        STRING
        PROPERTIES
          Name                #Port
          Table               #PurchTable
          IgnoreEDTRelation   #Yes
          Origin              #{6A53F75C-E3E4-47D6-905A-E3BCF2C242EC}
          LegacyId            #68
          ExtendedDataType    #IntrastatPortId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #PostingProfile
        STRING
        PROPERTIES
          Name                #PostingProfile
          Table               #PurchTable
          IgnoreEDTRelation   #Yes
          Origin              #{833165B1-AEA4-42D6-B874-9FBDB1718879}
          LegacyId            #36
          ExtendedDataType    #VendPostingProfile
        ENDPROPERTIES
        
      FIELD #PriceGroupId
        STRING
        PROPERTIES
          Name                #PriceGroupId
          Table               #PurchTable
          Origin              #{57A85BA3-543D-4028-B5F7-F0D27C560CFC}
          LegacyId            #23
          ExtendedDataType    #VendPriceGroup
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #ProjId
        STRING
        PROPERTIES
          Name                #ProjId
          Table               #PurchTable
          IgnoreEDTRelation   #Yes
          Origin              #{C2FAF5ED-8BB3-4FC2-A8B2-7C6BF47C6D80}
          LegacyId            #65
          ExtendedDataType    #ProjId
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #PurchaseType
        ENUM
        PROPERTIES
          Name                #PurchaseType
          Table               #PurchTable
          Origin              #{EFCE8B1E-B38F-4172-8A56-ADE47B2BD906}
          LegacyId            #33
          EnumType            #PurchaseType
        ENDPROPERTIES
        
      FIELD #PurchId
        STRING
        PROPERTIES
          Name                #PurchId
          Mandatory           #Yes
          AllowEdit           #No
          Table               #PurchTable
          Origin              #{ECB6CFAB-2074-4A0B-99A3-078C54D26095}
          LegacyId            #1
          ExtendedDataType    #PurchIdBase
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #PurchName
        STRING
        PROPERTIES
          Name                #PurchName
          Table               #PurchTable
          Origin              #{86E26257-48A8-4BD9-AE07-E222ACADF548}
          LegacyId            #2
          ExtendedDataType    #PurchName
          StringSize          #100
        ENDPROPERTIES
        
      FIELD #PurchPoolId
        STRING
        PROPERTIES
          Name                #PurchPoolId
          Table               #PurchTable
          IgnoreEDTRelation   #Yes
          Origin              #{75D52E24-7D11-4918-BB21-18B349F88A18}
          LegacyId            #66
          ExtendedDataType    #PurchPoolId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #PurchStatus
        ENUM
        PROPERTIES
          Name                #PurchStatus
          AllowEditOnCreate   #No
          AllowEdit           #No
          Table               #PurchTable
          Origin              #{614E0A41-8043-447E-A835-3B90186A34F1}
          LegacyId            #31
          EnumType            #PurchStatus
        ENDPROPERTIES
        
      FIELD #ReasonTableRef
        INT64
        PROPERTIES
          Name                #ReasonTableRef
          Visible             #No
          Table               #PurchTable
          Origin              #{D4362A66-FD9D-4EE8-8DCA-5DEA153A36F0}
          LegacyId            #128
          ExtendedDataType    #RefRecId
        ENDPROPERTIES
        
      FIELD #ReceiptDateConfirmed
        DATE
        PROPERTIES
          Name                #ReceiptDateConfirmed
          SaveContents        #No
          AllowEditOnCreate   #No
          AllowEdit           #No
          Visible             #No
          Table               #PurchTable
          Origin              #{052A418D-DA76-44C9-A597-3D62B3F574F1}
          LegacyId            #39
          ExtendedDataType    #SalesReceiptDateConfirmed
        ENDPROPERTIES
        
      FIELD #ReplenishmentLocation
        STRING
        PROPERTIES
          Name                #ReplenishmentLocation
          Label               #@RET827
          ConfigurationKey    #RetailHeadquarters
          Table               #PurchTable
          Origin              #{1B0437D3-E59A-4011-9CF7-5FE137B83D1E}
          LegacyId            #16080
          ExtendedDataType    #InventLocationId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #ReqAttention
        STRING
        PROPERTIES
          Name                #ReqAttention
          HelpText            #@SYS344211
          Table               #PurchTable
          Origin              #{D27DBAFA-FA80-4141-B24D-CA50B7262F79}
          LegacyId            #95
          ExtendedDataType    #PurchReqAttention
          StringSize          #255
        ENDPROPERTIES
        
      FIELD #Requester
        INT64
        PROPERTIES
          Name                #Requester
          Table               #PurchTable
          Origin              #{F4D3C49F-407B-4365-9F3E-2B2C8376B4F7}
          LegacyId            #234
          ExtendedDataType    #PurchRequester
        ENDPROPERTIES
        
      FIELD #RetailConcessionPurch
        ENUM
        PROPERTIES
          Name                #RetailConcessionPurch
          AllowEdit           #No
          Table               #PurchTable
          Origin              #{4D449F15-8742-4571-B34B-119351CA6119}
          LegacyId            #16087
          ExtendedDataType    #RetailConcessionPurch
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #RetailDriverDetails
        STRING
        PROPERTIES
          Name                #RetailDriverDetails
          AllowEditOnCreate   #No
          AllowEdit           #No
          Table               #PurchTable
          Origin              #{D45540E9-B16C-4FB4-8CF6-7C84794A50FA}
          LegacyId            #16085
          ExtendedDataType    #RetailDriverDetails
          StringSize          #100
        ENDPROPERTIES
        
      FIELD #RetailRetailStatusType
        ENUM
        PROPERTIES
          Name                #RetailRetailStatusType
          AllowEditOnCreate   #No
          AllowEdit           #No
          Table               #PurchTable
          Origin              #{13074795-324C-494B-8E27-8ECB3E6DF871}
          LegacyId            #16082
          ExtendedDataType    #RetailRetailStatusType
          EnumType            #RetailRetailStatusTypeBase
        ENDPROPERTIES
        
      FIELD #ReturnItemNum
        STRING
        PROPERTIES
          Name                #ReturnItemNum
          Table               #PurchTable
          Origin              #{60AC89EA-3013-454B-A62B-B5574EF8EF11}
          LegacyId            #54
          ExtendedDataType    #PurchReturnItemNum
        ENDPROPERTIES
        
      FIELD #ReturnReasonCodeId
        STRING
        PROPERTIES
          Name                #ReturnReasonCodeId
          AllowEditOnCreate   #No
          AllowEdit           #No
          Table               #PurchTable
          IgnoreEDTRelation   #Yes
          Origin              #{84B5FED6-307B-45E0-861F-CD77051BD975}
          LegacyId            #93
          ExtendedDataType    #ReturnReasonCodeId
        ENDPROPERTIES
        
      FIELD #ReturnReplacementCreated
        ENUM
        PROPERTIES
          Name                #ReturnReplacementCreated
          Table               #PurchTable
          Origin              #{7B6E075E-4729-4F20-B2EB-C83499104AD0}
          LegacyId            #94
          ExtendedDataType    #ReturnReplacementCreated
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #ServiceAddress
        STRING
        PROPERTIES
          Name                #ServiceAddress
          Label               #@SYS88743
          AllowEditOnCreate   #No
          AllowEdit           #No
          Table               #PurchTable
          Origin              #{ED2702A5-D636-4F74-A91A-B39C41F32CEA}
          LegacyId            #16054
          ExtendedDataType    #Addressing
          StringSize          #250
        ENDPROPERTIES
        
      FIELD #ServiceCategory
        STRING
        PROPERTIES
          Name                #ServiceCategory
          Table               #PurchTable
          Origin              #{22E38F8A-538F-4C10-866E-093C8D6B2614}
          LegacyId            #16077
          ExtendedDataType    #RetailServiceCategoryId
        ENDPROPERTIES
        
      FIELD #ServiceDate
        DATE
        PROPERTIES
          Name                #ServiceDate
          Table               #PurchTable
          Origin              #{823B3B4F-D75A-4E5E-8203-8A1E02869BEF}
          LegacyId            #16056
          ExtendedDataType    #ServiceDate
        ENDPROPERTIES
        
      FIELD #ServiceName
        STRING
        PROPERTIES
          Name                #ServiceName
          Label               #@SYS110763
          Table               #PurchTable
          Origin              #{0320DB53-B449-4081-B9E0-34FE5FE2FB20}
          LegacyId            #16053
          ExtendedDataType    #VATNum
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #SettleVoucher
        ENUM
        PROPERTIES
          Name                #SettleVoucher
          Table               #PurchTable
          Origin              #{C7292C1D-4B09-47EB-A361-521A9FD62EE8}
          LegacyId            #45
          ExtendedDataType    #PurchSettlementType
          EnumType            #SettlementType
        ENDPROPERTIES
        
      FIELD #ShippingDateConfirmed
        DATE
        PROPERTIES
          Name                #ShippingDateConfirmed
          SaveContents        #No
          AllowEditOnCreate   #No
          AllowEdit           #No
          Visible             #No
          Table               #PurchTable
          Origin              #{3E1F9851-87C9-494D-8E33-49FD1CC17E14}
          LegacyId            #38
          ExtendedDataType    #SalesShippingDateConfirmed
        ENDPROPERTIES
        
      FIELD #ShippingDateRequested
        DATE
        PROPERTIES
          Name                #ShippingDateRequested
          SaveContents        #No
          AllowEditOnCreate   #No
          AllowEdit           #No
          Visible             #No
          Table               #PurchTable
          Origin              #{E5378DAB-D736-4B9E-B03F-7BD67090BEE2}
          LegacyId            #34
          ExtendedDataType    #SalesShippingDateRequested
        ENDPROPERTIES
        
      FIELD #SkipUpdate
        ENUM
        PROPERTIES
          Name                #SkipUpdate
          SaveContents        #No
          Visible             #No
          Table               #PurchTable
          Origin              #{054E30C4-0A5E-4909-8DDB-7A64685EEB7A}
          LegacyId            #91
          EnumType            #InterCompanySkipUpdate
        ENDPROPERTIES
        
      FIELD #SourceDocumentHeader
        INT64
        PROPERTIES
          Name                #SourceDocumentHeader
          Label               #@SYS314386
          Visible             #No
          Table               #PurchTable
          Origin              #{89F1C22E-5725-4232-849D-BA2B34208310}
          LegacyId            #203
          ExtendedDataType    #RefRecId
        ENDPROPERTIES
        
      FIELD #SourceDocumentLine
        INT64
        PROPERTIES
          Name                #SourceDocumentLine
          Label               #@SYS319494
          Visible             #No
          Table               #PurchTable
          Origin              #{17BEC899-3678-49A9-B599-A01FD130119F}
          LegacyId            #202
          ExtendedDataType    #RefRecId
        ENDPROPERTIES
        
      FIELD #StatProcId
        STRING
        PROPERTIES
          Name                #StatProcId
          Table               #PurchTable
          IgnoreEDTRelation   #Yes
          Origin              #{69B54C7C-0D28-4389-A64E-C3E40044127E}
          LegacyId            #83
          ExtendedDataType    #IntrastatProcId
        ENDPROPERTIES
        
      FIELD #SystemEntryChangePolicy
        INT64
        PROPERTIES
          Name                #SystemEntryChangePolicy
          AllowEditOnCreate   #No
          AllowEdit           #No
          Visible             #No
          Table               #PurchTable
          Origin              #{420EB6E0-67F0-485B-89A6-3530B3470EB9}
          LegacyId            #167
          ExtendedDataType    #PriceDiscPolicySystem
        ENDPROPERTIES
        
      FIELD #SystemEntrySource
        ENUM
        PROPERTIES
          Name                #SystemEntrySource
          AllowEditOnCreate   #No
          AllowEdit           #No
          Visible             #No
          Table               #PurchTable
          Origin              #{D1DDA06F-4553-439F-A162-D567175CEBC5}
          LegacyId            #166
          EnumType            #PriceDiscSystemSource
        ENDPROPERTIES
        
      FIELD #TAMVendRebateGroupId
        STRING
        PROPERTIES
          Name                #TAMVendRebateGroupId
          Table               #PurchTable
          Origin              #{521A159D-7F0C-4530-87A5-E00F71B35927}
          ExtendedDataType    #TAMVendRebateGroupId
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #TaxGroup
        STRING
        PROPERTIES
          Name                #TaxGroup
          HelpText            #@SYS27938
          Table               #PurchTable
          IgnoreEDTRelation   #Yes
          Origin              #{EC323E1E-9DBA-45DA-A02E-988B8103C59F}
          LegacyId            #28
          ExtendedDataType    #TaxGroup
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #TaxPeriodPaymentCode_PL
        STRING
        PROPERTIES
          Name                #TaxPeriodPaymentCode_PL
          Table               #PurchTable
          Origin              #{5D980705-202A-4D8A-A6DC-6B49BEEA2183}
          ExtendedDataType    #PlTaxPeriodPaymentCode
        ENDPROPERTIES
        
      FIELD #TransactionCode
        STRING
        PROPERTIES
          Name                #TransactionCode
          Table               #PurchTable
          IgnoreEDTRelation   #Yes
          Origin              #{768944A6-CDA2-41D7-AB34-990667F31CD8}
          LegacyId            #37
          ExtendedDataType    #IntrastatTransactionCodeId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #Transport
        STRING
        PROPERTIES
          Name                #Transport
          Table               #PurchTable
          IgnoreEDTRelation   #Yes
          Origin              #{F0D857F3-E4B2-40CC-B0B7-44CAC67E25E0}
          LegacyId            #76
          ExtendedDataType    #IntrastatTransport
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #TransportationDocument
        INT64
        PROPERTIES
          Name                #TransportationDocument
          Visible             #No
          Table               #PurchTable
          Origin              #{472E533E-E629-40DD-864B-7DE2821FEC51}
          ExtendedDataType    #TransportationDocumentRecId
        ENDPROPERTIES
        
      FIELD #UnitedVATInvoice_LT
        ENUM
        PROPERTIES
          Name                #UnitedVATInvoice_LT
          Table               #PurchTable
          Origin              #{362D6E21-3DF3-4C9A-AD96-13CE55F155C5}
          LegacyId            #8143
          ExtendedDataType    #UnitedVATInvoice_LT
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #URL
        STRING
        PROPERTIES
          Name                #URL
          Table               #PurchTable
          Origin              #{6BA2620F-A5B3-4BBD-A709-F2C395E306E4}
          LegacyId            #35
          ExtendedDataType    #URLBase
          StringSize          #255
        ENDPROPERTIES
        
      FIELD #VATNum
        STRING
        PROPERTIES
          Name                #VATNum
          Table               #PurchTable
          Origin              #{60FA780D-ECF3-4188-AF8B-B0430896AED5}
          LegacyId            #67
          ExtendedDataType    #VATNumJournal
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #VendGroup
        STRING
        PROPERTIES
          Name                #VendGroup
          HelpText            #@SYS17188
          Mandatory           #Yes
          Table               #PurchTable
          IgnoreEDTRelation   #Yes
          Origin              #{A42D7AC1-B148-493D-930A-8196420FDB97}
          LegacyId            #19
          ExtendedDataType    #VendGroupId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #VendInvoiceDeclaration_IS
        INT64
        PROPERTIES
          Name                #VendInvoiceDeclaration_IS
          Table               #PurchTable
          Origin              #{95CDC79D-6B2A-44EB-B351-061B6B4B65DC}
          LegacyId            #176
          ExtendedDataType    #InvoiceDeclarationId_IS
        ENDPROPERTIES
        
      FIELD #VendorRef
        STRING
        PROPERTIES
          Name                #VendorRef
          Table               #PurchTable
          Origin              #{6643A365-5A77-431A-94FD-78599CE74420}
          LegacyId            #86
          ExtendedDataType    #VendRef
          StringSize          #100
        ENDPROPERTIES
        
      FIELD #WorkerPurchPlacer
        INT64
        PROPERTIES
          Name                #WorkerPurchPlacer
          Table               #PurchTable
          Origin              #{105899E6-B6E2-47A2-B1A0-05D37F083713}
          LegacyId            #184
          ExtendedDataType    #PurchPlacer
        ENDPROPERTIES
        
    ENDFIELDS
    GROUPS
      GROUP #AutoSummary
        PROPERTIES
          Name                #AutoSummary
        ENDPROPERTIES
        
        GROUPFIELDS
          #PurchId
          #PurchName
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #AutoReport
        PROPERTIES
          Name                #AutoReport
        ENDPROPERTIES
        
        GROUPFIELDS
          #PurchId
          #OrderAccount
          #PurchName
          #InvoiceAccount
          #PurchStatus
          #DocumentStatus
          #DeliveryDate
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Address
        PROPERTIES
          Name                #Address
          Label               #@SYS9362
        ENDPROPERTIES
        
        GROUPFIELDS
          #DeliveryName
          #DeliveryPostalAddress
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #AddressLookup
        PROPERTIES
          Name                #AddressLookup
          Label               #@SYS88672
        ENDPROPERTIES
        
        GROUPFIELDS
          #PurchId
          #OrderAccount
          #InvoiceAccount
          #PurchaseType
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #AddressReference
        PROPERTIES
          Name                #AddressReference
          Label               #@SYS88679
        ENDPROPERTIES
        
        GROUPFIELDS
          #AddressRefRecId
          #AddressRefTableId
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Administration
        PROPERTIES
          Name                #Administration
          Label               #@SYS9853
        ENDPROPERTIES
        
        GROUPFIELDS
          #ItemBuyerGroupId
          #WorkerPurchPlacer
          #Requester
          #PurchPoolId
          #LanguageId
          #ChangeRequestRequired
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Agreement
        PROPERTIES
          Name                #Agreement
          Label               #@SYS87179
        ENDPROPERTIES
        
        GROUPFIELDS
          #MatchingAgreement
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #All
        PROPERTIES
          Name                #All
          Label               #@SYS80094
        ENDPROPERTIES
        
        GROUPFIELDS
          #RetailRetailStatusType
          #RetailDriverDetails
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Attention
        PROPERTIES
          Name                #Attention
          Label               #@SYS1593
        ENDPROPERTIES
        
        GROUPFIELDS
          #ReqAttention
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #CaseMoreInformation
        PROPERTIES
          Name                #CaseMoreInformation
          Label               #@SYS314356
        ENDPROPERTIES
        
        GROUPFIELDS
          #PurchId
          #OrderAccount
          #InvoiceAccount
          #PurchaseType
          #DocumentStatus
          #PurchStatus
          #CurrencyCode
          #ProjId
          #agreementIsLinked
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #ConfirmingPO
        PROPERTIES
          Name                #ConfirmingPO
          Label               #@SPS591
        ENDPROPERTIES
        
        GROUPFIELDS
          #ConfirmingPO
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #ConsTarget_JP
        PROPERTIES
          Name                #ConsTarget_JP
          Label               #@SYS106495
        ENDPROPERTIES
        
        GROUPFIELDS
          #ConsTarget_JP
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #ContactInfo
        PROPERTIES
          Name                #ContactInfo
          Label               #@SYS21663
        ENDPROPERTIES
        
        GROUPFIELDS
          #URL
          #Email
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Contract_SA
        PROPERTIES
          Name                #Contract_SA
          Label               #@SYS73302
        ENDPROPERTIES
        
        GROUPFIELDS
          #ContractNum_SA
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Crossdocking
        PROPERTIES
          Name                #Crossdocking
          Label               #@RET806
        ENDPROPERTIES
        
        GROUPFIELDS
          #ServiceCategory
          #ReplenishmentLocation
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #CrossdockingDates
        PROPERTIES
          Name                #CrossdockingDates
          Label               #@RET998
        ENDPROPERTIES
        
        GROUPFIELDS
          #DeliveryDate
          #CrossDockingDate
          #LocalDeliveryDate
          #AvailSalesDate
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Currency
        PROPERTIES
          Name                #Currency
          Label               #@SYS7572
        ENDPROPERTIES
        
        GROUPFIELDS
          #CurrencyCode
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Delivery
        PROPERTIES
          Name                #Delivery
          Label               #@SYS4508
        ENDPROPERTIES
        
        GROUPFIELDS
          #DeliveryDate
          #ConfirmedDlv
          #ConfirmedDlvEarliest
          #DlvMode
          #DlvTerm
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #DeliverySummary
        PROPERTIES
          Name                #DeliverySummary
          Label               #@SYS22058
        ENDPROPERTIES
        
        GROUPFIELDS
          #DeliveryName
          #DeliveryDate
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Dimension
        PROPERTIES
          Name                #Dimension
          Label               #@SYS342338
        ENDPROPERTIES
        
        GROUPFIELDS
          #DefaultDimension
          #AccountingDistributionTemplate
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Discount
        PROPERTIES
          Name                #Discount
          Label               #@SYS11829
        ENDPROPERTIES
        
        GROUPFIELDS
          #MultiLineDisc
          #EndDisc
          #LineDisc
          #DiscPercent
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #DiscountMiscCharges
        PROPERTIES
          Name                #DiscountMiscCharges
          Label               #@SYS22031
        ENDPROPERTIES
        
        GROUPFIELDS
          #PriceGroupId
          #LineDisc
          #MultiLineDisc
          #EndDisc
          #DiscPercent
          #MarkupGroup
          #TAMVendRebateGroupId
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #DocumentPreview
        PROPERTIES
          Name                #DocumentPreview
          Label               #@SYS117648
        ENDPROPERTIES
        
        GROUPFIELDS
          #workflowInstructions
          #PurchId
          #createdDateTime
          #vendorName
          #amountOrderedNotInvoicedMST
          #DeliveryDate
          #workflowLastComment
          #workflowWorkItemDueDate
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #EPDelivery
        PROPERTIES
          Name                #EPDelivery
          Label               #@SYS4508
        ENDPROPERTIES
        
        GROUPFIELDS
          #DeliveryName
          #DeliveryDate
          #DlvTerm
          #DlvMode
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #ExternalReference
        PROPERTIES
          Name                #ExternalReference
          Label               #@SYS21697
        ENDPROPERTIES
        
        GROUPFIELDS
          #VendorRef
          #ReturnItemNum
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #ForeignTrade
        PROPERTIES
          Name                #ForeignTrade
          Label               #@SYS27650
        ENDPROPERTIES
        
        GROUPFIELDS
          #TransactionCode
          #Transport
          #Port
          #StatProcId
          #CountyOrigDest
          #ListCode
          #IntrastatAddValue_LV
          #IntrastatFulfillmentDate_HU
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #HeaderToLineUpdate
        PROPERTIES
          Name                #HeaderToLineUpdate
          Label               #@SYS62436
        ENDPROPERTIES
        
        GROUPFIELDS
          #OrderAccount
          #TaxGroup
          #AccountingDistributionTemplate
          #DefaultDimension
          #InventLocationId
          #TransactionCode
          #Port
          #StatProcId
          #PriceGroupId
          #LineDisc
          #MarkupGroup
          #DeliveryDate
          #ConfirmedDlv
          #LanguageId
          #Transport
          #IntrastatFulfillmentDate_HU
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Identification
        PROPERTIES
          Name                #Identification
          Label               #@SYS5711
        ENDPROPERTIES
        
        GROUPFIELDS
          #PurchId
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Intercompany
        PROPERTIES
          Name                #Intercompany
          Label               #@SYS93837
        ENDPROPERTIES
        
        GROUPFIELDS
          #InterCompanyOrder
          #InterCompanyCompanyId
          #InterCompanySalesId
          #interCompanyOriginDisplay
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #InterCompanyOriginal
        PROPERTIES
          Name                #InterCompanyOriginal
          Label               #@SYS93838
        ENDPROPERTIES
        
        GROUPFIELDS
          #InterCompanyOriginalSalesId
          #InterCompanyOriginalCustAccount
          #InterCompanyCustPurchOrderFormNum
          #InterCompanyDirectDelivery
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #InterCompanyReturn
        PROPERTIES
          Name                #InterCompanyReturn
          Label               #@SYS120343
        ENDPROPERTIES
        
        GROUPFIELDS
          #ReturnReasonCodeId
          #ReturnReplacementCreated
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Inventory
        PROPERTIES
          Name                #Inventory
          Label               #@SYS981
        ENDPROPERTIES
        
        GROUPFIELDS
          #InventSiteId
          #InventLocationId
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #ItemOrderCreation
        PROPERTIES
          Name                #ItemOrderCreation
          Label               #@RET876
        ENDPROPERTIES
        
        GROUPFIELDS
          #FSHAutoCreated
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #ListCode
        PROPERTIES
          Name                #ListCode
          Label               #@SYS89034
        ENDPROPERTIES
        
        GROUPFIELDS
          #ListCode
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #NotificationToTheCentralBank
        PROPERTIES
          Name                #NotificationToTheCentralBank
          Label               #@SYS67156
        ENDPROPERTIES
        
        GROUPFIELDS
          #BankCentralBankPurposeCode
          #BankCentralBankPurposeText
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Payment
        PROPERTIES
          Name                #Payment
          Label               #@SYS828
        ENDPROPERTIES
        
        GROUPFIELDS
          #Payment
          #FixedDueDate
          #PaymMode
          #PaymSpec
          #PaymentSched
          #CashDisc
          #CashDiscPercent
          #BankDocumentType
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Posting
        PROPERTIES
          Name                #Posting
          Label               #@SYS5943
        ENDPROPERTIES
        
        GROUPFIELDS
          #PostingProfile
          #SettleVoucher
          #NumberSequenceGroup
          #AccountingDate
          #InvoiceRegister_LT
          #PackingSlipRegister_LT
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Project
        PROPERTIES
          Name                #Project
          Label               #@SYS4534
        ENDPROPERTIES
        
        GROUPFIELDS
          #ProjId
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #PSAGroup
        PROPERTIES
          Name                #PSAGroup
          Label               #@PSA43
        ENDPROPERTIES
        
        GROUPFIELDS
          #ServiceName
          #ServiceAddress
          #OneTimeSupplier
          #ServiceDate
          #ConfirmedDlv
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #PurchaseTable
        PROPERTIES
          Name                #PurchaseTable
          Label               #@SYS1653
        ENDPROPERTIES
        
        GROUPFIELDS
          #ContactPersonId
          #ReturnItemNum
          #CovStatus
          #VendGroup
          #PurchaseType
          #MarkupGroup
          #PostingProfile
          #SettleVoucher
          #PurchStatus
          #PurchName
          #DocumentStatus
          #DeliveryType
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Reasons
        PROPERTIES
          Name                #Reasons
          Label               #@SYS111245
        ENDPROPERTIES
        
        GROUPFIELDS
          #ReasonTableRef
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Requisitioner
        PROPERTIES
          Name                #Requisitioner
          Label               #@SYS108788
        ENDPROPERTIES
        
        GROUPFIELDS
          #Requester
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #RetailConcession
        PROPERTIES
          Name                #RetailConcession
          Label               #@RET742
        ENDPROPERTIES
        
        GROUPFIELDS
          #RetailConcessionPurch
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #SalesTax
        PROPERTIES
          Name                #SalesTax
          Label               #@SYS5878
        ENDPROPERTIES
        
        GROUPFIELDS
          #TaxGroup
          #VATNum
          #EnterpriseNumber
          #InclTax
          #UnitedVATInvoice_LT
          #TaxPeriodPaymentCode_PL
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #SourceDocumentHeader
        PROPERTIES
          Name                #SourceDocumentHeader
          Label               #@SYS314386
        ENDPROPERTIES
        
        GROUPFIELDS
          #SourceDocumentHeader
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #SourceDocumentLine
        PROPERTIES
          Name                #SourceDocumentLine
          Label               #@SYS132694
        ENDPROPERTIES
        
        GROUPFIELDS
          #SourceDocumentLine
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Status
        PROPERTIES
          Name                #Status
          Label               #@SYS25587
        ENDPROPERTIES
        
        GROUPFIELDS
          #PurchStatus
          #displayDocumentStatus
          #DocumentState
          #qualityOrderStatusDisplay
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #SummaryNumber
        PROPERTIES
          Name                #SummaryNumber
          Label               #*** OUTDATED ***
        ENDPROPERTIES
        
        GROUPFIELDS
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #SummaryPurchase
        PROPERTIES
          Name                #SummaryPurchase
          Label               #@SYS24162
        ENDPROPERTIES
        
        GROUPFIELDS
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #SummaryUpdate
        PROPERTIES
          Name                #SummaryUpdate
          Label               #@SYS57755
        ENDPROPERTIES
        
        GROUPFIELDS
          #OrderAccount
          #InvoiceAccount
          #FreightZone
          #CurrencyCode
          #Payment
          #CashDisc
          #LineDisc
          #DiscPercent
          #DefaultDimension
          #PriceGroupId
          #MultiLineDisc
          #EndDisc
          #DlvTerm
          #DlvMode
          #PurchaseType
          #PostingProfile
          #TransactionCode
          #PaymentSched
          #FreightSlipType
          #ContactPersonId
          #InventLocationId
          #ItemBuyerGroupId
          #PurchPoolId
          #VATNum
          #InclTax
          #NumberSequenceGroup
          #LanguageId
          #PaymMode
          #PaymSpec
          #FixedDueDate
          #InterCompanyCompanyId
          #InterCompanyOriginalCustAccount
          #InterCompanyDirectDelivery
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #SummaryUpdateParameters
        PROPERTIES
          Name                #SummaryUpdateParameters
          Label               #@SYS57738
        ENDPROPERTIES
        
        GROUPFIELDS
          #AutoSummaryModuleType
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Transport
        PROPERTIES
          Name                #Transport
          Label               #@SYS3843
        ENDPROPERTIES
        
        GROUPFIELDS
          #FreightZone
          #FreightSlipType
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #UnGrouped
        PROPERTIES
          Name                #UnGrouped
          Label               #@MCR23892
        ENDPROPERTIES
        
        GROUPFIELDS
          #MCRDropShipment
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #VendInvoiceDeclaration
        PROPERTIES
          Name                #VendInvoiceDeclaration
          Label               #@SYS126906
        ENDPROPERTIES
        
        GROUPFIELDS
          #VendInvoiceDeclaration_IS
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Vendor
        PROPERTIES
          Name                #Vendor
          Label               #@SYS9455
        ENDPROPERTIES
        
        GROUPFIELDS
          #OrderAccount
          #OneTimeVendor
          #InvoiceAccount
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #VSSDiscount
        PROPERTIES
          Name                #VSSDiscount
          Label               #@SYS22031
        ENDPROPERTIES
        
        GROUPFIELDS
          #CashDisc
          #CashDiscPercent
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #VSSForeignTrade
        PROPERTIES
          Name                #VSSForeignTrade
          Label               #@SYS27650
        ENDPROPERTIES
        
        GROUPFIELDS
          #TransactionCode
          #Transport
          #Port
          #StatProcId
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #VSSSalesTax
        PROPERTIES
          Name                #VSSSalesTax
          Label               #@SYS5878
        ENDPROPERTIES
        
        GROUPFIELDS
          #VATNum
          #EnterpriseNumber
          #InclTax
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #WebCategoryBrowsing
        PROPERTIES
          Name                #WebCategoryBrowsing
          Label               #@SYS74258
        ENDPROPERTIES
        
        GROUPFIELDS
          #PurchStatus
          #PurchaseType
        ENDGROUPFIELDS
      ENDGROUP
    ENDGROUPS
    
    INDICES
      #PurchIdx
      PROPERTIES
        Name                #PurchIdx
        AllowDuplicates     #No
        AlternateKey        #Yes
        Origin              #{2B080001-0159-1000-5075-726368496478}
        LegacyId            #1
      ENDPROPERTIES
      
      INDEXFIELDS
        #PurchId
      ENDINDEXFIELDS
      
      #VendIdx
      PROPERTIES
        Name                #VendIdx
        AllowDuplicates     #No
        Origin              #{2B070002-0159-1000-5665-6E6449647800}
        LegacyId            #2
      ENDPROPERTIES
      
      INDEXFIELDS
        #OrderAccount
        #PurchId
      ENDINDEXFIELDS
      
      #StatusOrderAccIdx
      PROPERTIES
        Name                #StatusOrderAccIdx
        Origin              #{2B110004-0159-1000-87B6-F6C8E50D3134}
        LegacyId            #4
      ENDPROPERTIES
      
      INDEXFIELDS
        #PurchStatus
        #OrderAccount
      ENDINDEXFIELDS
      
      #ProjIdx
      PROPERTIES
        Name                #ProjIdx
        ConfigurationKey    #ProjBasic
        Origin              #{2B070005-0159-1000-5072-6F6A49647800}
        LegacyId            #5
      ENDPROPERTIES
      
      INDEXFIELDS
        #ProjId
        #PurchId
      ENDINDEXFIELDS
      
      #AgreementHeaderIdx
      PROPERTIES
        Name                #AgreementHeaderIdx
        Origin              #{2B120017-0159-1000-09A6-8E2BD269E89A}
        LegacyId            #23
      ENDPROPERTIES
      
      INDEXFIELDS
        #MatchingAgreement
      ENDINDEXFIELDS
      
      #OrderAccCreatedDateTimeIdx
      PROPERTIES
        Name                #OrderAccCreatedDateTimeIdx
        Origin              #{58549996-3A05-4D9A-90C5-990DA1D46627}
        LegacyId            #41
      ENDPROPERTIES
      
      INDEXFIELDS
        #OrderAccount
        #createdDateTime
      ENDINDEXFIELDS
      
      #SDHeaderIdx
      PROPERTIES
        Name                #SDHeaderIdx
        AllowDuplicates     #No
        AlternateKey        #Yes
        Origin              #{57111D7A-3845-4DD7-884C-EBD394359A02}
        LegacyId            #49
      ENDPROPERTIES
      
      INDEXFIELDS
        #SourceDocumentHeader
        #Partition
        #dataAreaId
      ENDINDEXFIELDS
      
      #ConsTarget_JPIdx
      PROPERTIES
        Name                #ConsTarget_JPIdx
        Origin              #{DA84C9EB-526A-4668-AE4F-48E42695BC04}
        LegacyId            #8007
      ENDPROPERTIES
      
      INDEXFIELDS
        #InvoiceAccount
        #ConsTarget_JP
      ENDINDEXFIELDS
      
      #DropShipIdx
      PROPERTIES
        Name                #DropShipIdx
        Origin              #{EC02665E-99E4-4D48-A4AF-426EB10FEBD6}
        LegacyId            #30001
      ENDPROPERTIES
      
      INDEXFIELDS
        #MCRDropShipment
        #PurchId
      ENDINDEXFIELDS
      
      #MCRDeliveryDateIdx
      PROPERTIES
        Name                #MCRDeliveryDateIdx
        ConfigurationKey    #MCRCallCenter
        Origin              #{17C52150-E0AC-4E42-A49B-80C6E68ADBD4}
        LegacyId            #30002
      ENDPROPERTIES
      
      INDEXFIELDS
        #DeliveryDate
      ENDINDEXFIELDS
      
      #SourceDocumentLineIdx
      PROPERTIES
        Name                #SourceDocumentLineIdx
        UniqueAcrossCompanies #Yes
        Origin              #{11566540-1D79-4F5C-BAE3-817B6686CA40}
      ENDPROPERTIES
      
      INDEXFIELDS
        #SourceDocumentLine
        #Partition
        #dataAreaId
      ENDINDEXFIELDS
      
    ENDINDICES
    FULLTEXTINDICES
    ENDFULLTEXTINDICES
    REFERENCES
      REFERENCE #AccountingDistributionTemplate
        PROPERTIES
          Name                #AccountingDistributionTemplate
          Table               #AccountingDistributionTemplate
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
          RelatedTableRole    #AccountingDistributionTemplate
          Role                #AccountingDistributionTemplate_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #AccountingDistributionTemplate
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #Agreement
        PROPERTIES
          Name                #Agreement
          Table               #AgreementHeader
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #AgreementHeader
          Role                #AgreementHeader_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #MatchingAgreement
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #BankCentralBankPurpose
        PROPERTIES
          Name                #BankCentralBankPurpose
          Table               #BankCentralBankPurpose
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #BankCentralBankPurpose
          Role                #BankCentralBankPurpose_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #BankCentralBankPurposeCode
            RelatedField        #Code
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #CashDisc
        PROPERTIES
          Name                #CashDisc
          Table               #CashDisc
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #CashDisc
          Role                #CashDisc_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #CashDisc
            RelatedField        #CashDiscCode
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #Common
        PROPERTIES
          Name                #Common
          Table               #Common
          Validate            #No
          RelationshipType    #Link
          UseDefaultRoleNames #Yes
          RelatedTableRole    #Common
          Role                #PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #AddressRefRecId
            RelatedField        #RecId
          ENDPROPERTIES
          
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #AddressRefTableId
            RelatedField        #TableId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #ConfirmingPO
        PROPERTIES
          Name                #ConfirmingPO
          Table               #ConfirmingPO
          RelatedTableCardinality   #ExactlyOne
          Cardinality         #ZeroOne
          RelationshipType    #Association
          RelatedTableRole    #ConfirmingPO
          Role                #ConfirmingPO_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #ConfirmingPO
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #ContactPerson
        PROPERTIES
          Name                #ContactPerson
          Table               #ContactPerson
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #ContactPerson_1
          Role                #ContactPerson_1_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #ContactPersonId
            RelatedField        #ContactPersonId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #CountyOrigDest
        PROPERTIES
          Name                #CountyOrigDest
          Table               #LogisticsAddressCounty
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #LogisticsAddressCounty
          Role                #LogisticsAddressCounty_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #CountyOrigDest
            RelatedField        #CountyId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #Currency
        PROPERTIES
          Name                #Currency
          Table               #Currency
          RelatedTableCardinality   #ExactlyOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #Currency
          Role                #Currency_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #CurrencyCode
            RelatedField        #CurrencyCode
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #DataArea
        PROPERTIES
          Name                #DataArea
          Table               #DataArea
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
          RelatedTableRole    #DataArea
          Role                #PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE EXTERNFIXED
          PROPERTIES
            Table               #DataArea
            RelatedField        #isVirtual
          ENDPROPERTIES
          
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #InterCompanyCompanyId
            RelatedField        #id
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #DefaultDimension
        PROPERTIES
          Name                #DefaultDimension
          Table               #DimensionAttributeValueSet
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #DimensionAttributeValueSet
          Role                #DimensionAttributeValueSet_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #DefaultDimension
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #DeliveryPostalAddress
        PROPERTIES
          Name                #DeliveryPostalAddress
          Table               #LogisticsPostalAddress
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #LogisticsPostalAddress
          Role                #LogisticsPostalAddress_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #DeliveryPostalAddress
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #DlvMode
        PROPERTIES
          Name                #DlvMode
          Table               #DlvMode
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #DlvMode
          Role                #DlvMode_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #DlvMode
            RelatedField        #Code
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #DlvTerm
        PROPERTIES
          Name                #DlvTerm
          Table               #DlvTerm
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #DlvTerm
          Role                #DlvTerm_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #DlvTerm
            RelatedField        #Code
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #InterCompany
        PROPERTIES
          Name                #InterCompany
          Table               #DataArea
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #InterCompany
          Role                #PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #InterCompanyCompanyId
            RelatedField        #id
          ENDPROPERTIES
          
          REFERENCETYPE EXTERNFIXED
          PROPERTIES
            Table               #DataArea
            RelatedField        #isVirtual
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #IntrastatPort
        PROPERTIES
          Name                #IntrastatPort
          Table               #IntrastatPort
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #IntrastatPort
          Role                #IntrastatPort_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #Port
            RelatedField        #PortId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #IntrastatStatProc
        PROPERTIES
          Name                #IntrastatStatProc
          Table               #IntrastatStatProc
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #IntrastatStatProc
          Role                #IntrastatStatProc_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #StatProcId
            RelatedField        #StatProcId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #IntrastatTransactionCode
        PROPERTIES
          Name                #IntrastatTransactionCode
          Table               #IntrastatTransactionCode
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #IntrastatTransactionCode
          Role                #IntrastatTransactionCode_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #TransactionCode
            RelatedField        #TransactionCode
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #IntrastatTransportMode
        PROPERTIES
          Name                #IntrastatTransportMode
          Table               #IntrastatTransportMode
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #IntrastatTransportMode
          Role                #IntrastatTransportMode_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #Transport
            RelatedField        #TransPortCode
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #InventBuyerGroup
        PROPERTIES
          Name                #InventBuyerGroup
          Table               #InventBuyerGroup
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #InventBuyerGroup
          Role                #InventBuyerGroup_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #ItemBuyerGroupId
            RelatedField        #Group
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #InventLocation
        PROPERTIES
          Name                #InventLocation
          Table               #InventLocation
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #InventLocation
          Role                #InventLocation_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #InventLocationId
            RelatedField        #InventLocationId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #InventSite
        PROPERTIES
          Name                #InventSite
          Table               #InventSite
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #InventSite
          Role                #InventSite_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #InventSiteId
            RelatedField        #SiteId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #InvoiceDeclarationId_FK
        PROPERTIES
          Name                #InvoiceDeclarationId_FK
          Table               #VendInvoiceDeclaration_IS
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #DeclarationUsedForInvoicing
          Role                #PurchaseOrders
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #VendInvoiceDeclaration_IS
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #InvoiceVendor
        PROPERTIES
          Name                #InvoiceVendor
          Table               #VendTable
          RelatedTableCardinality   #ExactlyOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #VendTable
          Role                #VendTable_PurchTable
          EDTRelation         #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #InvoiceAccount
            RelatedField        #AccountNum
            SourceEDT           #VendInvoiceAccount
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #LanguageTable
        PROPERTIES
          Name                #LanguageTable
          Table               #LanguageTable
          RelatedTableCardinality   #ExactlyOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #LanguageId
            RelatedField        #LanguageId
          ENDPROPERTIES
          
          REFERENCETYPE EXTERNFIXED
          PROPERTIES
            Value               #1
            Table               #LanguageTable
            RelatedField        #LabelFile
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #MarkupGroup
        PROPERTIES
          Name                #MarkupGroup
          Table               #MarkupGroup
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #MarkupGroup
          Role                #MarkupGroup_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE EXTERNFIXED
          PROPERTIES
            Value               #2
            Table               #MarkupGroup
            RelatedField        #Module
          ENDPROPERTIES
          
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #MarkupGroup
            RelatedField        #GroupId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #MCRHoldCodeTrans
        PROPERTIES
          Name                #MCRHoldCodeTrans
          Table               #MCRHoldCodeTrans
          Validate            #No
          RelatedTableCardinality   #ExactlyOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #PurchId
            RelatedField        #InventRefId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #NumberSequenceGroup
        PROPERTIES
          Name                #NumberSequenceGroup
          Table               #NumberSequenceGroup
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #NumberSequenceGroup
          Role                #NumberSequenceGroup_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #NumberSequenceGroup
            RelatedField        #numberSequenceGroupId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #OrderVendor
        PROPERTIES
          Name                #OrderVendor
          Table               #VendTable
          RelatedTableCardinality   #ExactlyOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #VendTable_1
          Role                #VendTable_1_PurchTable
          EDTRelation         #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #OrderAccount
            RelatedField        #AccountNum
            SourceEDT           #VendAccount
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #PaymSched
        PROPERTIES
          Name                #PaymSched
          Table               #PaymSched
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #PaymSched
          Role                #PaymSched_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #PaymentSched
            RelatedField        #Name
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #PaymTerm
        PROPERTIES
          Name                #PaymTerm
          Table               #PaymTerm
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #PaymTerm
          Role                #PaymTerm_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #Payment
            RelatedField        #PaymTermId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #PlTaxDueTable
        PROPERTIES
          Name                #PlTaxDueTable
          Table               #PlTaxDueTable
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
          RelatedTableRole    #PlTaxDueTable
          Role                #PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #TaxPeriodPaymentCode_PL
            RelatedField        #TaxPeriodPaymentCode
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #PriceDiscChangePolicyRecId1
        PROPERTIES
          Name                #PriceDiscChangePolicyRecId1
          Table               #PriceDiscChangePolicy
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #PriceDiscChangePolicy
          Role                #PriceDiscChangePolicy_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #SystemEntryChangePolicy
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #PriceDiscChangePolicyRecId2
        PROPERTIES
          Name                #PriceDiscChangePolicyRecId2
          Table               #PriceDiscChangePolicy
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #PriceDiscChangePolicy_1
          Role                #PriceDiscChangePolicy_1_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #ManualEntryChangepolicy
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #ProjTable
        PROPERTIES
          Name                #ProjTable
          Table               #ProjTable
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #ProjTable_1
          Role                #ProjTable_1_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #ProjId
            RelatedField        #ProjId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #PurchPool
        PROPERTIES
          Name                #PurchPool
          Table               #PurchPool
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #PurchPool
          Role                #PurchPool_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #PurchPoolId
            RelatedField        #PurchPoolId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #ReasonTableRef
        PROPERTIES
          Name                #ReasonTableRef
          Table               #ReasonTableRef
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #ReasonTableRef
          Role                #ReasonTableRef_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #ReasonTableRef
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #ReplenishmentLocation
        PROPERTIES
          Name                #ReplenishmentLocation
          Table               #InventLocation
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
          RelatedTableRole    #ReplenishmentLocation
          EDTRelation         #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #ReplenishmentLocation
            RelatedField        #InventLocationId
            SourceEDT           #InventLocationId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #Requester_FK
        PROPERTIES
          Name                #Requester_FK
          Table               #HcmWorker
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #HcmWorker_1
          Role                #PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #Requester
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #RetailServiceCategory
        PROPERTIES
          Name                #RetailServiceCategory
          Table               #RetailServiceCategory
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
          EDTRelation         #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #ServiceCategory
            RelatedField        #ServiceCategory
            SourceEDT           #RetailServiceCategoryId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #ReturnReasonCode
        PROPERTIES
          Name                #ReturnReasonCode
          Table               #ReturnReasonCode
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #ReturnReasonCode
          Role                #ReturnReasonCode_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #ReturnReasonCodeId
            RelatedField        #ReasonCodeId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #SalesTable
        PROPERTIES
          Name                #SalesTable
          Table               #SalesTable
          RelatedTableCardinality   #ExactlyOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #SalesTable
          Role                #SalesTable_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE THISFIXED
          PROPERTIES
            Table               #PurchTable
            Field               #InterCompanyOrder
          ENDPROPERTIES
          
          REFERENCETYPE THISFIXED
          PROPERTIES
            Table               #PurchTable
            Field               #InterCompanyCompanyId
          ENDPROPERTIES
          
          REFERENCETYPE THISFIXED
          PROPERTIES
            Table               #PurchTable
            Field               #InterCompanySalesId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #SalesTableInterCompany
        PROPERTIES
          Name                #SalesTableInterCompany
          Table               #SalesTable
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #SalesTableInterCompany
          Role                #SalesTableInterCompany_Order
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE THISFIXED
          PROPERTIES
            Table               #PurchTable
            Field               #InterCompanyOrder
            Value               #1
          ENDPROPERTIES
          
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #InterCompanyCompanyId
            RelatedField        #dataAreaId
          ENDPROPERTIES
          
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #InterCompanySalesId
            RelatedField        #SalesId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #SourceDocumentHeader
        PROPERTIES
          Name                #SourceDocumentHeader
          Table               #SourceDocumentHeader
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #SourceDocumentHeader
          Role                #PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #SourceDocumentHeader
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #SourceDocumentLine
        PROPERTIES
          Name                #SourceDocumentLine
          Table               #SourceDocumentLine
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #SourceDocumentLine
          Role                #PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #SourceDocumentLine
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #TAMVendRebateGroup
        PROPERTIES
          Name                #TAMVendRebateGroup
          Table               #TAMVendRebateGroup
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #TAMVendRebateGroupId
            RelatedField        #VendRebateGroupId
            SourceEDT           #TAMVendRebateGroupId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #TaxGroupHeading
        PROPERTIES
          Name                #TaxGroupHeading
          Table               #TaxGroupHeading
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #TaxGroupHeading
          Role                #TaxGroupHeading_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #TaxGroup
            RelatedField        #TaxGroup
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #TransportationDocument
        PROPERTIES
          Name                #TransportationDocument
          Table               #TransportationDocument
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroOne
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #TransportationDocument
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #VendGroup
        PROPERTIES
          Name                #VendGroup
          Table               #VendGroup
          RelatedTableCardinality   #ExactlyOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #VendGroup
          Role                #VendGroup_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #VendGroup
            RelatedField        #VendGroup
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #VendLedger
        PROPERTIES
          Name                #VendLedger
          Table               #VendLedger
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #VendLedger
          Role                #VendLedger_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #PostingProfile
            RelatedField        #PostingProfile
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #VendLineDiscountGroup
        PROPERTIES
          Name                #VendLineDiscountGroup
          Table               #PriceDiscGroup
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #VendLineDiscountGroup
          Role                #PurchTable
          EDTRelation         #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #LineDisc
            RelatedField        #GroupId
            SourceEDT           #VendLineDiscCode
          ENDPROPERTIES
          
          REFERENCETYPE EXTERNFIXED
          PROPERTIES
            Value               #1
            Table               #PriceDiscGroup
            RelatedField        #Type
            SourceEDT           #VendLineDiscCode
          ENDPROPERTIES
          
          REFERENCETYPE EXTERNFIXED
          PROPERTIES
            Value               #2
            Table               #PriceDiscGroup
            RelatedField        #Module
            SourceEDT           #VendLineDiscCode
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #VendMarkupGroup
        PROPERTIES
          Name                #VendMarkupGroup
          Table               #MarkupGroup
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #VendMarkupGroup
          Role                #PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #MarkupGroup
            RelatedField        #GroupId
          ENDPROPERTIES
          
          REFERENCETYPE EXTERNFIXED
          PROPERTIES
            Value               #2
            Table               #MarkupGroup
            RelatedField        #Module
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #VendMultiLineDiscountGroup
        PROPERTIES
          Name                #VendMultiLineDiscountGroup
          Table               #PriceDiscGroup
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #VendMultiLineDiscountGroup
          Role                #PurchTable
          EDTRelation         #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #MultiLineDisc
            RelatedField        #GroupId
            SourceEDT           #VendMultiLineDiscCode
          ENDPROPERTIES
          
          REFERENCETYPE EXTERNFIXED
          PROPERTIES
            Value               #2
            Table               #PriceDiscGroup
            RelatedField        #Type
            SourceEDT           #VendMultiLineDiscCode
          ENDPROPERTIES
          
          REFERENCETYPE EXTERNFIXED
          PROPERTIES
            Value               #2
            Table               #PriceDiscGroup
            RelatedField        #Module
            SourceEDT           #VendMultiLineDiscCode
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #VendPaymModeSpec
        PROPERTIES
          Name                #VendPaymModeSpec
          Table               #VendPaymModeSpec
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #VendPaymModeSpec
          Role                #VendPaymModeSpec_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #PaymMode
            RelatedField        #PaymMode
          ENDPROPERTIES
          
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #PaymSpec
            RelatedField        #Specification
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #VendPaymModeTable
        PROPERTIES
          Name                #VendPaymModeTable
          Table               #VendPaymModeTable
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #PaymMode
            RelatedField        #PaymMode
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #VendPriceGroup
        PROPERTIES
          Name                #VendPriceGroup
          Table               #PriceDiscGroup
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #VendPriceGroup
          Role                #PurchTable
          EDTRelation         #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #PriceGroupId
            RelatedField        #GroupId
            SourceEDT           #VendPriceGroup
          ENDPROPERTIES
          
          REFERENCETYPE EXTERNFIXED
          PROPERTIES
            Table               #PriceDiscGroup
            RelatedField        #Type
            SourceEDT           #VendPriceGroup
          ENDPROPERTIES
          
          REFERENCETYPE EXTERNFIXED
          PROPERTIES
            Value               #2
            Table               #PriceDiscGroup
            RelatedField        #Module
            SourceEDT           #VendPriceGroup
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #VendTotalDiscountGroup
        PROPERTIES
          Name                #VendTotalDiscountGroup
          Table               #PriceDiscGroup
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #VendTotalDiscountGroup
          Role                #PurchTable
          EDTRelation         #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #EndDisc
            RelatedField        #GroupId
            SourceEDT           #VendEndDiscCode
          ENDPROPERTIES
          
          REFERENCETYPE EXTERNFIXED
          PROPERTIES
            Value               #3
            Table               #PriceDiscGroup
            RelatedField        #Type
            SourceEDT           #VendEndDiscCode
          ENDPROPERTIES
          
          REFERENCETYPE EXTERNFIXED
          PROPERTIES
            Value               #2
            Table               #PriceDiscGroup
            RelatedField        #Module
            SourceEDT           #VendEndDiscCode
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #WorkerPurchPlacer_FK
        PROPERTIES
          Name                #WorkerPurchPlacer_FK
          Table               #HcmWorker
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #HcmWorker
          Role                #HcmWorker_PurchTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #WorkerPurchPlacer
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
    ENDREFERENCES
    
    DELETEACTIONS
      #CFMPlannedPaymentTable(PurchTable)
      PROPERTIES
        Table               #CFMPlannedPaymentTable
        DeleteAction        #Cascade
        Relation            #PurchTable
      ENDPROPERTIES
      
      #RetailBuyersPushTable
      PROPERTIES
        Table               #RetailBuyersPushTable
        DeleteAction        #Cascade
      ENDPROPERTIES
      
      #TMSRouteTable(PurchTable)
      PROPERTIES
        Table               #TMSRouteTable
        DeleteAction        #Cascade
        Relation            #PurchTable
      ENDPROPERTIES
      
      #TMSApportionedValue(PurchTable)
      PROPERTIES
        Table               #TMSApportionedValue
        DeleteAction        #Cascade
        Relation            #PurchTable
      ENDPROPERTIES
      
      #TMSAppointment(PurchTable)
      PROPERTIES
        Table               #TMSAppointment
        DeleteAction        #Cascade
        Relation            #PurchTable
      ENDPROPERTIES
      
      #WHSPurchLine(PurchTable)
      PROPERTIES
        Table               #WHSPurchLine
        DeleteAction        #Cascade
        Relation            #PurchTable
      ENDPROPERTIES
      
      #MCROrderEventTable(PurchTable)
      PROPERTIES
        Table               #MCROrderEventTable
        DeleteAction        #Cascade
        Relation            #PurchTable
      ENDPROPERTIES
      
      #PurchTotalsSummary(PurchTable)
      PROPERTIES
        Table               #PurchTotalsSummary
        DeleteAction        #Cascade
        Relation            #PurchTable
      ENDPROPERTIES
      
      #TransportationDocument
      PROPERTIES
        Table               #TransportationDocument
        DeleteAction        #Cascade
      ENDPROPERTIES
      
      #PurchTable_W(PurchTable)
      PROPERTIES
        Table               #PurchTable_W
        DeleteAction        #Cascade
        Relation            #PurchTable
      ENDPROPERTIES
      
      #PurchTable_BR(PurchTable)
      PROPERTIES
        Table               #PurchTable_BR
        DeleteAction        #Cascade
        Relation            #PurchTable
      ENDPROPERTIES
      
      #PurchTable_RU(PurchTable)
      PROPERTIES
        Table               #PurchTable_RU
        DeleteAction        #Cascade
        Relation            #PurchTable
      ENDPROPERTIES
      
      #PurchTable_Intrastat(PurchTable)
      PROPERTIES
        Table               #PurchTable_Intrastat
        DeleteAction        #Cascade
        Relation            #PurchTable
      ENDPROPERTIES
      
      #BankLGGuaranteePurchaseOrder(PurchTable)
      PROPERTIES
        Table               #BankLGGuaranteePurchaseOrder
        DeleteAction        #Restricted
        Relation            #PurchTable
      ENDPROPERTIES
      
      #CustVendCreditInvoicingTable
      PROPERTIES
        Table               #CustVendCreditInvoicingTable
        DeleteAction        #Cascade
      ENDPROPERTIES
      
      #DocuRef
      PROPERTIES
        Table               #DocuRef
        DeleteAction        #Cascade
      ENDPROPERTIES
      
      #InterCompanyPurchSalesReference
      PROPERTIES
        Table               #InterCompanyPurchSalesReference
        DeleteAction        #Cascade
      ENDPROPERTIES
      
      #LedgerCov
      PROPERTIES
        Table               #LedgerCov
        DeleteAction        #Cascade
      ENDPROPERTIES
      
      #MarkupTrans
      PROPERTIES
        Table               #MarkupTrans
        DeleteAction        #Cascade
      ENDPROPERTIES
      
      #PrintMgmtDocInstance
      PROPERTIES
        Table               #PrintMgmtDocInstance
        DeleteAction        #Cascade
      ENDPROPERTIES
      
      #PurchPrepayTable
      PROPERTIES
        Table               #PurchPrepayTable
        DeleteAction        #Cascade
      ENDPROPERTIES
      
      #TaxWorkRegulation
      PROPERTIES
        Table               #TaxWorkRegulation
        DeleteAction        #Cascade
      ENDPROPERTIES
      
      #VendPaymSched
      PROPERTIES
        Table               #VendPaymSched
        DeleteAction        #Cascade
      ENDPROPERTIES
      
    ENDDELETEACTIONS
    
    METHODS
      SOURCE #accountClearing
        #// <GEERU>
        #public LedgerDimensionDefaultAccount accountClearing(VendPostingProfile _postingProfile_RU = '')
        #// </GEERU>
        #{
        #    // <GEERU>
        #    #ISOCountryRegionCodes
        #
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]) && _postingProfile_RU)
        #    {
        #        return VendLedgerAccounts::clearingLedgerDimension(this.InvoiceAccount,
        #                                                           _postingProfile_RU);
        #    }
        #    // </GEERU>
        #    return VendLedgerAccounts::clearingLedgerDimension(this.InvoiceAccount,
        #                                                       this.PostingProfile);
        #}
      ENDSOURCE
      SOURCE #accountVend
        #// <GEERU>
        #public LedgerDimensionDefaultAccount accountVend(VendPostingProfile _postingProfile_RU = '')
        #// </GEERU>
        #{
        #    // <GEERU>
        #    #ISOCountryRegionCodes
        #
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]) && _postingProfile_RU)
        #    {
        #        return VendLedgerAccounts::summaryLedgerDimension(this.InvoiceAccount,
        #                                                           _postingProfile_RU);
        #    }
        #    // </GEERU>
        #    return VendLedgerAccounts::summaryLedgerDimension(this.InvoiceAccount,
        #                                                       this.PostingProfile);
        #}
      ENDSOURCE
      SOURCE #agreementDocumentTitle_RU
        #/// <summary>
        #///     Gets the document title of the related agreement.
        #/// </summary>
        #/// <returns>
        #///     The agreement document title.
        #/// </returns>
        #public display AgreementDocumentTitle agreementDocumentTitle_RU()
        #{
        #    return PurchAgreementHeader::find(this.MatchingAgreement).DocumentTitle;
        #}
      ENDSOURCE
      SOURCE #agreementHeaderExt_RU
        #/// <summary>
        #///     Retrieves the record ID of the <c>AgreementHeaderExt_RU</c> that is attached to the current purchase order.
        #/// </summary>
        #/// <returns>
        #///     The agreement record ID.
        #/// </returns>
        #public AgreementHeaderExtRecId_RU agreementHeaderExt_RU()
        #{
        #    PurchTable_RU   purchTable_RU;
        #    #isoCountryRegionCodes
        #
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
        #    {
        #        purchTable_RU = this.purchTable_RU();
        #    }
        #
        #    return purchTable_RU.AgreementHeaderExt_RU;
        #}
      ENDSOURCE
      SOURCE #agreementIsLinked
        #//BP Deviation documented
        #display public PurchAgreementIsLinked agreementIsLinked()
        #{
        #    if (this.MatchingAgreement)
        #    {
        #        return NoYes::Yes;
        #    }
        #    return NoYes::No;
        #}
      ENDSOURCE
      SOURCE #allowAccountingDateChange
        #/// <summary>
        #/// Determine if it is allowed to change the accounting date.
        #/// </summary>
        #/// <returns>
        #/// true if it is allowed to change the accounting date; otherwise false.
        #/// </returns>
        #public boolean allowAccountingDateChange()
        #{
        #    boolean             ok = true;
        #
        #    if (!SourceDocumentHeaderProvider::allowAccountingDateChange(this.SourceDocumentHeader))
        #    {
        #        ok = checkFailed("@SYS344799");
        #    }
        #    return ok;
        #}
      ENDSOURCE
      SOURCE #allowCurrencyChange
        #/// <summary>
        #/// Determines whether a change to the <c>CurrencyCode</c> is enabled.
        #/// </summary>
        #/// <param name="_giveWarning">
        #/// A Boolean value that specifies whether to notify the user who a currency change is not enabled.
        #/// </param>
        #/// <returns>
        #/// false if there has been any invoicing activity, either posted or pending; otherwise, true.
        #/// </returns>
        #public boolean allowCurrencyChange(boolean _giveWarning = true)
        #{
        #    boolean             ok = true;
        #
        #    if (this.PurchStatus == PurchStatus::Invoiced || this.existInvoice() || this.isInvoiceMatched())
        #    {
        #        if(_giveWarning)
        #        {
        #            ok = checkFailed(strFmt("@SYS129442", this.PurchId));
        #        }
        #    }
        #
        #    return ok;
        #
        #}
      ENDSOURCE
      SOURCE #amountCur2MST
        #/// <summary>
        #/// Gets the <c>amountCur2MST</c> value for the current record in <c>PurchTable</c> table.
        #/// </summary>
        #/// <returns>
        #/// The <c>amountCur2MST</c> value of the current record.
        #/// </returns>
        #
        #// BP Deviation Documented
        #display AmountMST amountCur2MST()
        #{
        #    return Currency::amountCur2MST(this.amountRemainingExclTax(), this.CurrencyCode);
        #}
      ENDSOURCE
      SOURCE #amountDelivered
        #//BP deviation documented
        #server display AmountCur  amountDelivered()
        #{
        #    PurchLine       purchLine;
        #    AmountCur       amountCur = 0;
        #
        #    while select purchLine
        #        index hint PurchLineIdx
        #        where purchLine.PurchId         == this.PurchId
        #          && !purchLine.IsDeleted
        #    {
        #        amountCur += purchLine.calcLineAmountExclTax(purchLine.PurchQty - purchLine.RemainPurchPhysical);
        #    }
        #
        #    return amountCur;
        #}
      ENDSOURCE
      SOURCE #amountInvoiced
        #//BP Deviation documented
        #server display AmountCur amountInvoiced()
        #{
        #    VendInvoiceJour vendInvoiceJour;
        #
        #    select sum(InvoiceAmount) from vendInvoiceJour
        #              where vendInvoiceJour.PurchId == this.PurchId;
        #
        #    return vendInvoiceJour.InvoiceAmount;
        #}
      ENDSOURCE
      SOURCE #amountInvoicedExclTax
        #//BP deviation documented
        #server display AmountCur  amountInvoicedExclTax()
        #{
        #    PurchLine       purchLine;
        #    AmountCur       amountCur = 0;
        #
        #    while select purchLine
        #        where purchLine.PurchId         == this.PurchId
        #           && !purchLine.IsDeleted
        #    {
        #        amountCur += purchLine.calcLineAmountExclTax(purchLine.PurchQty - purchLine.RemainPurchFinancial);
        #    }
        #
        #    return amountCur;
        #}
        #
      ENDSOURCE
      SOURCE #amountOrderedNotInvoiced
        #//BP Deviation documented
        #server display AmountCur amountOrderedNotInvoiced()
        #{
        #    PurchLine       purchLine;
        #    AmountCur       ordered;
        #
        #    while select purchLine
        #        index PurchLineIdx
        #        where purchLine.PurchId         == this.PurchId
        #           && !purchLine.IsDeleted
        #    {
        #        ordered += purchLine.calcLineAmountExclTax(purchLine.RemainPurchPhysical+purchLine.RemainPurchFinancial);
        #    }
        #
        #    return ordered;
        #}
      ENDSOURCE
      SOURCE #amountOrderedNotInvoicedMST
        #/// <summary>
        #///     Purchase order balance converted into MST.
        #/// </summary>
        #/// <returns>
        #///     Returns the purchase order balance of not invoiced lines converted from the purchase orders currency into company currency.
        #/// </returns>
        #
        #//BP Deviation documented
        #server display AmountMST  amountOrderedNotInvoicedMST()
        #{
        #    return Currency::amountCur2MST(this.amountOrderedNotInvoiced(), this.CurrencyCode);
        #}
      ENDSOURCE
      SOURCE #amountRemainingExclTax
        #//BP deviation documented
        #server display AmountCur  amountRemainingExclTax()
        #{
        #    PurchLine       purchLine;
        #    AmountCur       amountCur = 0;
        #
        #    while select purchLine
        #        index hint PurchLineIdx
        #        where purchLine.PurchId         == this.PurchId
        #           && !purchLine.IsDeleted
        #    {
        #        amountCur += purchLine.calcLineAmountExclTax(purchLine.RemainPurchPhysical);
        #    }
        #
        #    return amountCur;
        #}
        #
      ENDSOURCE
      SOURCE #amountRemainingMST
        #//BP deviation documented
        #server display AmountMST amountRemainingMST()
        #{
        #    PurchLine       purchLine;
        #    AmountMST       amountMST = 0;
        #    AmountMST       lineAmountMSTExclTax, receivedInTotalPrice;
        #
        #    while select purchLine
        #        index hint PurchLineIdx
        #        where purchLine.PurchId         == this.PurchId
        #           && !purchLine.IsDeleted
        #    {
        #        lineAmountMSTExclTax = purchLine.lineAmountMSTExclTax();
        #        receivedInTotalPrice = purchLine.receivedInTotalPrice();
        #        amountMST += (lineAmountMSTExclTax-receivedInTotalPrice);
        #    }
        #
        #    return amountMST;
        #}
      ENDSOURCE
      SOURCE #associateWithPurchAgreement
        #/// <summary>
        #/// Associates the purchase order with the specified agreement order.
        #/// </summary>
        #/// <param name="_purchAgreementHeader">
        #/// The <c>PurchAgreementHeader</c> record with which to associate the purchase line.
        #/// </param>
        #void  associateWithPurchAgreement(PurchAgreementHeader _purchAgreementHeader)
        #{
        #    this.type().associateWithAgreementHeader(_purchAgreementHeader);
        #}
      ENDSOURCE
      SOURCE #autoApproveChangeRequest
        #/// <summary>
        #/// Submits and approves a change request for a purchase order.
        #/// </summary>
        #/// <param name="isPlanOrderRef">
        #/// The boolean to identify whether the PO reference to a planned order
        #/// </param>
        #server public void autoApproveChangeRequest(boolean isPlanOrderRef = false)
        #{
        #    VersioningPurchaseOrder versioningPurchaseOrder;
        #
        #    if (this.ChangeRequestRequired)
        #    {
        #        versioningPurchaseOrder = VersioningPurchaseOrder::newPurchaseOrder(this);
        #        versioningPurchaseOrder.submitChangeRequest();
        #        versioningPurchaseOrder.approveChangeRequest(isPlanOrderRef);
        #    }
        #}
      ENDSOURCE
      SOURCE #calcDue_RU
        ##ISOCountryRegionCodes
        #public void calcDue_RU()
        #{
        #    if (! this.PaymentSched && SysCountryRegionCode::isLegalEntityInCountryRegion([ #isoRU ]))
        #    {
        #        this.FixedDueDate = PaymTerm::find(this.Payment).due(this.DeliveryDate, this.paymDayId());
        #    }
        #}
      ENDSOURCE
      SOURCE #canApplyAllocationOrDistributionTemplate
        #/// <summary>
        #/// Determines whether to use an allocation or distribution template to create the distributons of the transaction header.
        #/// </summary>
        #/// <returns>
        #/// true if the distribution template can be used; otherwise, false.
        #/// </returns>
        #public boolean canApplyAllocationOrDistributionTemplate()
        #{
        #    boolean projMultipleFundingSources = false;
        #
        #    projMultipleFundingSources = (this.ProjId && ProjInvoiceTable::hasMultipleFundingSources(ProjTable::projInvoiceStatic(this.ProjId).ProjInvoiceProjId));
        #
        #    if (!this.isInvoiceMatched() && !(projMultipleFundingSources))
        #    {
        #        return true;
        #    }
        #
        #    return false;
        #}
      ENDSOURCE
      SOURCE #canAutoUpdatePurchOrder
        #/// <summary>
        #/// Indicates whether the table buffer is restricted by the change management functionality.
        #/// </summary>
        #/// <returns>
        #/// true if the buffer can be updated; otherwise, false.
        #/// </returns>
        #public boolean canAutoUpdatePurchOrder()
        #{
        #    return !this.ChangeRequestRequired;
        #}
      ENDSOURCE
      SOURCE #canConfirmationRequestBeUpdated
        #/// <summary>
        #///     Checks the current purchase order can be updated for Confirmation Request.
        #/// </summary>
        #/// <returns>
        #///     True if it is possible to update the purchase order for Confirmation Request.
        #/// </returns>
        #public boolean canConfirmationRequestBeUpdated()
        #{
        #    return this.type().canConfirmationRequestBeUpdated();
        #}
      ENDSOURCE
      SOURCE #canFinalize
        #/// <summary>
        #///    Determines if the purchase order can be finalized.
        #/// </summary>
        #/// <returns>
        #///    true if the the purchase order can be finalized; otherwise, false.
        #/// </returns>
        #public boolean canFinalize()
        #{
        #    return (this.PurchStatus == PurchStatus::Invoiced
        #        ||  this.PurchStatus == PurchStatus::Canceled)
        #        && this.DocumentState == VersioningDocumentState::Confirmed;
        #}
      ENDSOURCE
      SOURCE #canModifyPurchaseOrder
        #/// <summary>
        #/// Determines if modifications that have a financial impact are allowed to be made when the french feature is enabled.
        #/// </summary>
        #/// <returns>
        #/// true if there exists an accounting distribution state of complete or finalized for the document or the commitments feature is disabled; otherwise, false.
        #/// </returns>
        #/// <remarks>
        #/// This method should only be used by the French commitments feature, it is not intended for use by other scenarios.
        #/// </remarks>
        #public boolean canModifyPurchaseOrder()
        #{
        #    AccountingEvent accountingEvent;
        #
        #    if (PublicSectorUtils::isFrenchRegulatoryEnabled())
        #    {
        #        select firstonly RecId from accountingEvent
        #            where accountingEvent.SourceDocumentHeader  == this.SourceDocumentHeader
        #               && (accountingEvent.State    == AccountingEventState::Complete
        #                   || accountingEvent.State == AccountingEventState::Journalized);
        #    }
        #
        #    return accountingEvent.RecId == 0;
        #}
      ENDSOURCE
      SOURCE #canRenumberLineNumbers
        #/// <summary>
        #/// Determines whether the line number field can be edited.
        #/// </summary>
        #/// <returns>
        #/// true if the line number field can be edited; otherwise, false.
        #/// </returns>
        #public boolean canRenumberLineNumbers()
        #{
        #    return !this.isVersioned();
        #}
      ENDSOURCE
      SOURCE #canSubmitToWorkflow
        #/// <summary>
        #///     This method are testing if the current <c>PurchTable</c> can be submitted to workflow.
        #/// </summary>
        #/// <param name="workflowType">Workflow type</param>
        #/// <returns>
        #///     Returns true if the current record can be submitted to workflow, otherwise false.
        #/// </returns>
        #public boolean  canSubmitToWorkflow(str workflowType = '')
        #{
        #    boolean     canSubmit = false;
        #
        #    if (this.RecId && this.DocumentState  == VersioningDocumentState::Draft)
        #    {
        #        canSubmit = true;
        #    }
        #
        #    return canSubmit;
        #}
      ENDSOURCE
      SOURCE #checkAccount
        #boolean  checkAccount()
        #{
        #    boolean             ok = true;
        #    boolean             isVendReleaseDateExpired;
        #    InvoiceReleaseDate  vendReleaseDate;
        #    CustVendorBlocked   vendBlocked;
        #
        #    //initializations
        #    vendReleaseDate = utcDateTimeNull();
        #    isVendReleaseDateExpired = VendTable::isVendReleaseDateExpired(this.OrderAccount);
        #
        #    if (VendTable::blockedReleaseDate(this.OrderAccount) != utcDateTimeNull())
        #    {
        #        vendReleaseDate = DateTimeUtil::applyTimeZoneOffset(VendTable::blockedReleaseDate(this.OrderAccount), DateTimeUtil::getUserPreferredTimeZone());
        #    }
        #
        #    vendBlocked = VendTable::blocked(this.OrderAccount);
        #
        #    if ( vendBlocked == CustVendorBlocked::All)
        #    {
        #        if (!vendReleaseDate)
        #        {
        #            ok = checkFailed(strFmt("@SYS128411", this.OrderAccount, CustVendorBlocked::All));
        #        }
        #        else if (!isVendReleaseDateExpired)
        #        {
        #            ok = checkFailed(strFmt("@SYS128412", this.OrderAccount, CustVendorBlocked::All,DateTimeUtil::date(vendReleaseDate)));
        #        }
        #    }
        #
        #    // If the commitments feature is enabled, then we want to validate that the order account matches what is on the commitment.
        #    if (PublicSectorUtils::isFrenchRegulatoryEnabled() && !this.checkVendorOnAllPurchLineCommitments())
        #    {
        #        ok = checkFailed("@SPS2134");
        #        this.OrderAccount = this.orig().OrderAccount;
        #    }
        #    // <GIN>
        #    if (TaxParameters::isCustomsEnable_IN()
        #        && this.purchTable_W().CustomsImportOrder_IN == NoYes::Yes
        #        && this.PurchaseType          != PurchaseType::Purch)
        #    {
        #        return checkFailed("@GLS5766");
        #    }
        #    // </GIN>
        #
        #    if (ok && this.OrderAccount != this.orig().OrderAccount && this.checkPrepaymentPaymentRequestsAvailable())
        #    {
        #        ok = checkFailed(strFmt("@SYP4884112",  fieldStr(PurchTable, OrderAccount)));
        #    }
        #
        #    return ok;
        #}
      ENDSOURCE
      SOURCE #checkAccountingDateFiscalYear
        #/// <summary>
        #/// Determine if the change of the accounting data is allowed.
        #/// </summary>
        #/// <returns>
        #/// Returns true if a change of the accounting data is allowed; otherwise false.
        #/// </returns>
        #public boolean checkAccountingDateFiscalYear()
        #{
        #    return this.checkDateForFiscalYear(this.orig().AccountingDate);
        #}
      ENDSOURCE
      SOURCE #checkAgreement_RU
        #/// <summary>
        #///     Validates the <c>AgreementHeaderExt_RU</c> field for purchase order.
        #/// </summary>
        #/// <param name="_agreementHeaderExtRecId">
        #///     The record ID of the purchase agreement; optional.
        #/// </param>
        #/// <returns>
        #///     true if the <c>AgreementHeaderExt_RU</c> field is valid; otherwise, false.
        #/// </returns>
        #public boolean checkAgreement_RU(AgreementHeaderExtRecId_RU _agreementHeaderExtRecId = this.purchTable_RU().AgreementHeaderExt_RU)
        #{
        #    PurchAgreementHeader purchAgreementHeader;
        #    boolean ok = true;
        #
        #    if (PurchLine::exist(this.PurchId))
        #    {
        #        ok = checkFailed("@GLS220553");
        #    }
        #
        #    if (ok && _agreementHeaderExtRecId)
        #    {
        #        purchAgreementHeader = PurchAgreementHeaderExt_RU::purchAgreementHeader(_agreementHeaderExtRecId);
        #
        #        if (!purchAgreementHeader.canReleaseAgreement(this.DeliveryDate))
        #        {
        #            ok = checkFailed("@SYS103075");
        #        }
        #
        #        if (purchAgreementHeader.VendAccount != this.OrderAccount)
        #        {
        #            ok = checkFailed("@SYS334899");
        #        }
        #
        #        if (ok && this.InvoiceAccount && purchAgreementHeader.purchAgreementHeaderDefault().VendorInvoiceAccount != this.InvoiceAccount)
        #        {
        #            ok = checkFailed("@SYS334899");
        #        }
        #
        #        if (ok && this.purchTable_RU().AgreementHeaderExt_RU != this.orig().purchTable_RU().AgreementHeaderExt_RU  && this.checkPrepaymentPaymentRequestsAvailable())
        #        {
        #            ok = checkFailed(strFmt("@SYP4884112",  fieldStr(PurchTable_RU, AgreementHeaderExt_RU)));
        #        }
        #    }
        #
        #    return ok;
        #}
      ENDSOURCE
      SOURCE #checkCancel
        #/// <summary>
        #/// Checks whether the order can be canceled.
        #/// </summary>
        #/// <returns>
        #/// true if the order can be canceled; otherwise, false.
        #/// </returns>
        #public boolean checkCancel()
        #{
        #    return this.RecId && this.PurchStatus == PurchStatus::Backorder
        #        && (this.DocumentState != VersioningDocumentState::InReview
        #        && this.DocumentState != VersioningDocumentState::Finalized)
        #        && VersioningPurchaseOrder::checkHistoryExist(this);
        #}
      ENDSOURCE
      SOURCE #checkCashPayment
        #boolean  checkCashPayment()
        #{
        #    // <GEERU>
        #    #isoCountryRegionCodes
        #    // </GEERU>
        #
        #    // <GEERU>
        #    if (this.PaymentSched
        #        && (PaymTerm::isCashAccount(this.Payment)
        #            || (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU])
        #                && this.purchTable_W().EmplAccount_RU)))
        #    // </GEERU>
        #    {
        #        return checkFailed(strFmt("@SYS28733"));
        #    }
        #    return true;
        #}
      ENDSOURCE
      SOURCE #checkContactPerson
        #boolean checkContactPerson()
        #{
        #    ContactPerson   contactPerson;
        #
        #    if (this.ContactPersonId)
        #    {
        #        contactPerson = ContactPerson::find(this.ContactPersonId);
        #        if (contactPerson.ContactForParty != this.party())
        #        {
        #            return false;
        #        }
        #    }
        #    return true;
        #}
      ENDSOURCE
      SOURCE #checkCurrencyCode
        #client server boolean  checkCurrencyCode()
        #{
        #    boolean oK = true;
        #
        #    if (this)
        #    {
        #        if (this.CurrencyCode != this.orig().CurrencyCode &&
        #            PurchLine::existDifferentCurrency(this.PurchId,this.CurrencyCode))
        #        {
        #            warning("@SYS15290");
        #
        #            this.CurrencyCode = this.orig().CurrencyCode;
        #        }
        #
        #        if (this.CurrencyCode != this.orig().CurrencyCode &&
        #            MarkupTrans::existDifferentCurrency(this.TableId, this.RecId, this.CurrencyCode))
        #        {
        #            warning("@SYS24528");
        #
        #            this.CurrencyCode = this.orig().CurrencyCode;
        #        }
        #
        #        if (oK && this.CurrencyCode != this.orig().CurrencyCode && this.checkPrepaymentPaymentRequestsAvailable())
        #        {
        #            oK = checkFailed(strFmt("@SYP4884112",  fieldStr(PurchTable, CurrencyCode)));
        #        }
        #    }
        #
        #    return oK;
        #}
      ENDSOURCE
      SOURCE #checkDateForFiscalYear
        #/// <summary>
        #/// Determines if the change of the accounting date is allowed.
        #/// </summary>
        #/// <param name="_accountingDate">
        #/// The <c>AccountingDate</c> value to test if it is OK to change the accounting date.
        #/// </param>
        #/// <returns>
        #/// Returns true if a change of the accounting date is allowed; otherwise false.
        #/// </returns>
        #public boolean checkDateForFiscalYear(AccountingDate _accountingDate)
        #{
        #    boolean dateIsValid = true;
        #
        #    boolean isFiscalYearChanged()
        #    {
        #        return (this.AccountingDate != _accountingDate
        #                && (this.AccountingDate < FiscalCalendars::findFirstDayofYear(
        #                    CompanyInfo::fiscalCalendarRecId(),
        #                    _accountingDate)
        #                || this.AccountingDate > FiscalCalendars::findLastDayofYear(
        #                    CompanyInfo::fiscalCalendarRecId(),
        #                    _accountingDate)));
        #    }
        #
        #    if (isConfigurationkeyEnabled(configurationKeyNum(LedgerAdv2BudgetCtrl)))
        #    {
        #        if (isFiscalYearChanged())
        #        {
        #            dateIsValid = dateIsValid && !SourceDocumentHeaderProvider::isJournalized(this.SourceDocumentHeader);
        #            dateIsValid = dateIsValid && !SourceDocumentHeaderProvider::hasBudgetReservations(this.SourceDocumentHeader);
        #        }
        #    }
        #
        #    return dateIsValid;
        #}
      ENDSOURCE
      SOURCE #checkDelete
        #boolean checkDelete()
        #{
        #    return this.type().checkDelete();
        #}
        #
      ENDSOURCE
      SOURCE #checkFullyDistributedAndQualified
        #/// <summary>
        #/// Checks if all purchase order lines are fully distributed and fully qualified.
        #/// </summary>
        #/// <param name="_caller">
        #/// The calling source document processor caller.
        #/// </param>
        #/// <param name="_user">
        #/// The user that submitted the source document implementation for processing; optional.
        #/// </param>
        #/// <returns>
        #/// true if all purchase order lines are fully distributed and qualified; otherwise, false.
        #/// </returns>
        #server boolean checkFullyDistributedAndQualified(
        #    SourceDocumentProcessorCaller           _caller = null,
        #    UserId                                  _user = curUserId()
        #    )
        #{
        #    SourceDocumentHeader    sourceDocumentHeader;
        #    SourceDocumentLine      sourceDocumentLine;
        #
        #    // Make sure all lines are fully distributed - Completed and finalized lines will not be changed
        #    sourceDocumentHeader = SourceDocumentHeader::find(this.SourceDocumentHeader);
        #
        #    // Cache max accounting distribution numbers to avoid having to look up each line individually during submit
        #    AccountingDistributionProcessor::cacheAccountingDistNumbersForHeader(sourceDocumentHeader);
        #
        #    if (sourceDocumentHeader)
        #    {
        #        while select sourceDocumentLine
        #            where sourceDocumentLine.SourceDocumentHeader == sourceDocumentHeader.RecId
        #                && sourceDocumentLine.ParentSourceDocumentLine == 0
        #                && (sourceDocumentLine.AccountingStatus == SourceDocumentLineAccountingStatus::Draft
        #                    || sourceDocumentLine.AccountingStatus == SourceDocumentLineAccountingStatus::PartlyDistributed)
        #        {
        #            SourceDocumentLineProcessor::submitSourceDocumentLine(
        #                sourceDocumentLine,
        #                false,
        #                SourceDocumentLineAccountingStatus::FullyDistributed,
        #                _caller,
        #                _user);
        #        }
        #    }
        #
        #    return SourceDocumentProvider::areSourceDocAccDistAccountValid(
        #        SourceDocumentHeader::find(this.SourceDocumentHeader), true, true);
        #}
        #
      ENDSOURCE
      SOURCE #checkIfHeaderMiscChargesItems
        #/// <summary>
        #/// Retrieves the warning icon the of the header miscellaneous charges of a debit or credit type are
        #/// equal to the item and they have not been allocated to lines
        #/// </summary>
        #/// <returns>
        #/// The warning icon of the header miscellaneous charges of debit or credit type are equal to the item
        #/// and they have not been allocated to lines; otherwise, null.
        #/// </returns>
        #//BP Deviation documented
        #display ImageRes checkIfHeaderMiscChargesItems()
        #{
        #    #resAppl
        #    ImageRes icon;
        #
        #    if(Markup::hasMarkupTypeItem(this))
        #    {
        #        icon = #ImageWarning;
        #    }
        #
        #    return  icon;
        #}
        #
        #
      ENDSOURCE
      SOURCE #checkIfUpdate
        #/// <summary>
        #///    Determines if the various posting updates are allowed for the order.
        #/// </summary>
        #/// <param name = "_packedCheckIfUpdateContract">
        #///     Specifies which of the posting update allowance values for the order to get; optional.
        #/// </param>
        #/// <returns>
        #///    A packed <c>PurchTableCanBeUpdatedContract</c> class with the values of whether the order can do a posting of a given type.
        #/// </returns>
        #server container checkIfUpdate(container _packedCheckIfUpdateContract = conNull())
        #{
        #    return this.type().checkIfUpdate(_packedCheckIfUpdateContract);
        #}
        #
        #
      ENDSOURCE
      SOURCE #checkIfUpdate_IN
        #/// <summary>
        #/// Determines if the various posting updates are allowed for the order.
        #/// </summary>
        #/// <returns>
        #/// A packed <c>PurchTableCanBeUpdatedContract</c> class with the values of whether the order can do a posting of a given type.
        #/// </returns>
        #// <GIN>
        #public container checkIfUpdate_IN()
        #{
        #    return this.type().checkIfUpdate_IN();
        #}
        #// </GIN>
      ENDSOURCE
      SOURCE #checkIntrastatFulfillDate_HU
        #/// <summary>
        #/// Validates Intrastat fulfillment date.
        #/// </summary>
        #/// <returns>
        #/// ture if Intrastat fulfillment date is valid; otherwise, false.
        #/// </returns>
        #public boolean checkIntrastatFulfillDate_HU()
        #{
        #    VendTable                       vendTable;
        #    LogisticsAddressCountryRegionId country;
        #    IntrastatParameters             intrastatParameters;
        #
        #
        #    vendTable           = VendTable::find(this.OrderAccount);
        #    country             = vendTable.invoiceAddress().CountryRegionId;
        #    intrastatParameters = IntrastatParameters::find();
        #
        #    if (! country)
        #    {
        #        return checkFailed(strFmt("@GLS107637"));
        #    }
        #
        #    if (! IntrastatCountryRegionParameters::isInEU(country))
        #    {
        #        return true;
        #    }
        #
        #    if (intrastatParameters.IntrastatFulfillmentDateEmptyWarning_HU && ! this.IntrastatFulfillmentDate_HU)
        #    {
        #        return checkFailed(strFmt("@SYS4080009", fieldPName(PurchTable, IntrastatFulfillmentDate_HU)));
        #    }
        #
        #    return true;
        #}
      ENDSOURCE
      SOURCE #checkInventOwner_RU
        #boolean checkInventOwner_RU()
        #{
        #    InventTransOrigin   inventTransOrigin;
        #    InventDim           inventDim;
        #    boolean             ok = true;
        #    PurchTable          purchTableOrig = this.orig();
        #    PurchTable_RU       purchTable_RU = this.purchTable_RU();
        #
        #    if (purchTableOrig &&
        #        (this.OrderAccount          != purchTableOrig.OrderAccount  ||
        #         purchTable_RU.AgreementHeaderExt_RU != purchTable_RU.orig().AgreementHeaderExt_RU))
        #    {
        #        select firstonly RecId from inventTransOrigin
        #            where inventTransOrigin.ReferenceCategory == InventTransType::Purch
        #               && inventTransOrigin.ReferenceId       == this.PurchId
        #        join TableId from inventDim
        #            where inventDim.InventDimId     == inventTransOrigin.ItemInventDimId
        #               && inventDim.InventOwnerId_RU;
        #
        #        if (inventTransOrigin.RecId)
        #        {
        #            ok = checkFailed(strFmt("@GLS115695", fieldId2pname(tableNum(InventDim), fieldNum(InventDim, InventOwnerId_RU))));
        #        }
        #    }
        #
        #    return ok;
        #}
        #
      ENDSOURCE
      SOURCE #checkInventProfile_RU
        #boolean checkInventProfile_RU(boolean _checkProfileId = false)
        #{
        #    PurchTable          purchTableTmp;
        #    PurchTable_RU       purchTableTmp_RU;
        #    PurchLine           purchLine;
        #    InventDim           inventDim;
        #    InventProfile_RU    inventProfile;
        #    boolean             ok = true;
        #    PurchTable_RU       purchTable_RU = this.purchTable_RU();
        #
        #    purchTableTmp.data(this);
        #    purchTableTmp_RU = purchTableTmp.purchTable_RU();
        #
        #    purchTable_RU.setInventProfileId_RU();
        #    this.packPurchTable_RU(purchTable_RU);
        #
        #    if (purchTable_RU.InventProfileType_RU != InventProfileType_RU::NotSpecified)
        #    {
        #        select firstonly purchLine
        #            where purchLine.PurchId                 == this.PurchId
        #        join inventDim
        #            where inventDim.InventDimId             == purchLine.InventDimId
        #        join inventProfile
        #            where inventProfile.InventProfileId     == inventDim.InventProfileId_RU
        #               && inventProfile.InventProfileType   != purchTable_RU.InventProfileType_RU;
        #
        #        if (purchLine)
        #        {
        #            ok = checkFailed(strFmt("@GLS113728",
        #                                    inventDim.InventProfileId_RU,
        #                                    purchTable_RU.InventProfileType_RU));
        #        }
        #
        #        if (purchTable_RU.InventProfileType_RU != InventProfileType_RU::General)
        #        {
        #            select firstonly RecId from purchLine
        #                where purchLine.PurchId == this.PurchId &&
        #                     (purchLine.StockedProduct == NoYes::No ||
        #                     (purchLine.ProcurementCategory         &&
        #                     !purchLine.ItemId));
        #
        #            if (purchLine.RecId)
        #            {
        #                ok = checkFailed(
        #                    strFmt("@GLS220092",
        #                        purchTable_RU.InventProfileType_RU));
        #            }
        #        }
        #        else if (InventProfile_RU::find(purchTableTmp_RU.InventProfileId_RU).StockInTransit ==StockInTransit_RU::BoughtInTransit)
        #        {
        #            select firstonly RecId from purchLine
        #                where purchLine.PurchId == this.PurchId     &&
        #                     (purchLine.StockedProduct == NoYes::No ||
        #                     (purchLine.ProcurementCategory         &&
        #                     !purchLine.ItemId));
        #
        #            if (purchLine.RecId)
        #            {
        #                ok = checkFailed(
        #                    strFmt("@GLS220091",
        #                        purchTable_RU.InventProfileId_RU));
        #            }
        #        }
        #    }
        #
        #    if (! _checkProfileId &&
        #        PurchTable2LineParameters::find(
        #            PurchTable::fieldIdToInternalFieldId_W(
        #                fieldNum(PurchTable_RU, InventProfileId_RU),
        #                tableNum(PurchTable_RU))).Table2LineUpdate == TradeTable2LineUpdate::Never)
        #    {
        #        // force check for consistent
        #        _checkProfileId = true;
        #    }
        #
        #    if (_checkProfileId &&  purchTableTmp_RU.InventProfileId_RU)
        #    {
        #        select firstonly RecId from purchLine
        #            where purchLine.PurchId             == this.PurchId
        #        join InventProfileId_RU from inventDim
        #            where inventDim.InventDimId         == purchLine.InventDimId
        #        join TableId from inventProfile
        #            where inventProfile.InventProfileId == inventDim.InventProfileId_RU
        #               && inventProfile.InventProfileId != purchTableTmp_RU.InventProfileId_RU;
        #
        #        if (purchLine.RecId)
        #        {
        #            ok = checkFailed(strFmt("@GLS113727",
        #                                    inventDim.InventProfileId_RU,
        #                                    purchTableTmp_RU.InventProfileId_RU));
        #        }
        #    }
        #
        #    return ok;
        #}
      ENDSOURCE
      SOURCE #checkInvoiceAccount
        #public boolean checkInvoiceAccount()
        #{
        #    boolean ok = true;
        #
        #    if (this && this.InvoiceAccount != this.orig().InvoiceAccount && this.checkPrepaymentPaymentRequestsAvailable())
        #    {
        #        ok = checkFailed(strFmt("@SYP4884112",  fieldStr(PurchTable, InvoiceAccount)));
        #    }
        #
        #    return ok;
        #}
      ENDSOURCE
      SOURCE #checkMarkupTrans
        #server boolean checkMarkupTrans(boolean _warningOnly = true)
        #{
        #    return MarkupTrans::checkMarkupTrans(this.TableId, this.RecId, _warningOnly);
        #}
        #
      ENDSOURCE
      SOURCE #checkPayment
        #boolean checkPayment()
        #{
        #    #ISOCountryRegionCodes
        #
        #    if (this.PaymentSched && this.FixedDueDate)
        #    {
        #        return checkFailed("@SYS69828");
        #    }
        #
        #    if (this.Payment                                                    &&
        #        !this.DeliveryDate                                              &&
        #        SysCountryRegionCode::isLegalEntityInCountryRegion([#isoES])    &&
        #        this.payment().UseDeliveryDateForDueDate_ES)
        #    {
        #        return checkFailed(strFmt("@SYS4000477", this.Payment));
        #    }
        #
        #    return true;
        #}
        #
      ENDSOURCE
      SOURCE #checkPrepaymentPaymentRequestsAvailable
        #/// <summary>
        #/// Checks if purchase order has prepayment payment requests,  while configuration key is on
        #/// </summary>
        #/// <returns>
        #/// true if prepayment payment requests exist; otherwise false
        #/// </returns>
        #private boolean checkPrepaymentPaymentRequestsAvailable()
        #{
        #    if (this.RecId && CFMParameters::isPaymentRequestsEnabled())
        #    {
        #        return CFMPaymentRequestTable::existByHeader(CFMPaymentRequestSourceType::PlannedPayment, this.RecId);
        #    }
        #    else
        #    {
        #        return false;
        #    }
        #}
      ENDSOURCE
      SOURCE #checkUpdate
        #boolean  checkUpdate(boolean  useWarning        = true,
        #                     boolean _interCompanyCheck = true)
        #{
        #    boolean     ok = (this ? true : false);
        #    SalesTable  salesTable;
        #
        #    if (this.ChangeRequestRequired && this.DocumentState >= VersioningDocumentState::Approved)
        #    {
        #        return false;
        #    }
        #
        #    if (this.isFinalized())
        #    {
        #        return false;
        #    }
        #
        #    if (this  &&  this.PurchStatus == PurchStatus::Invoiced)
        #    {
        #        switch (PurchParameters::find().AccesLevelInvoiced)
        #        {
        #
        #
        #
        #            case SalesPurchAccesLevel::None    :   ok = true;
        #                                                    break;
        #
        #            case SalesPurchAccesLevel::Warning  :   if (useWarning && Box::yesNo("@SYS27044",DialogButton::Yes) != DialogButton::Yes)
        #                                                        ok = false;
        #                                                    break;
        #
        #            case SalesPurchAccesLevel::Locked   :   ok = false;
        #                                                    break;
        #        }
        #    }
        #
        #    if (_interCompanyCheck)
        #    {
        #        if (!ok
        #        &&  this.isInterCompanyOrder())
        #        {
        #            warning("@SYS106306");
        #        }
        #
        #        if (ok
        #        &&  this.SkipUpdate != InterCompanySkipUpdate::InterCompany
        #        &&  this.SkipUpdate != InterCompanySkipUpdate::Both
        #        &&  this.isInterCompanyOrder())
        #        {
        #            changecompany(this.InterCompanyCompanyId)
        #            {
        #                salesTable = null;
        #                salesTable = SalesTable::find(this.InterCompanySalesId);
        #                if (salesTable)
        #                {
        #                    salesTable.SkipUpdate = InterCompanySkipUpdate::InterCompany;
        #                    ok = SalesTableType::construct(salesTable).checkUpdate(false,_interCompanyCheck);
        #                    if (!ok)
        #                    {
        #                        error("@SYS106306");
        #                    }
        #                }
        #            }
        #        }
        #
        #        if (ok
        #        &&  this.SkipUpdate != InterCompanySkipUpdate::Internal
        #        &&  this.SkipUpdate != InterCompanySkipUpdate::Both
        #        &&  this.isInterCompanyOrder())
        #        {
        #            salesTable = null;
        #            salesTable = SalesTable::find(this.InterCompanyOriginalSalesId);
        #            if (salesTable && salesTable.isInterCompanyOrder())
        #            {
        #                salesTable.SkipUpdate = InterCompanySkipUpdate::Internal;
        #                ok = SalesTableType::construct(salesTable).checkUpdate(false,_interCompanyCheck);
        #                if (!ok)
        #                {
        #                    error("@SYS106306");
        #                }
        #            }
        #        }
        #    }
        #
        #    return ok;
        #}
        #
      ENDSOURCE
      SOURCE #checkVendorOnAllPurchLineCommitments
        #/// <summary>
        #/// Validates that there are no purchase order lines associated with a commitment that has a different vendor than the current order account.
        #/// </summary>
        #/// <returns>
        #/// true if there are no purchase order lines for the current purchase order that are associated with a
        #/// commitment that has a different vendor account than the current order account; otherwise, false.
        #/// </returns>
        #public boolean checkVendorOnAllPurchLineCommitments()
        #{
        #    PurchLine                   purchLine;
        #    PurchCommitmentLine_PSN     purchCommitmentLine_PSN;
        #    PurchCommitmentHeader_PSN   purchCommitmentHeader_PSN;
        #
        #    if (PublicSectorUtils::isFrenchRegulatoryEnabled())
        #    {
        #        select firstonly RecId from purchLine
        #            where purchLine.PurchId == this.PurchId
        #        join firstonly RecId from purchCommitmentLine_PSN
        #            where purchCommitmentLine_PSN.RecId == purchLine.PurchCommitmentLine_PSN
        #        join firstonly RecId from purchCommitmentHeader_PSN
        #            where purchCommitmentHeader_PSN.RecId   == purchCommitmentLine_PSN.PurchCommitmentHeader_PSN
        #               && purchCommitmentHeader_PSN.VendorAccount != ''
        #               && purchCommitmentHeader_PSN.VendorAccount != this.OrderAccount;
        #
        #        return purchCommitmentHeader_PSN.RecId == 0;
        #    }
        #
        #    return true;
        #}
      ENDSOURCE
      SOURCE #clearAddressReference
        #public void clearAddressReference()
        #{
        #    this.AddressRefRecId    = 0;
        #    this.AddressRefTableId  = 0;
        #}
      ENDSOURCE
      SOURCE #clearingPeriod
        #//BP Deviation documented
        #display ClearingPeriod clearingPeriod()
        #{
        #    return this.payer().clearingPeriod();
        #}
      ENDSOURCE
      SOURCE #companyInfo
        #/// <summary>
        #/// Retrieves the <c>CompanyInfo</c> record associated with the current record.
        #/// </summary>
        #/// <returns>
        #/// The <c>CompanyInfo</c> record.
        #/// </returns>
        #public CompanyInfo companyInfo()
        #{
        #    return CompanyInfo::findDataArea(this.company());
        #}
      ENDSOURCE
      SOURCE #contactPerson
        #ContactPerson contactPerson(boolean update = false)
        #{
        #    return ContactPerson::find(this.ContactPersonId, update);
        #}
      ENDSOURCE
      SOURCE #contactPersonName
        #//BP Deviation documented
        #display ContactPersonName  contactPersonName()
        #{
        #    return ContactPerson::name(this.ContactPersonId);
        #}
      ENDSOURCE
      SOURCE #contactPersonPhone
        #/// <summary>
        #///    Gets the phone for the contact person.
        #/// </summary>
        #/// <returns>
        #///    The phone for the contact person.
        #/// </returns>
        #public display ContactPersonPhone contactPersonPhone()
        #{
        #    return this.contactPerson().phone();
        #}
      ENDSOURCE
      SOURCE #convertCurrencyCode
        #server void convertCurrencyCode(CurrencyCode currencyCode, TradeCurencyConversion tradeCurrencyConversion = TradeCurencyConversion::ExchRate, TransDate _exchRateDate = systemDateGet())
        #{
        #    PurchLine                   purchLine;
        #    MarkupTrans                 markupTrans;
        #    // <GIN>
        #    #isoCountryRegionCodes
        #    boolean                     isCountryRegionIN = SysCountryRegionCode::isLegalEntityInCountryRegion([#isoIN]);
        #    // </GIN>
        #
        #    ttsbegin;
        #
        #    VersioningPurchaseOrder::newPurchaseOrder(this,true).change(this,this.orig());
        #
        #    while select forupdate purchLine
        #        where purchLine.PurchId         == this.PurchId
        #           && !purchLine.IsDeleted
        #    {
        #        purchLine.convertCurrencyCode(currencyCode, tradeCurrencyConversion,_exchRateDate);
        #        purchLine.IsModified = NoYes::Yes;
        #        purchLine.doUpdate();
        #        // <GIN>
        #        if (isCountryRegionIN)
        #        {
        #            purchLine.SysExtensionSerializerMap::postUpdate();
        #        }
        #        // </GIN>
        #
        #        if(purchLine.MatchingAgreementLine && !AgreementLine::find(purchLine.MatchingAgreementLine).isLinkValid(purchLine,false))
        #        {
        #            purchLine.unLinkAgreementLine();
        #            info(strFmt("@SYS306907", this.PurchId, purchLine.ItemId));
        #        }
        #
        #        if(purchLine.ProjId && (purchLine.RemainPurchFinancial+purchLine.RemainPurchPhysical)!=0) //Committed cost updated since vender conrency changes
        #        {
        #            this.projCostControlUpdate(purchLine,ProjCommittedCostUpdateAction::UpdateReverse);
        #        }
        #    }
        #
        #    while select forupdate markupTrans
        #          where markupTrans.TransTableId  == this.TableId
        #            &&  markupTrans.TransRecId    == this.RecId
        #            &&  !markupTrans.IsDeleted
        #    {
        #        markupTrans.convertCurrencyCode(currencyCode,_exchRateDate);
        #        markupTrans.IsModified = NoYes::Yes;
        #        markupTrans.doUpdate();
        #    }
        #
        #    if (PurchPrepayTable::exist(this.PurchId))
        #    {
        #        PurchPrepayTable::convertCurrencyCode(this.PurchId, currencyCode, _exchRateDate);
        #    }
        #
        #    VendPaymSched::deleteVendPaymSched(this.TableId, this.RecId);
        #
        #    this.CurrencyCode = currencyCode;
        #    ttscommit;
        #}
      ENDSOURCE
      SOURCE #copyAddressToLine
        #server void  copyAddressToLine(DialogButton                 _copyAddress,
        #                               LogisticsPostalAddressRecId  _originalDeliveryPostalAddress)
        #{
        #    PurchLine  purchLine;
        #    // <GIN>
        #    PurchLine_IN                    purchLineIN;
        #    LogisticsLocationRecId          companyLocationRecId;
        #    TaxInformationRefRecId_IN       taxInformationRefRecId;
        #    // </GIN>
        #
        #    if (_copyAddress == DialogButton::Cancel)
        #    {
        #        return;
        #    }
        #
        #    ttsbegin;
        #    // <GBR>
        #    if (BrazilParameters::isEnabled())
        #    {
        #        while select forupdate purchLine
        #            where purchLine.PurchId         == this.PurchId
        #               && !purchLine.IsInvoiceMatched
        #               && !purchLine.IsDeleted
        #               &&
        #                (_copyAddress                     == DialogButton::YesToAll ||
        #                 purchLine.DeliveryPostalAddress  == _originalDeliveryPostalAddress)
        #               &&
        #                (!purchLine.mcrDropShipment                      ||
        #                (purchLine.PurchStatus != PurchStatus::Invoiced &&
        #                 purchLine.PurchStatus != PurchStatus::Received))
        #
        #        {
        #            purchLine.setAddressFromPurchTable(this);
        #            purchLine.onDeliveryPostalAddressChange_BR();
        #            purchLine.write();
        #        }
        #    }
        #    else
        #    {
        #    // </GBR>
        #        // <GIN>
        #        if(TaxParameters::checkTaxParameters_IN())
        #        {
        #            companyLocationRecId   = LogisticsPostalAddress::getLocation(this.DeliveryPostalAddress);
        #            taxInformationRefRecId = TaxInformation_IN::findDefaultbyLocation(companyLocationRecId).RecId;
        #
        #            update_recordset purchLineIN
        #                setting CompanyLocation_IN = companyLocationRecId,
        #                        TaxInformation_IN  = taxInformationRefRecId
        #                join purchLine
        #                    where purchLine.PurchId == this.PurchId
        #                        && !purchLine.IsInvoiceMatched
        #                        && !purchLine.IsDeleted
        #                        && purchLineIN.PurchLine == purchLine.RecId
        #                        && (_copyAddress == DialogButton::YesToAll
        #                            || purchLine.DeliveryPostalAddress == _originalDeliveryPostalAddress);
        #        }
        #        // </GIN>
        #
        #        purchLine.skipDataMethods(true);
        #        update_recordset purchLine
        #            setting DeliveryPostalAddress = this.DeliveryPostalAddress,
        #                    DeliveryName          = this.DeliveryName,
        #                    AddressRefRecId       = this.AddressRefRecId,
        #                    AddressRefTableId     = this.AddressRefTableId
        #            where purchLine.PurchId         == this.PurchId
        #               && !purchLine.IsInvoiceMatched
        #               && !purchLine.IsDeleted
        #               &&
        #                (_copyAddress                     == DialogButton::YesToAll ||
        #                 purchLine.DeliveryPostalAddress  == _originalDeliveryPostalAddress);
        #    // <GBR>
        #    }
        #    // </GBR>
        #
        #    ttscommit;
        #}
      ENDSOURCE
      SOURCE #copyDimension
        #/// <summary>
        #/// Retrieves a dimension set that can be applied to the <c>defaultDimension</c> field on this table.
        #/// </summary>
        #/// <param name="_defaultDimension">
        #/// A dimension set to apply to the <c>defaultDimension</c> field on this table.
        #/// </param>
        #/// <param name="_dimensionCopy">
        #/// A <c>dimensionCopy</c> object that was instantiated with the current buffer; optional.
        #/// </param>
        #/// <returns>
        #/// A dimension set that can be applied to the <c>defaultDimension</c> field on this table.
        #/// </returns>
        #/// <remarks>
        #/// This method makes sure that potential linked dimensions are not overwritten.
        #/// </remarks>
        #
        #public
        #server
        #DimensionDefault copyDimension(
        #    DimensionDefault _defaultDimension,
        #    DimensionCopy    _dimensionCopy = DimensionCopy::newFromTable(this, CompanyInfo::findDataArea(curext()).RecId)
        #    )
        #{
        #    return _dimensionCopy.copy(_defaultDimension);
        #}
      ENDSOURCE
      SOURCE #copyFromPurchTableHistory
        #/// <summary>
        #/// Copies data from a <c>PurchTableHistory</c> record.
        #/// </summary>
        #/// <param name="_purchTableHistory">
        #/// A <c>PurchTableHistory</c> record to copy data from.
        #/// </param>
        #void copyFromPurchTableHistory(PurchTableHistory _purchTableHistory)
        #{
        #    // <GEEU>
        #    #ISOCountryRegionCodes
        #    // </GEEU>
        #
        #    this.DlvTerm                = _purchTableHistory.DlvTerm;
        #    this.DlvMode                = _purchTableHistory.DlvMode;
        #    this.LanguageId             = _purchTableHistory.LanguageId;
        #    this.Payment                = _purchTableHistory.Payment;
        #    this.CashDisc               = _purchTableHistory.CashDisc;
        #    this.CurrencyCode           = _purchTableHistory.CurrencyCode;
        #    this.DefaultDimension       = this.copyDimension(_purchTableHistory.DefaultDimension);
        #    this.InclTax                = _purchTableHistory.InclTax;
        #    this.AccountingDistributionTemplate   = _purchTableHistory.AccountingDistributionTemplate;
        #
        #    // <GEEU>
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoLT, #isoLV]))
        #    {
        #        TransportationDocument::copy(_purchTableHistory, this);
        #    }
        #    // </GEEU>
        #}
      ENDSOURCE
      SOURCE #copyPaymentSched
        #server void  copyPaymentSched(VendInvoiceJour vendInvoiceJour)
        #{
        #    VendPaymSched       vendorPaymSched;
        #    VendPaymSchedLine   vendPaymSchedLine;
        #
        #    VendPaymSched       newVendPaymSched;
        #    VendPaymSchedLine   newVendPaymSchedLine;
        #
        #    ttsbegin;
        #
        #    select firstonly vendorPaymSched
        #        where vendorPaymSched.ExtTableId    == this.TableId &&
        #              vendorPaymSched.ExtRecId      == this.RecId;
        #
        #    if (vendorPaymSched)
        #    {
        #        newVendPaymSched            = vendorPaymSched.data();
        #        newVendPaymSched.ExtTableId = vendInvoiceJour.TableId;
        #        newVendPaymSched.ExtRecId   = vendInvoiceJour.RecId;
        #        newVendPaymSched.insert();
        #
        #        while select vendPaymSchedLine
        #            where vendPaymSchedLine.FatherRecID == vendorPaymSched.RecId
        #            &&   !vendPaymSchedLine.IsDeleted
        #        {
        #            newVendPaymSchedLine                = vendPaymSchedLine.data();
        #            newVendPaymSchedLine.FatherRecID    = newVendPaymSched.RecId;
        #            newVendPaymSchedLine.insert();
        #        }
        #    }
        #    ttscommit;
        #}
      ENDSOURCE
      SOURCE #createDate
        #/// <summary>
        #/// Retrieves the creation date of the current records.
        #/// </summary>
        #/// <returns>
        #/// The creation date of the current records.
        #/// </returns>
        #/// <remarks>
        #/// This method returns only the date. It is used in fact boxes.
        #/// </remarks>
        #//BP Deviation documented
        #display CreationDate  createDate()
        #{
        #    return DateTimeUtil::date(this.CreatedDateTime);
        #}
      ENDSOURCE
      SOURCE #createInventTrans_BR
        #/// <summary>
        #/// Returns if the invoice will create inventory transactions based on <c>SalesPurchOperationTye_BR</c> configuration.
        #/// </summary>
        #/// <returns>
        #/// Returns true is operation type is not set on <c>PurchTable</c> or the operation type is configured to inventory transactions.
        #/// </returns>
        #public boolean createInventTrans_BR()
        #{
        #    PurchTable_BR   purchTable_BR = this.purchTable_BR();
        #
        #    return BrazilParameters::isEnabled() == false
        #        || purchTable_BR.SalesPurchOperationType_BR == false
        #        || SalesPurchOperationType_BR::find(purchTable_BR.SalesPurchOperationType_BR).CreateInventTrans;
        #}
        #
      ENDSOURCE
      SOURCE #createMarkupTrans
        #server void  createMarkupTrans(
        #    boolean _deleteExistingMarkupTrans = true
        #)
        #{;
        #    Markup::insertMarkupTrans(HeadingLine::Heading,
        #                             MarkupModuleType::Vend,
        #                             this,
        #                             this.OrderAccount,
        #                             this.MarkupGroup,
        #                             this.CurrencyCode,
        #                             this.LanguageId,
        #                             '',
        #                             this.MarkupGroup
        #                            ,false
        #                            ,_deleteExistingMarkupTrans
        #                            );
        #}
      ENDSOURCE
      SOURCE #createOneTimeAccount
        #server void  createOneTimeAccount()
        #{
        #    boolean resetTmpVendorName;
        #
        #    if (!this.PurchName)
        #    {//PurchName is used as vendor name and is mandatory.
        #     //The vendor name is updated again in transferToOnetimeVendor which is called as soon as the purchase order is being created.
        #        this.PurchName = "@SYS130384";
        #        resetTmpVendorName = true;
        #    }
        #
        #    this.OrderAccount       = VendTable::createOneTimeAccount(this);
        #    this.initFromVendTable();
        #
        #    if (resetTmpVendorName)
        #    {
        #        this.PurchName = '';
        #    }
        #
        #    if (!this.InvoiceAccount)
        #    {
        #        this.InvoiceAccount = this.OrderAccount;
        #    }
        #}
      ENDSOURCE
      SOURCE #createPaymentSched
        #client server void  createPaymentSched()
        #{
        #    CustVendPaymSched   custVendPaymSched;
        #    PurchTotals         purchTotals = PurchTotals::newPurchTable(this, PurchUpdate::All);
        #    CFMPlannedPaymentCalc cfmPlannedPaymentCalc;
        #
        #    purchTotals.calc();
        #
        #    custVendPaymSched = CustVendPaymSched::construct(SysModule::Vend,this);
        #    custVendPaymSched.setPurchTotals(purchTotals);
        #    custVendPaymSched.createPaymSched(PaymSched::find(this.PaymentSched));
        #
        #    if (CFMParameters::isModuleEnabled())
        #    {
        #        cfmPlannedPaymentCalc = CFMPlannedPaymentCalc::construct(this);
        #        if (cfmPlannedPaymentCalc)
        #        {
        #            cfmPlannedPaymentCalc.calc();
        #        }
        #    }
        #}
        #
      ENDSOURCE
      SOURCE #createVendTrans_BR
        #/// <summary>
        #///     Indicates whether the corresponding fiscal document will create vendor transactions based on <c>SalesPurchOperationTye_BR</c> configuration.
        #/// </summary>
        #/// <returns>
        #///     Returns true if operation type is not set on <c>PurchTable</c> or the operation type is configured to create vendor transactions.
        #/// </returns>
        #public boolean createVendTrans_BR()
        #{
        #    PurchTable_BR purchTable_BR;
        #    #ISOCountryRegionCodes
        #
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoBR]))
        #    {
        #        purchTable_BR = this.purchTable_BR();
        #    }
        #
        #    return BrazilParameters::isEnabled() == false
        #        || purchTable_BR.SalesPurchOperationType_BR == 0
        #        || SalesPurchOperationType_BR::find(purchTable_BR.SalesPurchOperationType_BR).CreateFinancialTrans;
        #}
      ENDSOURCE
      SOURCE #delete
        #public void  delete()
        #{
        #    // <GIN>
        #    #ISOCountryRegionCodes
        #    // </GIN>
        #
        #    PurchTableType purchTableType;
        #
        #    purchTableType = this.type();
        #    purchTableType.delete();
        #
        #    TradeBLWIJournalPurposeCodes::deleteRecord(this.RecId, TradeBLWITypeOfForm::PurchTable);
        #
        #    // <GIN>
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoIN]))
        #    {
        #        this.TransitDocumentTransactionMap_IN::deleteTransitDocuments();
        #    }
        #    // </GIN>
        #}
        #
      ENDSOURCE
      SOURCE #deliveryAddress
        #LogisticsPostalAddress deliveryAddress()
        #{
        #    return LogisticsPostalAddress::findRecId(this.DeliveryPostalAddress);
        #}
      ENDSOURCE
      SOURCE #deliveryAddressing
        #//BP deviation documented
        #display LogisticsAddressing deliveryAddressing()
        #{
        #    return LogisticsPostalAddress::findRecId(this.DeliveryPostalAddress).Address;
        #}
      ENDSOURCE
      SOURCE #deliveryCNPJCPFNUM_BR
        #/// <summary>
        #/// Returns the delivery CNPJ or CPF for the current record.
        #/// </summary>
        #/// <returns>
        #/// Returns the CNPJ or CPF of the vendor if the adddress is a primary address.
        #/// Returns the CNPJ or CPF related to delivery <c>logisticsPostalAddress</c> if the adddress is not a primary address.
        #/// </returns>
        #public display CNPJCPFNum_BR deliveryCNPJCPFNUM_BR()
        #{
        #    DirPartyLocation dirPartyLocation;
        #
        #    if (!BrazilParameters::isEnabled())
        #        return '';
        #
        #    select firstonly dirPartyLocation where dirPartyLocation.Location == this.deliveryLocation();
        #
        #    return dirPartyLocation.cnpjCPFNum_BR();
        #}
      ENDSOURCE
      SOURCE #deliveryDateDisplay
        #//BP Deviation documented
        #display DlvDate deliveryDateDisplay(DlvDate blankDate = systemDateGet())
        #{
        #    if (this.DeliveryDate)
        #        return this.DeliveryDate;
        #
        #    return blankDate;
        #}
      ENDSOURCE
      SOURCE #deliveryIENum_BR
        #/// <summary>
        #/// Returns the delivery IE for the current record.
        #/// </summary>
        #/// <returns>
        #/// Returns the IE of the vendor if the adddress is a primary address.
        #/// Returns the IE related to delivery <c>logisticsPostalAddress</c> if the adddress is not a primary address.
        #/// </returns>
        #public display IENum_BR deliveryIENum_BR()
        #{
        #    DirPartyLocation dirPartyLocation;
        #
        #    if (!BrazilParameters::isEnabled())
        #        return '';
        #
        #    select firstonly dirPartyLocation where dirPartyLocation.Location == this.deliveryLocation();
        #
        #    return dirPartyLocation.ieNum_BR();
        #}
      ENDSOURCE
      SOURCE #deliveryLocation
        #/// <summary>
        #/// Retrieves the <c>RecId</c> field of the <c>LogisticsLocation</c> record that is associated with the
        #/// specified <c>DeliveryPostalAddress</c> record.
        #/// </summary>
        #/// <returns>
        #/// The <c>RecId</c> field of the <c>LogisticsLocation</c> record that is associated with the specified
        #/// <c>DeliveryPostalAddress</c> record.
        #/// </returns>
        #public LogisticsLocationRecId deliveryLocation()
        #{
        #    return LogisticsPostalAddress::getLocation(this.DeliveryPostalAddress);
        #}
      ENDSOURCE
      SOURCE #dispLastConsDate_JP
        #/// <summary>
        #/// Get the latest consolidation date for this purchase order.
        #/// </summary>
        #/// <returns>
        #/// Consolidation date.
        #/// </returns>
        #// <GJP>
        #//BP Deviation documented
        #public display CustVendConsDate_JP dispLastConsDate_JP()
        #{
        #    return this.SalesPurchTable::getLastConsDate_JP();
        #}
        #// </GJP>
        #
      ENDSOURCE
      SOURCE #dispLastConsId_JP
        #/// <summary>
        #/// Gets latest consolidation invoice Id for this purchase order.
        #/// </summary>
        #/// <returns>
        #/// Consolidation invoice Id.
        #/// </returns>
        #// <GJP>
        #//BP Deviation documented
        #public display VendConsId_JP dispLastConsId_JP()
        #{
        #    return this.SalesPurchTable::getLastConsId_JP();
        #}
        #// </GJP>
        #
      ENDSOURCE
      SOURCE #displayBankDocumentInfo
        #/// <summary>
        #/// Gives the title on top of the preview pane on the BankLCImportListPage form.
        #/// </summary>
        #/// <returns>
        #/// Title field of the preview pane.
        #/// </returns>
        #public display Caption displayBankDocumentInfo()
        #{
        #    return strFmt("@SYS327590", this.PurchId, this.BankDocumentType);
        #}
      ENDSOURCE
      SOURCE #displayBudgetCheckResult
        #/// <summary>
        #/// Retrieves the image position that displays the <c>BudgetCheckResult</c> value for the given
        #/// <c>PurchTable</c> record in the <c>BudgetCheckResult</c> values image list.
        #/// </summary>
        #/// <returns>
        #/// An <c>ImageBudgetCheckResult</c> value that indicates the position of the image in the
        #/// <c>BudgetCheckResult</c> values image list.
        #/// </returns>
        #// BP Deviation Documented
        #public display ImageBudgetCheckResult displayBudgetCheckResult()
        #{
        #    return BudgetControlResult::getBudgetCheckResultImagePos(this.getBudgetCheckResult());
        #}
        #
      ENDSOURCE
      SOURCE #displayDocumentStatus
        #/// <summary>
        #/// Displays the label text for the current value in the document status field.
        #/// </summary>
        #/// <returns>
        #/// A label text for the current document status.
        #/// </returns>
        #/// <remarks>
        #/// The label for the packing slip value on the enumeration is packing slip, but it should be product receipt for purchase.
        #/// </remarks>
        #display PurchDocumentStatusDisplay displayDocumentStatus()
        #{
        #    SysDictEnum                 dictEnum;
        #    PurchDocumentStatusDisplay  documentStatusTxt;
        #
        #    if (this.DocumentStatus == DocumentStatus::PackingSlip)
        #    {
        #        documentStatusTxt = "@SYS333836";
        #    }
        #    else
        #    {
        #        dictEnum = SysDictEnum::newName(enumStr(DocumentStatus));
        #        documentStatusTxt = dictEnum.value2Label(this.DocumentStatus);
        #    }
        #
        #    return documentStatusTxt;
        #}
      ENDSOURCE
      SOURCE #displayProformaAmountForBankLC
        #/// <summary>
        #/// Displays the total proforma invoice amount of the purchase order.
        #/// </summary>
        #/// <returns>
        #/// The total proforma invoice amount.
        #/// </returns>
        #// BP deviation documented
        #display AmountCur displayProformaAmountForBankLC()
        #{
        #    return BankLCImport::amountProformaTotalInclTax(this.PurchId);
        #}
      ENDSOURCE
      SOURCE #editableInWorkflow
        #/// <summary>
        #/// Indicates whether the user can modify the record when an active workflow is running.
        #/// </summary>
        #/// <returns>
        #/// true if the user has rights to modify the record; false.
        #/// </returns>
        #public boolean  editableInWorkflow()
        #{
        #    WorkflowElementTable    workflowElementTable;
        #    WorkflowWorkItemTable   workflowWorkItemTable;
        #
        #    select firstonly ElementId from workflowWorkItemTable
        #                where   workflowWorkItemTable.RefTableId == this.TableId
        #                  &&    workflowWorkItemTable.RefRecId   == this.RecId
        #                  &&    workflowWorkItemTable.UserId     == curUserId()
        #                  &&    workflowWorkItemTable.Status     == WorkflowWorkItemStatus::Pending
        #            join ElementId, ElementType from workflowElementTable
        #                where   workflowElementTable.ElementId   == workflowWorkItemTable.ElementId
        #                   &&   (workflowElementTable.ElementName == workFlowApprovalStr(PurchTableApprovalEdit)
        #                        || workflowElementTable.ElementName == workFlowTaskStr(PurchTableTaskEdit));
        #
        #    return workflowWorkItemTable.RecId != 0;
        #}
      ENDSOURCE
      SOURCE #editAllowed
        #/// <summary>
        #///     Determines whether the purchase order can be edited.
        #/// </summary>
        #/// <param name="checkLines">
        #///     Check if any purchase order lines has editable work item assigned.
        #/// </param>
        #/// <returns>
        #///     true when the purchase order can be edited; otherwise, false.
        #/// </returns>
        #boolean  editAllowed(boolean checkLines = false)
        #{
        #    boolean     editHeader = true;
        #    boolean     editLine = false;
        #    PurchLine   purchLine;
        #
        #    if (!this.checkUpdate(false,false))
        #        editHeader = false;
        #
        #    if (editHeader)
        #    {
        #        // Check if the record is in an active running workflow
        #        if (this.DocumentState == VersioningDocumentState::InReview)
        #        {
        #            editHeader = this.editableInWorkflow();
        #
        #            if (!editHeader && checkLines)
        #            {
        #                // Check if the line record is in an active running workflow
        #                while select purchLine
        #                    where  purchLine.PurchId == this.PurchId
        #                        && purchLine.IsDeleted == NoYes::No
        #                {
        #                    if (purchLine.editableInWorkflow())
        #                    {
        #                        editLine = true;
        #                        break;
        #                    }
        #                }
        #            }
        #        }
        #    }
        #    if (this.mcrDropShipment
        #        && (    this.PurchStatus == PurchStatus::Received
        #            ||  this.PurchStatus == PurchStatus::Invoiced))
        #    {
        #        editHeader = false;
        #    }
        #
        #    return editHeader || editLine;
        #}
        #
      ENDSOURCE
      SOURCE #editContactPersonName
        #//BP Deviation documented
        #client server edit ContactPersonName  editContactPersonName(boolean _set, ContactPersonName _name)
        #{
        #    ContactPersonName   name = _name;
        #    ContactPerson       contactPerson;
        #    ContactPersonId     contactPersonId;
        #    DirPartyTable       partyTable;
        #    VendTable           vendTable;
        #    if (_set)
        #    {
        #        if (name)
        #        {
        #            contactPersonId = this.ContactPersonId;
        #            contactPerson = ContactPerson::find(_name);
        #            this.ContactPersonId = contactPerson.ContactPersonId;
        #            if (this.ContactPersonId)
        #            {
        #                name = contactPerson.personName();
        #            }
        #            else
        #            {
        #                select contactPerson join AccountNum, Party from vendTable
        #                        where vendTable.AccountNum ==   this.OrderAccount
        #                        && vendTable.Party == contactPerson.ContactForParty
        #                    join Name from partyTable
        #                        where partyTable.RecId == contactPerson.Party &&
        #                              partyTable.Name        like name;
        #
        #                if (contactPerson)
        #                {
        #                    this.ContactPersonId=contactPerson.ContactPersonId;
        #                    name=partyTable.Name;
        #                }
        #            }
        #            if (contactPersonId != this.ContactPersonId)
        #            {
        #                if (this.checkContactPerson())
        #                {
        #                    this.initFromContactInfo();
        #                    if (this.dataSource())
        #                    {
        #                        this.dataSource().refresh();
        #                    }
        #                }
        #                else
        #                {
        #                    this.ContactPersonId = contactPersonId;
        #                }
        #            }
        #        }
        #        else
        #        {
        #            this.ContactPersonId = '';
        #        }
        #    }
        #    else
        #    {
        #        name = this.contactPersonName();
        #    }
        #    return name;
        #}
      ENDSOURCE
      SOURCE #editReasonCode
        #/// <summary>
        #/// Gets and sets the reason code by using the <c>ReasonCodeMap</c> map.
        #/// </summary>
        #/// <param name="_set">
        #/// A Boolean value that indicates whether the reason code is set.
        #/// </param>
        #/// <param name="_reasonCode">
        #/// The new reason code when <paramref name="_set" /> is true.
        #/// </param>
        #/// <returns>
        #/// The reason code of the record in the <c>ReasonTableRef</c> table.
        #/// </returns>
        #
        #//BP Deviation Documented
        #public edit ReasonCode editReasonCode(boolean _set, ReasonCode _reasonCode)
        #{
        #    if (_set && this.RecId && this.ReasonTableRef && PurchTableHistory::find(this.PurchId).ReasonTableRef == this.ReasonTableRef)
        #    {
        #            this.ReasonTableRef = 0;
        #    }
        #    return this.ReasonCodeMap::editReasonCode(_set, _reasonCode);
        #}
      ENDSOURCE
      SOURCE #editReasonComment
        #/// <summary>
        #/// Gets and sets the reason comment using the <c>ReasonCodeMap</c>.
        #/// </summary>
        #/// <param name="_set">
        #/// A Boolean value that indicates whether the reason code is set.
        #/// </param>
        #/// <param name="_reasonComment">
        #/// The new reason comment when <paramref name="_set"/> is true.
        #/// </param>
        #/// <returns>
        #/// The reason comment of the record in the <c>ReasonTableRef</c> table.
        #/// </returns>
        #//BP Deviation Documented
        #public edit ReasonComment editReasonComment(boolean _set, ReasonComment _reasonComment)
        #{
        #    if (_set && this.RecId && this.ReasonTableRef && PurchTableHistory::find(this.PurchId).ReasonTableRef == this.ReasonTableRef)
        #    {
        #            this.ReasonTableRef = 0;
        #    }
        #    return this.ReasonCodeMap::editReasonComment(_set, _reasonComment);
        #}
      ENDSOURCE
      SOURCE #enableDataSourceFields_BR
        #/// <summary>
        #/// Sets if the <c>PurchTable.SalesPurchOperationType_BR</c> field is editable, if the data source is a form.
        #/// </summary>
        #public void enableDataSourceFields_BR()
        #{
        #    FormDataObject  formDataObject;
        #    PurchTable_BR   purchTable_BR = this.purchTable_BR();
        #
        #    if (purchTable_BR.isFormDataSource())
        #    {
        #        formDataObject = purchTable_BR.dataSource().object(fieldNum(PurchTable_BR, SalesPurchOperationType_BR));
        #        formDataObject.allowEdit(this.type().canEditSalesPurchOperationType_BR());
        #
        #        formDataObject = this.dataSource().object(fieldNum(PurchTable, Port));
        #        formDataObject.visible(false);
        #    }
        #}
      ENDSOURCE
      SOURCE #existActivity
        #/// <summary>
        #/// Indicates whether a purchase order is selected for posting of any kind.
        #/// </summary>
        #/// <returns>
        #/// true if the purchase order is selected for posting; otherwise, false.
        #/// </returns>
        #public server boolean existActivity()
        #{
        #    PurchParmTable      purchParmTable;
        #    PurchParmSubTable   purchParmSubTable;
        #    VendInvoiceInfoTable    vendInvoiceInfoTable;
        #    VendInvoiceInfoSubTable vendInvoiceInfoSubTable;
        #
        #    select firstonly RecId from purchParmTable
        #        where  purchParmTable.ParmJobStatus == ParmJobStatus::Waiting
        #    exists join purchParmSubTable
        #        where  purchParmSubTable.OrigPurchId == this.PurchId &&
        #               purchParmSubTable.ParmId      == purchParmTable.ParmId &&
        #               purchParmSubTable.TableRefId  == purchParmTable.TableRefId;
        #
        #    if(purchParmTable.RecId != 0)
        #    {
        #        return true;
        #    }
        #
        #    select firstonly RecId from vendInvoiceInfoTable
        #        where  vendInvoiceInfoTable.ParmJobStatus == ParmJobStatus::Waiting
        #    exists join vendInvoiceInfoSubTable
        #        where  vendInvoiceInfoSubTable.OrigPurchId == this.PurchId &&
        #               vendInvoiceInfoSubTable.ParmId      == vendInvoiceInfoTable.ParmId &&
        #               vendInvoiceInfoSubTable.TableRefId  == vendInvoiceInfoTable.TableRefId;
        #
        #    if(vendInvoiceInfoSubTable.RecId != 0)
        #    {
        #        return true;
        #    }
        #
        #    return false;
        #}
        #
      ENDSOURCE
      SOURCE #existingJournals
        #server container existingJournals()
        #{
        #    // <GEERU>
        #    #ISOCountryRegionCodes
        #
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
        #    {
        #        return[this.lastPurchaseOrder(),
        #               this.lastReceiptsList(),
        #               this.lastPackingSlip(),
        #               this.lastInvoice(),
        #               this.lastInvoice4Paym_RU(),
        #               this.lastFacture_RU()];
        #    }
        #    // </GEERU>
        #    // <GEEPL>
        #    else if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoPL]))
        #    {
        #        return[this.lastPurchaseOrder(),
        #                this.lastReceiptsList(),
        #                this.lastPackingSlip(),
        #                this.lastInvoice(),
        #                this.lastInventExtPackingSlip()];
        #    }
        #    else
        #    {
        #    // </GEEPL>
        #        return[this.lastPurchaseOrder(),
        #               this.lastReceiptsList(),
        #               this.lastPackingSlip(),
        #               this.lastInvoice()];
        #    // <GEERU>
        #    }
        #    // </GEERU>
        #}
      ENDSOURCE
      SOURCE #existInterCompanyPurchSalesReference
        #/// <summary>
        #/// Checks whether InterCompany Purchase/Sales reference exists.
        #/// </summary>
        #/// <returns>
        #/// true if InterCompany Purchace/Sales reference exists; otherwise, false.
        #/// </returns>
        #public boolean existInterCompanyPurchSalesReference()
        #{
        #    InterCompanyPurchSalesReference interCompanyPurchSalesReference;
        #
        #    select firstonly RecId from interCompanyPurchSalesReference
        #        where interCompanyPurchSalesReference.PurchId == this.PurchId;
        #
        #    return interCompanyPurchSalesReference.RecId ? true : false;
        #}
        #
      ENDSOURCE
      SOURCE #existInvoice
        #/// <summary>
        #/// Determines whether any unposted invoices exist for the current record.
        #/// </summary>
        #/// <returns>
        #/// true if a pending invoice exists for this purchase order; otherwise, false.
        #/// </returns>
        #/// <remarks>
        #/// It includes unposted invoices saved in batches or in the process of being edited. Additionally it
        #/// includes those invoices actually saved as pending.
        #/// </remarks>
        #public boolean existInvoice()
        #{
        #    if (this.PurchStatus == PurchStatus::Backorder || this.PurchStatus == PurchStatus::Received)
        #    {
        #        return this.existInvoiceServer();
        #    }
        #    return false;
        #}
        #
      ENDSOURCE
      SOURCE #existInvoiceServer
        #/// <summary>
        #/// Determines whether any saved invoices exist for the current record.
        #/// </summary>
        #/// <returns>
        #/// true if a saved invoice exists for this purchase order; otherwise, false.
        #/// </returns>
        #public server boolean existInvoiceServer()
        #{
        #    VendInvoiceInfoLine  vendInvoiceInfoLine;
        #    VendInvoiceInfoTable vendInvoiceInfoTable;
        #
        #    if (this.PurchStatus == PurchStatus::Backorder || this.PurchStatus == PurchStatus::Received)
        #    {
        #        select firstonly RecId from vendInvoiceInfoLine
        #                where vendInvoiceInfoLine.OrigPurchId == this.PurchId
        #                exists join vendInvoiceInfoTable
        #                where  (vendInvoiceInfoTable.ParmJobStatus == ParmJobStatus::Waiting ||
        #                        vendInvoiceInfoTable.ParmJobStatus == ParmJobStatus::ContainErrors) &&
        #                        vendInvoiceInfoTable.ParmId == vendInvoiceInfoLine.ParmId &&
        #                        vendInvoiceInfoTable.TableRefId == vendInvoiceInfoLine.TableRefId;
        #
        #        if (vendInvoiceInfoLine.RecId != 0)
        #        {
        #            return true;
        #        }
        #
        #        // If there are no lines for this PO, check invoice headers
        #        select firstonly RecId from vendInvoiceInfoTable
        #                where vendInvoiceInfoTable.PurchId == this.PurchId &&
        #                     (vendInvoiceInfoTable.ParmJobStatus == ParmJobStatus::Waiting ||
        #                      vendInvoiceInfoTable.ParmJobStatus == ParmJobStatus::ContainErrors);
        #
        #        if (vendInvoiceInfoTable.RecId != 0)
        #        {
        #            return true;
        #        }
        #    }
        #
        #    return false;
        #}
      ENDSOURCE
      SOURCE #existMarkedSettlement
        #boolean existMarkedSettlement(FieldId _fieldId)
        #{
        #    if (this.SettleVoucher && SpecTrans::getSpecTransCount(this.DataAreaId, this.TableId, this.RecId))
        #    {
        #        switch(_fieldId)
        #        {
        #            case fieldNum(PurchTable, OrderAccount):    error("@SYS99930");
        #                                                        break;
        #
        #            case fieldNum(PurchTable, InvoiceAccount):  error("@SYS100000");
        #                                                        break;
        #
        #            default:                                    return false;
        #        }
        #        return true;
        #    }
        #
        #    return false;
        #}
      ENDSOURCE
      SOURCE #existPurchLine
        #boolean existPurchLine()
        #{
        #    Query       query;
        #    QueryRun    queryRun;
        #    PurchLine   purchLine;
        #
        #    query = this.queryPurchLine();
        #    query.dataSourceTable(tableNum(PurchLine)).firstOnly(true);
        #
        #    queryRun = new QueryRun(query);
        #    while (queryRun.next())
        #    {
        #        if (queryRun.changed(tableNum(PurchLine)))
        #        {
        #            purchLine = queryRun.get(tableNum(PurchLine));
        #            if (purchLine.RecId)
        #            {
        #                break;
        #            }
        #        }
        #    }
        #
        #    return purchLine.RecId != 0;
        #}
      ENDSOURCE
      SOURCE #existUnallocatedMiscCharge
        #/// <summary>
        #/// Determines if there are unallocated miscellaneous charges for the current purchase order.
        #/// </summary>
        #/// <returns>
        #/// true if there are unallocated miscellaneous charges for the current purchase order; otherwise, false.
        #/// </returns>
        #public boolean existUnallocatedMiscCharge()
        #{
        #    MarkupTrans markupTrans;
        #
        #    select firstonly RecId from markupTrans
        #        where markupTrans.TransTableId == this.TableId
        #           && markupTrans.TransRecId == this.RecId;
        #
        #    return markupTrans.RecId != 0;
        #}
      ENDSOURCE
      SOURCE #factureJourSortedList_RU
        #// Returns all factures created on this purch order
        #public RecordSortedList factureJourSortedList_RU()
        #{
        #    return this.SalesPurchTable::factureJourSortedList_RU();
        #}
      ENDSOURCE
      SOURCE #fieldChanged
        #boolean  fieldChanged(FieldId  fieldId)
        #{
        #    boolean  ok = false;
        #
        #    if (!this.RecId)
        #        ok = true;
        #
        #    if (this.orig().(fieldId) != this.(fieldId))
        #        ok = true;
        #
        #    return ok;
        #}
      ENDSOURCE
      SOURCE #firstPackingSlipDate
        #/// <summary>
        #/// Retrieves the first delivery date for the packing slip.
        #/// </summary>
        #/// <returns>
        #/// The delivery date.
        #/// </returns>
        #//BP Deviation documented
        #client server
        #display TransDate firstPackingSlipDate()
        #{
        #    VendPackingSlipPurchLink    vendPackingSlipPurchLink;
        #
        #    return (select minof(DeliveryDate) from vendPackingSlipPurchLink
        #                where vendPackingSlipPurchLink.OrigPurchId == this.PurchId).DeliveryDate;
        #}
      ENDSOURCE
      SOURCE #getBudgetCheckResult
        #/// <summary>
        #/// Calculates the <c>BudgetCheckResult</c> value for the given <c>PurchTable</c> record.
        #/// </summary>
        #/// <returns>
        #/// A <c>BudgetCheckResult</c> value which is calculated using the query.
        #/// </returns>
        #public BudgetCheckResult getBudgetCheckResult()
        #{
        #    BudgetSourceSourceDocumentHeader budgetSourceSourceDocumentHeader;
        #
        #    // Get the budget check result for the header only, exclude the line results
        #    budgetSourceSourceDocumentHeader = BudgetSourceSourceDocumentHeader::newBudgetSourceSourceDocumentHeader(this.SourceDocumentHeader);
        #
        #    return budgetSourceSourceDocumentHeader.getHeaderBudgetCheckResult(tableNum(PurchLine));
        #}
      ENDSOURCE
      SOURCE #getDeliveryEntityRecord
        #/// <summary>
        #///     Gets the delivery entity record based on the postal address.
        #/// </summary>
        #/// <returns>
        #///    A <c>CompanyInfo</c>, <c>InventLocation</c> or <c>InventSite</c> record.
        #/// </returns>
        #public Common getDeliveryEntityRecord()
        #{
        #    return this.TradePostalAddress::getDeliveryEntityRecord();
        #}
      ENDSOURCE
      SOURCE #getExtension_BR
        #/// <summary>
        #/// Retrieves the Brazilian extension table of the <c>PurchTable</c> table.
        #/// </summary>
        #/// <param name="_packNewExtensionTable">
        #/// A boolean value to determine if an empty buffer should be packed when the extension does not exist.
        #/// </param>
        #/// <returns>
        #/// The extension <c>PurchTable_BR</c> table record.
        #/// </returns>
        #public PurchTable_BR getExtension_BR(boolean _packNewExtensionTable = true)
        #{
        #    return this.SysExtensionSerializerMap::getExtensionTable(tableNum(PurchTable_BR), _packNewExtensionTable);
        #}
        #
      ENDSOURCE
      SOURCE #getFinalDiscPriceDate
        #/// <summary>
        #/// Calculates the date for which the total discount should be calculated according to the price date
        #/// type setting.
        #/// </summary>
        #/// <returns>
        #/// The date for which the total discount must be calculated.
        #/// </returns>
        #/// <remarks>
        #/// The price date type can be set up to use today or the delivery date as the price date.
        #/// </remarks>
        #PriceDate getFinalDiscPriceDate()
        #{
        #    PurchParameters         purchParameters;
        #    // <GEERU>
        #    #ISOCountryRegionCodes
        #    PriceAgreementDate_RU   priceAgreementDate;
        #    PurchLine               purchLine;
        #    PurchLine_W             purchLine_W;
        #
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
        #    {
        #        priceAgreementDate = this.SalesPurchTable::getPriceAgreementDate();
        #        if (! priceAgreementDate)
        #        {
        #            select minof(PriceAgreementDate_RU) from purchLine_W
        #                exists join purchLine
        #                    where purchLine.RecId    == purchLine_W.PurchLine
        #                        && purchLine.PurchId == this.PurchId;
        #
        #            priceAgreementDate = purchLine_W.PriceAgreementDate_RU;
        #        }
        #
        #        if (priceAgreementDate)
        #        {
        #            return priceAgreementDate;
        #        }
        #    }
        #    // </GEERU>
        #
        #    purchParameters = PurchParameters::find();
        #
        #    switch (purchParameters.PriceDateType)
        #    {
        #        case PurchPriceDateType::DeliveryDate:
        #            return (select minof(DeliveryDate) from purchLine
        #                where purchLine.PurchId         == this.PurchId
        #                   && !purchLine.IsDeleted).DeliveryDate;
        #
        #        default:
        #            return systemDateGet();
        #    }
        #}
      ENDSOURCE
      SOURCE #getLastAccountingEventDate
        #/// <summary>
        #/// Retrieves the accounting date of the last accounting event for the purchase order.
        #/// </summary>
        #/// <returns>
        #/// The accounting date of the last accounting event for the purchase order.
        #/// </returns>
        #public AccountingDate getLastAccountingEventDate()
        #{
        #    return this.AccountingDate;
        #}
      ENDSOURCE
      SOURCE #hasDocumentBeenThroughYearEnd
        #/// <summary>
        #/// Determines whether the current document has been processed by the year end process.
        #/// </summary>
        #/// <returns>
        #/// true if the document has been through the year end process at least once; otherwise, false.
        #/// </returns>
        #// <PubSect>
        #public boolean hasDocumentBeenThroughYearEnd()
        #{
        #    AccountingEvent accountingEventYearEndOpen;
        #    boolean         hasYearEndOpeningAccountingEvent = false;
        #
        #    accountingEventYearEndOpen = AccountingEvent::findByAccountingEventType(
        #        this.SourceDocumentHeader,
        #        AccountingEventType::PeriodOpen);
        #
        #    hasYearEndOpeningAccountingEvent = accountingEventYearEndOpen.RecId != 0;
        #
        #    return hasYearEndOpeningAccountingEvent;
        #}
        #// </PubSect>
      ENDSOURCE
      SOURCE #hasIssueFiscalDocument
        #/// <summary>
        #///     Indicates whether an incoming fiscal document should be generated at invoice posting.
        #/// </summary>
        #/// <returns>
        #///     true if an incoming fiscal document should be generated; Otherwise, false.
        #/// </returns>
        #public boolean hasIssueFiscalDocument()
        #{
        #    if (this.PurchaseType == PurchaseType::ReturnItem)
        #    {
        #        return true;
        #    }
        #    else
        #    {
        #        return this.vendTable_OrderAccount().NonTaxable_BR == NoYes::Yes;
        #    }
        #}
      ENDSOURCE
      SOURCE #hasLinesWithoutRefrence_MY
        #/// <summary>
        #/// Check if any line has no original invoice.
        #/// </summary>
        #/// <returns>
        #/// true if any lines don't have original invoice; otherwise, false.
        #/// </returns>
        #public boolean hasLinesWithoutRefrence_MY()
        #{
        #    PurchLine           purchLine;
        #    PurchLine_W         purchLine_W;
        #
        #    select firstonly purchLine
        #        where purchLine.PurchId             == this.PurchId
        #        notexists join purchLine_W
        #        where purchLine_W.PurchLine         == purchLine.RecId
        #           && purchLine_W.RefInvoiceId_MY   != "";
        #    if (purchLine)
        #    {
        #        return true;
        #    }
        #
        #    return false;
        #}
      ENDSOURCE
      SOURCE #hasLinesWithRefrence_MY
        #/// <summary>
        #/// Check if any line has original invoice.
        #/// </summary>
        #/// <returns>
        #/// true if any lines have original invoice; otherwise, false.
        #/// </returns>
        #public boolean hasLinesWithRefrence_MY()
        #{
        #    PurchLine           purchLine;
        #    PurchLine_W         purchLine_W;
        #
        #    select firstonly purchLine
        #        where purchLine.PurchId             == this.PurchId
        #        exists join purchLine_W
        #        where purchLine_W.PurchLine         == purchLine.RecId
        #           && purchLine_W.RefInvoiceId_MY   != "";
        #    if (purchLine)
        #    {
        #        return true;
        #    }
        #
        #    return false;
        #}
      ENDSOURCE
      SOURCE #icCheckUpdateHeaderDiscounts
        #/// <summary>
        #///     Determines if prices and disounts can be updated in the context of intercompany.
        #/// </summary>
        #/// <returns>
        #///     true if the context is not intercompany or if the context is intercompany and prices and discounts can be updated; otherwise, false.
        #/// </returns>
        #public boolean icCheckUpdateHeaderDiscounts()
        #{
        #    return !this.isInterCompanyOrder()
        #        || (this.PurchaseType != PurchaseType::ReturnItem
        #            && this.interCompanyEndpointActionPolicy().PriceDiscountSearch);
        #}
      ENDSOURCE
      SOURCE #initFiscalDocumentType_BR
        #/// <summary>
        #/// Initializes the fiscal document type; implemented in derived classes.
        #/// </summary>
        #public void initFiscalDocumentType_BR()
        #{
        #}
      ENDSOURCE
      SOURCE #initFromContactInfo
        #public void initFromContactInfo()
        #{
        #    ContactPerson contactPerson = this.contactPerson();
        #
        #    if (contactPerson)
        #    {
        #        this.url = contactPerson.url();
        #        this.Email = contactPerson.email();
        #    }
        #}
        #
      ENDSOURCE
      SOURCE #initFromPayment
        #public void initFromPayment()
        #{
        #    // <GEERU><GEEU>
        #    PurchTable_W       purchTable_W;
        #    #EECountryRegionCodes
        #    // </GEERU></GEEU>
        #
        #    this.PaymentSched = this.payment().PaymSched;
        #    this.FixedDueDate = dateNull();
        #
        #    // <GEERU><GEEU>
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion(#easternEuropeAllandRU))
        #    {
        #        if (! PaymTerm::isEmplAccountUsed_RU(this.Payment))
        #        {
        #            purchTable_W = this.purchTable_W();
        #            purchTable_W.EmplAccount_RU =  "";
        #            this.packPurchTable_W(purchTable_W);
        #        }
        #    }
        #    else
        #    {
        #        this.CashDisc = "";
        #    }
        #    // </GEERU></GEEU>
        #}
      ENDSOURCE
      SOURCE #initFromProjInvoiceTable
        #public void initFromProjInvoiceTable()
        #{
        #    ProjTable           projTable;
        #    ProjInvoiceTable    projInvoiceTable;
        #    #ISOCountryRegionCodes
        #
        #    projTable               = this.projTable();
        #    projInvoiceTable        = projTable.projInvoice();
        #
        #    this.TransactionCode    = projInvoiceTable.TransactionCodeId;
        #    this.DefaultDimension   = this.copyDimension(projTable.DefaultDimension);
        #
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoNO]))
        #    {
        #        this.BankCentralBankPurposeCode = projInvoiceTable.BankCentralBankPurposeCode;
        #        this.BankCentralBankPurposeText = projInvoiceTable.BankcentralBankPurposeText;
        #    }
        #}
      ENDSOURCE
      SOURCE #initFromPurchAgreementHeader
        #/// <summary>
        #/// Initiates a <c>PurchTable</c> record with values based on <c>PurchAgreementHeader</c> record.
        #/// </summary>
        #/// <param name="_purchAgreementHeader">
        #/// A record of the table <c>PurchAgreementHeader</c>.
        #/// </param>
        #/// <param name="_copyDeliveryLocation">
        #/// When set to true delivery location is copyed from <c>PurchAgreementHeader</c>.
        #/// Default is true.
        #/// </param>
        #/// <param name="_copyCurrencyCode">
        #/// When set to true Currency code is copyed from <c>PurchAgreementHeader</c>.
        #/// Default is false.
        #/// </param>
        #public void initFromPurchAgreementHeader(PurchAgreementHeader _purchAgreementHeader, boolean _copyDeliveryLocation = true, boolean _copyCurrencyCode = false)
        #{
        #    AgreementHeaderDefault      agreementHeaderDefault;
        #    PurchAgreementHeaderDefault purchAgreementHeaderDefault;
        #    CashDisc                    cashDisc;
        #    // <GEERU>
        #    #ISOCountryRegionCodes
        #    PurchAgreementHeaderExt_RU  purchAgreementHeaderExt;
        #    PurchTable_RU               purchTable_RU;
        #    // </GEERU>
        #
        #
        #    // Copy field value from Agreement ONLY if it is not-empty.
        #    str assign(str _field, str _source)
        #    {
        #        if (_source)
        #        {
        #            return _source;
        #        }
        #        return _field;
        #    }
        #
        #    select firstonly DeliveryPostalAddress, DeliveryName, Project, ContactPerson,
        #                     CashDiscountCode, MiscChargeGroup, DeliveryTerm, DeliveryMode,
        #                     PaymentSchedule, PaymentTerms
        #        from agreementHeaderDefault
        #        where agreementHeaderDefault.AgreementHeader == _purchAgreementHeader.RecId
        #        join firstonly    MethodOfPayment
        #                        , PaymentSpecification
        #                        , BuyerGroup
        #                        , VendorInvoiceAccount
        #                        , PurchasePool
        #            from purchAgreementHeaderDefault
        #            where purchAgreementHeaderDefault.PurchaseAgreementHeader == _purchAgreementHeader.RecId
        #        // <GEERU>
        #        outer join firstonly RecId,
        #                             InventProfileType,
        #                             InventProfileId,
        #                             VendPostingProfile,
        #                             vatOperationCode,
        #                             vatChargeSource
        #        from purchAgreementHeaderExt
        #        where purchAgreementHeaderExt.AgreementHeader == _purchAgreementHeader.RecId
        #        // </GEERU>
        #            ;
        #
        #    this.MatchingAgreement = _purchAgreementHeader.RecId;
        #
        #    // <SCM>
        #    // Merge dimension from AgeementHeader and currently set on the PurchTable record
        #    this.DefaultDimension = this.mergeDimension(_purchAgreementHeader.DefaultDimension, this.DefaultDimension);
        #    //</SCM>
        #
        #    if (_copyDeliveryLocation)
        #    {
        #        this.DeliveryPostalAddress = agreementHeaderDefault.DeliveryPostalAddress;
        #        this.DeliveryName     = agreementHeaderDefault.DeliveryName;
        #    }
        #
        #    if (_copyCurrencyCode)
        #    {
        #        this.CurrencyCode     = _purchAgreementHeader.Currency;
        #    }
        #
        #    this.ProjId           = assign(this.ProjId, agreementHeaderDefault.Project);
        #    this.ContactPersonId  = assign(this.ContactPersonId, agreementHeaderDefault.ContactPerson);
        #    this.MarkupGroup      = assign(this.MarkupGroup, agreementHeaderDefault.MiscChargeGroup);
        #    this.DlvTerm          = assign(this.DlvTerm, agreementHeaderDefault.DeliveryTerm);
        #    this.DlvMode          = assign(this.DlvMode, agreementHeaderDefault.DeliveryMode);
        #    this.PaymentSched     = assign(this.PaymentSched, agreementHeaderDefault.PaymentSchedule);
        #    this.Payment          = assign(this.Payment, agreementHeaderDefault.PaymentTerms);
        #    this.PaymMode         = assign(this.PaymMode, purchAgreementHeaderDefault.MethodOfPayment);
        #    this.PaymSpec         = assign(this.PaymSpec, purchAgreementHeaderDefault.PaymentSpecification);
        #    this.PurchPoolId      = assign(this.PurchPoolId, purchAgreementHeaderDefault.PurchasePool);
        #    this.InvoiceAccount   = assign(this.InvoiceAccount, purchAgreementHeaderDefault.VendorInvoiceAccount);
        #    this.ItemBuyerGroupId = assign(this.ItemBuyerGroupId, purchAgreementHeaderDefault.BuyerGroup);
        #
        #    if (agreementHeaderDefault.CashDiscountCode)
        #    {
        #        // If CashDiscountCode is set for agreement header, query cash discount record and set proper CashDiscPercent value from it.
        #        cashDisc = CashDisc::find(agreementHeaderDefault.CashDiscountCode);
        #        this.CashDiscPercent = (cashDisc.RecId) ? cashDisc.Percent : 0.0;
        #        this.CashDisc        = agreementHeaderDefault.CashDiscountCode;
        #    }
        #
        #    // <GEERU>
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
        #    {
        #        purchTable_RU = this.purchTable_RU();
        #
        #        this.CurrencyCode     = _purchAgreementHeader.Currency;
        #        this.LanguageId       = _purchAgreementHeader.Language;
        #
        #        purchTable_RU.AgreementHeaderExt_RU = purchAgreementHeaderExt.RecId;
        #
        #        this.DefaultDimension = this.copyDimension(_purchAgreementHeader.DefaultDimension);
        #
        #        if (purchAgreementHeaderExt.InventProfileType || purchAgreementHeaderExt.InventProfileId)
        #        {
        #            purchTable_RU.InventProfileType_RU = purchAgreementHeaderExt.InventProfileType;
        #            purchTable_RU.InventProfileId_RU   = purchAgreementHeaderExt.InventProfileId;
        #        }
        #
        #        if (purchAgreementHeaderExt.VendPostingProfile)
        #        {
        #            this.PostingProfile = purchAgreementHeaderExt.VendPostingProfile;
        #        }
        #
        #        purchTable_RU.vatOperationCode_RU = purchAgreementHeaderExt.vatOperationCode;
        #        purchTable_RU.vatChargeSource_RU  = purchAgreementHeaderExt.vatChargeSource;
        #
        #        this.packPurchTable_RU(purchTable_RU);
        #
        #        if (this.PaymentSched)
        #        {
        #            this.FixedDueDate = dateNull();
        #        }
        #
        #        if (purchAgreementHeaderExt.VendPostingProfile)
        #        {
        #            this.PostingProfile = purchAgreementHeaderExt.VendPostingProfile;
        #        }
        #    }
        #    // </GEERU>
        #
        #    TMSPurchTable::initFromTMSPurchAgreement(this.PurchId, _purchAgreementHeader.RecId);
        #}
      ENDSOURCE
      SOURCE #initFromPurchRFQReplyTable
        #/// <summary>
        #///    Initializes a <c>PurchTable</c> table buffer based on an <c>PurchRFQReplyTable</c> table buffer.
        #/// </summary>
        #/// <param name="_purchRFQReplyTable">
        #///    The <c>PurchRFQReplyTable</c> table buffer that is to initialize <c>PurchTable</c> table buffer from.
        #/// </param>
        #public void initFromPurchRFQReplyTable(PurchRFQReplyTable    _purchRFQReplyTable)
        #{
        #    this.Payment        = _purchRFQReplyTable.Payment;
        #    this.CurrencyCode   = _purchRFQReplyTable.CurrencyCode;
        #    this.DlvTerm        = _purchRFQReplyTable.DlvTerm;
        #    this.DlvMode        = _purchRFQReplyTable.DlvMode;
        #    this.DiscPercent    = _purchRFQReplyTable.DiscPercent;
        #    this.DeliveryDate   = _purchRFQReplyTable.DeliveryDate;
        #    this.VendorRef      = _purchRFQReplyTable.VendRef;
        #}
      ENDSOURCE
      SOURCE #initFromPurchRFQTable
        #/// <summary>
        #///    Initializes the <c>PurchTable</c> record from a <c>PurchRFQTable</c> record.
        #/// </summary>
        #/// <param name="_purchRFQTable">
        #///    The <c>PurchRFQTable</c> record from which to initialize.
        #/// </param>
        #public void initFromPurchRFQTable(PurchRFQTable    _purchRFQTable)
        #{
        #    // <GBR>
        #    PurchTable_BR       purchTable_BR;
        #    // </GBR>
        #
        #    this.PurchaseType               = PurchaseType::Purch;
        #    this.LanguageId                 = _purchRFQTable.LanguageId;
        #    this.Payment                    = _purchRFQTable.Payment;
        #    this.PaymMode                   = _purchRFQTable.PaymMode;
        #    this.PaymSpec                   = _purchRFQTable.PaymSpec;
        #    this.PaymentSched               = _purchRFQTable.PaymentSched;
        #    this.NumberSequenceGroup        = _purchRFQTable.NumberSequenceGroup;
        #    this.CashDisc                   = _purchRFQTable.CashDisc;
        #    if(this.CashDisc)
        #    {
        #        this.CashDiscPercent        = CashDisc::find(_purchRFQTable.CashDisc).Percent;
        #    }
        #    this.EndDisc                    = _purchRFQTable.EndDisc;
        #
        #    this.CurrencyCode               = _purchRFQTable.CurrencyCode;
        #    this.DlvTerm                    = _purchRFQTable.DlvTerm;
        #    this.DlvMode                    = _purchRFQTable.DlvMode;
        #    this.DefaultDimension           =  this.copyDimension(_purchRFQTable.DefaultDimension);
        #    this.TaxGroup                   = _purchRFQTable.TaxGroup;
        #    this.InclTax                    = _purchRFQTable.InclTax;
        #
        #    this.DeliveryPostalAddress      = _purchRFQTable.DeliveryPostalAddress;
        #    this.AddressRefRecId            = _purchRFQTable.AddressRefRecId;
        #    this.AddressRefTableId          = _purchRFQTable.AddressRefTableId;
        #    this.InventSiteId               = _purchRFQTable.InventSiteId;
        #    this.InventLocationId           = _purchRFQTable.InventLocationId;
        #
        #    this.ProjId                     = _purchRFQTable.ProjId;
        #
        #    // <GBR>
        #    if (BrazilParameters::isEnabled())
        #    {
        #        purchTable_BR = this.purchTable_BR();
        #        purchTable_BR.VendFinalUser_BR           = _purchRFQTable.VendFinalUser_BR;
        #        purchTable_BR.ServiceCodeOnDlvAddress_BR = _purchRFQTable.ServiceCodeOnDlvAddress_BR;
        #        purchTable_BR.SalesPurchOperationType_BR = _purchRFQTable.SalesPurchOperationType_BR;
        #        this.packPurchTable_BR(purchTable_BR);
        #
        #        this.type().updateFiscalDocumentText_BR(FiscalDocumentTextType_BR::CFOP);
        #    }
        #    // </GBR>
        #}
      ENDSOURCE
      SOURCE #initFromPurchTable
        #/// <summary>
        #///    Initializes the <c>PurchTable</c> record from another purchase order record.
        #/// </summary>
        #/// <param name="_purchTable">
        #///    The purchase order from which to initialize.
        #/// </param>
        #public void initFromPurchTable(PurchTable _purchTable)
        #{
        #    PurchTable_BR                       purchTable_BR, fromPurchTable_BR;
        #    // <GMY>
        #    PurchTable_W                        purchTable_W;
        #    // </GMY>
        #
        #    this.LanguageId                 = _purchTable.LanguageId;
        #    this.Payment                    = _purchTable.Payment;
        #    this.PaymMode                   = _purchTable.PaymMode;
        #    this.PaymSpec                   = _purchTable.PaymSpec;
        #    this.NumberSequenceGroup        = _purchTable.NumberSequenceGroup;
        #    this.CashDisc                   = _purchTable.CashDisc;
        #    this.CashDiscPercent            = _purchTable.CashDiscPercent;
        #    this.DiscPercent                = _purchTable.DiscPercent;
        #    this.CurrencyCode               = _purchTable.CurrencyCode;
        #    this.DlvTerm                    = _purchTable.DlvTerm;
        #    this.DlvMode                    = _purchTable.DlvMode;
        #    this.DefaultDimension           = this.copyDimension(_purchTable.DefaultDimension);
        #    this.TaxGroup                   = _purchTable.TaxGroup;
        #    this.InclTax                    = _purchTable.InclTax;
        #    this.Transport                  = _purchTable.Transport;
        #    this.Port                       = _purchTable.Port;
        #    this.StatProcId                 = _purchTable.StatProcId;
        #    this.AccountingDistributionTemplate = _purchTable.AccountingDistributionTemplate;
        #
        #    if (!this.RecId || !this.skipAddressFields())
        #    {
        #        this.DeliveryPostalAddress      = _purchTable.DeliveryPostalAddress;
        #        this.AddressRefRecId            = _purchTable.AddressRefRecId;
        #        this.AddressRefTableId          = _purchTable.AddressRefTableId;
        #    }
        #
        #    if (BrazilParameters::isEnabled())
        #    {
        #        fromPurchTable_BR = _purchTable.purchTable_BR();
        #
        #        purchTable_BR = this.purchTable_BR();
        #
        #        purchTable_BR.cfpsId_BR                     = fromPurchTable_BR.cfpsId_BR;
        #        purchTable_BR.PresenceType                  = fromPurchTable_BR.PresenceType;
        #        purchTable_BR.SalesPurchOperationType_BR    = fromPurchTable_BR.SalesPurchOperationType_BR;
        #        purchTable_BR.ServiceCodeOnDlvAddress_BR    = fromPurchTable_BR.ServiceCodeOnDlvAddress_BR;
        #        purchTable_BR.VendFinalUser_BR              = fromPurchTable_BR.VendFinalUser_BR;
        #        purchTable_BR.VendFineSetup_BR              = fromPurchTable_BR.VendFineSetup_BR;
        #        purchTable_BR.VendInterestSetup_BR          = fromPurchTable_BR.VendInterestSetup_BR;
        #
        #        this.packPurchTable_BR(purchTable_BR);
        #    }
        #
        #    // <GMY>
        #    if (TaxGSTFeatureChecker_MY::isCountryRegionMY())
        #    {
        #        purchTable_W                = this.purchTable_W();
        #        purchTable_W.InvoiceType_MY = _purchTable.purchTable_W().InvoiceType_MY;
        #        this.packPurchTable_W(purchTable_W);
        #    }
        #    // </GMY>
        #}
      ENDSOURCE
      SOURCE #initFromPurchTableHistory
        #/// <summary>
        #/// Initializes the history record that is based on the specified <c>PurchTableHistory</c> record.
        #/// </summary>
        #/// <param name="_purchTableHistory">
        #/// A <c>PurchTableHistory</c> record on which to base initialization.
        #/// </param>
        #public void initFromPurchTableHistory(PurchTableHistory _purchTableHistory)
        #{
        #    // <GEEU>
        #    #ISOCountryRegionCodes
        #    // </GEEU>
        #    // <GEERU>
        #    PurchTableMap_RU        purchTableMap_RU;
        #    PurchTable_RU           purchTable_RU;
        #    // </GEERU>
        #    PurchTableMap_W         purchTableMap_W;
        #    PurchTable_W            purchTable_W;
        #    // <GBR>
        #    PurchTableMap_BR        purchTableMap_BR;
        #    PurchTable_BR           purchTable_BR;
        #    // </GBR>
        #
        #    PurchTableMap purchTableMap;
        #
        #    purchTableMap.data(_purchTableHistory.data());
        #    this.data(purchTableMap.data());
        #
        #    // <GEEU>
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoLT, #isoLV]))
        #    {
        #        // Reset and copy the TransportationDocument reference as it is required to be unique.
        #        this.TransportationDocument = 0;
        #        TransportationDocument::copy(_purchTableHistory, this);
        #    }
        #    // </GEEU>
        #
        #    // <GEERU>
        #    if (PurchTable_RU::isExtensionEnabled())
        #    {
        #        purchTableMap_RU.data(_purchTableHistory.purchTableHistory_RU());
        #        purchTable_RU.data(purchTableMap_RU.data());
        #        this.SysExtensionSerializerMap::packExtensionTable(purchTable_RU);
        #    }
        #    // </GEERU>
        #    // <GBR>
        #    if (PurchTable_BR::isExtensionEnabled())
        #    {
        #        purchTableMap_BR.data(_purchTableHistory.purchTableHistory_BR());
        #        purchTable_BR.data(purchTableMap_BR.data());
        #        this.SysExtensionSerializerMap::packExtensionTable(purchTable_BR);
        #    }
        #    // </GBR>
        #    if (PurchTable_W::isExtensionEnabled())
        #    {
        #        purchTableMap_W.data(_purchTableHistory.purchTableHistory_W());
        #        purchTable_W.data(purchTableMap_W.data());
        #        this.SysExtensionSerializerMap::packExtensionTable(purchTable_W);
        #    }
        #}
      ENDSOURCE
      SOURCE #initFromSalesTable
        #/// <summary>
        #///    Initializes the <c>PurchTable</c> record from a <c>SalesTable</c> record.
        #/// </summary>
        #/// <param name="_salesTable">
        #///    The <c>SalesTable</c> record from which to initialize.
        #/// </param>
        #public void initFromSalesTable(SalesTable _salesTable)
        #{
        #    this.InterCompanyOriginalSalesId        = _salesTable.SalesId;
        #    this.InterCompanyOriginalCustAccount    = _salesTable.CustAccount;
        #    this.InterCompanyDirectDelivery         = _salesTable.InterCompanyDirectDelivery;
        #}
        #
      ENDSOURCE
      SOURCE #initFromVendInvoiceJour
        #/// <summary>
        #///    Initializes a <c>PurchTable</c> table buffer based on an <c>VendInvoiceJour</c> table buffer.
        #/// </summary>
        #/// <param name="_vendInvoiceJour">
        #///    The <c>VendInvoiceJour</c> table buffer that is to initialize <c>PurchTable</c> table buffer from.
        #/// </param>
        #public void initFromVendInvoiceJour(VendInvoiceJour _vendInvoiceJour)
        #{
        #    // <GMY>
        #    PurchTable_W                        purchTable_W;
        #    // </GMY>
        #
        #    this.Payment                    = _vendInvoiceJour.Payment;
        #    this.NumberSequenceGroup        = _vendInvoiceJour.NumberSequenceGroup;
        #    this.CashDisc                   = _vendInvoiceJour.CashDiscCode;
        #    this.CashDiscPercent            = _vendInvoiceJour.CashDiscPercent;
        #
        #    this.CurrencyCode               = _vendInvoiceJour.CurrencyCode;
        #    this.DefaultDimension           = this.copyDimension(_vendInvoiceJour.DefaultDimension);
        #    this.InclTax                    = _vendInvoiceJour.InclTax;
        #
        #    // <GEELV>
        #    this.IntrastatAddValue_LV       = _vendInvoiceJour.IntrastatAddValue_LV;
        #    // </GEELV>
        #
        #    // <GMY>
        #    if (TaxGSTFeatureChecker_MY::isCountryRegionMY())
        #    {
        #        purchTable_W                = this.purchTable_W();
        #        purchTable_W.InvoiceType_MY = _vendInvoiceJour.vendInvoiceJour_W().InvoiceType_MY;
        #        this.packPurchTable_W(purchTable_W);
        #    }
        #    // </GMY>
        #}
      ENDSOURCE
      SOURCE #initFromVendPackingSlipJour
        #/// <summary>
        #///    Initializes a <c>PurchTable</c> table buffer based on an <c>VendPackingSlipJour</c> table buffer.
        #/// </summary>
        #/// <param name="_vendPackingSlipJour">
        #///    The <c>VendPackingSlipJour</c> table buffer that is to initialize <c>PurchTable</c> table buffer from.
        #/// </param>
        #public void  initFromVendPackingSlipJour(VendPackingSlipJour _vendPackingSlipJour)
        #{
        #    this.DlvTerm                = _vendPackingSlipJour.DlvTerm;
        #    this.DlvMode                = _vendPackingSlipJour.DlvMode;
        #    this.DefaultDimension       = this.copyDimension(_vendPackingSlipJour.DefaultDimension);
        #}
      ENDSOURCE
      SOURCE #initFromVendTable
        #/// <summary>
        #///    Initializes the <c>PurchTable</c> record from a <c>VendTable</c> record.
        #/// </summary>
        #/// <param name="_vendTable">
        #///    The vendor record from which to initialize; optional.
        #/// </param>
        #server public void  initFromVendTable(VendTable _vendTable = this.vendTable_OrderAccount())
        #{
        #    container               purchTableContainer;
        #    XppILExecutePermission  xppILExecutePermission;
        #    PaymTerm                paymTerm;
        #    #ISOCountryRegionCodes;
        #
        #    // Transition to IL to update the sales quantity
        #    xppILExecutePermission = new XppILExecutePermission();
        #    xppILExecutePermission.assert();
        #
        #    purchTableContainer = runTableMethodIL(tableStr(PurchTable),
        #                        tableStaticMethodStr(PurchTable, initFromVendTableIL),
        #                        [buf2Con(this, true), buf2Con(_vendTable, true)]);
        #    CodeAccessPermission::revertAssert();
        #
        #    this.con2buf(purchTableContainer);
        #
        #    if (PublicSectorUtils::isFrenchRegulatoryEnabled() && !this.Payment)
        #    {
        #        paymTerm = PaymTerm::getDefaultPaymTerm();
        #
        #        if (paymTerm.RecId)
        #        {
        #            this.Payment = paymTerm.PaymTermId;
        #        }
        #    }
        #}
      ENDSOURCE
      SOURCE #initFromVendTableMandatoryFields
        #server public void  initFromVendTableMandatoryFields()
        #{
        #    VendTable  vendTable = this.vendTable_OrderAccount();
        #    // <GEERU>
        #    PurchTable_RU   purchTable_RU;
        #    #isoCountryRegionCodes
        #    // </GEERU>
        #
        #
        #    this.VendGroup                  = vendTable.VendGroup;
        #    // <GEERU>
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
        #    {
        #        purchTable_RU = this.purchTable_RU();
        #        purchTable_RU.vatOperationCode_RU   = vendTable.vatOperationCode_RU;
        #        this.packPurchTable_RU(purchTable_RU);
        #    }
        #    // </GEERU>
        #    this.ChangeRequestRequired      = (PurchParameters::find().ChangeRequestAllowOverride && vendTable.ChangeRequestOverride) ? vendTable.ChangeRequestEnabled : PurchParameters::find().ChangeRequestEnabled;
        #}
        #
      ENDSOURCE
      SOURCE #initInvoiceAccount
        #void  initInvoiceAccount()
        #{
        #    VendTable   vendTable       = this.vendTable_InvoiceAccount();
        #    // <GEEU>
        #    #ISOCountryRegionCodes
        #    // </GEEU>
        #    ;
        #
        #    this.NumberSequenceGroup    = vendTable.NumberSequenceGroup;
        #    this.Payment                = vendTable.PaymTermId;
        #
        #    this.initFromPayment();
        #
        #    if (vendTable.PaymSched)
        #        this.PaymentSched       = vendTable.PaymSched;
        #
        #    this.PaymMode               = vendTable.PaymMode;
        #    this.PaymSpec               = vendTable.PaymSpec;
        #
        #    this.CashDisc               = vendTable.CashDisc;
        #    this.setListCode();
        #
        #    // <GEEU>
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoLV, #isoLT]))
        #    {
        #        this.InvoiceRegister_LT         = LtInvoiceAutoNumberingGroups::autoNumberingForPurchInvoice(this.InvoiceAccount);
        #        this.PackingSlipRegister_LT     = LtInvoiceAutoNumberingGroups::autoNumberingForPurchPackingSlip(this.InvoiceAccount);
        #    }
        #    // </GEEU>
        #}
      ENDSOURCE
      SOURCE #initTaxDefaultsFromInvoiceAccount
        #/// <summary>
        #/// Copies fiscal data fields from the invoice account.
        #/// </summary>
        #private void initTaxDefaultsFromInvoiceAccount()
        #{
        #    VendTable               vendTable;
        #    VendParameters          vendParameters;
        #    LogisticsPostalAddress  logisticsPostalAddress;
        #
        #    vendTable = this.vendTable_InvoiceAccount();
        #
        #    this.vatNum = vendTable.vatNum;
        #    this.setTaxGroup(vendTable.TaxGroup);
        #    this.VendGroup = vendTable.VendGroup;
        #    vendParameters = VendParameters::find();
        #    if (vendParameters.VendNameFromVATNum)
        #    {
        #        logisticsPostalAddress = DirParty::primaryPostalAddress(vendTable.Party,
        #                                                                DateTimeUtil::newDateTime(this.DeliveryDate,0,DateTimeUtil::getCompanyTimeZone()));
        #
        #        this.setNameUsingVATNum(vendTable.vatNum,
        #                                logisticsPostalAddress.CountryRegionId,
        #                                vendTable.name(),
        #                                vendParameters);
        #    }
        #    else
        #    {
        #        this.PurchName = vendTable.name();
        #    }
        #}
      ENDSOURCE
      SOURCE #initValue
        #void  initValue(PurchaseType  _purchaseType = PurchParameters::find().PurchaseType)
        #{
        #    PurchTableType  purchTableType;
        #
        #    this.PurchaseType   = _purchaseType;
        #
        #    super();
        #
        #    purchTableType = this.type();
        #    purchTableType.initValue();
        #}
      ENDSOURCE
      SOURCE #insert
        #void  insert(boolean _interCompanySilent = false,
        #             AccountingDate _accountingDate = DateTimeUtil::date(DateTimeUtil::applyTimeZoneOffset(DateTimeUtil::getSystemDateTime(), DateTimeUtil::getUserPreferredTimeZone())))
        #{
        #    PurchTableType purchTableType;
        #
        #    purchTableType = this.type();
        #    purchTableType.insert(_interCompanySilent, _accountingDate);
        #
        #    TradeBLWIFormCodes::createRecord(TradeBLWICustVend::Vendor, this.RecId, this.OrderAccount, TradeBLWITypeOfForm::PurchTable);
        #
        #    if (isConfigurationkeyEnabled(configurationKeyNum(PublicSector)))
        #    {
        #        PurchTotalsSummaryController::onInsert(this);
        #    }
        #}
      ENDSOURCE
      SOURCE #interCompanyAllowIndirectCreationOrig
        #//BP deviation documented
        #display InterCompanyAllowIndirectCreationTxt interCompanyAllowIndirectCreationOrig()
        #{
        #    InterCompanyAllowIndirectCreationTxt interCompanyAllowIndirectCreationTxt;
        #
        #    if (this.InterCompanyDirectDelivery
        #    && !this.InterCompanyAllowIndirectCreation)
        #    {
        #        interCompanyAllowIndirectCreationTxt = "@SYS95179";
        #    }
        #    return interCompanyAllowIndirectCreationTxt;
        #}
      ENDSOURCE
      SOURCE #interCompanyCheckCurrency
        #boolean interCompanyCheckCurrency()
        #{
        #    MarkupTrans     markupTrans;
        #
        #    if (this.isInterCompanyOrder()
        #    &&  this.CurrencyCode != this.orig().CurrencyCode)
        #    {
        #        if (PurchLine::exist(this.PurchId))
        #            return checkFailed(strFmt("@SYS105402"));
        #
        #        select firstonly markupTrans
        #               index hint TableRecIdIdx
        #               where markupTrans.TransTableId == this.TableId
        #               &&    markupTrans.TransRecId   == this.RecId
        #               &&   !markupTrans.IsDeleted;
        #        if (markupTrans)
        #        {
        #            return checkFailed(strFmt("@SYS105402"));
        #        }
        #    }
        #
        #    if (this.CurrencyCode != this.orig().CurrencyCode && this.checkPrepaymentPaymentRequestsAvailable())
        #    {
        #        return checkFailed(strFmt("@SYP4884112",  fieldStr(PurchTable, CurrencyCode)));
        #    }
        #
        #    return true;
        #}
      ENDSOURCE
      SOURCE #interCompanyEndpointActionPolicy
        #/// <summary>
        #/// Gets the intercompany trading policy for the current <c>PurchTable</c> table record.
        #/// </summary>
        #/// <param name="_forUpdate">
        #/// A Boolean value that indicates whether to read the record for update; optional.
        #/// </param>
        #/// <returns>
        #/// A record in the <c>InterCompanyEndpointActionPolicy</c> table; otherwise, an empty record.
        #/// </returns>
        #public InterCompanyEndpointActionPolicy interCompanyEndpointActionPolicy(boolean   _forUpdate = false)
        #{
        #    InterCompanyEndpointActionPolicy    interCompanyEndpointActionPolicy;
        #
        #    changecompany (
        #                   this.company()
        #                   )
        #    {
        #        interCompanyEndpointActionPolicy = VendTable::find(this.OrderAccount).interCompanyTradingPartner().interCompanyEndpointActionPolicy(_forUpdate);
        #    }
        #    return interCompanyEndpointActionPolicy;
        #}
        #
      ENDSOURCE
      SOURCE #interCompanyOriginDisplay
        #//BP Deviation Documented
        #display InterCompanyOriginDisplay interCompanyOriginDisplay()
        #{
        #    InterCompanyOriginDisplay   interCompanyOriginDisplay;
        #    DictEnum                    dictEnum = new DictEnum(enumNum(InterCompanyOrigin));
        #
        #    if (this.InterCompanyOrder)
        #    {
        #        interCompanyOriginDisplay = dictEnum.value2Name(this.InterCompanyOrigin);
        #    }
        #    return interCompanyOriginDisplay;
        #}
        #
      ENDSOURCE
      SOURCE #interCompanyPurchSalesReferenceCreate
        #void interCompanyPurchSalesReferenceCreate(SalesId _origSalesId = this.InterCompanyOriginalSalesId)
        #{
        #    InterCompanyPurchSalesReference     interCompanyPurchSalesReference;
        #
        #    if (this.PurchId
        #    &&  _origSalesId)
        #    {
        #        ttsbegin;
        #        select firstonly interCompanyPurchSalesReference
        #               index hint SalesPurchIdx
        #               where interCompanyPurchSalesReference.SalesId == _origSalesId
        #               &&    interCompanyPurchSalesReference.PurchId == this.PurchId;
        #
        #        if (!interCompanyPurchSalesReference)
        #        {
        #            interCompanyPurchSalesReference.clear();
        #            interCompanyPurchSalesReference.SalesId = _origSalesId;
        #            interCompanyPurchSalesReference.PurchId = this.PurchId;
        #            interCompanyPurchSalesReference.insert();
        #        }
        #        ttscommit;
        #    }
        #
        #    if (this.PurchId
        #    &&  this.InterCompanyOriginalSalesId
        #    &&  this.InterCompanyOriginalSalesId != _origSalesId)
        #    {
        #        this.InterCompanyOriginalSalesId     = '';
        #        this.InterCompanyOriginalCustAccount = '';
        #        this.InterCompanyOrigin              = InterCompanyOrigin::Source;
        #    }
        #}
        #
      ENDSOURCE
      SOURCE #interCompanySalesInfo
        #//BP Deviation Documented
        #public server container interCompanySalesInfo()
        #{
        #    SalesTable              salesTable;
        #    InterCompanySalesType   salesType;
        #    SalesStatus             salesStatus;
        #    DocumentStatus          documentStatus;
        #    date                    documentDate;
        #    Num                     documentNum;
        #    DictEnum        dictEnum = new DictEnum(enumNum(SalesType));
        #;
        #    if (this.InterCompanyOrder
        #    &&  this.InterCompanyCompanyId)
        #    {
        #        changecompany(this.InterCompanyCompanyId)
        #        {
        #            select SalesId, SalesType, SalesStatus, DocumentStatus, QuotationId from salesTable
        #                   index hint SalesIdx
        #                   where salesTable.SalesId == this.InterCompanySalesId;
        #
        #            if (salesTable.RecId)
        #                salesType = dictEnum.value2Name(salesTable.SalesType);
        #
        #            salesStatus    = salesTable.SalesStatus;
        #            documentStatus = salesTable.DocumentStatus;
        #
        #            switch(salesTable.DocumentStatus)
        #            {
        #                case DocumentStatus::Quotation:
        #                    documentDate = salesTable.lastQuotationDate();
        #                    documentNum  = salesTable.lastQuotation();
        #                    break;
        #                case DocumentStatus::Confirmation:
        #                    documentDate = salesTable.lastConfirmDate();
        #                    documentNum  = salesTable.lastConfirm();
        #                    break;
        #                case DocumentStatus::PickingList:
        #                    documentDate = salesTable.lastPickingListDate();
        #                    documentNum  = salesTable.lastPickingList();
        #                    break;
        #                case DocumentStatus::PackingSlip:
        #                    documentDate = salesTable.lastPackingSlipDate();
        #                    documentNum  = salesTable.lastPackingSlip();
        #                    break;
        #                case DocumentStatus::Invoice:
        #                    documentDate = salesTable.lastInvoiceDate();
        #                    documentNum  = salesTable.lastInvoice();
        #                    break;
        #            }
        #        }
        #    }
        #    return [salesType,salesStatus,documentStatus,documentDate,documentNum];
        #}
      ENDSOURCE
      SOURCE #interCompanySalesTable
        #/// <summary>
        #///    Finds and returns the intercompany sales order header record.
        #/// </summary>
        #/// <param name="_forUpdate">
        #///    Specifies whether the intercompany sales order header record should be selected for update.
        #/// </param>
        #/// <returns>
        #///    The intercompany sales order header record.
        #/// </returns>
        #public SalesTable  interCompanySalesTable(boolean  _forUpdate = false)
        #{
        #    SalesTable  salesTable;
        #
        #    if (this.InterCompanyOrder
        #    &&  this.InterCompanyCompanyId
        #    &&  TradeInterCompany::checkDataAreaAccess(this.InterCompanyCompanyId,false))
        #    {
        #        changecompany(this.InterCompanyCompanyId)
        #        {
        #            salesTable = SalesTable::find(this.InterCompanySalesId, _forUpdate);
        #        }
        #
        #    }
        #    return salesTable;
        #}
      ENDSOURCE
      SOURCE #interCompanySalesTableOriginal
        #SalesTable  interCompanySalesTableOriginal(boolean  _forUpdate = false)
        #{
        #    SalesTable  salesTable;
        #;
        #    if (this.InterCompanyOriginalSalesId)
        #    {
        #        changecompany (
        #                       this.company()
        #                       )
        #        {
        #            salesTable = SalesTable::find(this.InterCompanyOriginalSalesId, _forUpdate);
        #        }
        #    }
        #    return salesTable;
        #}
      ENDSOURCE
      SOURCE #interCompanyTradingValueMap
        #/// <summary>
        #/// Gets the intercompany trading value mapping for the current <c>PurchTable</c> table record.
        #/// </summary>
        #/// <param name="_forUpdate">
        #/// A Boolean value that indicates whether to read the record for update; optional.
        #/// </param>
        #/// <returns>
        #/// A record in the <c>InterCompanyTradingValueMap</c> table; otherwise, an empty record.
        #/// </returns>
        #public InterCompanyTradingValueMap interCompanyTradingValueMap(boolean   _forUpdate = false)
        #{
        #    InterCompanyTradingValueMap     interCompanyTradingValueMap;
        #
        #    changecompany (
        #                   this.company()
        #                   )
        #    {
        #        interCompanyTradingValueMap = VendTable::find(this.OrderAccount).interCompanyTradingPartner().interCompanyTradingValueMap(_forUpdate);
        #    }
        #    return interCompanyTradingValueMap;
        #}
        #
      ENDSOURCE
      SOURCE #interCompanyUpdateNow
        #boolean  interCompanyUpdateNow()
        #{
        #    boolean  ok;
        #    // <GEERU>
        #    #isoCountryRegionCodes
        #    boolean         isCountryRegionRU = SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]);
        #    PurchTable_RU   purchTable_RU;
        #    // </GEERU>
        #
        #    if (!this.RecId)
        #    {
        #        ok = true;
        #    }
        #
        #    // <GEERU>
        #    if (isCountryRegionRU)
        #    {
        #        purchTable_RU = this.purchTable_RU();
        #    }
        #    // </GEERU>
        #
        #    if (this.orig().PurchaseType                      != this.PurchaseType
        #    ||  this.orig().CurrencyCode                      != this.CurrencyCode
        #    ||  this.orig().DlvTerm                           != this.DlvTerm
        #    ||  this.orig().DlvMode                           != this.DlvMode
        #    ||  this.orig().DeliveryDate                      != this.DeliveryDate
        #    ||  this.orig().ReceiptDateConfirmed              != this.ReceiptDateConfirmed
        #    ||  this.orig().ShippingDateRequested             != this.ShippingDateRequested
        #    ||  this.orig().ShippingDateConfirmed             != this.ShippingDateConfirmed
        #    ||  this.orig().DeliveryPostalAddress             != this.DeliveryPostalAddress
        #    ||  this.orig().InterCompanyOriginalSalesId       != this.InterCompanyOriginalSalesId
        #    ||  this.orig().InterCompanyOriginalCustAccount   != this.InterCompanyOriginalCustAccount
        #    ||  this.orig().InterCompanyDirectDelivery        != this.InterCompanyDirectDelivery
        #    ||  this.orig().DefaultDimension                  != this.DefaultDimension
        #    ||  this.orig().InterCompanyCustPurchOrderFormNum != this.InterCompanyCustPurchOrderFormNum
        #    ||  this.orig().VendorRef                         != this.VendorRef
        #    ||  this.orig().ReturnItemNum                     != this.ReturnItemNum
        #    ||  this.orig().DiscPercent                       != this.DiscPercent
        #    // <GEERU>
        #    ||  (isCountryRegionRU
        #        && purchTable_RU.orig().InventProfileId_RU    != purchTable_RU.InventProfileId_RU)
        #    // </GEERU>
        #    ||  this.orig().MatchingAgreement                 != this.MatchingAgreement)
        #    {
        #        ok = true;
        #    }
        #
        #    return ok;
        #}
        #
      ENDSOURCE
      SOURCE #invoiceName
        #//BP Deviation documented
        #display VendName invoiceName()
        #{
        #    return this.vendTable_InvoiceAccount().name();
        #}
        #
      ENDSOURCE
      SOURCE #isBankDocumentCreated
        #/// <summary>
        #/// Indicates whether the bank document has been created for this order.
        #/// </summary>
        #/// <returns>
        #/// true if it is created; otherwise, false.
        #/// </returns>
        #public boolean isBankDocumentCreated()
        #{
        #    return this.isBankLCCreated()
        #        || this.isBankLGCreated();
        #}
      ENDSOURCE
      SOURCE #isBankLCCreated
        #/// <summary>
        #/// Indicates whether the bank LC has been created for this order.
        #/// </summary>
        #/// <returns>
        #/// true if it is created; otherwise, false.
        #/// </returns>
        #public boolean isBankLCCreated()
        #{
        #    boolean ret = false;
        #
        #    if (this.isMarkedForBankLC())
        #    {
        #        ret = BankLCImport::existByPurchTable(this.PurchId);
        #    }
        #
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #isBankLGCreated
        #/// <summary>
        #/// Indicates whether the Bank LG has been created for this order.
        #/// </summary>
        #/// <returns>
        #/// true if it is created; otherwise, false.
        #/// </returns>
        #public boolean isBankLGCreated()
        #{
        #    boolean     ret = false;
        #
        #    if (this.isMarkedForBankLG() && this.BankLGDocumentMap::isLinkedToGuarantee())
        #    {
        #        ret = true;
        #    }
        #
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #isCancellingFiscalDocument_BR
        #/// <summary>
        #/// Verifies whether the purchase order is for cancelling a fiscal document issued by current fiscal establisment.
        #/// </summary>
        #/// <returns>
        #/// Returns true if the purchase order is for cancelling an original fiscal document issued by current FE; false otherwise.
        #/// </returns>
        #public boolean isCancellingFiscalDocument_BR()
        #{
        #    PurchTable_BR       purchTable_BR;
        #
        #    purchTable_BR = this.purchTable_BR();
        #
        #    return purchTable_BR.isCancellingOrReversingFiscalDocument() && purchTable_BR.isRelatedFiscalDocIssuedByFiscalEstab();
        #}
      ENDSOURCE
      SOURCE #isCancellingPurchaseReturn_BR
        #/// <summary>
        #///     Verifies whether the purchase order is for cancelling a purchase return previously entered.
        #/// </summary>
        #/// <returns>
        #///     true if the purchase order is for cancelling a purchase return; false otherwise.
        #/// </returns>
        #public boolean isCancellingPurchaseReturn_BR()
        #{
        #    PurchTable_BR       purchTable_BR;
        #    FiscalDocument_BR   fiscalDocumentBeingCancelled;
        #
        #    purchTable_BR = this.purchTable_BR();
        #
        #    if (!purchTable_BR.isCancellingOrReversingFiscalDocument())
        #    {
        #        return false;
        #    }
        #
        #    fiscalDocumentBeingCancelled = FiscalDocument_BR::findByRef(tableNum(VendInvoiceJour), purchTable_BR.InvoiceRefRecId_BR);
        #
        #    if (fiscalDocumentBeingCancelled.Direction == FiscalDocDirection_BR::Outgoing)
        #    {
        #        return true;
        #    }
        #
        #    return false;
        #}
      ENDSOURCE
      SOURCE #isCustomsImportOrder_IN
        #/// <summary>
        #/// Checks if the table is in customs import order.
        #/// </summary>
        #/// <returns>
        #/// Returns true if the table is in customs import order.
        #/// </returns>
        #// <GIN>
        #public boolean isCustomsImportOrder_IN()
        #{
        #    return this.purchTable_W().CustomsImportOrder_IN;
        #}
        #// </GIN>
      ENDSOURCE
      SOURCE #isDirectImport_BR
        #/// <summary>
        #///     Indicates whether a purchase order is a direct import order by checking its CFOP.
        #/// </summary>
        #/// <returns>
        #///     true if the CFOP is for foreign operations; otherwise false.
        #/// </returns>
        #public boolean isDirectImport_BR()
        #{
        #    PurchLine purchLine;
        #
        #    select firstonly cfopTable_BR
        #        from purchLine
        #        where purchLine.PurchId == this.PurchId;
        #
        #    return CFOPTable_BR::find(purchLine.cfopTable_BR).CustVendLocation == CustVendLocation_BR::OutsideCountry;
        #}
        #
      ENDSOURCE
      SOURCE #isDocumentConfirmed
        #/// <summary>
        #/// Determines if the purchase order is confirmed.
        #/// </summary>
        #/// <returns>
        #/// true if the purchase order is confirmed; otherwise, false.
        #/// </returns>
        #// <PubSect>
        #public boolean isDocumentConfirmed()
        #{
        #    boolean isDocumentConfirmed;
        #
        #    isDocumentConfirmed = this.DocumentState == VersioningDocumentState::Confirmed;
        #
        #    return isDocumentConfirmed;
        #}
        #// </PubSect>
      ENDSOURCE
      SOURCE #isDropShipment
        #/// <summary>
        #///    Indicates whether a purchase order is created as a direct delivery order.
        #/// </summary>
        #/// <returns>
        #///    true if there are direct delivery lines for the purchase order; otherwise, false.
        #/// </returns>
        #boolean isDropShipment()
        #{
        #    PurchLine   purchLine;
        #
        #    select firstonly RecId from purchLine
        #        where purchLine.PurchId         == this.PurchId
        #           && purchLine.DeliveryType    == TradeLineDlvType::DropShip
        #           && !purchLine.IsDeleted;
        #
        #    return purchLine.RecId;
        #}
      ENDSOURCE
      SOURCE #isExcisable_IN
        #/// <summary>
        #///     Checks to see if any of the lines associated with the current header is a excise type.
        #/// </summary>
        #/// <returns>
        #///     True, if at least one line is of excise type.
        #/// </returns>
        #// <GIN>
        #public boolean isExcisable_IN()
        #{
        #    PurchLine    purchLine;
        #    PurchLine_IN purchLine_IN;
        #    TaxOnItem    taxOnItem;
        #    TaxTable     taxTable;
        #    TaxComponentTable_IN taxComponentTable;
        #
        #    select firstonly RecId, PurchId, PurchQty, PurchaseType from purchLine
        #        where purchLine.PurchId == this.PurchId
        #    exists join purchLine_IN
        #        where purchLine_IN.PurchLine == purchLine.RecId &&
        #            (purchLine_IN.ExciseType_IN == ExciseType_IN::Manufacturer || purchLine_IN.ExciseType_IN == ExciseType_IN::Trader)
        #    exists join taxOnItem
        #        where taxOnItem.TaxItemGroup == purchLine.TaxItemGroup
        #    exists join taxTable
        #        where taxTable.TaxCode == taxOnItem.TaxCode &&
        #            (taxTable.TaxType_IN == TaxType_IN::Excise || taxTable.TaxType_IN == TaxType_IN::Customs)
        #    exists join taxComponentTable
        #        where taxComponentTable.RecId == taxTable.TaxComponentTable_IN &&
        #            (taxComponentTable.TaxType == TaxType_IN::Excise
        #                || (taxComponentTable.TaxType == TaxType_IN::Customs && taxComponentTable.ApplyExcise == NoYes::Yes));
        #
        #    return (purchLine.RecId && ((purchLine.PurchaseType == PurchaseType::ReturnItem || purchLine.creditNoteLine())
        #            || (this.isCustomsImportOrder_IN() && purchLine.creditNoteLine())));
        #}
        #// </GIN>
        #
      ENDSOURCE
      SOURCE #isFinalized
        #/// <summary>
        #///     Checks if the purchase order is finalized.
        #/// </summary>
        #/// <returns>
        #///     True if the purchase order is finalized; oterwise, false
        #/// </returns>
        #public boolean isFinalized()
        #{
        #    return this.DocumentState == VersioningDocumentState::Finalized;
        #}
      ENDSOURCE
      SOURCE #isFullyInvoicedIncludingPendingInvoice
        #/// <summary>
        #/// Indicates whether the current purchase order is fully invoiced by either posted invoices or active
        #/// invoices.
        #/// </summary>
        #/// <returns>
        #/// true if the purchase order is fully invoiced; otherwise, false.
        #/// </returns>
        #public boolean isFullyInvoicedIncludingPendingInvoice()
        #{
        #    PurchLine   purchLine;
        #
        #    //if this is already invoiced fully by a posted PO, it is less expensive to check the purchStatus field and short-circuit everything else.
        #    if(this.PurchStatus == PurchStatus::Invoiced)
        #    {
        #        return true;
        #    }
        #
        #    //For each purchLine record, make sure that the line is fully invoiced.  If it is not return false.
        #    while select purchLine
        #        where purchLine.PurchId == this.PurchId &&
        #                purchLine.IsDeleted == NoYes::No
        #    {
        #        //if the line is not fully invoiced, then return false
        #        if(purchLine.RemainPurchFinancial + purchLine.RemainPurchPhysical - purchLine.calcPendingQtyPurch() != 0)
        #        {
        #            return false;
        #        }
        #    }
        #
        #    //if we have made it this far then the PO is fully invoiced
        #    return true;
        #}
      ENDSOURCE
      SOURCE #isInterCompanyOrder
        #boolean  isInterCompanyOrder()
        #{;
        #    return (this.InterCompanyOrder
        #        &&  this.InterCompanyCompanyId != ''
        #        &&  this.SkipUpdate            != InterCompanySkipUpdate::InterCompany
        #        &&  this.SkipUpdate            != InterCompanySkipUpdate::Both);
        #}
      ENDSOURCE
      SOURCE #isInvoiceMatched
        #/// <summary>
        #/// Indicates whether the purchase order was partially of fully invoiced.
        #/// </summary>
        #/// <returns>
        #/// true if the order was partially of fully invoiced; otherwise, false.
        #/// </returns>
        #public boolean isInvoiceMatched()
        #{
        #
        #    if (this.DocumentStatus < DocumentStatus::Invoice
        #        // The Confirmation Request enum has bigger value than the Invoice, but logically it is less than the one of Invoice
        #        || this.DocumentStatus == DocumentStatus::ConfirmationRequest)
        #    {
        #        return false;
        #    }
        #
        #    return (select firstonly RecId from vendInvoicePurchLink
        #        where vendInvoicePurchLink.OrigPurchId == this.PurchId).RecId != 0;
        #}
      ENDSOURCE
      SOURCE #isMarkedForBankLC
        #/// <summary>
        #/// Indicates whether the purchase order is marked for letter of credit.
        #/// </summary>
        #/// <returns>
        #/// true if the purchase order is marked for letter of credit; otherwise, false.
        #/// </returns>
        #public boolean isMarkedForBankLC()
        #{
        #    return this.BankDocumentType == BankDocumentType::LetterOfCredit
        #        || this.BankDocumentType == BankDocumentType::ImportCollection;
        #}
      ENDSOURCE
      SOURCE #isMarkedForBankLG
        #/// <summary>
        #/// Indicates whether the purchase order is marked for letter of guarantee.
        #/// </summary>
        #/// <returns>
        #/// true if the purchase order is marked for letter of guarantee; otherwise, false.
        #/// </returns>
        #public boolean isMarkedForBankLG()
        #{
        #    return this.BankDocumentType == BankDocumentType::LetterOfGuarantee;
        #}
        #
      ENDSOURCE
      SOURCE #isPartiallyDistributed
        #/// <summary>
        #///    Performs a check whether any lines that are partially distributed exist.
        #/// </summary>
        #/// <returns>
        #///    True, if there are partially distributed lines; otherwise false.
        #/// </returns>
        #/// <remarks>
        #///     A line is either not distributed, partially distributed, or fully distributed.
        #///     This method will return true if any lines that have distributions, but aren't fully
        #///     distributed exist.
        #/// </remarks>
        #public server boolean isPartiallyDistributed()
        #{
        #    PurchLine   purchLine;
        #    SourceDocumentLine sourceDocumentLine;
        #    AccountingDistribution accountingDistribution;
        #    boolean     ret;
        #
        #    while select purchLine
        #        where purchLine.PurchId == this.PurchId
        #            && !purchLine.IsDeleted
        #        join sourceDocumentLine
        #            where sourceDocumentLine.RecId == purchLine.SourceDocumentLine
        #            exists join accountingDistribution
        #                where accountingDistribution.SourceDocumentLine == sourceDocumentLine.RecId
        #    {
        #        ret = !purchLine.isFullyDistributed(sourceDocumentLine);
        #        if (ret)
        #        {//break the loop as soon as one partially distributed line is found.
        #            break;
        #        }
        #    }
        #
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #isProjectSalesItemReqPO
        #public boolean isProjectSalesItemReqPO()
        #{
        #    InterCompanyPurchSalesReference     interCompanyPurchSalesReference;
        #    SalesTable                          salesTable;
        #
        #    if (!this.ProjId)
        #    {
        #        return false;
        #    }
        #
        #    select firstonly RecId from interCompanyPurchSalesReference
        #        where interCompanyPurchSalesReference.PurchId == this.PurchId
        #            exists join salesTable
        #                where salesTable.SalesId == interCompanyPurchSalesReference.SalesId
        #                    && salesTable.ProjId == this.ProjId;
        #
        #    return (interCompanyPurchSalesReference.RecId == 0 ? false : true);
        #}
        #
      ENDSOURCE
      SOURCE #isReversingFiscalDocument_BR
        #/// <summary>
        #/// Verifies whether the purchase order is for reversing a fiscal document issued by third party
        #/// </summary>
        #/// <returns>
        #/// Returns true if the purchase order is for reversing an original fiscal document issued by third party; false otherwise.
        #/// </returns>
        #public boolean isReversingFiscalDocument_BR()
        #{
        #    PurchTable_BR       purchTable_BR;
        #
        #    purchTable_BR = this.purchTable_BR();
        #
        #    return purchTable_BR.isCancellingOrReversingFiscalDocument() && purchTable_BR.isRelatedFiscalDocIssuedByThirdParty();
        #}
      ENDSOURCE
      SOURCE #isVersioned
        #/// <summary>
        #/// Determines whether the order has been versioned, i.e. whether it has been confirmed or approved with change management enabled.
        #/// </summary>
        #/// <returns>true if the order has been versioned; otherwise, false.</returns>
        #public boolean isVersioned()
        #{
        #    if (this.IsModified)
        #    {
        #        // If the header is modified then it is either new or modified with history.
        #        return VersioningPurchaseOrder::checkHistoryExist(this);
        #    }
        #    else
        #    {
        #        // If the header is not modified then it is versioned.
        #        return true;
        #    }
        #}
      ENDSOURCE
      SOURCE #jumpRefIntercompanySalesOrder
        #/// <summary>
        #///   Jump reference for the intercompany sales order relating to the purchase order.
        #/// </summary>
        #/// <param name="_caller">
        #///    The object that is calling the <c>jumpRefIntercompanySalesOrder</c> method; optional.
        #/// </param>
        #public void jumpRefIntercompanySalesOrder(Object _caller = null)
        #{
        #    if (this.PurchaseType == PurchaseType::ReturnItem)
        #    {
        #        TradeInterCompany::construct(this).formRun(formStr(ReturnTable),_caller);
        #    }
        #    else
        #    {
        #        TradeInterCompany::construct(this).formRun(formStr(SalesTable),_caller);
        #    }
        #}
      ENDSOURCE
      SOURCE #lastConfirmationRequestJournal
        #/// <summary>
        #/// Returns the last entry in the <c>PurchConfirmationRequestJour</c> table.
        #/// </summary>
        #/// <returns>
        #/// The last record created in the <c>PurchConfirmationRequestJour</c> table.
        #/// </returns>
        #public client server PurchConfirmationRequestJour lastConfirmationRequestJournal()
        #{
        #    PurchConfirmationRequestJour      purchConfirmationRequestJour;
        #    PurchTableVersion                 purchTableVersion;
        #
        #    select firstonly * from purchConfirmationRequestJour
        #    join TableId from purchTableVersion
        #        order by purchConfirmationRequestJour.DocumentNumber desc, RecId desc
        #        where   purchTableVersion.PurchId                      == this.PurchId
        #            &&  purchTableVersion.PurchIdDataAreaId            == this.DataAreaId
        #            &&  purchConfirmationRequestJour.PurchTableVersion == purchTableVersion.RecId;
        #
        #    return purchConfirmationRequestJour;
        #}
      ENDSOURCE
      SOURCE #lastFacture_RU
        ##define.FactureNumPosition(1)
        #public FactureExternalId_RU lastFacture_RU()
        #{
        #    return conPeek(this.lastFactureNumDate_RU(), #FactureNumPosition);
        #}
      ENDSOURCE
      SOURCE #lastFactureNumDate_RU
        #private container lastFactureNumDate_RU()
        #{
        #    FactureJour_RU          jour;
        #    VendInvoicePurchLink    invoicePurchLink;
        #    VendInvoiceJour         invoiceJour;
        #    RecordSortedList        list = new RecordSortedList(tableNum(FactureJour_RU)),
        #                            tmpList;
        #
        #    // to avoid BP warning
        #    void dummy()
        #    {
        #    }
        #
        #    select firstonly RecId from jour;
        #    if(! jour.RecId)
        #        return ["", dateNull()];
        #
        #    list.sortOrder(fieldNum(FactureJour_RU, FactureDate),
        #                   fieldNum(FactureJour_RU, FactureId),
        #                   fieldNum(FactureJour_RU, ModifiedDateTime),
        #                   fieldNum(FactureJour_RU, RecId));
        #
        #    while select RecId from invoicePurchLink
        #        index hint origPurchIdx
        #        where invoicePurchLink.OrigPurchId == this.PurchId
        #    join invoiceJour
        #        where invoiceJour.PurchId     == invoicePurchLink.PurchId   &&
        #              invoiceJour.InvoiceId   == invoicePurchLink.InvoiceId &&
        #              invoiceJour.InvoiceDate == invoicePurchLink.InvoiceDate
        #    {
        #        tmpList = invoiceJour.factureJourSortedList_RU();
        #        tmpList.first(jour);
        #        if (jour)
        #        {
        #            while (tmpList.next(jour))
        #            {
        #                dummy();
        #            } // last element
        #            if (! list.find(jour))
        #            {
        #                list.ins(jour);
        #            }
        #        }
        #    }
        #
        #    list.first(jour);
        #    while (list.next(jour))
        #    {
        #        dummy();
        #    } // last element
        #
        #    return [ jour.FactureExternalId, jour.FactureDate ];
        #}
      ENDSOURCE
      SOURCE #lastInventExtPackingSlip
        #/// <summary>
        #/// Finds last product receipt from ext. inventory delivery note based on pucrhase id.
        #/// </summary>
        #/// <returns>
        #/// Last product receipt where update was made.
        #/// </returns>
        #//BP Deviation documented
        #client server
        #display LastPlPackingSlipExternalId  lastInventExtPackingSlip()
        #{
        #    PlInventPackingSlipExtJour  inventPackingSlipExtJour;
        #    select firstonly PackingSlipId from inventPackingSlipExtJour
        #        index hint origPurchIdx
        #        order by TransDate desc, PackingSlipId desc
        #        where inventPackingSlipExtJour.PurchId == this.PurchId;
        #
        #    return  inventPackingSlipExtJour.PackingSlipId;
        #}
        #
      ENDSOURCE
      SOURCE #lastInvoice
        #//BP Deviation documented
        #client server
        #display LastInvoiceId  lastInvoice()
        #{
        #    return (select firstonly InvoiceId from vendInvoicePurchLink
        #                index hint origPurchIdx
        #                order by InvoiceDate desc, InvoiceId desc
        #                where vendInvoicePurchLink.OrigPurchId == this.PurchId).InvoiceId;
        #}
      ENDSOURCE
      SOURCE #lastInvoice4Paym_RU
        ##define.Invoice4PaymNumPosition(1)
        #//BP deviation documented
        #server display Invoice4PaymId_RU lastInvoice4Paym_RU()
        #{
        #    return conPeek(this.lastInvoice4PaymNumDate_RU(), #Invoice4PaymNumPosition);
        #}
      ENDSOURCE
      SOURCE #lastInvoice4PaymDate_RU
        ##define.Invoice4PaymDatePosition(2)
        #//BP deviation documented
        #server display TransDate lastInvoice4PaymDate_RU()
        #{
        #    return conPeek(this.lastInvoice4PaymNumDate_RU(), #Invoice4PaymDatePosition);
        #}
      ENDSOURCE
      SOURCE #lastInvoice4PaymNumDate_RU
        #private server container lastInvoice4PaymNumDate_RU()
        #{
        #    VendInvoice4PaymPurchLink_RU invoice4PaymPurchLink;
        #
        #    select firstonly Invoice4PaymId, Invoice4PaymDate from invoice4PaymPurchLink
        #        index hint OrigPurchIdx
        #        order by Invoice4PaymDate desc
        #        where invoice4PaymPurchLink.OrigPurchId == this.PurchId;
        #
        #    return [ invoice4PaymPurchLink.Invoice4PaymId, invoice4PaymPurchLink.Invoice4PaymDate ];
        #}
      ENDSOURCE
      SOURCE #lastInvoiceDate
        #//BP Deviation documented
        #client server
        #display LastInvoiceDate lastInvoiceDate()
        #{
        #    return (select maxof(InvoiceDate) from vendInvoicePurchLink
        #                index hint origPurchIdx
        #                where vendInvoicePurchLink.OrigPurchId == this.PurchId).InvoiceDate;
        #}
      ENDSOURCE
      SOURCE #lastJournals
        #server container  lastJournals()
        #{
        #    // <GEERU>
        #    #ISOCountryRegionCodes
        #    // </GEERU>
        #    container  c;
        #
        #    c = conIns(c, PurchTableType::posPurchaseOrder(),   [this.lastPurchaseOrder(),  this.lastPurchaseOrderDate()]);
        #    c = conIns(c, PurchTableType::posReceiptsList(),    [this.lastReceiptsList(),   this.lastReceiptsListDate()]);
        #    c = conIns(c, PurchTableType::posPackingSlip(),     [this.lastPackingSlip(),    this.lastPackingSlipDate()]);
        #    c = conIns(c, PurchTableType::posInvoice(),         [this.lastInvoice(),        this.lastInvoiceDate()]);
        #
        #    // <GEERU>
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
        #    {
        #        c = conIns(c, PurchTableType::posInvoice4Paym_RU(), this.lastInvoice4PaymNumDate_RU());
        #        c = conIns(c, PurchTableType::posFacture_RU(),      this.lastFactureNumDate_RU());
        #    }
        #    // </GEERU>
        #
        #    return c;
        #}
      ENDSOURCE
      SOURCE #lastPackingSlip
        #//BP Deviation documented
        #client server
        #display LastPackingSlipId  lastPackingSlip()
        #{
        #    return (select firstonly PackingSlipId from vendPackingSlipPurchLink
        #                index hint origPurchIdx
        #                order by DeliveryDate desc, PackingSlipId desc
        #                where vendPackingSlipPurchLink.OrigPurchId == this.PurchId).PackingSlipId;
        #}
      ENDSOURCE
      SOURCE #lastPackingSlipDate
        #//BP Deviation documented
        #client server
        #display LastPackingSlipDate lastPackingSlipDate()
        #{
        #    return (select maxof(DeliveryDate) from vendPackingSlipPurchLink
        #                index hint origPurchIdx
        #                where vendPackingSlipPurchLink.OrigPurchId == this.PurchId).DeliveryDate;
        #}
      ENDSOURCE
      SOURCE #lastPaymentRequest
        #client server display CFMPaymentRequestId  lastPaymentRequest()
        #{
        #    CFMPaymentRequestTable  paymentRequestTable;
        #    VendTrans               vendTrans;
        #    VendInvoiceJour         vendInvoice;
        #    VendInvoicePurchLink    vendInvoicePurchLink;
        #    CFMPaymentRequestId     result;
        #
        #    if (CFMParameters::isPaymentRequestsEnabled())
        #    {
        #        select firstonly PaymentRequestId from paymentRequestTable
        #            order by PaymentDate desc
        #            where paymentRequestTable.SourceType == CFMPaymentRequestSourceType::VendInvoice
        #            exists join vendTrans
        #                where vendTrans.RecId == paymentRequestTable.HeaderRefRecId
        #            exists join vendInvoice
        #                where vendInvoice.InvoiceId == vendTrans.Invoice
        #                   && vendInvoice.LedgerVoucher == vendTrans.Voucher
        #                   && vendInvoice.InvoiceDate == vendTrans.TransDate
        #                   && vendInvoice.InvoiceAccount == vendTrans.AccountNum
        #            exists join vendInvoicePurchLink
        #                where vendInvoice.PurchId == vendInvoicePurchLink.PurchId
        #                   && vendInvoice.InvoiceId == vendInvoicePurchLink.InvoiceId
        #                   && vendInvoice.InternalInvoiceId == vendInvoicePurchLink.InternalInvoiceId
        #                   && vendInvoice.InvoiceDate == vendInvoicePurchLink.InvoiceDate
        #                   && vendInvoicePurchLink.origPurchId == this.purchId;
        #
        #        if (!paymentRequestTable.PaymentRequestId)
        #        {
        #            select firstonly PaymentRequestId from paymentRequestTable
        #                where paymentRequestTable.HeaderRefRecId == this.RecId
        #                    && paymentRequestTable.SourceType == CFMPaymentRequestSourceType::PlannedPayment;
        #        }
        #        result = paymentRequestTable.PaymentRequestId;
        #    }
        #    return result;
        #}
      ENDSOURCE
      SOURCE #lastPurchaseOrder
        #//BP Deviation documented
        #client server
        #display LastPurchaseOrderId  lastPurchaseOrder()
        #{
        #    VendPurchOrderJour      vendPurchOrderJour;
        #
        #    select firstonly PurchOrderDocNum from vendPurchOrderJour
        #            order by PurchOrderDate desc, PurchaseOrderId desc
        #            where vendPurchOrderJour.PurchId == this.PurchId;
        #
        #    return vendPurchOrderJour.PurchOrderDocNum;
        #}
      ENDSOURCE
      SOURCE #lastPurchaseOrderDate
        #//BP Deviation documented
        #[SysClientCacheDataMethodAttribute(false)]
        #client server
        #display LastPurchaseOrderDate lastPurchaseOrderDate()
        #{
        #    return (select maxof(PurchOrderDate) from vendPurchOrderJour
        #                where vendPurchOrderJour.PurchId == this.PurchId).PurchOrderDate;
        #}
      ENDSOURCE
      SOURCE #lastPurchConfirmationRequestJour
        #/// <summary>
        #/// Method returns the <c>DocumentNumber</c> for the last <c>PurchConfirmationRequestJour</c> record.
        #/// </summary>
        #/// <returns>
        #/// The <c>DocumentNumber</c> of the last <c>PurchConfirmationRequestJour</c> record.
        #/// </returns>
        #[SysClientCacheDataMethodAttribute(true)]
        #public client server display PurchLastConfirmationRequestId lastPurchConfirmationRequestJour()
        #{
        #    return this.lastConfirmationRequestJournal().DocumentNumber;
        #}
      ENDSOURCE
      SOURCE #lastPurchConfirmationRequestJourDate
        #/// <summary>
        #/// Method returns the <c>DocumentDate</c> field value for the last <c>PurchConfirmationRequestJour</c> record.
        #/// </summary>
        #/// <returns>
        #/// The <c>DocumentDate</c> field value of the last <c>PurchConfirmationRequestJour</c> record.
        #/// </returns>
        #[SysClientCacheDataMethodAttribute(true)]
        #public client server display PurchLastConfirmationRequestDate  lastPurchConfirmationRequestJourDate()
        #{
        #    return this.lastConfirmationRequestJournal().DocumentDate;
        #}
      ENDSOURCE
      SOURCE #lastReceiptsList
        #//BP Deviation documented
        #client server
        #display LastReceiptsListId  lastReceiptsList()
        #{
        #    return (select firstonly ReceiptsListId from vendReceiptsListPurchLink
        #                index hint origPurchIdx
        #                order by ReceiptsListDate desc, ReceiptsListId desc
        #                where vendReceiptsListPurchLink.OrigPurchId == this.PurchId).ReceiptsListId;
        #}
      ENDSOURCE
      SOURCE #lastReceiptsListDate
        #//BP Deviation documented
        #client server
        #display LastReceiptsListDate lastReceiptsListDate()
        #{
        #    return (select maxof(ReceiptsListDate) from vendReceiptsListPurchLink
        #                index hint origPurchIdx
        #                where vendReceiptsListPurchLink.OrigPurchId == this.PurchId).ReceiptsListDate;
        #}
      ENDSOURCE
      SOURCE #lineMapping
        #/// <summary>
        #/// Retrieves the table ID of the table that is considered to be the line table.
        #/// </summary>
        #/// <returns>
        #/// The ID of the <c>PurchLine</c> table.
        #/// </returns>
        #public RefTableId lineMapping()
        #{
        #    return tableNum(PurchLine);
        #}
      ENDSOURCE
      SOURCE #maintainTaxUncommitted
        #/// <summary>
        #/// Determines whether <c>TaxUncommitted</c> records should be maintained or flushed.
        #/// </summary>
        #/// <returns>true if <c>TaxUncommitted</c> records should be maintained; otherwise, false.</returns>
        #public boolean maintainTaxUncommitted()
        #{
        #    return VersioningPurchaseOrder::checkHistoryExist(this);
        #}
      ENDSOURCE
      SOURCE #mayBankDocumentTypeBeBankLCImport
        #/// <summary>
        #/// Indicates whether the bank document type can be set to bank LC import.
        #/// </summary>
        #/// <returns>
        #/// true if the document type can be set; otherwise, false.
        #/// </returns>
        #public boolean mayBankDocumentTypeBeBankLCImport()
        #{
        #    return this.PurchaseType        == PurchaseType::Purch
        #        && this.DocumentState       != VersioningDocumentState::Confirmed
        #        && this.PurchStatus         == PurchStatus::Backorder
        #        && this.InterCompanyOrder   == NoYes::No;
        #}
      ENDSOURCE
      SOURCE #mayBankDocumentTypeBeBankLG
        #/// <summary>
        #/// Checks whether the Bank document type can be set to the types of Bank LG.
        #/// </summary>
        #/// <returns>
        #/// true if allowed; otherwise, false.
        #/// </returns>
        #public boolean mayBankDocumentTypeBeBankLG()
        #{
        #    // It is not allowed to create LG on purchase order if
        #    // the related project's bank document type is set to LG.
        #    return !(this.ProjId && ProjTable::find(this.ProjId).isMarkedForBankLG());
        #}
      ENDSOURCE
      SOURCE #mayInterCompanyBeUpdated
        #/// <summary>
        #/// Determines whether an intercompany order can be updated.
        #/// </summary>
        #/// <returns>
        #/// true if the intercompany order can be updated; otherwise, false.
        #/// </returns>
        #public boolean mayInterCompanyBeUpdated()
        #{
        #    return this.type().interCompanyCanBeUpdated();
        #}
      ENDSOURCE
      SOURCE #mayInvoice4PaymBeUpdated_RU
        #public boolean mayInvoice4PaymBeUpdated_RU()
        #{
        #    return this.type().mayInvoice4PaymBeUpdated_RU();
        #}
      ENDSOURCE
      SOURCE #mayInvoiceBeUpdated
        #boolean  mayInvoiceBeUpdated()
        #{
        #    return this.type().mayInvoiceBeUpdated();
        #}
      ENDSOURCE
      SOURCE #mayPackingSlipBeUpdated
        #public boolean mayPackingSlipBeUpdated(VersioningUpdateType _updateType = VersioningUpdateType::Initial)
        #{
        #    return this.type().mayPackingSlipBeUpdated(_updateType);
        #}
      ENDSOURCE
      SOURCE #mayPurchaseOrderBeUpdated
        #boolean  mayPurchaseOrderBeUpdated()
        #{
        #    return this.type().mayPurchaseOrderBeUpdated();
        #}
      ENDSOURCE
      SOURCE #mayReceiptsListBeUpdated
        #boolean  mayReceiptsListBeUpdated()
        #{
        #    return this.type().mayReceiptsListBeUpdated();
        #}
      ENDSOURCE
      SOURCE #mcrDisplayOnHold
        #/// <summary>
        #/// Determines whether or not to return a on hold icon.
        #/// </summary>
        #/// <returns>
        #/// The defined on hold icon which is set in the resAppl macro.
        #/// </returns>
        #public display MCRDisplayOnHold mcrDisplayOnHold()
        #{
        #    #MCRresAppl
        #    int image = 0;
        #
        #    if (MCRHoldCodeTrans::findActiveOrderHolds(this.PurchId))
        #    {
        #        image = #MCRImage_OnHold;
        #    }
        #    return image;
        #}
      ENDSOURCE
      SOURCE #mergeDimension
        #/// <summary>
        #/// Retrieves a dimension set that contains the merged combination of the current
        #/// <c>defaultDimension</c> field on this table and the provided dimension set.
        #/// </summary>
        #/// <param name="_primaryDefaultDimension">
        #/// A first dimension set to merge with the current <c>defaultDimension</c> field on this table.
        #/// </param>
        #/// <param name="_secondaryDefaultDimension">
        #/// A second dimension set to merge with the current <c>defaultDimension</c> field on this table;
        #/// optional.
        #/// </param>
        #/// <param name="_dimensionMerge">
        #/// A <c>dimensionMerge</c> object that was instantiated with the current buffer; optional.
        #/// </param>
        #/// <returns>
        #/// A dimension set that contains the merged combination of the current <c>defaultDimension</c> field
        #/// on this table and the provided dimension set.
        #/// </returns>
        #/// <remarks>
        #/// This method makes sure that potential linked dimensions are not overwritten when they are merged.
        #/// </remarks>
        #
        #public DimensionDefault mergeDimension(
        #    DimensionDefault _primaryDefaultDimension,
        #    DimensionDefault _secondaryDefaultDimension = 0,
        #    DimensionMerge   _dimensionMerge = DimensionMerge::newFromTable(this,
        #                                                                    this.companyInfo().RecId
        #                                                                    )
        #    )
        #{
        #    return _dimensionMerge.merge(_primaryDefaultDimension, _secondaryDefaultDimension);
        #}
      ENDSOURCE
      SOURCE #modifiedField
        #public void modifiedField(FieldId _fieldId)
        #{
        #    // <GEERU>
        #    #ISOCountryRegionCodes
        #    PurchTable_RU   purchTable_RU;
        #    // </GEERU>
        #    // <GIN>
        #    PurchTable_W    purchTable_W;
        #    PurchLine       purchLine;
        #    PurchLine_IN    purchLineIN;
        #    // </GIN>
        #
        #    super(_fieldId);
        #
        #    switch (_fieldId)
        #    {
        #        case fieldNum(PurchTable, ContactPersonId):
        #            this.initFromContactInfo();
        #            break;
        #        case fieldNum(PurchTable, InventLocationId):
        #            this.InventStorageDimMap::modifiedField(fieldNum(InventStorageDimMap, InventLocationId));
        #            this.setAddressFromInventLocationId(this.InventLocationId);
        #            break;
        #
        #        case fieldNum(PurchTable, InventSiteId):
        #            this.InventStorageDimMap::modifiedField(fieldNum(InventStorageDimMap, InventSiteId));
        #            this.setAddressFromInventSiteId(this.InventSiteId);
        #            break;
        #
        #        case fieldNum(PurchTable, InterCompanyOrder):
        #            if (this.InterCompanyOrder)
        #            {
        #                this.InterCompanyCompanyId = this.vendTable_OrderAccount().interCompanyTradingPartnerCompanyID();
        #                if (this.isMarkedForBankLC())
        #                {
        #                    this.BankDocumentType = BankDocumentType::None;
        #                }
        #            }
        #            else
        #                this.InterCompanyCompanyId = '';
        #            break;
        #
        #        case fieldNum(PurchTable, BankDocumentType):
        #            this.type().modifiedBankDocumentType();
        #            break;
        #
        #        case fieldNum(PurchTable, InvoiceAccount):
        #            // <GEERU>
        #            if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
        #            {
        #                if(this.RecId && this.MatchingAgreement && this.InvoiceAccount != this.orig().InvoiceAccount )
        #                {
        #                    if (!this.unlinkAgreementPrompt())
        #                    {
        #                        this.InvoiceAccount = this.orig().InvoiceAccount;
        #                        break;
        #                    }
        #                }
        #            }
        #            // </GEERU>
        #            if (!this.existMarkedSettlement(_fieldId))
        #                this.transferInvoiceAccount();
        #            else
        #                this.reread();
        #            break;
        #
        #        case fieldNum(PurchTable, MarkupGroup):
        #            this.modifieMarkupGroup();
        #            break;
        #
        #        case fieldNum(PurchTable, OrderAccount):
        #            if(this.RecId && this.MatchingAgreement && this.OrderAccount != this.orig().OrderAccount )
        #            {
        #                if (!this.unlinkAgreementPrompt(
        #                                                false
        #                                                ))
        #                {
        #                    this.OrderAccount = this.orig().OrderAccount;
        #                    break;
        #                }
        #            }
        #
        #            // <GIN>
        #            if (TaxParameters::isCustomsEnable_IN()
        #                && this.OrderAccount)
        #            {
        #                purchTable_W = this.purchTable_W();
        #                purchTable_W.CustomsImportOrder_IN = VendTable::find(this.OrderAccount).isForeign();
        #                this.packPurchTable_W(purchTable_W);
        #            }
        #
        #            if (TaxParameters::checkTaxParameters_IN())
        #            {
        #                purchTable_W = this.purchTable_W();
        #                purchTable_W.ExciseVendorType_IN = VendTable::find(this.OrderAccount).getTaxInformationVendTable_IN().ExciseVendorType;
        #                this.packPurchTable_W(purchTable_W);
        #            }
        #            // </GIN>
        #            // <GSA>
        #            if (LedgerParameters::find().IsZakatEnabled_SA)
        #            {
        #                this.ContractNum_SA = '';
        #            }
        #            // </GSA>
        #            if (!this.existMarkedSettlement(_fieldId))
        #                this.transferOrderAccount();
        #            else
        #                this.reread();
        #
        #            this.DefaultDimension = this.copyDimension(this.DefaultDimension);
        #            break;
        #
        #        case fieldNum(PurchTable, Payment):
        #            this.initFromPayment();
        #            break;
        #
        #        case fieldNum(PurchTable, PaymMode):
        #            this.paymModeModified();
        #            break;
        #
        #        case fieldNum(PurchTable, BankCentralBankPurposeCode):
        #            this.BankCentralBankPurposeText = BankCentralBankPurpose::find(this.BankCentralBankPurposeCode).Text;
        #            break;
        #
        #        case fieldNum(PurchTable, Requester):
        #            this.ReqAttention = HcmWorkerTitle::findByWorker(this.Requester).OfficeLocation;
        #            break;
        #
        #        case fieldNum(PurchTable, DiscPercent):
        #            this.setPriceDiscChangePolicy(PriceDiscSystemSource::ManualEntry, _fieldId);
        #            break;
        #
        #        case fieldNum(PurchTable, ProjId):
        #            this.DefaultDimension = this.copyDimension(this.DefaultDimension);
        #            break;
        #
        #
        #        // <GEERU>
        #        case fieldNum(PurchTable, MatchingAgreement):
        #            if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
        #            {
        #                purchTable_RU = this.purchTable_RU();
        #                purchTable_RU.AgreementHeaderExt_RU = PurchAgreementHeaderExt_RU::findByPurchAgreementHeader(this.MatchingAgreement).RecId;
        #                this.packPurchTable_RU(purchTable_RU);
        #
        #                this.setAgreement_RU();
        #            }
        #            break;
        #         // </GEERU>
        #
        #        case fieldNum(PurchTable, PurchaseType):
        #            this.setDefaultDeliveryAddress();
        #            if (this.PurchaseType != PurchaseType::Purch && this.isMarkedForBankLC())
        #            {
        #                this.BankDocumentType = BankDocumentType::None;
        #            }
        #            break;
        #
        #        case fieldNum(PurchTable, DeliveryPostalAddress):
        #            LogisticsLocationSelectForm_PurchTable::construct(this).copyAddressToCaller(this.getDeliveryEntityRecord(),
        #                this.DeliveryPostalAddress);
        #            break;
        #
        #        // <GIN>
        #        case fieldNum(PurchTable, AccountingDate):
        #            if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoIN]))
        #            {
        #                while select RecId, CurrencyCode, PurchId from purchLine where purchLine.PurchId == this.PurchId
        #                {
        #                    purchLineIN = purchLine.purchLine_IN();
        #                    purchLineIN.AssessableValueAccountingCurrency = TaxAssessableValueHandler_IN::calcAssessableValueAccountingCurrency(purchLineIN.AssessableValue_IN, purchLine.CurrencyCode, this.AccountingDate);
        #                    purchLine.packPurchLine_IN(purchLineIN);
        #                    purchLine.SysExtensionSerializerMap::postUpdate();
        #                }
        #            }
        #            break;
        #         // </GIN>
        #
        #        default:
        #            break;
        #    }
        #}
      ENDSOURCE
      SOURCE #modifiedInventSiteFromParent
        #public void modifiedInventSiteFromParent()
        #{
        #    this.InventStorageDimMap::modifiedInventSiteFromParent(this);
        #}
      ENDSOURCE
      SOURCE #modifieMarkupGroup
        #server void modifieMarkupGroup()
        #{
        #    PurchLine  purchLine;
        #
        #    while select purchLine
        #        index hint PurchLineIdx
        #        where purchLine.PurchId         == this.PurchId
        #           && !purchLine.IsDeleted
        #    {
        #        purchLine.createMarkupTrans(this, true);
        #    }
        #}
      ENDSOURCE
      SOURCE #moduleType
        #ModuleInventPurchSales moduleType()
        #{
        #    return ModuleInventPurchSales::Purch;
        #}
      ENDSOURCE
      SOURCE #mustBeCovPlanned
        #boolean  mustBeCovPlanned()
        #{
        #    PurchTableType purchTableType;
        #
        #    purchTableType = this.type();
        #    return purchTableType.mustBeCovPlanned();
        #}
      ENDSOURCE
      SOURCE #operationType_BR
        #/// <summary>
        #/// Retrieves the operation type of the current purchase order.
        #/// </summary>
        #/// <param name="_forUpdate">
        #/// A boolean value that indicates whether the <c>SalesPurchOperationType_BR</c> table record should be retrieved for update.
        #/// </param>
        #/// <returns>
        #/// The <c>SalesPurchOperationType_BR</c> table record representing the operation type.
        #/// </returns>
        #SalesPurchOperationType_BR operationType_BR(boolean _forUpdate = false)
        #{
        #    return SalesPurchOperationType_BR::find(this.purchTable_BR().SalesPurchOperationType_BR, _forUpdate);
        #}
        #
      ENDSOURCE
      SOURCE #packExtensionTable
        #/// <summary>
        #/// Packs an extension table record to the container field <C>PackedExtensions</C>.
        #/// </summary>
        #/// <param name="_sysExtensionSerializerExtensionTableMap">
        #/// The extension table record.
        #/// </param>
        #public void packExtensionTable(SysExtensionSerializerExtensionMap _sysExtensionSerializerExtensionTableMap)
        #{
        #    this.SysExtensionSerializerMap::packExtensionTable(_sysExtensionSerializerExtensionTableMap.data());
        #}
      ENDSOURCE
      SOURCE #packPurchTable_BR
        #/// <summary>
        #/// Packs an extension table record to the container field <C>PackedExtensions</C>.
        #/// </summary>
        #/// <param name="_purchTable_BR">
        #/// The extension table record.
        #/// </param>
        #// <GBR>
        #public void packPurchTable_BR(PurchTable_BR _purchTable_BR)
        #{
        #    _purchTable_BR.PurchTable = this.RecId;
        #    this.SysExtensionSerializerMap::packExtensionTable(_purchTable_BR);
        #}
        #// </GBR>
      ENDSOURCE
      SOURCE #packPurchTable_RU
        #/// <summary>
        #/// Packs an extension table record to the container field <C>PackedExtensions</C>.
        #/// </summary>
        #/// <param name="_purchTable_RU">
        #/// The extension table record.
        #/// </param>
        #// <GEERU>
        #public void packPurchTable_RU(PurchTable_RU _purchTable_RU)
        #{
        #    _purchTable_RU.PurchTable = this.RecId;
        #    this.SysExtensionSerializerMap::packExtensionTable(_purchTable_RU);
        #}
        #// </GEERU>
      ENDSOURCE
      SOURCE #packPurchTable_W
        #/// <summary>
        #/// Packs an extension table record to the container field <C>PackedExtensions</C>.
        #/// </summary>
        #/// <param name="_purchTable_W">
        #/// The extension table record.
        #/// </param>
        #public void packPurchTable_W(PurchTable_W _purchTable_W)
        #{
        #    _purchTable_W.PurchTable = this.RecId;
        #    this.SysExtensionSerializerMap::packExtensionTable(_purchTable_W);
        #}
      ENDSOURCE
      SOURCE #parmExchangeRateDate
        #public AccountingDate parmExchangeRateDate()
        #{
        #    return this.ExchangeRateDate;
        #}
      ENDSOURCE
      SOURCE #parmParentSourceDocumentLine
        #public SourceDocumentLine parmParentSourceDocumentLine()
        #{
        #    return this.PurchTableMap::parmParentSourceDocumentLine();
        #}
        #
      ENDSOURCE
      SOURCE #parmSourceDocHeaderTypeEnumName
        #public EnumName parmSourceDocHeaderTypeEnumName()
        #{
        #    return this.PurchTableMap::parmSourceDocHeaderTypeEnumName();
        #}
      ENDSOURCE
      SOURCE #parmSourceDocHeaderTypeEnumValue
        #public SourceDocumentTypeEnumValue parmSourceDocHeaderTypeEnumValue()
        #{
        #    return this.PurchTableMap::parmSourceDocHeaderTypeEnumValue();
        #}
      ENDSOURCE
      SOURCE #parmSourceDocLineTypeEnumName
        #public EnumName parmSourceDocLineTypeEnumName()
        #{
        #    return this.PurchTableMap::parmSourceDocLineTypeEnumName();
        #}
      ENDSOURCE
      SOURCE #parmSourceDocLineTypeEnumValue
        #public SourceDocumentTypeEnumValue parmSourceDocLineTypeEnumValue()
        #{
        #    return this.PurchTableMap::parmSourceDocLineTypeEnumValue();
        #}
      ENDSOURCE
      SOURCE #parmSourceDocumentHeader
        #public SourceDocumentHeader parmSourceDocumentHeader()
        #{
        #    return this.PurchTableMap::parmSourceDocumentHeader();
        #}
        #
      ENDSOURCE
      SOURCE #party
        #public DirPartyRecId party()
        #{
        #    return VendTable::find(this.OrderAccount).Party;
        #}
      ENDSOURCE
      SOURCE #partyTable_OrderAccount
        #/// <summary>
        #/// Gets the <c>DirPartyTable</c> record for the order account of the purchase order.
        #/// </summary>
        #/// <param name="_forUpdate">
        #/// A Boolean value that indicates whether the record is selected for update.
        #/// </param>
        #/// <returns>
        #/// The <c>DirPartyTable</c> record for the order account of the purchase order.
        #/// </returns>
        #DirPartyTable partyTable_OrderAccount(boolean _forUpdate = false)
        #{
        #    DirPartyTable   partyTable;
        #    VendTable       vendTable;
        #
        #    if (this.OrderAccount)
        #    {
        #        if (_forUpdate)
        #            partyTable.selectForUpdate(_forUpdate);
        #
        #        select firstonly partyTable
        #            exists join vendTable
        #            where vendTable.Party      == partyTable.RecId
        #               && vendTable.AccountNum == this.OrderAccount;
        #    }
        #    return partyTable;
        #}
      ENDSOURCE
      SOURCE #payer
        #VendTable payer(boolean  update = false)
        #{
        #    return this.vendTable_InvoiceAccount(update);
        #}
        #
      ENDSOURCE
      SOURCE #paymDayId
        #VendPaymDayId paymDayId()
        #{
        #    VendPaymDayId    paymDayId;
        #
        #    paymDayId = this.vendTable_InvoiceAccount().PaymDayId;
        #
        #    if (!paymDayId)
        #        paymDayId = this.payment().PaymDayId;
        #
        #    return paymDayId;
        #}
      ENDSOURCE
      SOURCE #payment
        #PaymTerm payment(boolean _update = false)
        #{
        #    return PaymTerm::find(this.Payment, _update);
        #}
      ENDSOURCE
      SOURCE #paymModeModified
        #void paymModeModified()
        #{
        #    this.PaymModeMap::modifiedPaymMode();
        #}
        #
      ENDSOURCE
      SOURCE #pdsCheckApprovedVendorList
        #/// <summary>
        #/// Method validates if the corresponding purchase lines have valid approved vendor list entry if controlled by AVL functionality.
        #/// </summary>
        #/// <param name="_orderAcct" type="VendAccount">Vendor account number</param>
        #/// <returns type="Enum">true if allowed ; otherwise false</returns>
        #/// <remarks>
        #/// <syntax>
        #/// public Enum pdsCheckApprovedVendorList(VendAccount _orderAcct)
        #/// </syntax>
        #/// </remarks>
        #public boolean pdsCheckApprovedVendorList(VendAccount _orderAcct = '')
        #{
        #    PdsApprovedVendorListCheck  tableCheck;
        #    boolean                     ret = true;
        #
        #    tableCheck = this.type().pdsApprovedVendorListCheck();
        #    if (_orderAcct != '')
        #    {
        #        tableCheck.parmVendAccount(_orderAcct);
        #    }
        #    ret = tableCheck.validateCheck();
        #
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #pdsMRCLineCheck
        #/// <summary>
        #/// Check each of the order line for MRC compliance
        #/// </summary>
        #/// <remarks>
        #/// Check if the vendor account number has been changed and check the
        #/// regulatory requirements
        #/// </remarks>
        #public void pdsMRCLineCheck()
        #{
        #    PurchLine   purchLine;
        #
        #    if (this.RecId
        #        && this.orig().OrderAccount != this.OrderAccount
        #        && PdsMRCParameters::find().RegulationWarningOnPurchase)
        #    {
        #        while select purchLine
        #            where purchLine.PurchId == this.PurchId
        #        {
        #            PdsMRCRegulated::checkRegulatedFromBuffer(purchLine);
        #        }
        #    }
        #}
      ENDSOURCE
      SOURCE #previewPaneTitle
        #/// <summary>
        #/// Gives the title on top of the preview pane.
        #/// </summary>
        #/// <returns>
        #/// Title field of the preview pane.
        #/// </returns>
        #// BP deviation documented
        #display Caption previewPaneTitle()
        #{
        #    return strFmt("@SYS330566", this.PurchId);
        #}
      ENDSOURCE
      SOURCE #priceDiscChangePolicyExistOnLine
        #/// <summary>
        #/// Determines whether a line record that is related to the current record has a price discount policy.
        #/// </summary>
        #/// <returns>
        #/// true if a line with a price discount policy exists; otherwise, false
        #/// </returns>
        #public boolean priceDiscChangePolicyExistOnLine()
        #{
        #    PurchLine purchLine;
        #
        #    select firstonly RecId from purchLine
        #        where purchLine.PurchId == this.PurchId
        #           && !purchLine.IsDeleted
        #           && (purchLine.SystemEntryChangePolicy
        #           || purchLine.ManualEntryChangepolicy);
        #
        #    return purchLine.RecId != 0;
        #}
      ENDSOURCE
      SOURCE #priceDiscChangePolicyUpdateLine
        #/// <summary>
        #/// Updates the price discount policy fields on a set of purchase line records that are related to the
        #/// current PurchTable record.
        #/// </summary>
        #/// <param name="_priceDiscChangePoliciesTmp">
        #/// A buffer of the temporary <c>PriceDiscChangePoliciesTmp</c> table.
        #/// </param>
        #public void priceDiscChangePolicyUpdateLine(PriceDiscChangePoliciesTmp  _priceDiscChangePoliciesTmp)
        #{
        #    PurchLine purchLine;
        #
        #    purchLine.skipDataMethods(true);
        #    update_recordset purchLine
        #    setting ManualEntryChangepolicy = _priceDiscChangePoliciesTmp.ManualEntryChangepolicy,
        #            SystemEntryChangePolicy = _priceDiscChangePoliciesTmp.SystemEntryChangePolicy,
        #            SystemEntrySource       = _priceDiscChangePoliciesTmp.SystemEntrySource
        #    join _priceDiscChangePoliciesTmp
        #        where _priceDiscChangePoliciesTmp.RefRecId == purchLine.RecId;
        #}
      ENDSOURCE
      SOURCE #projCostControlUpdate
        #public void projCostControlUpdate(PurchLine _purchLine,ProjCommittedCostUpdateAction _action=ProjCommittedCostUpdateAction::Unknown)
        #{
        #    InventMov_Purch                     movement;
        #    InventMov_Virtuel                   movement_Virtuel;
        #    CostControlPostingItemPurchOrder    costControlPostingItemPurchOrder;
        #
        #    movement=InventMovement::construct(_purchLine);
        #    movement_Virtuel= InventMov_Virtuel::construct();
        #    movement_Virtuel.parmInventMovReference(movement);
        #
        #    if (movement_Virtuel.mustBeCostControlled()  && movement_Virtuel.canCommittedCostBeReversed())
        #    {
        #        costControlPostingItemPurchOrder=CostControlPosting::newCostControlPostingItem(movement_Virtuel);
        #        costControlPostingItemPurchOrder.run(_action);
        #    }
        #}
      ENDSOURCE
      SOURCE #projTable
        #ProjTable projTable(boolean update = false)
        #{
        #    return ProjTable::find(this.ProjId, update);
        #}
      ENDSOURCE
      SOURCE #purchTable_BR
        #/// <summary>
        #/// Get the <c>PurchTable_BR</c> table.
        #/// </summary>
        #/// <returns>
        #/// The table <c>PurchTable_BR</c> associated with the current record.
        #/// </returns>
        #// <GBR>
        #public PurchTable_BR purchTable_BR()
        #{
        #    return this.SysExtensionSerializerMap::getExtensionTable(tableNum(PurchTable_BR));
        #}
        #// </GBR>
      ENDSOURCE
      SOURCE #purchTable_Intrastat
        #/// <summary>
        #/// Retrieves <c>PurchTable_Intrastat</c> extension table record.
        #/// </summary>
        #/// <returns>
        #/// The extension table record related to current record.
        #/// </returns>
        #public PurchTable_Intrastat purchTable_Intrastat()
        #{
        #    return this.SysExtensionSerializerMap::getExtensionTable(tableNum(PurchTable_Intrastat));
        #}
        #
      ENDSOURCE
      SOURCE #purchTable_RU
        #/// <summary>
        #/// Get the <c>PurchTable_RU</c> table.
        #/// </summary>
        #/// <returns>
        #/// The table <c>PurchTable_RU</c> associated with the current record.
        #/// </returns>
        #// <GEERU>
        #public PurchTable_RU purchTable_RU()
        #{
        #    return this.SysExtensionSerializerMap::getExtensionTable(tableNum(PurchTable_RU));
        #}
        #// </GEERU>
      ENDSOURCE
      SOURCE #purchTable_W
        #/// <summary>
        #/// Get the <c>PurchTable_W</c> table.
        #/// </summary>
        #/// <returns>
        #/// The table <c>PurchTable_W</c> associated with the current record.
        #/// </returns>
        #public PurchTable_W purchTable_W()
        #{
        #    return this.SysExtensionSerializerMap::getExtensionTable(tableNum(PurchTable_W));
        #}
      ENDSOURCE
      SOURCE #qualityOrderStatusDisplay
        #/// <summary>
        #/// Retrieves the status of the associated quality orders.
        #/// </summary>
        #/// <returns>
        #/// The current quality order status.
        #/// </returns>
        #
        #//BP deviation documented
        #display InventTestOrderStatusDisplay qualityOrderStatusDisplay()
        #{
        #    InventQualityOrderTable orderTable = InventQualityOrderTable::findLastQualityOrder(InventTestReferenceType::Purch, this.PurchId);
        #
        #    return orderTable ? orderTable.statusDisplay() : InventTestOrderStatusDisplay::None;
        #}
        #
      ENDSOURCE
      SOURCE #queryPurchLine
        #Query queryPurchLine(boolean _update = false)
        #{
        #    DictRelation    dictRelation;
        #    DictField       externdictField;
        #    DictField       dictField;
        #    Query           query = new Query();
        #    Counter         c;
        #
        #    query.addDataSource(tableNum(PurchLine));
        #
        #    dictRelation = new DictRelation(tableNum(PurchLine));
        #    dictRelation.loadTableRelation(this.TableId);
        #
        #
        #    if (dictRelation.lines())
        #    {
        #        for (c=1; c <= dictRelation.lines(); c++)
        #        {
        #            externdictField   = new DictField(this.TableId,dictRelation.lineExternTableValue(c));
        #            dictField   = new DictField(tableNum(PurchLine),dictRelation.lineTableValue(c));
        #            query.dataSourceTable(tableNum(PurchLine)).addRange(dictField.id()).value(queryValue(this.(externdictField.id())));
        #        }
        #    }
        #
        #    query.dataSourceTable(tableNum(PurchLine)).addRange(fieldNum(PurchLine,IsDeleted)).value(queryValue(NoYes::No));
        #
        #    query.dataSourceTable(tableNum(PurchLine)).update(_update);
        #
        #    return query;
        #}
        #
      ENDSOURCE
      SOURCE #recalculateTaxForChangedLineOnly
        #/// <summary>
        #/// Determines whether tax should be recalculated for changed lines only or for all lines.
        #/// </summary>
        #/// <returns>
        #/// true if tax should be recalculated for changed lines only; otherwise, false.
        #/// </returns>
        #public boolean recalculateTaxForChangedLineOnly()
        #{
        #    // If Product receipt or invoicing posting has started on the PO, then don't recalculate for all lines
        #    return this.DocumentStatus == DocumentStatus::PackingSlip || this.DocumentStatus == DocumentStatus::Invoice;
        #}
      ENDSOURCE
      SOURCE #referenceSalesTable
        #/// <summary>
        #///    Returns the reference sales table record.
        #/// </summary>
        #/// <returns>
        #///    The reference sales table record.
        #/// </returns>
        #/// <remarks>
        #///    Used for finding the reference sales table in the same legal entity in 3-leged intercompany scenarios.
        #/// </remarks>
        #public SalesTable referenceSalesTable()
        #{
        #    InterCompanyPurchSalesReference     interCompanyPurchSalesReference;
        #    SalesTable                          referenceSalesTable;
        #
        #    select firstonly referenceSalesTable
        #        exists join interCompanyPurchSalesReference
        #        where interCompanyPurchSalesReference.SalesId == referenceSalesTable.SalesId
        #        &&    interCompanyPurchSalesReference.PurchId == this.PurchId;
        #
        #    return referenceSalesTable;
        #}
      ENDSOURCE
      SOURCE #removeInvoiceRefRecId_BR
        #/// <summary>
        #/// removes the reference to cancelled fiscal document for Brazil Localization.
        #/// </summary>
        #public void removeInvoiceRefRecId_BR()
        #{
        #    PurchTable_BR purchTable_BR;
        #
        #    ttsBegin;
        #
        #    purchTable_BR = this.purchTable_BR();
        #    purchTable_BR.InvoiceRefRecId_BR = 0;
        #    purchTable_BR.update();
        #
        #    ttsCommit;
        #}
      ENDSOURCE
      SOURCE #removePackages
        #[SysObsoleteAttribute('Unused method removed in AX 2012 R2', true)]
        #void removePackages()
        #{
        #    throw error(Error::wrongUseOfFunction(funcName()));
        #}
      ENDSOURCE
      SOURCE #resetLinePolicies
        #/// <summary>
        #/// Releases the price discount policies on lines that are related to the current record.
        #/// </summary>
        #public void resetLinePolicies()
        #{
        #    PurchLine purchLine;
        #
        #    update_recordset purchLine
        #        setting SystemEntrySource       = PriceDiscSystemSource::None,
        #                SystemEntryChangePolicy = 0,
        #                ManualEntryChangepolicy = 0
        #    where purchLine.PurchId == this.PurchId;
        #}
      ENDSOURCE
      SOURCE #setAddressFromInventLocationId
        #public boolean setAddressFromInventLocationId(InventLocationId _inventLocationId)
        #{
        #    LogisticsLocationRecId          inventLocationAddress;
        #    InventLocation                  inventLocation;
        #    boolean                         addressSet;
        #
        #    if (this.PurchaseType == PurchaseType::ReturnItem)
        #    {//Never set the address from the location if the purchase order is of type return.
        #        return false;
        #    }
        #
        #    if (_inventLocationId)
        #    {
        #        inventLocation          = InventLocation::find(_inventLocationId);
        #        inventLocationAddress   = LogisticsLocationDefault::findSimpleDefault(inventLocation,
        #                                    LogisticsLocationRole::findBytype(LogisticsLocationRoleType::Delivery)).RecId;
        #
        #        if (inventLocationAddress)
        #        {
        #            this.setLocation(inventLocationAddress, inventLocation);
        #            addressSet = true;
        #        }
        #
        #        else if(inventLocation.VendAccount)
        #        {
        #            this.setAddressFromVendTable(VendTable::find(inventLocation.VendAccount));
        #            addressSet = true;
        #        }
        #    }
        #
        #    if(!addressSet)
        #    {
        #        addressSet = this.setAddressFromInventSiteId(this.InventSiteId);
        #    }
        #
        #    return addressSet;
        #}
      ENDSOURCE
      SOURCE #setAddressFromInventSiteId
        #public boolean setAddressFromInventSiteId(InventSiteId _inventSiteId)
        #{
        #    LogisticsLocationRecId      location;
        #    InventSite                  inventSite;
        #    boolean                     addressSet = false;
        #    CompanyInfo                 companyInfo;
        #    LogisticsLocationRole       role = LogisticsLocationRole::findBytype(LogisticsLocationRoleType::Delivery);
        #
        #    if (this.PurchaseType == PurchaseType::ReturnItem)
        #    {//Never set the address from the site if the purchase order is of type return order.
        #        return false;
        #    }
        #
        #    if (this.isDropShipment())
        #    {
        #        addressSet = true;
        #    }
        #
        #    if (!addressSet && _inventSiteId
        #    && !this.InterCompanyDirectDelivery)
        #    {
        #        inventSite = InventSite::find(_inventSiteId);
        #        location   = LogisticsLocationDefault::findSimpleDefault(InventSite::find(_inventSiteId), role).RecId;
        #
        #        if (location)
        #        {
        #            this.setLocation(location, inventSite);
        #            addressSet = true;
        #        }
        #    }
        #
        #    if(!addressSet)
        #    {
        #        companyInfo = CompanyInfo::find();
        #
        #        location = LogisticsLocationDefault::findSimpleDefault(companyInfo,role).RecId;
        #        if (location)
        #        {
        #            this.setLocation(location, companyInfo);
        #            addressSet = true;
        #        }
        #    }
        #
        #    return addressSet;
        #}
      ENDSOURCE
      SOURCE #setAddressFromVendTable
        #void  setAddressFromVendTable(VendTable _vendTable)
        #{
        #    LogisticsLocation location;
        #    LogisticsPostalAddress postalAddress = DirParty::primaryPostalAddress(_vendTable.Party);
        #
        #    this.DeliveryName = _vendTable.name();
        #    if (postalAddress)
        #    {
        #        this.DeliveryPostalAddress  = postalAddress.RecId;
        #        location = LogisticsLocation::find(postalAddress.Location);
        #        if (location.Description)
        #        {
        #            this.DeliveryName = location.Description;
        #        }
        #    }
        #    else
        #    {
        #        this.DeliveryPostalAddress = 0;
        #    }
        #    this.AddressRefRecId            = _vendTable.RecId;
        #    this.AddressRefTableId          = _vendTable.TableId;
        #}
      ENDSOURCE
      SOURCE #setAgreement_RU
        #/// <summary>
        #///     Initializes purchase order from the agreement.
        #/// </summary>
        #public void setAgreement_RU()
        #{
        #    PurchAgreementHeaderExt_RU  purchAgreementHeaderExt;
        #    PurchAgreementHeader        purchAgreementHeader;
        #    PurchTable_RU               purchTable_RU = this.purchTable_RU();
        #
        #    if (purchTable_RU.AgreementHeaderExt_RU)
        #    {
        #        purchAgreementHeaderExt = PurchAgreementHeaderExt_RU::find(purchTable_RU.AgreementHeaderExt_RU);
        #
        #        purchAgreementHeader = PurchAgreementHeader::find(purchAgreementHeaderExt.AgreementHeader);
        #
        #        if (Box::yesNo("@SYS311926",DialogButton::Yes) == DialogButton::Yes)
        #        {
        #            // Transfer default settings from Agreement to PurchTable buffer...
        #            this.initFromPurchAgreementHeader(purchAgreementHeader);
        #        }
        #        else
        #        {
        #            this.DefaultDimension = this.copyDimension(purchAgreementHeader.DefaultDimension);
        #        }
        #    }
        #    else
        #    {
        #        this.MatchingAgreement = 0;
        #        this.DefaultDimension = AgreementHeaderExt_RU::clearAgreementDimension(this.DefaultDimension);
        #        this.initFromVendTable();
        #        this.initInvoiceAccount();
        #    }
        #}
      ENDSOURCE
      SOURCE #setDefaultDeliveryAddress
        #/// <summary>
        #/// Sets the default delivery address for the <c>purchTable</c> record.
        #/// </summary>
        #public void setDefaultDeliveryAddress()
        #{
        #    this.type().setDefaultDeliveryAddress();
        #}
      ENDSOURCE
      SOURCE #setDeliveryName
        #/// <summary>
        #///     Sets the delivery name field based on the specified logistic location.
        #/// </summary>
        #public void setDeliveryName()
        #{
        #    this.TradePostalAddress::setDeliveryName();
        #}
      ENDSOURCE
      SOURCE #setEndDiscFromVendInvoiceJour
        #/// <summary>
        #///     On the PurchTable the DiscPercent is a percentage while on the VendInvoiceJour the EndDisc is an amount.
        #///     The algorithm to calculate the percentage based on enddisc and salesbalance from the vendinvoicejour and subsequently compare the result to that of the original PurchTable,
        #///     if the difference is less than 0.1% then the original Purchtable's discpercent is utilized in order to mitigate from potential rounding issues.
        #///     If the original PurchTable is not available the calculated and rounded amount is used.
        #/// </summary>
        #/// <param name="_vendInvoiceJour">
        #///    The <c>VendInvoiceJour</c> table buffer that is to calculate the <c>PurchTable.DiscPercent</c> field from.
        #/// </param>
        #void setEndDiscFromVendInvoiceJour(VendInvoiceJour _vendInvoiceJour)
        #{
        #    PurchTable  purchTableLocal;
        #
        #    if (_vendInvoiceJour.EndDisc != 0 && _vendInvoiceJour.SalesBalance != 0)
        #    {
        #        this.DiscPercent = round(_vendInvoiceJour.EndDisc * 100 / _vendInvoiceJour.SalesBalance, 0.01);
        #        purchTableLocal = _vendInvoiceJour.purchTable();
        #        if (purchTableLocal && abs(purchTableLocal.DiscPercent - this.DiscPercent) < 0.1)
        #        {
        #            this.DiscPercent = purchTableLocal.DiscPercent;
        #        }
        #    }
        #}
      ENDSOURCE
      SOURCE #setInventProfileId_RU
        #void setInventProfileId_RU()
        #{
        #    PurchTable_RU       purchTable_RU = this.purchTable_RU();
        #
        #    if (purchTable_RU.InventProfileType_RU == InventProfileType_RU::NotSpecified ||
        #        purchTable_RU.InventProfileType_RU != InventProfile_RU::find(purchTable_RU.InventProfileId_RU).InventProfileType)
        #    {
        #        purchTable_RU.InventProfileId_RU = '';
        #        this.packPurchTable_RU(purchTable_RU);
        #    }
        #}
      ENDSOURCE
      SOURCE #setInventSiteId
        #public void setInventSiteId(InventSiteId _inventSiteId)
        #{
        #    this.InventSiteId = _inventSiteId;
        #    this.modifiedInventSiteFromParent();
        #    this.setAddressFromInventSiteId(_inventSiteId);
        #}
      ENDSOURCE
      SOURCE #setListCode
        #/// <summary>
        #///     Sets the list code based on the location of the payer and vendor.
        #/// </summary>
        #void setListCode()
        #{
        #    this.ListCode = EUSalesList::resolveListCode(this.vendTable_OrderAccount().postalAddress().CountryRegionId);
        #}
        #
      ENDSOURCE
      SOURCE #setLocation
        #/// <summary>
        #///    Sets delivery address information and related information.
        #/// </summary>
        #/// <param name="_locationRecId">
        #///    The record ID of the logistics location.
        #/// </param>
        #/// <param name="_source">
        #///    The record that has an associated address.
        #/// </param>
        #/// <remarks>
        #///    If <c>_source</c> parameter is not specified, the address related information will be set based on the logistics location.
        #/// </remarks>
        #public void  setLocation(LogisticsLocationRecId  _locationRecId, Common _source = null)
        #{
        #    LogisticsLocation location = LogisticsLocation::find(_locationRecId);
        #
        #    this.DeliveryPostalAddress  = LogisticsPostalAddress::addressRecIdFromLocationRecId(location.RecId);
        #
        #    if (_source)
        #    {
        #        LogisticsLocationSelectForm_PurchTable::construct(this).copyAddressToCaller(_source,
        #            this.DeliveryPostalAddress);
        #    }
        #    else
        #    {
        #        LogisticsLocationSelectForm_PurchTable::construct(this).copyAddressToCaller(this.getDeliveryEntityRecord(),
        #            this.DeliveryPostalAddress);
        #    }
        #}
      ENDSOURCE
      SOURCE #setNameUsingVATNum
        #/// <summary>
        #/// Sets purchase order description based on the region id and the tax exempt number requirement.
        #/// </summary>
        #/// <param name="_vatNum">
        #/// Tax exempt number.
        #/// </param>
        #/// <param name="_countryRegionId">
        #/// Country/region.
        #/// </param>
        #/// <param name="_name">
        #/// Vendor name.
        #/// </param>
        #/// <param name="_vendParameters">
        #/// Initialized <c>VendParameters</c> record.
        #/// </param>
        #private void setNameUsingVATNum(VATNum                              _vatNum,
        #                                LogisticsAddressCountryRegionId     _countryRegionId,
        #                                Name                                _name,
        #                                VendParameters                      _vendParameters = VendParameters::find())
        #{
        #    TaxVATNumTable      taxVATNumTable;
        #    CountryRegionType   countryRegionType;
        #
        #    taxVATNumTable = TaxVATNumTable::find(_vatNum, _countryRegionId);
        #
        #    if (taxVATNumTable.Name)
        #    {
        #        this.PurchName      = taxVATNumTable.Name;
        #    }
        #    else
        #    {
        #        switch(_vendParameters.MandatoryInvoiceVATNum)
        #        {
        #            case TaxVATNumCountryRegionType::None:
        #                this.PurchName = _name;
        #                break;
        #            case TaxVATNumCountryRegionType::DomesticEU:
        #                countryRegionType = IntrastatCountryRegionParameters::type(_countryRegionId);
        #                switch(countryRegionType)
        #                {
        #                    case CountryRegionType::Domestic:
        #                    case CountryRegionType::EU:
        #                        this.PurchName = '';
        #                        break;
        #                    default:
        #                        this.PurchName = _name;
        #                        break;
        #                }
        #                break;
        #            case TaxVATNumCountryRegionType::EU:
        #                countryRegionType = IntrastatCountryRegionParameters::type(_countryRegionId);
        #                switch(countryRegionType)
        #                {
        #                    case CountryRegionType::EU:
        #                        this.PurchName = '';
        #                        break;
        #                    default:
        #                        this.PurchName = _name;
        #                        break;
        #                }
        #                break;
        #        }
        #    }
        #}
      ENDSOURCE
      SOURCE #setPriceDiscChangePolicy
        #/// <summary>
        #/// Sets the price disc change policy.
        #/// </summary>
        #/// <param name="_policySource">
        #/// A <c>PriceDiscSystemSource</c> enumeration value that indicates the source of the policy.
        #/// </param>
        #/// <param name="_fieldId">
        #/// The ID of the field.
        #/// </param>
        #client server void setPriceDiscChangePolicy(PriceDiscSystemSource _policySource, RefFieldId _fieldId = 0)
        #{
        #    if (!this.isInterCompanyOrder())
        #    {
        #        this.PriceDiscResultFields::createPriceDiscChangePolicy(ModuleSalesPurch::Purch, _policySource, _fieldId);
        #    }
        #}
      ENDSOURCE
      SOURCE #setPriceDiscChangePolicyMultiLine
        #/// <summary>
        #/// Calls the <c>setPriceDiscChangePolicy</c> method with fixed price discount change parameters for
        #/// the multiline discount fields.
        #/// </summary>
        #public void setPriceDiscChangePolicyMultiLine()
        #{
        #    this.setPriceDiscChangePolicy(PriceDiscSystemSource::ManualEntry, fieldNum(PurchTable, MultiLineDisc));
        #}
      ENDSOURCE
      SOURCE #setTaxGroup
        #void setTaxGroup(TaxGroup _taxGroup)
        #{
        #    PurchTableType purchTableType;
        #
        #    purchTableType = this.type();
        #    purchTableType.setTaxGroup(_taxGroup);
        #}
        #
      ENDSOURCE
      SOURCE #setupChangeManagmentFieldsForVendor
        #/// <summary>
        #/// Set change management specific fields depending on the vendor or company settings.
        #/// </summary>
        #/// <param name="_vendTable">
        #/// The <c>VendTable</c> record.
        #/// </param>
        #public void setupChangeManagmentFieldsForVendor(VendTable _vendTable)
        #{
        #    if (_vendTable.canAutoCreatePurchOrder())
        #    {
        #        this.ChangeRequestRequired = NoYes::No;
        #        this.DocumentState         = VersioningDocumentState::Approved;
        #    }
        #    else
        #    {
        #        this.ChangeRequestRequired = NoYes::Yes;
        #        this.DocumentState         = VersioningDocumentState::Draft;
        #    }
        #}
      ENDSOURCE
      SOURCE #skipAddressFields
        #/// <summary>
        #/// Specifies whether address fields should be skipped.
        #/// </summary>
        #/// <returns>
        #/// true if address field should be skipped; otherwise, false.
        #/// </returns>
        #boolean skipAddressFields()
        #{
        #    return ((this.InterCompanyCompanyId && this.InterCompanyOriginalSalesId && this.InterCompanyDirectDelivery)
        #          || this.isDropShipment());
        #}
      ENDSOURCE
      SOURCE #submitToWorkflow
        #/// <summary>
        #/// Activates purchase order workflow.
        #/// </summary>
        #/// <param name="_workflowTemplateName">
        #/// The AOT name of the workflow template the purchase order will be submittet to.
        #/// </param>
        #/// <param name="_workflowComment">
        #/// The reason for submitting.
        #/// </param>
        #/// <param name="_activatingFromWeb">
        #/// A Boolean value that indicates whether the workflow framework if the submission is coming from the
        #/// enterprise portal.
        #/// </param>
        #/// <remarks>
        #/// This method starts the workflow configuration by calling the <c>ActivateWorkflowTemplate</c> method
        #/// on the <c>Workflow</c> class that has information about the purchase order record.
        #/// </remarks>
        #public void  submitToWorkflow(WorkflowTypeName	     _workflowTemplateName,
        #                              WorkflowComment       _workflowComment,
        #                              boolean               _activatingFromWeb = false)
        #{
        #    ttsbegin;
        #
        #    Workflow::activateFromWorkflowType(_workflowTemplateName,
        #                                           this.RecId,
        #                                           _workflowComment,
        #                                           _activatingFromWeb,
        #                                           curUserId());
        #
        #    VersioningPurchaseOrder::newPurchaseOrder(this).submitChangeRequest();
        #
        #    ttscommit;
        #}
      ENDSOURCE
      SOURCE #taxModuleType
        #TaxModuleType taxModuleType()
        #{
        #    return TaxModuleType::Purch;
        #}
        #
      ENDSOURCE
      SOURCE #templateName
        #/// <summary>
        #/// Sets or gets the information of the <c>DistributionTemplate</c> record for the creation of
        #/// distributions.
        #/// </summary>
        #/// <param name="_set">
        #/// A Boolean value that indicates whether to update.
        #/// </param>
        #/// <param name="_templateName">
        #/// The name of the distribution template to be used to create distributions.
        #/// </param>
        #/// <returns>
        #/// The name of the distribution template.
        #/// </returns>
        #// BP Deviation Documented
        #public edit TemplateName templateName(boolean _set, TemplateName _templateName)
        #{
        #    TemplateName                      templateName = "";
        #    AccountingDistributionTemplate    accountingDistributionTemplate;
        #
        #    if (_set)
        #    {
        #        if (_templateName == "")
        #        {
        #            this.AccountingDistributionTemplate = 0;
        #        }
        #        else
        #        {
        #            accountingDistributionTemplate = AccountingDistributionTemplate::findByName(_templateName);
        #
        #            if (accountingDistributionTemplate)
        #            {
        #                this.AccountingDistributionTemplate = accountingDistributionTemplate.RecId;
        #                templateName = accountingDistributionTemplate.Name;
        #            }
        #            else
        #            {
        #                this.AccountingDistributionTemplate = 0;
        #            }
        #        }
        #    }
        #    else
        #    {
        #        if (this.AccountingDistributionTemplate != 0)
        #        {
        #            templateName = AccountingDistributionTemplate::find(this.AccountingDistributionTemplate).Name;
        #        }
        #    }
        #
        #    return templateName;
        #}
      ENDSOURCE
      SOURCE #tmsDisplayRoute
        #/// <summary>
        #/// Method used to display the route code tied to a purchase order.
        #/// </summary>
        #/// <returns>
        #/// The route code tied to a purchase order.
        #/// </returns>
        #[SysClientCacheDataMethodAttribute(true)]
        #public server display TMSRouteCode tmsDisplayRoute()
        #{
        #    PurchLine                   purchLine;
        #    TMSRouteSegmentLoadLine     segmentLine;
        #    TMSRouteCode                ret;
        #    int                         counter = 0;
        #
        #    while select RouteCode from segmentLine
        #        group by RouteCode
        #        join InventTransId, PurchId from purchLine
        #            where purchLine.InventTransId   == segmentLine.InventTransId &&
        #                  purchLine.PurchId         == this.PurchId
        #    {
        #        ret = segmentLine.RouteCode;
        #        ++counter;
        #
        #        if (counter > 1)
        #        {
        #            break;
        #        }
        #    }
        #
        #    switch (counter)
        #    {
        #        case 0:
        #            ret = "";
        #            break;
        #        case 1:
        #            break;
        #        default:
        #            ret = "@SYS78137";
        #            break;
        #    }
        #
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #totalWeightAndVolume
        #/// <summary>
        #/// Calculates total weight and volume aggregated over all purchase order lines.
        #/// </summary>
        #/// <returns>
        #/// Container with two elements: total wieght and total volume.
        #/// </returns>
        #public container totalWeightAndVolume()
        #{
        #    Volume      totalVolume;
        #    Weight      totalWeight;
        #    PurchLine   purchLine;
        #
        #    while select ItemId, QtyOrdered from purchLine
        #        where purchLine.PurchId == this.PurchId
        #    {
        #        totalWeight += purchLine.tmsWeight();
        #        totalVolume += purchLine.tmsVolume();
        #    }
        #
        #    return [totalWeight, totalVolume];
        #}
      ENDSOURCE
      SOURCE #transferInvoiceAccount
        #void transferInvoiceAccount()
        #{
        #    if (PurchParameters::find().PromptTransfer)
        #    {
        #        if (Box::yesNo("@SYS19435" + '\n\n' + this.InvoiceAccount, DialogButton::Yes) == DialogButton::Yes)
        #            this.initInvoiceAccount();
        #    }
        #    else
        #        this.initInvoiceAccount();
        #
        #    if (this.transferTaxDefaultsFromInvoiceAcc())
        #    {
        #        this.initTaxDefaultsFromInvoiceAccount();
        #    }
        #}
      ENDSOURCE
      SOURCE #transferOrderAccount
        #/// <summary>
        #/// Method for transfering order account related information based on vendor data.
        #/// </summary>
        #client server
        #public void  transferOrderAccount()
        #{
        #    boolean initFromVendTable = true;
        #
        #    if (this.OrderAccount)
        #    {
        #        if (PurchParameters::find().PromptTransfer &&
        #            Box::yesNo("@SYS22099"+'\n\n'+this.vendTable_OrderAccount().name(),DialogButton::Yes) != DialogButton::Yes)
        #        {
        #                initFromVendTable = false;
        #        }
        #
        #        if (PurchTable::hasExensionTableEnabled())
        #        {
        #            this.SysExtensionSerializerMap::packAll();
        #        }
        #
        #        this.transferOrderAccount_server(initFromVendTable);
        #
        #        if (PurchTable::hasExensionTableEnabled())
        #        {
        #            this.SysExtensionSerializerMap::unpackAll();
        #        }
        #    }
        #}
      ENDSOURCE
      SOURCE #transferOrderAccount_server
        #/// <summary>
        #/// Method for initializing order account related information based on vendor data.
        #/// </summary>
        #/// <param name="_initFromVendTable">
        #/// true if the purchase order should be initialized based on vendor data; false if only mandatory order fields should be set.
        #/// </param>
        #server void transferOrderAccount_server(boolean _initFromVendTable)
        #{
        #    if(_initFromVendTable)
        #    {
        #        this.initFromVendTable();
        #
        #        if (this.OrderAccount != this.InvoiceAccount)
        #        {
        #            this.transferInvoiceAccount();
        #        }
        #    }
        #    else
        #    {
        #        this.initFromVendTableMandatoryFields();
        #        if (!this.RecId || !this.isDropShipment())
        #        {
        #            this.setDefaultDeliveryAddress();
        #        }
        #    }
        #}
      ENDSOURCE
      SOURCE #transferTaxDefaultsFromInvoiceAcc
        #/// <summary>
        #/// Determines if the fiscal data should come to the purchase order from the invoice account rather than from the order account.
        #/// </summary>
        #/// <returns>
        #/// true if the fiscal data should come to the purchase order from the invoice account; otherwise, false.
        #/// </returns>
        #private boolean transferTaxDefaultsFromInvoiceAcc()
        #{
        #    #ISOCountryRegionCodes
        #    boolean includeTaxDefaults;
        #
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoES]))
        #    {
        #        switch(VendParameters::find().UseFiscalInvoiceAccount)
        #        {
        #            case UseFiscalInvoiceAccount::Always:
        #                includeTaxDefaults = true;
        #                break;
        #            case UseFiscalInvoiceAccount::Ask:
        #                if (Box::yesNo("@SYS112098"+'\n\n'+ this.InvoiceAccount+'\n\n'+ VendTable::promptAddress(this.InvoiceAccount),DialogButton::Yes)==DialogButton::Yes)
        #                {
        #                    includeTaxDefaults = true;
        #                }
        #                break;
        #            case UseFiscalInvoiceAccount::Never:
        #                break;
        #        }
        #    }
        #    return includeTaxDefaults;
        #}
      ENDSOURCE
      SOURCE #transferToOneTimeVendor
        #/// <summary>
        #/// Updates the related one time vendor entity based on the purchase order.
        #/// </summary>
        #server void transferToOneTimeVendor()
        #{
        #    VendorEntity        vendorEntity;
        #    if (this.OneTimeVendor)
        #    {
        #        ttsbegin;
        #        vendorEntity = DirParty::constructFromCommon(this.vendTable_OrderAccount(),
        #                                                     DateTimeUtil::getSystemDateTime(),
        #                                                     DirPartyType::None,
        #                                                     true,
        #                                                     false);
        #        vendorEntity.initFromPurchTable(this);
        #        vendorEntity.update();
        #        ttscommit;
        #    }
        #}
      ENDSOURCE
      SOURCE #type
        #PurchTableType type()
        #{
        #    return PurchTableType::construct(this);
        #}
      ENDSOURCE
      SOURCE #unlinkAgreement
        #server private void unlinkAgreement(boolean _unlinkLines      = false,
        #                                    boolean _recalculatePrice = false
        #                                    ,boolean _doUpdatePurchTable = true
        #                                    ,boolean _doUpdatePurchLine  = true
        #                                    )
        #{
        #    AgreementReleaseHeaderMatch agreementReleaseHeaderMatch;
        #    PurchLine                   purchLine;
        #    boolean                     restorePriceDiscChagnePolicy = true;
        #    // <GEERU>
        #    PurchTable_RU               purchTable_RU;
        #    #ISOCountryRegionCodes
        #    // </GEERU>
        #
        #    if (this.MatchingAgreement)
        #    {
        #        ttsbegin;
        #
        #        if (_unlinkLines)
        #        {
        #            while select forupdate purchLine
        #                    where purchLine.PurchId == this.PurchId
        #            {
        #                if (purchLine.MatchingAgreementLine)
        #                {
        #                    if (_recalculatePrice)
        #                    {
        #                        PurchLine::modifyPurchQty(purchLine,purchLine.inventDim());
        #                        restorePriceDiscChagnePolicy = false;
        #                    }
        #                    if (restorePriceDiscChagnePolicy)
        #                    {
        #                        // Set Price Discount Change Policy originated by PriceDiscSystemSource::Agreement
        #                        purchLine.setPriceDiscChangePolicy(PriceDiscSystemSource::Agreement);
        #                    }
        #
        #                    purchLine.unLinkAgreementLine(
        #                                                  _doUpdatePurchLine
        #                                                  );
        #                }
        #            }
        #        }
        #
        #        delete_from agreementReleaseHeaderMatch
        #        where agreementReleaseHeaderMatch.PurchTablePurchId     == this.PurchId
        #           && agreementReleaseHeaderMatch.ReferenceRelationType == tableNum(PurchTable)
        #           && agreementReleaseHeaderMatch.PurchTableDataAreaId  == this.DataAreaId;
        #
        #        this.MatchingAgreement = 0;
        #
        #        // <GEERU>
        #        if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
        #        {
        #            purchTable_RU = this.purchTable_RU();
        #            purchTable_RU.AgreementHeaderExt_RU = 0;
        #            this.packPurchTable_RU(purchTable_RU);
        #
        #            this.DefaultDimension = AgreementHeaderExt_RU::clearAgreementDimension(this.DefaultDimension);
        #        }
        #        // </GEERU>
        #
        #        if (_doUpdatePurchTable)
        #        {
        #            this.doUpdate();
        #        }
        #
        #        ttscommit;
        #    }
        #}
      ENDSOURCE
      SOURCE #unlinkAgreementPrompt
        #public boolean unlinkAgreementPrompt(
        #                                     boolean _doUpdatePurchTable = true
        #                                     )
        #{
        #    Dialog       dialog;
        #    DialogField  dialogField;
        #    boolean      linesExist;
        #
        #    if (this.MatchingAgreement)
        #    {
        #        linesExist = PurchLine::exist(this.PurchId);
        #        dialog = new Dialog();
        #        dialog.addText("@SYS306906");
        #        if (linesExist)
        #        {
        #            dialogField = dialog.addField(extendedTypeStr(NoYesId), "@SYS23228", "@SYS305716");
        #            dialogField.value(NoYes::Yes);
        #        }
        #        if (!dialog.run())
        #        {
        #            return false;
        #        }
        #
        #        if (linesExist)
        #        {
        #            this.unlinkAgreement(linesExist, dialogField.value()
        #                                 , _doUpdatePurchTable
        #                                 );
        #        }
        #        else
        #        {
        #            this.unlinkAgreement(linesExist, false
        #                                 , _doUpdatePurchTable
        #                                 );
        #        }
        #    }
        #
        #    return true;
        #}
      ENDSOURCE
      SOURCE #update
        #public void  update(boolean _updateDistributions = false)
        #{
        #    PurchTableType purchTableType;
        #
        #    PurchTotalsSummaryController    purchTotalsSummaryController;
        #
        #    if (isConfigurationkeyEnabled(configurationKeyNum(PublicSector)))
        #    {
        #        purchTotalsSummaryController = PurchTotalsSummaryController::construct(this.PurchId);
        #        purchTotalsSummaryController.checkFields(this);
        #    }
        #
        #    purchTableType = this.type();
        #    purchTableType.update(_updateDistributions);
        #
        #    if (isConfigurationkeyEnabled(configurationKeyNum(PublicSector)))
        #    {
        #        purchTotalsSummaryController.onUpdate(this);
        #    }
        #}
      ENDSOURCE
      SOURCE #updateBackStatus
        #void  updateBackStatus()
        #{
        #    PurchTableType purchTableType;
        #
        #    purchTableType = this.type();
        #    purchTableType.updateBackStatus();
        #}
      ENDSOURCE
      SOURCE #updateDocumentStatus
        #void  updateDocumentStatus(DocumentStatus  documentStatus)
        #{
        #    PurchTableType purchTableType;
        #
        #    purchTableType = this.type();
        #    purchTableType.updateDocumentStatus(documentStatus);
        #}
      ENDSOURCE
      SOURCE #updateFinalDisc
        # server void  updateFinalDisc()
        #{
        #    PurchLine purchLine;
        #
        #    // In case the document state differs from confirmed: Final discount should be updated to get the totals right.
        #    // In case the document state is confirmed: Final discount is already updated and shouldn't be called again, as it'll reset the document state.
        #    if (this.DocumentState != VersioningDocumentState::Confirmed
        #        && !this.isInvoiceMatched()
        #        && this.icCheckUpdateHeaderDiscounts())
        #    {
        #        this.PriceDiscHeading::updateFinalDisc(purchLine);
        #    }
        #}
      ENDSOURCE
      SOURCE #updateFromPurchLines
        #/// <summary>
        #/// Sets values on the purchase order that are depending on purchase order line values.
        #/// </summary>
        #/// <param name="_updateDistributions">
        #/// A Boolean value that specifies whether the <c>AccountingDistribution</c> table record that is
        #/// associated with the <c>PurchTable</c> should be updated.
        #/// </param>
        #public void updateFromPurchLines(boolean _updateDistributions = false)
        #{
        #    PurchTableType purchTableType;
        #
        #    purchTableType = this.type();
        #    purchTableType.updateFromPurchLines(_updateDistributions);
        #}
      ENDSOURCE
      SOURCE #updateFromPurchReqLineMap
        #/// <summary>
        #///  Update <c>PurchTable</c> from <c>PurchLine</c> or <c>PurchReqLine</c>.
        #/// </summary>
        #/// <param name="_listEnumerator">
        #/// A list enumerator contains recrods from <c>PurchLine</c> or <c>PurchReqLine</c>.
        #/// </param>
        #public void updateFromPurchReqLineMap(ListEnumerator _listEnumerator)
        #{
        #    InventSiteId                    siteId;
        #    InventLocationId                locationId;
        #    LogisticsPostalAddressRecId     addressRecId;
        #    Addressing                      deliveryAddress;
        #    AddressZipCodeId                deliveryZipCode;
        #    AddressCountyId                 deliveryCounty;
        #    AddressCountryRegionId          deliveryCountryRegionId;
        #    AddressStateId                  deliveryStateId;
        #    VendName                        deliveryName;
        #    AddressCity                     deliveryCity;
        #    AddressStreet                   deliveryStreet;
        #    LogisticsPostalAddress          postalAddress;
        #    PurchReqAttention               attention;
        #    DimensionDefault                dimension;
        #    RecId                           requesterRecId;
        #    InventDim                       inventDim;
        #    PurchReqLineMap                 purchReqLineMap;
        #
        #    boolean                         first           = true;
        #    boolean                         setSiteId       = true;
        #    boolean                         setLocationId   = true;
        #    boolean                         setAddress      = true;
        #    boolean                         setDim          = true;
        #
        #    // Only related to purchReqLine
        #    boolean                         setAtt          = true;
        #    boolean                         setReq          = true;
        #    ProdId                          projId;
        #
        #    while (_listEnumerator.moveNext())
        #    {
        #        purchReqLineMap = _listEnumerator.current();
        #        postalAddress   = LogisticsPostalAddress::findRecId(purchReqLineMap.DeliveryPostalAddress);
        #        inventDim       = InventDim::find(purchReqLineMap.InventDimId);
        #
        #        if (first)
        #        {
        #            first                   = false;
        #            siteId                  = inventDim.InventSiteId;
        #            locationId              = inventDim.InventLocationId;
        #            addressRecId            = purchReqLineMap.DeliveryPostalAddress;
        #            deliveryAddress         = postalAddress.Address;
        #            deliveryZipCode         = postalAddress.ZipCode;
        #            deliveryCounty          = postalAddress.County;
        #            deliveryCountryRegionId = postalAddress.CountryRegionId;
        #            deliveryStateId         = postalAddress.State;
        #            deliveryName            = purchReqLineMap.DeliveryName;
        #            deliveryCity            = postalAddress.City;
        #            deliveryStreet          = postalAddress.Street;
        #            dimension               = purchReqLineMap.DefaultDimension;
        #
        #            if (purchReqLineMap.TableId == tableNum(PurchReqLine))
        #            {
        #                attention           = purchReqLineMap.Attention;
        #                requesterRecId      = purchReqLineMap.Requisitioner;
        #                projId              = purchReqLineMap.ProjId;
        #            }
        #        }
        #        else
        #        {
        #            setSiteId       = setSiteId     && (siteId          == inventDim.InventSiteId);
        #            setLocationId   = setLocationId && (locationId      == inventDim.InventLocationId);
        #            setDim          = setDim        && (dimension       == purchReqLineMap.DefaultDimension);
        #            setAddress      = setAddress
        #                           && deliveryAddress         == postalAddress.Address
        #                           && deliveryZipCode         == postalAddress.ZipCode
        #                           && deliveryCounty          == postalAddress.County
        #                           && deliveryCountryRegionId == postalAddress.CountryRegionId
        #                           && deliveryStateId         == postalAddress.State
        #                           && deliveryName            == purchReqLineMap.DeliveryName
        #                           && deliveryCity            == postalAddress.City
        #                           && deliveryStreet          == postalAddress.Street
        #                           && addressRecId            == purchReqLineMap.DeliveryPostalAddress;
        #
        #            if (purchReqLineMap.TableId == tableNum(PurchReqLine))
        #            {
        #                setReq = setReq && (requesterRecId  == purchReqLineMap.Requisitioner);
        #                setAtt = setAtt && (attention       == purchReqLineMap.Attention);
        #            }
        #        }
        #    }
        #
        #    this.InventSiteId          = setSiteId     ? siteId : '';
        #    this.InventLocationId      = setLocationId ? locationId : '';
        #    this.DeliveryPostalAddress = setAddress    ? addressRecId : 0;
        #    this.DeliveryName          = setAddress    ? deliveryName : '';
        #    if (setDim)
        #    {
        #        this.DefaultDimension = dimension;
        #    }
        #
        #    if (purchReqLineMap.TableId == tableNum(PurchReqLine))
        #    {
        #        this.ReqAttention   = setAtt ? attention : '';
        #        this.Requester      = setReq ? requesterRecId : 0;
        #        this.ProjId         = projId;
        #        this.CurrencyCode   = purchReqLineMap.CurrencyCode;
        #        this.AccountingDate = purchReqLineMap.TransDate;
        #    }
        #}
      ENDSOURCE
      SOURCE #updateIsEncumbranceRequired
        #/// <summary>
        #/// This method sets the <c>IsEncumbranceProcessEnabled</c> field on the current <c>PurchTable</c>
        #/// record to a value that matches the <c>IsEncumbranceProcessEnabled</c> parameter in the
        #/// <c>LedgerParameters</c> table.
        #/// </summary>
        #public void updateIsEncumbranceRequired()
        #{
        #    LedgerParameters    ledgerParameters = LedgerParameters::find();
        #
        #    if (this.IsEncumbranceRequired == UnknownNoYes::Unknown)
        #    {
        #        if (ledgerParameters.IsEncumbranceProcessEnabled == NoYes::Yes)
        #        {
        #            this.IsEncumbranceRequired = UnknownNoYes::Yes;
        #        }
        #        else
        #        {
        #            this.IsEncumbranceRequired = UnknownNoYes::No;
        #        }
        #    }
        #}
      ENDSOURCE
      SOURCE #updateLedgerCov
        #public void updateLedgerCov()
        #{
        #    PurchTableType purchTableType;
        #
        #    if (!this.isFinalized())
        #    {
        #        // Exclude finalized purchase orders from the cash flow process.
        #        purchTableType = this.type();
        #        purchTableType.updateLedgerCov();
        #    }
        #}
      ENDSOURCE
      SOURCE #updateLineFieldsBasedOnHeaderChanges_BR
        #/// <summary>
        #/// It is responsible for updating the PurchLine when fiscal information
        #/// on header is changed
        #/// </summary>
        #// <GBR>
        #public void updateLineFieldsBasedOnHeaderChanges_BR()
        #{
        #    PurchLine           purchLine;
        #    CFOPValidation_BR   cfopValidation;
        #
        #    ttsbegin;
        #
        #    while select forupdate purchLine
        #            where purchLine.PurchId == this.PurchId
        #    {
        #        cfopValidation       = CFOPValidation_BR::construct(this);
        #        purchLine.cfopTable_BR    = cfopValidation.getDefaultCFOP();
        #
        #        if (purchLine.cfopTable_BR != purchLine.orig().cfopTable_BR)
        #        {
        #            purchLine.setTaxGroupAndTaxItemGroupFields_BR();
        #            purchLine.update();
        #            purchLine.type().updateFiscalDocumentText_BR(FiscalDocumentTextType_BR::CFOP);
        #        }
        #    }
        #
        #    ttscommit;
        #}
        #// </GBR>
      ENDSOURCE
      SOURCE #updateMultiLineDisc
        #server boolean  updateMultiLineDisc()
        #{
        #    PurchLine purchLine;
        #    boolean   ret;
        #
        #    if (!this.isInvoiceMatched())
        #    {
        #        ret = this.PriceDiscHeading::updateMultiLineDisc(purchLine);
        #    }
        #
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #updatePurchaseType
        #void  updatePurchaseType()
        #{
        #    PurchTableType purchTableType;
        #
        #    purchTableType = this.type();
        #    purchTableType.updatePurchaseType();
        #}
      ENDSOURCE
      SOURCE #updatePurchLineDelete
        #//// <summary>
        #///     Makes <c>PurchLine</c> table deletion related updates to <c>PurchTable</c>.
        #/// </summary>
        #public void updatePurchLineDelete()
        #{
        #    PurchTableType  purchTableType;
        #
        #    purchTableType = this.type();
        #    purchTableType.updatePurchLineDelete();
        #}
      ENDSOURCE
      SOURCE #validateDelete
        #public boolean  validateDelete()
        #{
        #    boolean         ok = true;
        #    PurchTableType  purchTableType;
        #
        #    ok = super();
        #
        #    if (ok)
        #    {
        #        purchTableType = this.type();
        #        ok = purchTableType.validateDelete();
        #    }
        #
        #    return ok;
        #}
      ENDSOURCE
      SOURCE #validateField
        #boolean  validateField(FieldId  _fieldId)
        #{
        #    boolean         ok = true;
        #
        #    ok = super(_fieldId);
        #
        #    ok = ok && this.validateFieldServer(_fieldId);
        #
        #    if (ok)
        #    {
        #        switch (_fieldId)
        #        {
        #            case fieldNum(PurchTable, PurchaseType) :
        #            case fieldNum(PurchTable, OrderAccount) :
        #                if (#PdsApprovedVendorListEnabled)
        #                {
        #                    ok = this.type().pdsApprovedVendorListCheck().validateCheck();
        #                }
        #                break;
        #            // <PubSect>
        #            case fieldNum(PurchTable, AccountingDate) :
        #                ok = PurchTable::validateBudgetReservation_PSN(this);
        #            // </PubSect>
        #        }
        #    }
        #
        #    return ok;
        #}
      ENDSOURCE
      SOURCE #validateFieldServer
        #/// <summary>
        #/// Validates a changed field on the server side.
        #/// </summary>
        #/// <param name="_fieldId">
        #/// The field ID of the field that was changed.
        #/// </param>
        #/// <returns>
        #/// true if the validation did not fail; otherwise, false.
        #/// </returns>
        #server boolean validateFieldServer(FieldId  _fieldId)
        #{
        #    boolean         ok;
        #    PurchTableType  purchTableType;
        #
        #    purchTableType = this.type();
        #    ok = purchTableType.validateField(_fieldId);
        #
        #    return ok;
        #}
      ENDSOURCE
      SOURCE #validateWrite
        #public boolean  validateWrite()
        #{
        #    boolean         ok = true;
        #
        #    ok = super();
        #
        #    if (ok)
        #    {
        #        setPrefix(strFmt("@SYS25974", this.PurchId));
        #
        #        ok = this.validateWriteServer();
        #    }
        #    return ok;
        #}
        #
      ENDSOURCE
      SOURCE #validateWriteServer
        #server public boolean  validateWriteServer()
        #{
        #    boolean         ok;
        #    PurchTableType  purchTableType;
        #    #ISOCountryRegionCodes
        #
        #    purchTableType = this.type();
        #    ok = purchTableType.validateWrite();
        #
        #    if (ok && this.InclTax && SysCountryRegionCode::isLegalEntityInCountryRegion([#isoLT, #isoHU]))
        #    {
        #        ok = this.SalesPurchTable::validateExcludeTaxFromInvoice();
        #    }
        #
        #    return ok;
        #}
      ENDSOURCE
      SOURCE #vendorAddress
        #//BP Deviation documented
        #display Addressing vendorAddress()
        #{
        #    return this.vendTable_OrderAccount().postalAddress().Address;
        #}
        #
      ENDSOURCE
      SOURCE #vendorEmail
        #//BP Deviation documented
        #display Email vendorEmail()
        #{
        #    return this.vendTable_OrderAccount().email();
        #}
      ENDSOURCE
      SOURCE #vendorName
        #//BP Deviation documented
        #display VendName vendorName()
        #{
        #    return this.vendTable_OrderAccount().name();
        #}
        #
      ENDSOURCE
      SOURCE #vendorPhone
        #//BP Deviation documented
        #display VendPhone vendorPhone()
        #{
        #    return this.vendTable_OrderAccount().phone();
        #}
      ENDSOURCE
      SOURCE #vendTable_InvoiceAccount
        #VendTable vendTable_InvoiceAccount(boolean update = false)
        #{
        #    return VendTable::find(this.InvoiceAccount, update);
        #}
      ENDSOURCE
      SOURCE #vendTable_OrderAccount
        #VendTable vendTable_OrderAccount(boolean update = false)
        #{
        #    return VendTable::find(this.OrderAccount, update);
        #}
      ENDSOURCE
      SOURCE #workflowInstructions
        #/// <summary>
        #/// Retrieves the lates workflow step instructions for this record.
        #/// </summary>
        #/// <returns>
        #/// Returns the instructions for the lates work item for this record.
        #/// </returns>
        #
        #//BP Deviation Documented
        #display public WorkflowStepInstruction  workflowInstructions()
        #{
        #    List                        workItemList;
        #    ListEnumerator              enumerator;
        #
        #    WorkflowWorkItemInstanceId  workItemInstanceId;
        #
        #    WorkflowWorkItemTable       workflowWorkItemTable;
        #    WorkflowDueDateTime         dueDateTime;
        #    WorkflowStepInstruction     stepInstruction;
        #
        #    void getRecord()
        #    {
        #        workItemInstanceId = enumerator.current();
        #        select DueDateTime, Description from workflowWorkItemTable
        #            where workflowWorkItemTable.Id == workItemInstanceId;
        #    }
        #
        #
        #    workItemList = Workflow::findWorkItemsForCurrentUser(this);
        #
        #    if (workItemList)
        #    {
        #        enumerator   = workItemList.getEnumerator();
        #
        #        switch(workItemList.elements())
        #        {
        #            case    0 : stepInstruction = '';
        #                        break;
        #
        #            case    1 : enumerator.moveNext();
        #
        #                        getRecord();
        #                        stepInstruction = workflowWorkItemTable.Description;
        #
        #                        break;
        #
        #            default   : dueDateTime = DateTimeUtil::minValue();
        #
        #                        while (enumerator.moveNext())
        #                        {
        #                            getRecord();
        #
        #                            if (workflowWorkItemTable.DueDateTime > dueDateTime)
        #                            {
        #                                dueDateTime = workflowWorkItemTable.DueDateTime;
        #                                stepInstruction = workflowWorkItemTable.Description;
        #                            }
        #                        }
        #        }
        #    }
        #
        #    return stepInstruction;
        #}
      ENDSOURCE
      SOURCE #workflowLastComment
        #/// <summary>
        #/// Retrieves the last workflow comment for this record.
        #/// </summary>
        #/// <returns>
        #/// The last comment entered by any user for this record.
        #/// </returns>
        #
        #//BP Deviation Documented
        #display public server  WorkflowComment  workflowLastComment()
        #{
        #    WorkflowTrackingTable           workflowTrackingTable;
        #    WorkflowTrackingStatusTable     workflowTrackingStatusTable;
        #    WorkflowTrackingCommentTable    workflowTrackingCommentTable;
        #
        #
        #    select ContextCompanyId, ContextTableId, ContextRecId from workflowTrackingStatusTable
        #        where workflowTrackingStatusTable.ContextCompanyId    == curext()
        #           && workflowTrackingStatusTable.ContextTableId      == this.TableId
        #           && workflowTrackingStatusTable.ContextRecId        == this.RecId
        #        join firstonly TrackingId, CreatedDateTime from workflowTrackingTable order by CreatedDateTime desc
        #            where workflowTrackingTable.WorkflowTrackingStatusTable == workflowTrackingStatusTable.RecId
        #        join Comment from workflowTrackingCommentTable
        #            where workflowTrackingCommentTable.WorkflowTrackingTable == workflowTrackingTable.RecId;
        #
        #    return workflowTrackingCommentTable.Comment;
        #}
      ENDSOURCE
      SOURCE #workflowWorkItemDueDate
        #/// <summary>
        #/// Retrieves the lates workflow due date for this record.
        #/// </summary>
        #/// <returns>
        #/// The due date for lates work item for this record.
        #/// </returns>
        #
        #//BP Deviation Documented
        #display public WorkflowDueDateTime  workflowWorkItemDueDate()
        #{
        #    List                        workItemList;
        #    ListEnumerator              enumerator;
        #
        #    WorkflowWorkItemInstanceId  workItemInstanceId;
        #
        #    WorkflowWorkItemTable       workflowWorkItemTable;
        #    WorkflowDueDateTime         dueDateTime;
        #
        #    void getRecord()
        #    {
        #        workItemInstanceId = enumerator.current();
        #        select DueDateTime from workflowWorkItemTable
        #            where workflowWorkItemTable.Id == workItemInstanceId;
        #    }
        #
        #
        #    workItemList = Workflow::findWorkItemsForCurrentUser(this);
        #
        #    if (workItemList)
        #    {
        #        enumerator   = workItemList.getEnumerator();
        #
        #        switch(workItemList.elements())
        #        {
        #            case    0 : dueDateTime = DateTimeUtil::minValue();
        #                        break;
        #
        #            case    1 : enumerator.moveNext();
        #
        #                        getRecord();
        #                        dueDateTime = workflowWorkItemTable.DueDateTime;
        #
        #                        break;
        #
        #            default   : dueDateTime = DateTimeUtil::minValue();
        #
        #                        while (enumerator.moveNext())
        #                        {
        #                            getRecord();
        #
        #                            if (workflowWorkItemTable.DueDateTime > dueDateTime)
        #                                dueDateTime = workflowWorkItemTable.DueDateTime;
        #                        }
        #        }
        #    }
        #
        #    return dueDateTime;
        #}
      ENDSOURCE
      SOURCE #balanceAmountDelivered
        #server static AmountMST  balanceAmountDelivered(VendAccount _invoiceAccount,
        #                                                // <GEERU>
        #                                                PurchId          _excludePurchId     = '',
        #                                                boolean          _checkAgreementLimit = false,
        #                                                AgreementHeaderExtRecId_RU _agreementHeaderExtRecId = 0)
        #                                                // </GEERU>
        #{
        #    PurchTable     purchTable;
        #    PurchTotals    purchTotals;
        #    AmountMST      amountMST;
        #
        #    while select purchTable
        #            where purchTable.InvoiceAccount == _invoiceAccount              &&
        #                  (purchTable.PurchStatus    == PurchStatus::None       ||
        #                   purchTable.PurchStatus    == PurchStatus::Backorder  ||
        #                   purchTable.PurchStatus    == PurchStatus::Received)      &&
        #                  purchTable.PurchaseType   != PurchaseType::Journal        &&
        #                  purchTable.PurchId        != _excludePurchId
        #    {
        #        // <GEERU>
        #        if (_checkAgreementLimit
        #            && purchTable.purchTable_RU().AgreementHeaderExt_RU != _agreementHeaderExtRecId)
        #        {
        #            continue;
        #        }
        #        // </GEERU>
        #
        #        purchTotals = PurchTotals::newPurchTable(purchTable, PurchUpdate::PackingSlip);
        #        purchTotals.calc();
        #        amountMST += Currency::mstAmount(purchTotals.purchTotalAmount(),purchTable.CurrencyCode);
        #    }
        #
        #    return amountMST;
        #}
      ENDSOURCE
      SOURCE #balanceAmountNotInvoiced
        #server static AmountMST  balanceAmountNotInvoiced(VendAccount _invoiceAccount,
        #                                                  // <GEERU>
        #                                                  PurchId          _excludePurchId     = '',
        #                                                  boolean          _checkAgreementLimit = false,
        #                                                  AgreementHeaderExtRecId_RU _agreementHeaderExtRecId = 0)
        #                                                  // </GEERU>
        #{
        #    PurchTable     purchTable;
        #    PurchTotals    purchTotals;
        #    AmountMST      amountMST;
        #
        #    while select purchTable
        #            where purchTable.InvoiceAccount == _invoiceAccount              &&
        #                  (purchTable.PurchStatus    == PurchStatus::None       ||
        #                   purchTable.PurchStatus    == PurchStatus::Backorder  ||
        #                   purchTable.PurchStatus    == PurchStatus::Received)      &&
        #                  purchTable.PurchaseType   != PurchaseType::Journal        &&
        #                  purchTable.PurchId        != _excludePurchId
        #    {
        #        // <GEERU>
        #        if (_checkAgreementLimit
        #            && purchTable.purchTable_RU().AgreementHeaderExt_RU != _agreementHeaderExtRecId)
        #        {
        #            continue;
        #        }
        #        // </GEERU>
        #
        #        purchTotals = PurchTotals::newPurchTable(purchTable, PurchUpdate::All);
        #        purchTotals.calc();
        #        amountMST += Currency::mstAmount(purchTotals.purchTotalAmount(),purchTable.CurrencyCode);
        #    }
        #
        #    return amountMST;
        #}
      ENDSOURCE
      SOURCE #checkBudgetReservationBalance_PSN
        #/// <summary>
        #/// Checks if any of the purchase order lines of the specified purchase order exceed
        #/// their referenced budget reservation line's remaining balance.
        #/// </summary>
        #/// <param name="_purchId">
        #/// The <c>PurchId</c> of the specified <c>PurchTable</c> record.
        #/// </param>
        #/// <param name="_sourceDocumentHeaderRecId">
        #/// The <c>SourceDocumentHeaderRecId</c> of the specified <c>PurchTable</c> record.
        #/// </param>
        #// <PubSect>
        #public static server void checkBudgetReservationBalance_PSN(
        #    PurchId                     _purchId,
        #    SourceDocumentHeaderRecId   _sourceDocumentHeaderRecId)
        #{
        #    PurchLine localPurchLine;
        #
        #    while select BudgetReservationLine_PSN from localPurchLine
        #        group by BudgetReservationLine_PSN
        #        where localPurchLine.PurchId == _purchId
        #            && localPurchLine.BudgetReservationLine_PSN != 0
        #    {
        #        // Checks the purchase order line balance against the referenced budget reservation line.
        #        BudgetReservation_PSN::checkBudgetReservationBalance(localPurchLine.BudgetReservationLine_PSN, _sourceDocumentHeaderRecId);
        #    }
        #}
        #// </PubSect>
      ENDSOURCE
      SOURCE #checkCustomsPurchaseOrder_IN
        #/// <summary>
        #/// Checks customs purchase order.
        #/// </summary>
        #/// <param name="_purchId">
        #/// The purchase id.
        #/// </param>
        #/// <returns>
        #/// Returns true if the check is succeed.
        #/// </returns>
        #// <GIN>
        #public static boolean checkCustomsPurchaseOrder_IN(PurchIdBase  _purchId)
        #{
        #    PurchTable      purchTable;
        #    PurchTable_W    purchTable_W;
        #    boolean         ret = false;
        #
        #    if (_purchId)
        #    {
        #        select firstonly RecId from purchTable
        #            where purchTable.PurchId == _purchId
        #            exists join purchTable_W
        #                where purchTable_W.PurchTable                   == purchTable.RecId
        #                    && purchTable_W.CustomsInvoiceRegistered_IN == NoYes::Yes;
        #
        #        ret = (purchTable.RecId != 0);
        #    }
        #
        #    return ret;
        #}
        #// </GIN>
      ENDSOURCE
      SOURCE #checkExist
        #static boolean checkExist(PurchId purchId)
        #{
        #    if (purchId && !PurchTable::exist(purchId))
        #        return checkFailed(strFmt(PurchTable::txtNotExist(),purchId));
        #
        #    return true;
        #}
      ENDSOURCE
      SOURCE #checkLedgerPeriod
        #/// <summary>
        #/// Checks whether posting in the ledger period is allowed.
        #/// </summary>
        #/// <param name="_purchId">
        #/// The purchase order number.
        #/// </param>
        #/// <param name="_transDate">
        #/// The transaction date to check.
        #/// </param>
        #/// <returns>
        #/// True if posting in the ledger period is allowed; otherwise False.
        #/// </returns>
        #public static boolean checkLedgerPeriod(PurchId _purchId, TransDate _transDate)
        #{
        #    if (!FiscalCalendars::checkLedgerPeriodDateModule(CompanyInfo::fiscalCalendarRecId(), _transDate, SysModule::Purch, false) && LedgerParameters::find().IsEncumbranceProcessEnabled)
        #    {
        #        return checkFailed(strFmt("@SYS310560", _purchId, date2StrUsr(_transDate, DateFlags::FormatAll)));
        #    }
        #
        #    return true;
        #}
        #
      ENDSOURCE
      SOURCE #computeRetailCaseCount
        #/// <summary>
        #/// Computes the RetailCaseCount for all lines for the specified <c>PurchId</c>
        #/// </summary>
        #/// <param name="purchId">
        #/// A <c>PurchId</c>
        #/// </param>
        #/// <returns>
        #/// The total for all line quantities for the PO (regadless of line item type)
        #/// </returns>
        #static RetailCaseCount computeRetailCaseCount(PurchId          purchId)
        #{
        #    PurchLine           tPurchLine;
        #
        #    select sum(PurchQty) from tPurchLine where tPurchLine.PurchId == purchId;
        #
        #    return tPurchLine.PurchQty;
        #}
      ENDSOURCE
      SOURCE #exist
        #static boolean exist(PurchId  purchId)
        #{
        #    return (select firstonly RecId from purchTable
        #                index hint PurchIdx
        #                where purchTable.PurchId    == purchId
        #           ).RecId != 0;
        #}
      ENDSOURCE
      SOURCE #existVendOpenOrder
        #static boolean existVendOpenOrder(VendAccount vendAccount)
        #{
        #    PurchTable purchTable;
        #
        #    return (select firstonly RecId from purchTable
        #                index hint VendIdx
        #                where purchTable.OrderAccount == vendAccount                &&
        #                      (purchTable.PurchStatus == PurchStatus::None      ||
        #                       purchTable.PurchStatus == PurchStatus::Backorder ||
        #                       purchTable.PurchStatus == PurchStatus::Received)).RecId != 0;
        #
        #}
      ENDSOURCE
      SOURCE #fieldIdToInternalFieldId_W
        #/// <summary>
        #/// Converts a normal field ID to an internal field ID.
        #/// </summary>
        #/// <param name="_fieldId">
        #/// Normal field ID.
        #/// </param>
        #/// <param name="_tableId">
        #/// Table ID of the talbe for the specified field ID. Optional.
        #/// </param>
        #/// <returns>
        #/// Internal field ID.
        #/// </returns>
        #public static FieldId fieldIdToInternalFieldId_W(FieldId _fieldId, TableId _tableId = tableNum(PurchTable))
        #{
        #    TableId internalTableId = PurchTable::tableIdToInternalTableId_W(_tableId);
        #
        #    return ((internalTableId << 24) | _fieldId);
        #}
      ENDSOURCE
      SOURCE #find
        #static PurchTable find(PurchId          purchId,
        #                       boolean          _forUpdate = false,
        #                       ConcurrencyModel _concurrencyModel = ConcurrencyModel::Auto)
        #{
        #    PurchTable purchTable;
        #
        #    if (purchId)
        #    {
        #        if (_forUpdate)
        #        {
        #            purchTable.selectForUpdate  (_forUpdate);
        #            if (_concurrencyModel != ConcurrencyModel::Auto)
        #                purchTable.concurrencyModel(_concurrencyModel);
        #        }
        #        purchTable.selectLocked     (_forUpdate);
        #
        #        select firstonly purchTable
        #            index hint PurchIdx
        #            where purchTable.PurchId == purchId;
        #    }
        #
        #    return purchTable;
        #}
      ENDSOURCE
      SOURCE #findByBankLG
        #/// <summary>
        #///     Finds a record that link to a specified <c>BankLGGuarantee</c> record.
        #/// </summary>
        #/// <param name="_bankLGRefRecId">
        #///     The rec Id of the related <c>BankLGGuarantee</c> record.
        #/// </param>
        #/// <param name="_forUpdate">
        #///     A Boolean value that indicates whether to read the record for update; optional.
        #/// </param>
        #/// <returns>
        #///     If found, returns the record in the <c>PurchTable</c> table; otherwise, returns an empty record.
        #/// </returns>
        #public static PurchTable findByBankLG(
        #    BankLGRefRecId   _bankLGRefRecId,
        #    boolean          _forUpdate = false)
        #{
        #    PurchTable                      purchTable;
        #    BankLGGuaranteePurchaseOrder    bankLGGuaranteePurchaseOrder;
        #
        #    purchTable.selectForUpdate(_forUpdate);
        #
        #    if (_bankLGRefRecId)
        #    {
        #        select firstonly purchTable
        #            exists join bankLGGuaranteePurchaseOrder
        #            where bankLGGuaranteePurchaseOrder.Guarantee        == _bankLGRefRecId
        #                && bankLGGuaranteePurchaseOrder.PurchaseOrder   == purchTable.PurchId;
        #    }
        #
        #    return purchTable;
        #}
        #
      ENDSOURCE
      SOURCE #findPurchIdLocationPurchType
        #/// <summary>
        #/// Find Purchaes ID Location Purchase Type
        #/// </summary>
        #/// <param name="purchId">
        #/// Purchase ID
        #/// </param>
        #/// <param name="location">
        #/// Retail Location
        #/// </param>
        #/// <param name="purchType">
        #/// Purchase Type
        #/// </param>
        #/// <param name="_forUpdate">
        #/// for update?
        #/// </param>
        #/// <returns>
        #/// The Purchase Table
        #/// </returns>
        #static PurchTable findPurchIdLocationPurchType(PurchId  purchId,RetailLocationEx2 location,PurchaseType   purchType,
        #                       boolean     _forUpdate = false)
        #{
        #    PurchTable  purchTable;
        #
        #    if (purchId)
        #    {
        #        purchTable.selectForUpdate  (_forUpdate);
        #        purchTable.selectLocked     (_forUpdate);
        #
        #        select firstonly purchTable
        #            index hint PurchIdx
        #            where purchTable.PurchId == purchId
        #                && purchTable.PurchaseType == purchType
        #                && purchTable.InventLocationId == location;
        #    }
        #
        #    return purchTable;
        #}
      ENDSOURCE
      SOURCE #findPurchIdPurchaseType
        #/// <summary>
        #/// Find purchase ID purchase type
        #/// </summary>
        #/// <param name="purchId">
        #/// Purchase ID
        #/// </param>
        #/// <param name="purchaseType">
        #/// Purchase Type
        #/// </param>
        #/// <param name="_forUpdate">
        #/// for update?
        #/// </param>
        #/// <returns>
        #/// The Purchase Table
        #/// </returns>
        #static PurchTable findPurchIdPurchaseType(PurchId      purchId,
        #                                          PurchaseType purchaseType,
        #                                          boolean     _forUpdate = false)
        #{
        #    PurchTable  purchTable;
        #
        #    if (purchId)
        #    {
        #        purchTable.selectForUpdate  (_forUpdate);
        #        purchTable.selectLocked     (_forUpdate);
        #
        #        select firstonly purchTable
        #            index hint PurchIdx
        #            where purchTable.PurchId        == purchId  &&
        #                  purchTable.PurchaseType   == purchaseType;
        #    }
        #
        #    return purchTable;
        #}
      ENDSOURCE
      SOURCE #findRecId
        #static PurchTable findRecId(RecId       _recId,
        #                            boolean     _forUpdate = false)
        #{
        #    PurchTable purchTable;
        #
        #    purchTable.selectForUpdate(_forUpdate);
        #
        #    select purchTable
        #        where purchTable.RecId == _recId;
        #
        #    // Due to cache, the non-persistent field PackedExtensions may not have a empty value.
        #    // This may cause update conflict issue for extension table record. Clear the cached value
        #    // for this field to make sure it will pack the latest version of extension table record.
        #    purchTable.PackedExtensions = conNull();
        #
        #    return purchTable;
        #}
      ENDSOURCE
      SOURCE #findSourceDocumentHeader
        #/// <summary>
        #/// Finds a <c>PurchTable</c> record by the <c>SourceDocument</c>.
        #/// </summary>
        #/// <param name="_sourceDocumentHeader">
        #/// A <c>SourceDocumentHeader</c> record ID.
        #/// </param>
        #/// <param name="_forUpdate">
        #/// A Boolean value that indicates whether to read the record for update; optional.
        #/// </param>
        #/// <returns>
        #/// A <c>PurchTable</c> record.
        #/// </returns>
        #public static PurchTable findSourceDocumentHeader(RefRecId    _sourceDocumentHeader,boolean _forUpdate = false)
        #{
        #    PurchTable    purchTable;
        #
        #    purchTable.selectForUpdate(_forUpdate);
        #
        #    if (_sourceDocumentHeader)
        #    {
        #        select firstonly purchTable
        #            where purchTable.SourceDocumentHeader == _sourceDocumentHeader;
        #    }
        #
        #    return purchTable;
        #}
      ENDSOURCE
      SOURCE #findSourceDocumentLine
        # /// <summary>
        #/// Finds a <c>PurchTable</c> record by <c>SourceDocumentLine</c>.
        #/// </summary>
        #/// <param name="_sourceDocumentLine">
        #/// A <c>SourceDocumentLine</c> record id.
        #/// </param>
        #/// <param name="_forUpdate">
        #/// A boolean value that indicates whether to read the record for update;optional.
        #/// </param>
        #/// <returns>
        #/// A <c>PurchTable</c> record.
        #/// </returns>
        #public static PurchTable findSourceDocumentLine(RefRecId _sourceDocumentLine,boolean _forUpdate = false)
        #{
        #    PurchTable    purchTable;
        #
        #    purchTable.selectForUpdate(_forUpdate);
        #
        #    if (_sourceDocumentLine)
        #    {
        #        select firstonly purchTable
        #        where purchTable.SourceDocumentLine == _sourceDocumentLine;
        #    }
        #
        #    return purchTable;
        #}
        #
        #
        #
      ENDSOURCE
      SOURCE #hasExensionTableEnabled
        #/// <summary>
        #/// Checks is there any extension table of table <C>PurchTable</C> is enabled.
        #/// </summary>
        #/// <returns>
        #/// true if there is one or more extension tables are enabled. Otherwise, return false.
        #/// </returns>
        #public static boolean hasExensionTableEnabled()
        #{
        #    return SysExtensionSerializerMap::hasExensionTableEnabled(tableNum(PurchTable));
        #}
      ENDSOURCE
      SOURCE #initFromVendTableIL
        #/// <summary>
        #///    Initializes the <c>PurchTable</c> record from a <c>VendTable</c> record.
        #/// </summary>
        #/// <param name="_inputContract">
        #///    A container with the <c>PurchTable</c> record to initialize and <c>VendTable</c> record from which to initialize.
        #/// </param>
        #/// <returns>
        #///    Returns a container with the <c>PurchTable</c> record
        #/// </returns>
        #private static server container initFromVendTableIL(container _inputContract)
        #{
        #    VendTable               invoiceVendTable;
        #    boolean                 addressSet;
        #    TaxVATNumTable          taxVATNumTable;
        #    PurchTable              purchTable = con2Buf(conPeek(_inputContract, 1));
        #    VendTable               vendTable = con2Buf(conPeek(_inputContract, 2));
        #
        #    // <GIN>
        #    TaxWithholdParameters_IN    taxWithholdParameters;
        #    TaxInformationVendTable_IN  taxInformationVendTableLoc;
        #    PurchTable_W                purchTable_W;
        #    // </GIN>
        #    RetailServiceCategory      tServiceCategory;
        #    // <GEERU>
        #    PurchTable_RU               purchTable_RU;
        #    // </GEERU>
        #
        #    #ISOCountryRegionCodes
        #
        #    purchTable.OrderAccount               = vendTable.AccountNum;
        #
        #    purchTable.InvoiceAccount             = vendTable.InvoiceAccount  ? vendTable.InvoiceAccount
        #                                                                : vendTable.AccountNum;
        #
        #    invoiceVendTable                      = purchTable.vendTable_InvoiceAccount();
        #    purchTable.vatNum                     = vendTable.vatNum;
        #    purchTable.EnterpriseNumber           = vendTable.EnterpriseNumber;
        #    purchTable.NumberSequenceGroup        = invoiceVendTable.NumberSequenceGroup;
        #
        #    purchTable.CurrencyCode               = vendTable.Currency;
        #    if(VendParameters::find().VendNameFromVATNum)
        #    {
        #        taxVATNumTable = TaxVATNumTable::find(vendTable.vatNum, vendTable.postalAddress().CountryRegionId);
        #
        #        if(taxVATNumTable.Name)
        #        {
        #            purchTable.PurchName      = taxVATNumTable.Name;
        #        }
        #        else
        #        {
        #            purchTable.PurchName      = vendTable.name();
        #        }
        #    }
        #    else
        #    {
        #        purchTable.PurchName                  = vendTable.name();
        #    }
        #
        #    purchTable.ItemBuyerGroupId           = vendTable.ItemBuyerGroupId;
        #    purchTable.VendGroup                  = vendTable.VendGroup;
        #    purchTable.PriceGroupId               = vendTable.PriceGroup;
        #    purchTable.TaxGroup                   = vendTable.TaxGroup;
        #    purchTable.InclTax                    = vendTable.InclTax;
        #    purchTable.LineDisc                   = vendTable.LineDisc;
        #    purchTable.MultiLineDisc              = vendTable.MultiLineDisc;
        #    purchTable.EndDisc                    = vendTable.EndDisc;
        #
        #    purchTable.Email                      = vendTable.email();
        #    purchTable.url                        = vendTable.url();
        #
        #    purchTable.LanguageId                 = DirPartyTable::findRec(vendTable.Party).LanguageId;
        #
        #    purchTable.DefaultDimension           = purchTable.copyDimension(vendTable.DefaultDimension);
        #    purchTable.DlvTerm                    = vendTable.DlvTerm;
        #    purchTable.DlvMode                    = vendTable.DlvMode;
        #    purchTable.MarkupGroup                = vendTable.MarkupGroup;
        #    purchTable.FreightZone                = vendTable.FreightZone;
        #
        #    purchTable.Payment                    = vendTable.PaymTermId;
        #    purchTable.initFromPayment();
        #    if (vendTable.PaymSched)
        #    {
        #        purchTable.PaymentSched           = vendTable.PaymSched;
        #    }
        #    purchTable.PaymMode                   = vendTable.PaymMode;
        #    purchTable.PaymSpec                   = vendTable.PaymSpec;
        #
        #    purchTable.PostingProfile             = VendParameters::find().PostingProfile;
        #
        #    purchTable.setInventSiteId(vendTable.InventSiteId);
        #    purchTable.InventLocationId = vendTable.InventLocation;
        #
        #    if (!purchTable.RecId || !purchTable.isDropShipment())
        #    {
        #        addressSet = purchTable.setAddressFromInventLocationId(purchTable.InventLocationId);
        #
        #        if (!addressSet)
        #        {
        #            purchTable.setDefaultDeliveryAddress();
        #        }
        #    }
        #    purchTable.ContactPersonId            = vendTable.ContactPersonId;
        #
        #    purchTable.CashDisc                   = vendTable.CashDisc;
        #
        #    if(vendTable.CashDisc)
        #        purchTable.CashDiscPercent        = CashDisc::find(vendTable.CashDisc).Percent;
        #
        #    purchTable.PurchPoolId                = PurchParameters::find().PurchPoolId;
        #    if (vendTable.PurchPoolId)
        #        purchTable.PurchPoolId            = vendTable.PurchPoolId;
        #
        #    purchTable.InterCompanyOrder          = vendTable.interCompanyTradingRelationActive();
        #    purchTable.InterCompanyCompanyId      = vendTable.interCompanyTradingPartnerCompanyID();
        #
        #    //<GEEPL>
        #    purchTable.TaxPeriodPaymentCode_PL          = vendTable.TaxPeriodPaymentCode_PL;
        #    //</GEEPL>
        #
        #    purchTable.tamVendRebateGroupId     = vendTable.tamRebateGroupID;
        #
        #    if (isConfigurationkeyEnabled(configurationKeyNum(Retail)))
        #    {
        #        purchTable.ServiceCategory            = RetailVendTable::find(vendTable.AccountNum).ServiceCategory;
        #
        #        if (purchTable.ServiceCategory)
        #        {
        #            tServiceCategory                  = RetailServiceCategory::find(purchTable.ServiceCategory);
        #            purchTable.AvailSalesDate         = tServiceCategory.calcSalesdate(purchTable.DeliveryDate);
        #            purchTable.LocalDeliveryDate      = tServiceCategory.calcLVMdate(purchTable.DeliveryDate);
        #            if (tServiceCategory.CrossDockingWarehouse)
        #            {
        #                purchTable.InventLocationId      = tServiceCategory.CrossDockingWarehouse;
        #                purchTable.ReplenishmentLocation = tServiceCategory.ReplenishmentLocation;
        #            }
        #        }
        #    }
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoNO]))
        #    {
        #        purchTable.BankCentralBankPurposeCode = vendTable.BankCentralBankPurposeCode;
        #        purchTable.BankCentralBankPurposeText = vendTable.BankCentralBankPurposeText;
        #    }
        #
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoIS]))
        #    {
        #        purchTable.VendInvoiceDeclaration_IS = vendTable.VendInvoiceDeclaration_IS;
        #    }
        #
        #    // <GEERU>
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
        #    {
        #        purchTable_RU = purchTable.purchTable_RU();
        #
        #        purchTable_RU.vatOperationCode_RU = vendTable.vatOperationCode_RU;
        #        if (vendTable.InventProfileType_RU || vendTable.InventProfileId_RU)
        #        {
        #            purchTable_RU.InventProfileType_RU = vendTable.InventProfileType_RU;
        #            purchTable_RU.InventProfileId_RU   = vendTable.InventProfileId_RU;
        #        }
        #
        #        purchTable.packPurchTable_RU(purchTable_RU);
        #    }
        #    // </GEERU>
        #    purchTable.ChangeRequestRequired      = (PurchParameters::find().ChangeRequestAllowOverride && vendTable.ChangeRequestOverride) ? vendTable.ChangeRequestEnabled : PurchParameters::find().ChangeRequestEnabled;
        #
        #    // <GIN>
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoIN]))
        #    {
        #        purchTable_W = purchTable.purchTable_W();
        #
        #        taxWithholdParameters           = TaxWithholdParameters_IN::find();
        #        taxInformationVendTableLoc      = vendTable.getTaxInformationVendTable_IN();
        #        if (taxWithholdParameters.tcsInvoice)
        #        {
        #            purchTable_W.NatureOfAssessee_IN    = taxInformationVendTableLoc.NatureOfAssessee;
        #        }
        #        if (taxWithholdParameters.tdsInvoice)
        #        {
        #            purchTable_W.tdsGroup_IN            = taxInformationVendTableLoc.tdsGroup;
        #            purchTable_W.NatureOfAssessee_IN    = taxInformationVendTableLoc.NatureOfAssessee;
        #        }
        #
        #        purchTable_W.CustomsImportOrder_IN = vendTable.isForeign();
        #        purchTable_W.ExciseVendorType_IN   = taxInformationVendTableLoc.ExciseVendorType;
        #        purchTable.packPurchTable_W(purchTable_W);
        #    }
        #    // </GIN>
        #
        #    // <GJP>
        #    if (VendConsInvoiceType_JP::isVendConsInvoiceEnabled())
        #    {
        #        if (vendTable.ConsDay_JP != 0)
        #        {
        #            purchTable.ConsTarget_JP = NoYes::Yes;
        #        }
        #    }
        #    // </GJP>
        #
        #    // <GEELT>
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoLT]))
        #    {
        #        purchTable.UnitedVATInvoice_LT = vendTable.UnitedVATInvoice_LT;
        #    }
        #    // </GEELT>
        #
        #    // <GEEU>
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoLV, #isoLT]))
        #    {
        #        purchTable.InvoiceRegister_LT         = LtInvoiceAutoNumberingGroups::autoNumberingForPurchInvoice(purchTable.OrderAccount);
        #        purchTable.PackingSlipRegister_LT     = LtInvoiceAutoNumberingGroups::autoNumberingForPurchPackingSlip(purchTable.OrderAccount);
        #    }
        #    // </GEEU>
        #
        #    purchTable.setListCode();
        #
        #    // <GBR>
        #    PurchTableHandler_BR::initFromVendTableFromVendor(vendTable, purchTable);
        #    // </GBR>
        #
        #    return buf2Con(purchTable, true);
        #}
      ENDSOURCE
      SOURCE #internalFieldIdToFieldId_W
        #/// <summary>
        #/// Converts an internal field ID to normal field ID.
        #/// </summary>
        #/// <param name="_internalFieldId">
        #/// Internal field ID.
        #/// </param>
        #/// <returns>
        #/// Normal field ID.
        #/// </returns>
        #/// <remarks>
        #/// Internal field ID saves the normal field ID information in the lower 24 bits,
        #/// and save the internal table ID information in the upper 8 bits.
        #/// Note: internal table ID is a code defined ID, not the normal table ID.
        #/// </remarks>
        #public static FieldId internalFieldIdToFieldId_W(FieldId _internalFieldId)
        #{
        #    return (_internalFieldId & 0xffffff);
        #}
      ENDSOURCE
      SOURCE #internalFieldIdToTableId_W
        #/// <summary>
        #/// Converts an internal field ID to normal table ID.
        #/// </summary>
        #/// <param name="_internalFieldId">
        #/// Internal field ID.
        #/// </param>
        #/// <returns>
        #/// Normal table ID.
        #/// </returns>
        #/// <remarks>
        #/// Internal field ID saves the normal field ID information in the lower 24 bits,
        #/// and save the internal table ID information in the upper 8 bits.
        #/// Note: internal table ID is a code defined ID, not the normal table ID.
        #/// </remarks>
        #public static TableId internalFieldIdToTableId_W(FieldId _internalFieldId)
        #{
        #    return PurchTable::internalTableIdToTableId_W((_internalFieldId >> 24));
        #}
      ENDSOURCE
      SOURCE #internalTableIdToTableId_W
        #/// <summary>
        #/// Converts internal table ID to normal table ID.
        #/// </summary>
        #/// <param name="_internalTableId">
        #/// Internal table ID.
        #/// </param>
        #/// <returns>
        #/// Normal table ID.
        #/// </returns>
        #private static TableId internalTableIdToTableId_W(TableId _internalTableId)
        #{
        #    #define.InternalTableId_PurchTable_BR(1)
        #    #define.InternalTableId_PurchTable_RU(2)
        #    #define.InternalTableId_PurchTable_W(3)
        #
        #    switch (_internalTableId)
        #    {
        #        case #InternalTableId_PurchTable_BR:
        #            return tableNum(PurchTable_BR);
        #
        #        case #InternalTableId_PurchTable_RU:
        #            return tableNum(PurchTable_RU);
        #
        #        case #InternalTableId_PurchTable_W:
        #            return tableNum(PurchTable_W);
        #    }
        #
        #    return tableNum(PurchTable);
        #}
      ENDSOURCE
      SOURCE #lookupCustomsImportOrder_IN
        #/// <summary>
        #/// Lookups customs import order.
        #/// </summary>
        #/// <param name="_formControl">
        #/// The form control.
        #/// </param>
        #// <GIN>
        #public static void lookupCustomsImportOrder_IN(FormControl _formControl)
        #{
        #    SysTableLookup          sysTableLookup = SysTableLookup::newParameters(tableNum(PurchTable), _formControl);
        #    Query                   query = new Query();
        #    QueryBuildDataSource    queryBuildDataSource;
        #    QueryBuildRange         queryBuildRange;
        #
        #    queryBuildDataSource    = query.addDataSource(tableNum(PurchTable));
        #    queryBuildDataSource    = queryBuildDataSource.addDataSource(tableNum(PurchTable_W));
        #    queryBuildRange         = queryBuildDataSource.addRange(fieldNum(PurchTable_W, CustomsImportOrder_IN));
        #    queryBuildRange.value(queryValue(NoYes::Yes));
        #    queryBuildRange         = queryBuildDataSource.addRange(fieldNum(PurchTable_W, CustomsInvoiceRegistered_IN));
        #    queryBuildRange.value(queryValue(NoYes::No));
        #    sysTableLookup.addLookupfield(fieldNum(PurchTable, PurchId));
        #    sysTableLookup.addLookupfield(fieldNum(PurchTable, PurchName));
        #    sysTableLookup.addLookupfield(fieldNum(PurchTable, PurchStatus));
        #    sysTableLookup.addLookupfield(fieldNum(PurchTable, OrderAccount));
        #    sysTableLookup.parmQuery(query);
        #    sysTableLookup.performFormLookup();
        #}
        #// </GIN>
      ENDSOURCE
      SOURCE #lookupCustomsPurchOrder_IN
        #/// <summary>
        #/// Displays all Purchase Orders where Importe Order is marked.[ Displays all Import Orders]
        #/// </summary>
        #/// <param name="_formControl">
        #/// The form control.
        #/// </param>
        #// <GIN>
        #public static void lookupCustomsPurchOrder_IN(FormControl _formControl)
        #{
        #    SysTableLookup          sysTableLookup = SysTableLookup::newParameters(tableNum(PurchTable), _formControl);
        #    Query                   query = new Query();
        #    QueryBuildDataSource    queryBuildDataSource;
        #    QueryBuildRange         queryBuildRange;
        #
        #    queryBuildDataSource    = query.addDataSource(tableNum(PurchTable));
        #    queryBuildDataSource    = queryBuildDataSource.addDataSource(tableNum(PurchTable_W));
        #    queryBuildRange         = queryBuildDataSource.addRange(fieldNum(PurchTable_W, CustomsImportOrder_IN));
        #    queryBuildRange.value(queryValue(NoYes::Yes));
        #    sysTableLookup.addLookupfield(fieldNum(PurchTable, PurchId));
        #    sysTableLookup.addLookupfield(fieldNum(PurchTable, PurchName));
        #    sysTableLookup.addLookupfield(fieldNum(PurchTable, PurchStatus));
        #    sysTableLookup.addLookupfield(fieldNum(PurchTable, OrderAccount));
        #    sysTableLookup.parmQuery(query);
        #    sysTableLookup.performFormLookup();
        #}
        #// </GIN>
      ENDSOURCE
      SOURCE #lookupOrdersForConfirmationRequest
        #/// <summary>
        #/// Queries for orders that are relevant for requesting confirmation on
        #/// </summary>
        #/// <param name="_formControl">
        #/// The control where the lookup was invoked
        #/// </param>
        #/// <remarks>
        #/// Used in the order lookup while processing confirmation request
        #/// </remarks>
        #public static void lookupOrdersForConfirmationRequest(FormControl _formControl)
        #{
        #    SysTableLookup          sysTableLookup = SysTableLookup::newParameters(tableNum(PurchTable), _formControl);
        #    Query                   query = new Query();
        #    QueryBuildDataSource    queryBuildDataSource;
        #    QueryBuildRange         queryBuildRange;
        #
        #    queryBuildDataSource    = query.addDataSource(tableNum(PurchTable));
        #    queryBuildRange = queryBuildDataSource.addRange(fieldNum(PurchTable, DocumentState));
        #    queryBuildRange.value(enum2Value(VersioningDocumentState::Approved));
        #
        #    sysTableLookup.addLookupfield(fieldNum(PurchTable, PurchId));
        #    sysTableLookup.addLookupfield(fieldNum(PurchTable, PurchName));
        #    sysTableLookup.addLookupfield(fieldNum(PurchTable, DocumentState));
        #    sysTableLookup.addLookupfield(fieldNum(PurchTable, PurchStatus));
        #    sysTableLookup.addLookupfield(fieldNum(PurchTable, OrderAccount));
        #    sysTableLookup.parmQuery(query);
        #    sysTableLookup.performFormLookup();
        #}
      ENDSOURCE
      SOURCE #lookupWMSReception
        #static void lookupWMSReception(FormStringControl ctrl, VendAccount vendAccount)
        #{
        #    SysTableLookup          sysTableLookup = SysTableLookup::newParameters(tableNum(PurchTable), ctrl);
        #    Query                   query = new Query();
        #    QueryBuildDataSource    dsPurchTable;
        #    QueryBuildDataSource    dsPurchLine;
        #    QueryBuildDataSource    dsPurchTableVersion;
        #    QueryBuildRange         queryBuildRange;
        #
        #    sysTableLookup.addLookupfield(fieldNum(PurchTable, PurchId));
        #    sysTableLookup.addLookupfield(fieldNum(PurchTable, PurchName));
        #    sysTableLookup.addLookupfield(fieldNum(PurchTable, OrderAccount));
        #
        #    dsPurchTable = query.addDataSource(tableNum(PurchTable));
        #
        #    if (PurchParameters::find().ChangeRequestEnabled)
        #    {
        #        dsPurchTableVersion = dsPurchTable.addDataSource(tableNum(PurchTableVersion));
        #        dsPurchTableVersion.relations(true);
        #        dsPurchTableVersion.joinMode(JoinMode::ExistsJoin);
        #    }
        #
        #    dsPurchLine = dsPurchTable.addDataSource(tableNum(PurchLine));
        #    dsPurchLine.relations(true);
        #    dsPurchLine.joinMode(JoinMode::ExistsJoin);
        #
        #    if (vendAccount)
        #    {
        #        queryBuildRange = dsPurchTable.addRange(fieldNum(PurchTable, OrderAccount));
        #        queryBuildRange.value(queryValue(vendAccount));
        #    }
        #
        #    queryBuildRange = dsPurchTable.addRange(fieldNum(PurchTable, PurchStatus));
        #    queryBuildRange.value(enum2Value(PurchStatus::Backorder));
        #
        #    // Direct deliveries are excluded since they can not be received at out warehouse
        #    queryBuildRange = dsPurchLine.addRange(fieldNum(PurchLine, DeliveryType));
        #    queryBuildRange.value(queryNotValue(TradeLineDlvType::DropShip));
        #
        #    // Exclude purchase orders of type Journal
        #    queryBuildRange = dsPurchTable.addRange(fieldNum(PurchTable, PurchaseType));
        #    queryBuildRange.value(queryNotValue(PurchaseType::Journal));
        #
        #    dsPurchTable.addSortField(fieldNum(PurchTable, PurchId));
        #
        #    sysTableLookup.parmQuery(query);
        #    sysTableLookup.performFormLookup();
        #}
      ENDSOURCE
      SOURCE #mustValidateAllAccountsFullyQualified
        #/// <summary>
        #/// Indicates whether to validate if all accounts are fully qualified.
        #/// </summary>
        #/// <returns>
        #/// true when validation of if all accounts are fully qualified; otherwise, false.
        #/// </returns>
        #public static boolean mustValidateAllAccountsFullyQualified()
        #{
        #    return Ledger::isLedgerBudgetControlEnabled()
        #        || LedgerParameters::find().IsEncumbranceProcessEnabled;
        #}
      ENDSOURCE
      SOURCE #pdsCWItemLine
        #public static boolean pdsCWItemLine(PurchId _purchId)
        #{
        #    PurchLine           purchLine;
        #    PdsCatchWeightItem  catchWeightItem;
        #    boolean             ret = false;
        #
        #    if (#PdsCatchWeightEnabled)
        #    {
        #        select firstonly RecId
        #            from purchLine
        #            where purchLine.PurchId         == _purchId
        #            exists join catchWeightItem
        #            where catchWeightItem.ItemId    == purchLine.ItemId;
        #
        #        if (purchLine.RecId)
        #        {
        #            ret = true;
        #        }
        #    }
        #
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #promptConvertCurrencyCode
        #client static container promptConvertCurrencyCode(PurchTable _purchTable = null)
        #{
        #    DialogButton            dialogButton;
        #
        #    if (!isConfigurationkeyEnabled(configurationKeyNum(PriceDisc)))
        #    {
        #        dialogButton = Box::okCancel("@SYS127859", DialogButton::Ok);
        #        if (dialogButton == DialogButton::Ok)
        #            return [NoYes::Yes, TradeCurencyConversion::ExchRate];
        #
        #        return [NoYes::No, TradeCurencyConversion::ExchRate];
        #    }
        #    return TradeCurrencyConversionPrompt::newFromParm(_purchTable,
        #                                                      _purchTable.PurchId,
        #                                                      _purchTable.priceDiscChangePolicyExistOnLine()
        #                                                      ).promptConvertCurrencyCode();
        #}
        #
      ENDSOURCE
      SOURCE #promptCopyDeliveryAddress
        #client static DialogButton  promptCopyDeliveryAddress()
        #{;
        #    return Box::yesYesAllNoCancel("@SYS89799", DialogButton::Yes);
        #}
      ENDSOURCE
      SOURCE #tableIdToInternalTableId_W
        #/// <summary>
        #/// Converts normal table ID to internal table ID.
        #/// </summary>
        #/// <param name="_narmalTableId">
        #/// Normal table ID.
        #/// </param>
        #/// <returns>
        #/// Internal table ID.
        #/// </returns>
        #/// <remarks>
        #/// Internal table ID is defined separately for each set of
        #/// base table and its extension tables. And the internal table
        #/// ID for base table should always be 0.
        #/// </remarks>
        #private static TableId tableIdToInternalTableId_W(TableId _narmalTableId)
        #{
        #    #define.InternalTableId_PurchTable_BR(1)
        #    #define.InternalTableId_PurchTable_RU(2)
        #    #define.InternalTableId_PurchTable_W(3)
        #
        #    switch (_narmalTableId)
        #    {
        #        case tableNum(PurchTable_BR):
        #            return #InternalTableId_PurchTable_BR;
        #
        #        case tableNum(PurchTable_RU):
        #            return #InternalTableId_PurchTable_RU;
        #
        #        case tableNum(PurchTable_W):
        #            return #InternalTableId_PurchTable_W;
        #    }
        #
        #    return 0;
        #}
      ENDSOURCE
      SOURCE #txtNotExist
        #static TxtNotExist  txtNotExist()
        #{
        #    return "@SYS15741";
        #}
      ENDSOURCE
      SOURCE #updateDlvModeFromCarrierService
        #/// <summary>
        #///   Updates delivery mode on purchase order.
        #/// </summary>
        #/// <param name="_purchId">
        #///   The purch order ID.
        #/// </param>
        #/// <param name="_carrierCode">
        #///   The carrier code.
        #/// </param>
        #/// <param name="_carrierServiceCode">
        #///   The carrier service code.
        #/// </param>
        #/// <remarks>
        #///   The delivery mode is assigned based on carrier code and carrier service.
        #/// </remarks>
        #public static server void updateDlvModeFromCarrierService(
        #    PurchId                 _purchId,
        #    TMSCarrierCode          _carrierCode,
        #    TMSCarrierServiceCode   _carrierServiceCode)
        #{
        #    PurchTable  purchTable;
        #    DlvModeId   dlvModeId = TMSCarrierService::findDlvModeId(_carrierCode, _carrierServiceCode);
        #
        #    if (dlvModeId)
        #    {
        #        ttsbegin;
        #
        #        update_recordset purchTable
        #            setting DlvMode = dlvModeId
        #            where purchTable.PurchId == _purchId;
        #
        #        ttscommit;
        #    }
        #}
      ENDSOURCE
      SOURCE #validateBudgetReservation_PSN
        #/// <summary>
        #/// Performs validations on the <c>BudgetReservationLine_PSN</c> field of each <c>PurchLine</c> line record associated
        #/// with the specified <c>PurchTable</c> record.
        #/// </summary>
        #/// <param name="_purchTable">
        #/// The <c>PurchTable</c> record associated with the <c>PurchLine</c> records to be validated.
        #/// </param>
        #/// <returns>
        #/// true if all validations pass or the budget reservation feature is disabled; otherwise, false.
        #/// </returns>
        #// <PubSect>
        #private static server boolean validateBudgetReservation_PSN(PurchTable _purchTable)
        #{
        #    PurchLine                 purchLine;
        #    BudgetReservationLine_PSN budgetReservationLine;
        #    boolean                   isValid = true;
        #
        #    if (PublicSectorUtils::isBudgetReservationEnabled())
        #    {
        #        while select BudgetReservationHeader_PSN from budgetReservationLine
        #            exists join purchLine
        #                group by budgetReservationLine.BudgetReservationHeader_PSN
        #            where purchLine.PurchId == _purchTable.PurchId
        #                && purchLine.BudgetReservationLine_PSN == budgetReservationLine.RecId
        #                && purchLine.BudgetReservationLine_PSN != 0
        #        {
        #            isValid = isValid && BudgetReservation_PSN::validateBudgetReservationToBeRelieved(
        #                _purchTable.AccountingDate,
        #                budgetReservationLine.BudgetReservationHeader_PSN,
        #                BudgetReservationRelievingDocument_PSN::PurchaseOrder,
        #                "@SYP4860844",
        #                "@SYP4860845");
        #        }
        #    }
        #
        #    return isValid;
        #}
        #// </PubSect>
      ENDSOURCE
      SOURCE #vendOpenOrders
        #static PurchTable vendOpenOrders(VendAccount vendAccount, boolean update = false)
        #{
        #    PurchTable purchTable;
        #
        #    purchTable.selectForUpdate (update);
        #
        #    select purchTable
        #           index hint VendIdx
        #           where purchTable.OrderAccount == vendAccount                &&
        #                 (purchTable.PurchStatus == PurchStatus::None      ||
        #                  purchTable.PurchStatus == PurchStatus::Backorder ||
        #                  purchTable.PurchStatus == PurchStatus::Received);
        #
        #    return purchTable;
        #}
      ENDSOURCE
    ENDMETHODS
    EVENTS
      METHOD #initFromVendInvoiceJour
        EVENTHANDLERS
          EVENTHANDLER #postInitFromVendInvoiceJour_BR
            PROPERTIES
              CalledWhen          #Post
              Class               #PurchTableHandler_BR
              Method              #initFromVendInvoiceJour
              AOTlink             #\Classes\PurchTableHandler_BR\initFromVendInvoiceJour
            ENDPROPERTIES
            
          ENDEVENTHANDLER
        ENDEVENTHANDLERS
      ENDMETHOD
      METHOD #initFromVendTable
        EVENTHANDLERS
          EVENTHANDLER #postInitFromVendTable_BR
            PROPERTIES
              CalledWhen          #Post
              Class               #purchtablehandler_br
              Method              #initFromVendTable
              AOTlink             #\Classes\purchtablehandler_br\initFromVendTable
            ENDPROPERTIES
            
          ENDEVENTHANDLER
        ENDEVENTHANDLERS
      ENDMETHOD
      METHOD #modifiedField
        EVENTHANDLERS
          EVENTHANDLER #postModifiedField_BR
            PROPERTIES
              CalledWhen          #Post
              Class               #PurchTableType
              Method              #postModifiedFieldHandler_BR
              AOTlink             #\Classes\PurchTableType\postModifiedFieldHandler_BR
            ENDPROPERTIES
            
          ENDEVENTHANDLER
        ENDEVENTHANDLERS
      ENDMETHOD
    ENDEVENTS
  ENDTABLE
  

***Element: DBT

; Microsoft Dynamics AX Table : SalesTable unloaded
; --------------------------------------------------------------------------------
  TABLEVERSION 1
  
  TABLE #SalesTable
    EnforceFKRelation 0
    PROPERTIES
      Name                #SalesTable
      Label               #@SYS25193
      SearchLinkRefName   #EPSalesTableInfo
      TitleField1         #SalesId
      TitleField2         #SalesName
      ConfigurationKey    #LogisticsBasic
      SecurityKey         #CustTables
      CacheLookup         #NotInTTS
      CreateRecIdIndex    #Yes
      TableGroup          #WorksheetHeader
      PrimaryIndex        #SalesIdx
      ClusterIndex        #SalesIdx
      ModifiedDateTime    #Yes
      DEL_modifiedTime    #Yes
      ModifiedBy          #Yes
      ModifiedTransactionId #Yes
      CreatedDateTime     #Yes
      DEL_createdTime     #Yes
      CreatedBy           #Yes
      CreatedTransactionId #Yes
      DeveloperDocumentation  #@SYS124484
      Origin              #{2C0A016E-0000-1000-B787-EA7473546162}
      LegacyId            #366
    ENDPROPERTIES
    
    FIELDS
      FIELD #AddressRefRecId
        INT64
        PROPERTIES
          Name                #AddressRefRecId
          AllowEditOnCreate   #No
          AllowEdit           #No
          Visible             #No
          Table               #SalesTable
          Origin              #{AF38A73A-6C15-400A-A82D-80DC6627184C}
          LegacyId            #127
          ExtendedDataType    #AddressRefRecId
        ENDPROPERTIES
        
      FIELD #AddressRefTableId
        INT
        PROPERTIES
          Name                #AddressRefTableId
          AllowEditOnCreate   #No
          AllowEdit           #No
          Visible             #No
          Table               #SalesTable
          Origin              #{78031ED8-AD82-44A0-9C85-1B3ADA65A756}
          LegacyId            #69
          ExtendedDataType    #AddressRefTableId
        ENDPROPERTIES
        
      FIELD #AutoSummaryModuleType
        ENUM
        PROPERTIES
          Name                #AutoSummaryModuleType
          Label               #@SYS57738
          AllowEditOnCreate   #No
          AllowEdit           #No
          Visible             #No
          Table               #SalesTable
          Origin              #{E26AD532-B742-41AA-A23D-E461072A8E75}
          LegacyId            #85
          EnumType            #ModuleCustSales
        ENDPROPERTIES
        
      FIELD #AZ_SalesOrderWorkflowStatus
        ENUM
        PROPERTIES
          Name                #AZ_SalesOrderWorkflowStatus
          Table               #SalesTable
          Origin              #{81CB17F4-A9CF-4EA4-BB54-BC7213853916}
          EnumType            #AZ_SalesOrderWorkflowStatus
        ENDPROPERTIES
        
      FIELD #BankAccount_LV
        STRING
        PROPERTIES
          Name                #BankAccount_LV
          Label               #@GLS220786
          HelpText            #@GLS220787
          Table               #SalesTable
          CountryRegionCodes  #CZ,EE,HU,LT,LV,PL
          IgnoreEDTRelation   #Yes
          Origin              #{6DAF6150-8F6E-432A-9A60-69693864E67E}
          ExtendedDataType    #CompanyBankAccountId
        ENDPROPERTIES
        
      FIELD #BankCentralBankPurposeCode
        STRING
        PROPERTIES
          Name                #BankCentralBankPurposeCode
          Table               #SalesTable
          CountryRegionCodes  #NO
          IgnoreEDTRelation   #Yes
          Origin              #{90004273-4C03-46CF-BA8E-2810A7CC6B9C}
          LegacyId            #118
          ExtendedDataType    #BankCentralBankPurposeCode
        ENDPROPERTIES
        
      FIELD #BankCentralBankPurposeText
        STRING
        PROPERTIES
          Name                #BankCentralBankPurposeText
          Table               #SalesTable
          CountryRegionCodes  #NO
          Origin              #{54DE2034-CD4B-49F7-929F-DF669C1E04D9}
          LegacyId            #105
          ExtendedDataType    #BankCentralBankPurposeText
          StringSize          #140
        ENDPROPERTIES
        
      FIELD #BankDocumentType
        ENUM
        PROPERTIES
          Name                #BankDocumentType
          Label               #@SYS313726
          HelpText            #@SYS316247
          Table               #SalesTable
          Origin              #{00363579-7A1E-46AC-9882-2160854B1746}
          LegacyId            #209
          ExtendedDataType    #BankDocumentFacilityNature
          EnumType            #BankDocumentType
        ENDPROPERTIES
        
      FIELD #CaseTagging
        ENUM
        PROPERTIES
          Name                #CaseTagging
          Table               #SalesTable
          Origin              #{6EAAD564-D19E-42CA-90CE-333AD42337FE}
          LegacyId            #125
          ExtendedDataType    #RFIDCaseTagging
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #CashDisc
        STRING
        PROPERTIES
          Name                #CashDisc
          HelpText            #@SYS851
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{3351C9CA-B7A5-4BE1-80AD-59C8B89F2CB6}
          LegacyId            #17
          ExtendedDataType    #CustCashDiscCode
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #CashDiscBaseDate
        DATE
        PROPERTIES
          Name                #CashDiscBaseDate
          Table               #SalesTable
          Origin              #{EB84730D-AE52-420B-ACB4-A4FB496DFD40}
          ExtendedDataType    #CashDiscBaseDate
        ENDPROPERTIES
        
      FIELD #CashDiscBaseDays
        INT
        PROPERTIES
          Name                #CashDiscBaseDays
          Visible             #No
          Table               #SalesTable
          Origin              #{3D05D707-9DB3-4FE7-9A6A-549E72092FBB}
          ExtendedDataType    #CashDiscBaseDays
        ENDPROPERTIES
        
      FIELD #CashDiscPercent
        REAL
        PROPERTIES
          Name                #CashDiscPercent
          Table               #SalesTable
          Origin              #{D77DA4DD-5B6B-41F6-910A-B991985BC6F7}
          LegacyId            #59
          ExtendedDataType    #DiscPct
        ENDPROPERTIES
        
      FIELD #CommissionGroup
        STRING
        PROPERTIES
          Name                #CommissionGroup
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{23B8E66F-F022-478B-9679-A717304B4A7C}
          LegacyId            #53
          ExtendedDataType    #CommissCustomerGroup
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #ConsTarget_JP
        ENUM
        PROPERTIES
          Name                #ConsTarget_JP
          Table               #SalesTable
          Origin              #{2104ED2F-61F3-42B2-86F0-EC0659C6EC96}
          LegacyId            #8081
          ExtendedDataType    #CustConsTarget_JP
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #ContactPersonId
        STRING
        PROPERTIES
          Name                #ContactPersonId
          HelpText            #@SYS26087
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{ACA92180-182E-4FE5-981F-2FD9E01B824D}
          LegacyId            #60
          ExtendedDataType    #ContactPersonId
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #CountyOrigDest
        STRING
        PROPERTIES
          Name                #CountyOrigDest
          Table               #SalesTable
          Origin              #{B49587E3-D311-4EB8-A084-FC518A09E395}
          LegacyId            #28
          ExtendedDataType    #AddressCountyOrigDest
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #CovStatus
        INT
        PROPERTIES
          Name                #CovStatus
          Table               #SalesTable
          Origin              #{37010D16-C609-4B4D-A935-8047DEDCA044}
          LegacyId            #52
          ExtendedDataType    #CovStatus
        ENDPROPERTIES
        
      FIELD #CreditCardApprovalAmount
        REAL
        PROPERTIES
          Name                #CreditCardApprovalAmount
          Label               #@SYS116984
          HelpText            #@SYS117747
          ConfigurationKey    #CreditCard
          Table               #SalesTable
          Origin              #{F3C5C676-C9A9-4CD2-893C-2EEBB05C675C}
          LegacyId            #142
          ExtendedDataType    #AmountMST
        ENDPROPERTIES
        
      FIELD #CreditCardAuthorization
        STRING
        PROPERTIES
          Name                #CreditCardAuthorization
          ConfigurationKey    #CreditCard
          Table               #SalesTable
          Origin              #{DBD5CC2D-7F04-47C1-A279-48F4B6295695}
          LegacyId            #143
          ExtendedDataType    #CreditCardAuthorization
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #CreditCardAuthorizationError
        ENUM
        PROPERTIES
          Name                #CreditCardAuthorizationError
          Label               #@SYS117748
          HelpText            #@SYS117749
          ConfigurationKey    #CreditCard
          Table               #SalesTable
          Origin              #{BB03AB58-19D5-45F6-BC59-88BC662374BC}
          LegacyId            #148
          ExtendedDataType    #NoYesId
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #CreditCardCustRefId
        INT64
        PROPERTIES
          Name                #CreditCardCustRefId
          Label               #@SYS71999
          HelpText            #@SYS117745
          ConfigurationKey    #CreditCard
          Table               #SalesTable
          Origin              #{DE0FF463-A323-4E60-B00D-8981F55F2A65}
          LegacyId            #135
          ExtendedDataType    #RefRecId
        ENDPROPERTIES
        
      FIELD #CreditNoteReasonCode
        INT64
        PROPERTIES
          Name                #CreditNoteReasonCode
          AllowEditOnCreate   #No
          AllowEdit           #No
          Table               #SalesTable
          Origin              #{0D176954-E170-497F-A088-BFD5B3970EC0}
          ExtendedDataType    #ReasonTableRefRecId
        ENDPROPERTIES
        
      FIELD #CurBankAccount_LV
        STRING
        PROPERTIES
          Name                #CurBankAccount_LV
          Label               #@GLS108456
          HelpText            #@GLS220789
          Table               #SalesTable
          CountryRegionCodes  #CZ,EE,HU,LT,LV,PL
          IgnoreEDTRelation   #Yes
          Origin              #{D8A16152-9D68-4E3E-AA75-D93B0FF9BB37}
          ExtendedDataType    #CompanyBankAccountId
        ENDPROPERTIES
        
      FIELD #CurrencyCode
        STRING
        PROPERTIES
          Name                #CurrencyCode
          HelpText            #@SYS15068
          Mandatory           #Yes
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{38038F9E-5656-41FF-90C8-A23D387225EC}
          LegacyId            #15
          ExtendedDataType    #CustCurrencyCode
          StringSize          #3
        ENDPROPERTIES
        
      FIELD #CustAccount
        STRING
        PROPERTIES
          Name                #CustAccount
          HelpText            #@SYS15261
          Mandatory           #Yes
          Table               #SalesTable
          Origin              #{079A1A78-83CF-41BE-B2F1-E72029811495}
          LegacyId            #4
          ExtendedDataType    #CustAccount
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #CustBankAccount_LV
        STRING
        PROPERTIES
          Name                #CustBankAccount_LV
          Label               #@SYS88297
          HelpText            #@GLS220788
          Table               #SalesTable
          CountryRegionCodes  #LV
          Origin              #{D3D32CE8-C128-436D-9402-D22130B1DE1C}
          ExtendedDataType    #CustBankAccountId
        ENDPROPERTIES
        
      FIELD #CustGroup
        STRING
        PROPERTIES
          Name                #CustGroup
          HelpText            #@SYS16729
          Mandatory           #Yes
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{DE838310-96F5-43FB-A6EE-955A4A654B31}
          LegacyId            #20
          ExtendedDataType    #CustGroupId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #CustInvoiceId
        STRING
        PROPERTIES
          Name                #CustInvoiceId
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{C952F4F7-360E-47C9-94E9-B3FC3ED8D3FE}
          LegacyId            #130
          ExtendedDataType    #CustInvoiceId
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #CustomerRef
        STRING
        PROPERTIES
          Name                #CustomerRef
          Table               #SalesTable
          Origin              #{61C36B55-918E-4B9D-9A86-E3243DD56727}
          LegacyId            #27
          ExtendedDataType    #CustRef
          StringSize          #100
        ENDPROPERTIES
        
      FIELD #CustomsExportOrder_IN
        ENUM
        PROPERTIES
          Name                #CustomsExportOrder_IN
          Label               #@GLS5723
          HelpText            #@GLS5730
          Table               #SalesTable
          CountryRegionCodes  #IN
          Origin              #{B4EB7CB9-FAB1-48FD-B6C4-EA19DBE6CFDF}
          LegacyId            #8032
          ExtendedDataType    #NoYesId
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #CustomsShippingBill_IN
        ENUM
        PROPERTIES
          Name                #CustomsShippingBill_IN
          Label               #@GLS5773
          HelpText            #@GLS5710
          Table               #SalesTable
          CountryRegionCodes  #IN
          Origin              #{55226A69-F87F-4804-A7BD-0CCE8ACB7B4E}
          LegacyId            #8053
          ExtendedDataType    #NoYesId
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #DAXIntegrationID
        GUID
        PROPERTIES
          Name                #DAXIntegrationID
          Label               #@SYS4004696
          HelpText            #@SYS4004696
          Table               #SalesTable
          Origin              #{D5F03120-745F-430D-A803-5054A2DADC0A}
          ExtendedDataType    #ConnIntegrationKey
        ENDPROPERTIES
        
      FIELD #Deadline
        DATE
        PROPERTIES
          Name                #Deadline
          Table               #SalesTable
          Origin              #{23A0CBD9-6908-406C-A037-A0F3322C0A85}
          LegacyId            #65
          ExtendedDataType    #SalesDeadline
        ENDPROPERTIES
        
      FIELD #DefaultDimension
        INT64
        PROPERTIES
          Name                #DefaultDimension
          Table               #SalesTable
          Origin              #{692AAB74-FC19-40E0-BC23-E9635887ADF6}
          LegacyId            #133
          ExtendedDataType    #DimensionDefault
        ENDPROPERTIES
        
      FIELD #DEL_PresenceType_BR
        ENUM
        PROPERTIES
          Name                #DEL_PresenceType_BR
          ConfigurationKey    #SysDeletedObjects60
          Table               #SalesTable
          Origin              #{1EB76569-D1AD-492C-9CCC-FC627D320EC3}
          LegacyId            #8141
          EnumType            #EFDocPresenceType_BR
        ENDPROPERTIES
        
      FIELD #DeliveryDate
        DATE
        PROPERTIES
          Name                #DeliveryDate
          Table               #SalesTable
          Origin              #{48D18071-37E0-43CF-8E6B-4D3475011989}
          LegacyId            #6
          ExtendedDataType    #SalesShippingDate
        ENDPROPERTIES
        
      FIELD #DeliveryDateControlType
        ENUM
        PROPERTIES
          Name                #DeliveryDateControlType
          Table               #SalesTable
          Origin              #{DD71BAA6-0E7C-4E47-A87E-E35C2DDEC44F}
          LegacyId            #167
          EnumType            #SalesDeliveryDateControlType
        ENDPROPERTIES
        
      FIELD #DeliveryName
        STRING
        PROPERTIES
          Name                #DeliveryName
          GroupPrompt         #@SYS7399
          Table               #SalesTable
          Origin              #{DBC66C5C-696C-4C52-8D30-AE01805FB545}
          LegacyId            #50
          ExtendedDataType    #LogisticsDeliveryName
          StringSize          #100
        ENDPROPERTIES
        
      FIELD #DeliveryPostalAddress
        INT64
        PROPERTIES
          Name                #DeliveryPostalAddress
          Table               #SalesTable
          Origin              #{D59D0A8A-35DB-454D-8A36-98F4FE1258DA}
          LegacyId            #192
          ExtendedDataType    #LogisticsPostalAddressRecId
        ENDPROPERTIES
        
      FIELD #DirectDebitMandate
        INT64
        PROPERTIES
          Name                #DirectDebitMandate
          Table               #SalesTable
          Origin              #{205E6B52-9A0B-41E8-B5A1-16CD33595912}
          ExtendedDataType    #CustDirectDebitMandateRecId
        ENDPROPERTIES
        
      FIELD #DiscPercent
        REAL
        PROPERTIES
          Name                #DiscPercent
          Table               #SalesTable
          Origin              #{21A3BA65-03E6-40CA-8CD1-6558C3A09AB7}
          LegacyId            #21
          ExtendedDataType    #SalesEndDiscPct
        ENDPROPERTIES
        
      FIELD #DlvMode
        STRING
        PROPERTIES
          Name                #DlvMode
          HelpText            #@SYS1529
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{0C89D9E5-6EE7-4AC6-9D0C-6DB8DBBD9033}
          LegacyId            #31
          ExtendedDataType    #CustDlvModeId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #DlvReason
        STRING
        PROPERTIES
          Name                #DlvReason
          HelpText            #@SYS79297
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{04D9D066-FE11-44CB-85A9-D73738F42699}
          LegacyId            #111
          ExtendedDataType    #DlvReasonId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #DlvTerm
        STRING
        PROPERTIES
          Name                #DlvTerm
          HelpText            #@SYS2036
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{595AA3A1-DE95-4C3F-A121-DDC7E2367CBC}
          LegacyId            #30
          ExtendedDataType    #CustDlvTermId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #DocumentStatus
        ENUM
        PROPERTIES
          Name                #DocumentStatus
          AllowEditOnCreate   #No
          AllowEdit           #No
          Table               #SalesTable
          Origin              #{ABC0126C-8476-47F4-A15B-EFCE3BF5B25D}
          LegacyId            #13
          EnumType            #DocumentStatus
        ENDPROPERTIES
        
      FIELD #EInvoiceAccountCode
        STRING
        PROPERTIES
          Name                #EInvoiceAccountCode
          Table               #SalesTable
          Origin              #{AB8EBB95-B284-4E18-9A0D-46561CFB3B36}
          LegacyId            #122
          ExtendedDataType    #EInvoiceAccountCode
          StringSize          #35
        ENDPROPERTIES
        
      FIELD #EInvoiceLineSpec
        ENUM
        PROPERTIES
          Name                #EInvoiceLineSpec
          Table               #SalesTable
          CountryRegionCodes  #DK,AT,NO
          Origin              #{A3C3AC5E-2799-4653-9970-B1ED11799CD7}
          LegacyId            #81
          ExtendedDataType    #EInvoiceLineSpecific
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #Email
        STRING
        PROPERTIES
          Name                #Email
          Table               #SalesTable
          Origin              #{3625062A-10F9-4D84-8680-CFA1FC228A6E}
          LegacyId            #56
          ExtendedDataType    #Email
          StringSize          #80
        ENDPROPERTIES
        
      FIELD #EndDisc
        STRING
        PROPERTIES
          Name                #EndDisc
          Table               #SalesTable
          Origin              #{D13BD586-3B30-4226-B08B-12C263DE59E4}
          LegacyId            #26
          ExtendedDataType    #CustEndDiscCode
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #EnterpriseNumber
        STRING
        PROPERTIES
          Name                #EnterpriseNumber
          Table               #SalesTable
          Origin              #{5DDD4984-938D-499F-9BAC-8B54862FD301}
          LegacyId            #47
          ExtendedDataType    #TaxEnterpriseNumber
          StringSize          #50
        ENDPROPERTIES
        
      FIELD #Estimate
        REAL
        PROPERTIES
          Name                #Estimate
          Table               #SalesTable
          Origin              #{61FA4288-E9A7-4B50-8000-D6C0BE66F265}
          LegacyId            #88
          ExtendedDataType    #SalesEstimateGross
        ENDPROPERTIES
        
      FIELD #ExportReason
        STRING
        PROPERTIES
          Name                #ExportReason
          Table               #SalesTable
          Origin              #{BDF2A47E-62FD-403E-926C-0EAC8101F0E4}
          LegacyId            #97
          ExtendedDataType    #SalesExportReason
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #FiscalDocType_PL
        ENUM
        PROPERTIES
          Name                #FiscalDocType_PL
          Table               #SalesTable
          CountryRegionCodes  #PL
          Origin              #{49ED515B-2EC5-4A7B-914F-BA25714F0CB8}
          EnumType            #PlFiscalDocType
        ENDPROPERTIES
        
      FIELD #FixedDueDate
        DATE
        PROPERTIES
          Name                #FixedDueDate
          Table               #SalesTable
          Origin              #{9A652D59-922F-4633-A165-E32403615636}
          LegacyId            #94
          ExtendedDataType    #SalesFixedDueDate
        ENDPROPERTIES
        
      FIELD #FixedExchRate
        REAL
        PROPERTIES
          Name                #FixedExchRate
          Table               #SalesTable
          Origin              #{20BEB925-F8D0-42ED-99FD-B058E99728B8}
          LegacyId            #83
          ExtendedDataType    #SalesFixedExchRate
        ENDPROPERTIES
        
      FIELD #FreightSlipType
        ENUM
        PROPERTIES
          Name                #FreightSlipType
          Table               #SalesTable
          Origin              #{48A1C2DE-46D4-4576-8D3C-A23DF9BAF0CD}
          LegacyId            #12
          ExtendedDataType    #CustFreightSlipType
          EnumType            #FreightSlipType
        ENDPROPERTIES
        
      FIELD #FreightZone
        STRING
        PROPERTIES
          Name                #FreightZone
          Table               #SalesTable
          Origin              #{2F277711-3BAE-4220-AD50-D4EBEC6971E8}
          LegacyId            #57
          ExtendedDataType    #CustFreightZoneId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #GiroType
        ENUM
        PROPERTIES
          Name                #GiroType
          Table               #SalesTable
          Origin              #{E1FA6756-C778-4A68-93BF-0482589B37B3}
          LegacyId            #86
          ExtendedDataType    #PaymentStubInvoiceId
          EnumType            #PaymentStub
        ENDPROPERTIES
        
      FIELD #InclTax
        ENUM
        PROPERTIES
          Name                #InclTax
          Table               #SalesTable
          Origin              #{3D2F98D2-250B-444F-ADBC-937A108DDF42}
          LegacyId            #80
          ExtendedDataType    #InclTax
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #InterCompanyAllowIndirectCreation
        ENUM
        PROPERTIES
          Name                #InterCompanyAllowIndirectCreation
          AllowEditOnCreate   #No
          AllowEdit           #No
          Table               #SalesTable
          Origin              #{3325E522-FB8E-4D8E-833A-427AB7654DE4}
          LegacyId            #48
          ExtendedDataType    #InterCompanyAllowIndirectCreation
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #InterCompanyAllowIndirectCreationOrig
        ENUM
        PROPERTIES
          Name                #InterCompanyAllowIndirectCreationOrig
          AllowEditOnCreate   #No
          AllowEdit           #No
          Visible             #No
          Table               #SalesTable
          Origin              #{E50EBBC8-0E4A-43D0-9832-369A87B86C6D}
          LegacyId            #49
          ExtendedDataType    #InterCompanyAllowIndirectCreation
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #InterCompanyAutoCreateOrders
        ENUM
        PROPERTIES
          Name                #InterCompanyAutoCreateOrders
          Table               #SalesTable
          Origin              #{248006CF-2222-435B-B9D9-6F5611B09120}
          LegacyId            #39
          ExtendedDataType    #InterCompanyAutoCreateOrders
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #InterCompanyCompanyId
        STRING
        PROPERTIES
          Name                #InterCompanyCompanyId
          AllowEditOnCreate   #No
          AllowEdit           #No
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{5A854354-AACF-41A7-9ED5-764A04627F61}
          LegacyId            #107
          ExtendedDataType    #InterCompanyCompanyId
          StringSize          #4
        ENDPROPERTIES
        
      FIELD #InterCompanyDirectDelivery
        ENUM
        PROPERTIES
          Name                #InterCompanyDirectDelivery
          Table               #SalesTable
          Origin              #{8E8BBD6B-BDC3-4F5D-97F6-33969F616D2D}
          LegacyId            #40
          ExtendedDataType    #InterCompanyDirectDelivery
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #InterCompanyDirectDeliveryOrig
        ENUM
        PROPERTIES
          Name                #InterCompanyDirectDeliveryOrig
          Table               #SalesTable
          Origin              #{6E78A2B9-9ED7-4D22-AFC2-D8DF9E37D1BD}
          LegacyId            #41
          ExtendedDataType    #InterCompanyDirectDelivery
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #InterCompanyOrder
        ENUM
        PROPERTIES
          Name                #InterCompanyOrder
          Table               #SalesTable
          Origin              #{69ECF485-CF8C-4A5C-BBAB-22C1166CC404}
          LegacyId            #109
          ExtendedDataType    #InterCompanyCustomer
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #InterCompanyOrigin
        ENUM
        PROPERTIES
          Name                #InterCompanyOrigin
          AllowEditOnCreate   #No
          AllowEdit           #No
          Visible             #No
          Table               #SalesTable
          Origin              #{1F00600F-CD84-4FEA-BC43-073162CE27B9}
          LegacyId            #55
          EnumType            #InterCompanyOrigin
        ENDPROPERTIES
        
      FIELD #InterCompanyOriginalCustAccount
        STRING
        PROPERTIES
          Name                #InterCompanyOriginalCustAccount
          Table               #SalesTable
          Origin              #{96915D43-3AA5-40AB-93EA-A6EE52C6034F}
          LegacyId            #22
          ExtendedDataType    #InterCompanyOriginalCustAccount
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #InterCompanyOriginalSalesId
        STRING
        PROPERTIES
          Name                #InterCompanyOriginalSalesId
          Table               #SalesTable
          Origin              #{13320496-EB73-47EC-90D9-DCBE0F03C330}
          LegacyId            #14
          ExtendedDataType    #InterCompanyOriginalSalesId
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #InterCompanyPurchId
        STRING
        PROPERTIES
          Name                #InterCompanyPurchId
          Table               #SalesTable
          Origin              #{9F8D84DC-F319-4E81-A12C-E016E0852028}
          LegacyId            #108
          ExtendedDataType    #InterCompanyPurchId
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #IntrastatAddValue_LV
        REAL
        PROPERTIES
          Name                #IntrastatAddValue_LV
          Table               #SalesTable
          Origin              #{71BBEDA4-DFA6-483E-A0E0-3DC058BF6368}
          LegacyId            #16047
          ExtendedDataType    #LvIntrastatAddValue
        ENDPROPERTIES
        
      FIELD #IntrastatFulfillmentDate_HU
        DATE
        PROPERTIES
          Name                #IntrastatFulfillmentDate_HU
          Table               #SalesTable
          Origin              #{F4631D65-2043-497D-934C-91FF3BB62ED6}
          LegacyId            #8082
          ExtendedDataType    #IntrastatFulfillmentDate_HU
        ENDPROPERTIES
        
      FIELD #InventLocationId
        STRING
        PROPERTIES
          Name                #InventLocationId
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{C55CEC40-FA82-49E7-ABD5-6AFDB9808333}
          LegacyId            #67
          ExtendedDataType    #SalesInventLocationId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #InventSiteId
        STRING
        PROPERTIES
          Name                #InventSiteId
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{6B6CDB58-FC8F-4BCF-BD24-BFFA5F26A9C2}
          LegacyId            #131
          ExtendedDataType    #InventSiteId
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #InvoiceAccount
        STRING
        PROPERTIES
          Name                #InvoiceAccount
          HelpText            #@SYS518
          Mandatory           #Yes
          Table               #SalesTable
          Origin              #{542FF9D4-EAA6-4CB5-86CC-7CCA432A82DA}
          LegacyId            #5
          ExtendedDataType    #CustInvoiceAccount
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #InvoiceRegister_LT
        ENUM
        PROPERTIES
          Name                #InvoiceRegister_LT
          Table               #SalesTable
          CountryRegionCodes  #LT,LV
          Origin              #{C8082860-D081-466B-9700-847EB37FD1F3}
          LegacyId            #16053
          ExtendedDataType    #LtInvoiceAutoNumbering
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #ItemTagging
        ENUM
        PROPERTIES
          Name                #ItemTagging
          Table               #SalesTable
          Origin              #{244E4604-89C9-466F-B7AF-59B34543BA48}
          LegacyId            #124
          ExtendedDataType    #RFIDItemTagging
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #LanguageId
        STRING
        PROPERTIES
          Name                #LanguageId
          HelpText            #@SYS8305
          Mandatory           #Yes
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{B187F9B3-0667-4113-B4D9-BE32778F2C0A}
          LegacyId            #84
          ExtendedDataType    #CustLanguageId
          StringSize          #7
        ENDPROPERTIES
        
      FIELD #LineDisc
        STRING
        PROPERTIES
          Name                #LineDisc
          HelpText            #@SYS7237
          Table               #SalesTable
          Origin              #{FF2687B1-0CB8-40ED-978F-5B7F74CFD1A6}
          LegacyId            #19
          ExtendedDataType    #CustLineDiscCode
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #Listcode
        ENUM
        PROPERTIES
          Name                #Listcode
          Table               #SalesTable
          Origin              #{D1D3F0B7-6E30-4683-B8BF-799543B8E6FD}
          LegacyId            #29
          ExtendedDataType    #ListcodeId
          EnumType            #Listcode
        ENDPROPERTIES
        
      FIELD #ManualEntryChangepolicy
        INT64
        PROPERTIES
          Name                #ManualEntryChangepolicy
          AllowEditOnCreate   #No
          AllowEdit           #No
          Visible             #No
          Table               #SalesTable
          Origin              #{241A2B59-50BE-4CAB-9EAD-B6CCABCE684D}
          LegacyId            #187
          ExtendedDataType    #PriceDiscPolicyManual
        ENDPROPERTIES
        
      FIELD #MarkupGroup
        STRING
        PROPERTIES
          Name                #MarkupGroup
          HelpText            #@SYS5822
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{76B37813-6E8A-4BB2-A57F-10C9C45513CA}
          LegacyId            #34
          ExtendedDataType    #CustMarkupGroupId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #MatchingAgreement
        INT64
        PROPERTIES
          Name                #MatchingAgreement
          Table               #SalesTable
          Origin              #{05103E46-3471-450C-8A7E-9620229EC024}
          LegacyId            #175
          ExtendedDataType    #AgreementHeaderRecId
        ENDPROPERTIES
        
      FIELD #MCROrderStopped
        ENUM
        PROPERTIES
          Name                #MCROrderStopped
          Table               #SalesTable
          Origin              #{CDAC884E-57E1-4B67-84F2-693A3E451D5C}
          ExtendedDataType    #MCROrderStopped
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #MultiLineDisc
        STRING
        PROPERTIES
          Name                #MultiLineDisc
          Table               #SalesTable
          Origin              #{351E0715-19B6-4679-9E96-4374DDC67D8E}
          LegacyId            #25
          ExtendedDataType    #CustMultiLineDiscCode
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #NatureOfAssessee_IN
        ENUM
        PROPERTIES
          Name                #NatureOfAssessee_IN
          AllowEdit           #No
          Table               #SalesTable
          Origin              #{AA6452A6-DEF0-4F0D-941D-C44ED3D7A473}
          LegacyId            #8056
          EnumType            #NatureOfAssessee_IN
        ENDPROPERTIES
        
      FIELD #NumberSequenceGroup
        STRING
        PROPERTIES
          Name                #NumberSequenceGroup
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{6DF328D5-05E4-46AC-B2FF-B9A75C543912}
          LegacyId            #82
          ExtendedDataType    #NumberSequenceGroupId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #OneTimeCustomer
        ENUM
        PROPERTIES
          Name                #OneTimeCustomer
          Table               #SalesTable
          Origin              #{D56C53A6-4AA0-409F-8713-FCAB36319EB2}
          LegacyId            #51
          ExtendedDataType    #OneTimeCustomer
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #PackedExtensions
        QUEUE
        PROPERTIES
          Name                #PackedExtensions
          SaveContents        #No
          Visible             #No
          Table               #SalesTable
          Origin              #{8E284279-C15E-40EF-894D-524FA70D3B76}
          ExtendedDataType    #SysExtensionSerializerPackedContainer
        ENDPROPERTIES
        
      FIELD #PackedPrioritizedIdList
        QUEUE
        PROPERTIES
          Name                #PackedPrioritizedIdList
          SaveContents        #No
          Visible             #No
          Table               #SalesTable
          Origin              #{C1B86A4F-A92F-40C2-99F6-A59BDECCA1EE}
          ExtendedDataType    #SysExtensionSerializerPrioritizedIdList
        ENDPROPERTIES
        
      FIELD #PackingSlipRegister_LT
        ENUM
        PROPERTIES
          Name                #PackingSlipRegister_LT
          Table               #SalesTable
          CountryRegionCodes  #LT,LV
          Origin              #{9EFDC337-A1BB-47BF-82B1-06D9496361EE}
          LegacyId            #16054
          ExtendedDataType    #LtPackingSlipAutoNumbering
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #PalletTagging
        ENUM
        PROPERTIES
          Name                #PalletTagging
          Table               #SalesTable
          Origin              #{9A26B07A-27AF-4E3E-BA82-919E3B3AA9A1}
          LegacyId            #126
          ExtendedDataType    #RFIDPalletTagging
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #Payment
        STRING
        PROPERTIES
          Name                #Payment
          Label               #@SYS828
          HelpText            #@SYS8004
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{CBE74AA5-1E28-4A60-9908-8D501C5032BA}
          LegacyId            #16
          ExtendedDataType    #CustPaymTermId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #PaymentSched
        STRING
        PROPERTIES
          Name                #PaymentSched
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{447529CD-0A02-4014-85C6-B05D433DFD08}
          LegacyId            #54
          ExtendedDataType    #PaymSchedId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #PaymMode
        STRING
        PROPERTIES
          Name                #PaymMode
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{2E6720E8-5C6A-429B-98FD-8EE152C3912A}
          LegacyId            #92
          ExtendedDataType    #CustPaymMode
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #PaymSpec
        STRING
        PROPERTIES
          Name                #PaymSpec
          Table               #SalesTable
          Origin              #{9EC99216-C4D4-43C2-96BF-A9CCEB67D1F8}
          LegacyId            #93
          ExtendedDataType    #CustPaymSpec
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #PdsBatchAttribAutoRes
        ENUM
        PROPERTIES
          Name                #PdsBatchAttribAutoRes
          Table               #SalesTable
          Origin              #{0169C2A5-4C5A-411D-AD9F-DBED1ADA7EA4}
          ExtendedDataType    #PdsBatchAttribAutoRes
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #PdsCustRebateGroupId
        STRING
        PROPERTIES
          Name                #PdsCustRebateGroupId
          Table               #SalesTable
          Origin              #{AC99756A-684E-4636-83ED-3DCBC0E49A94}
          ExtendedDataType    #PdsCustRebateGroupId
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #PdsRebateProgramTMAGroup
        STRING
        PROPERTIES
          Name                #PdsRebateProgramTMAGroup
          Table               #SalesTable
          Origin              #{189E7DFF-FCCE-41FD-B7D3-DF44D100429E}
          ExtendedDataType    #PdsRebateProgramTMAGroup
        ENDPROPERTIES
        
      FIELD #Port
        STRING
        PROPERTIES
          Name                #Port
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{D4C6CFA7-4441-4F00-AEED-622A77867630}
          LegacyId            #71
          ExtendedDataType    #IntrastatPortId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #PostingProfile
        STRING
        PROPERTIES
          Name                #PostingProfile
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{B82C4B2A-271D-4C54-B4F4-7D6A808FF655}
          LegacyId            #37
          ExtendedDataType    #CustPostingProfile
        ENDPROPERTIES
        
      FIELD #PriceGroupId
        STRING
        PROPERTIES
          Name                #PriceGroupId
          Table               #SalesTable
          Origin              #{13B50B09-D4EF-4881-8D93-F84B2F11FD76}
          LegacyId            #24
          ExtendedDataType    #CustPriceGroup
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #ProjId
        STRING
        PROPERTIES
          Name                #ProjId
          AllowEdit           #No
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{2B83C105-6B54-4B6B-98B5-271B30659465}
          LegacyId            #66
          ExtendedDataType    #ProjId
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #PurchId
        STRING
        PROPERTIES
          Name                #PurchId
          HelpText            #@SYS10442
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{0B5077F6-4119-41D6-BB87-617FB631F019}
          LegacyId            #32
          ExtendedDataType    #PurchId
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #PurchOrderFormNum
        STRING
        PROPERTIES
          Name                #PurchOrderFormNum
          Table               #SalesTable
          Origin              #{D8B59B45-51C4-4864-83FB-BBC68272A59D}
          LegacyId            #9
          ExtendedDataType    #CustPurchaseOrder
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #QuotationId
        STRING
        PROPERTIES
          Name                #QuotationId
          Table               #SalesTable
          Origin              #{FF92DE2A-530A-4997-A715-3E588FC0C7D4}
          LegacyId            #112
          ExtendedDataType    #QuotationId
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #ReceiptDateConfirmed
        DATE
        PROPERTIES
          Name                #ReceiptDateConfirmed
          Table               #SalesTable
          Origin              #{18057E84-AFE1-4BEE-9AFE-63FA432BEBFF}
          LegacyId            #115
          ExtendedDataType    #SalesReceiptDateConfirmed
        ENDPROPERTIES
        
      FIELD #ReceiptDateRequested
        DATE
        PROPERTIES
          Name                #ReceiptDateRequested
          Table               #SalesTable
          Origin              #{A856BFB4-37DC-4424-B737-538543F6ECCB}
          LegacyId            #114
          ExtendedDataType    #SalesReceiptDateRequested
        ENDPROPERTIES
        
      FIELD #ReleaseStatus
        ENUM
        PROPERTIES
          Name                #ReleaseStatus
          AllowEditOnCreate   #No
          AllowEdit           #No
          Table               #SalesTable
          Origin              #{D5D0DE51-2AD8-480B-81CE-EB8A7CAF1226}
          EnumType            #WHSReleaseStatus
        ENDPROPERTIES
        
      FIELD #Reservation
        ENUM
        PROPERTIES
          Name                #Reservation
          Table               #SalesTable
          Origin              #{6FDED444-198B-47D5-9AA7-F3AF689F0037}
          LegacyId            #3
          EnumType            #ItemReservation
        ENDPROPERTIES
        
      FIELD #ReturnDeadline
        DATE
        PROPERTIES
          Name                #ReturnDeadline
          Table               #SalesTable
          Origin              #{DA149DFB-B0F9-42E2-8064-BF82985BAFDF}
          LegacyId            #144
          ExtendedDataType    #ReturnDeadline
        ENDPROPERTIES
        
      FIELD #ReturnItemNum
        STRING
        PROPERTIES
          Name                #ReturnItemNum
          Table               #SalesTable
          Origin              #{AD2BE6ED-7AC0-417D-8BFF-54F0AA0D2726}
          LegacyId            #58
          ExtendedDataType    #SalesReturnItemNum
        ENDPROPERTIES
        
      FIELD #ReturnReasonCodeId
        STRING
        PROPERTIES
          Name                #ReturnReasonCodeId
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{60727816-FF69-42D3-A2EF-7B27088160BE}
          LegacyId            #147
          ExtendedDataType    #ReturnReasonCodeId
        ENDPROPERTIES
        
      FIELD #ReturnReplacementCreated
        ENUM
        PROPERTIES
          Name                #ReturnReplacementCreated
          AllowEditOnCreate   #No
          AllowEdit           #No
          Table               #SalesTable
          Origin              #{DBA537EC-54AA-48E2-AB3A-7801207A28B3}
          LegacyId            #154
          ExtendedDataType    #ReturnReplacementCreated
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #ReturnReplacementId
        STRING
        PROPERTIES
          Name                #ReturnReplacementId
          AllowEditOnCreate   #No
          AllowEdit           #No
          Table               #SalesTable
          Origin              #{AB047588-B2F9-45F7-A217-652032FFED59}
          LegacyId            #145
          ExtendedDataType    #ReturnReplacementId
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #ReturnStatus
        ENUM
        PROPERTIES
          Name                #ReturnStatus
          AllowEditOnCreate   #No
          AllowEdit           #No
          Table               #SalesTable
          Origin              #{40C96A73-FC54-4DD5-BC7B-C6352BB929CB}
          LegacyId            #146
          EnumType            #ReturnStatusHeader
        ENDPROPERTIES
        
      FIELD #SalesGroup
        STRING
        PROPERTIES
          Name                #SalesGroup
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{434F0D92-1969-4BFC-A136-E213FE84AC6B}
          LegacyId            #11
          ExtendedDataType    #CommissSalesGroup
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #SalesId
        STRING
        PROPERTIES
          Name                #SalesId
          Mandatory           #Yes
          AllowEdit           #No
          Table               #SalesTable
          Origin              #{80FE19CC-FB64-4F92-90EE-BA5781699A54}
          LegacyId            #1
          ExtendedDataType    #SalesIdBase
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #SalesName
        STRING
        PROPERTIES
          Name                #SalesName
          Table               #SalesTable
          Origin              #{7F9A8D75-DA36-4009-9307-BB0B4B395546}
          LegacyId            #2
          ExtendedDataType    #SalesName
          StringSize          #100
        ENDPROPERTIES
        
      FIELD #SalesOriginId
        STRING
        PROPERTIES
          Name                #SalesOriginId
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{0792985B-AC54-498F-89D4-AE26F0F6579B}
          LegacyId            #87
          ExtendedDataType    #SalesOriginId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #SalesPoolId
        STRING
        PROPERTIES
          Name                #SalesPoolId
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{572383AD-444E-449A-A881-06C342E508A6}
          LegacyId            #36
          ExtendedDataType    #SalesPoolId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #SalesStatus
        ENUM
        PROPERTIES
          Name                #SalesStatus
          AllowEditOnCreate   #No
          AllowEdit           #No
          Table               #SalesTable
          Origin              #{9BCFF147-E6B5-405F-83A4-32E315372685}
          LegacyId            #33
          EnumType            #SalesStatus
        ENDPROPERTIES
        
      FIELD #SalesType
        ENUM
        PROPERTIES
          Name                #SalesType
          Table               #SalesTable
          Origin              #{696DC95A-D3BD-4B10-8C2B-796F2F0F5B20}
          LegacyId            #35
          EnumType            #SalesType
        ENDPROPERTIES
        
      FIELD #SalesUnitId
        STRING
        PROPERTIES
          Name                #SalesUnitId
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{F686D293-F614-4232-9ED6-9BC9862D8A02}
          LegacyId            #8002
          ExtendedDataType    #smmSalesUnitId
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #SettleVoucher
        ENUM
        PROPERTIES
          Name                #SettleVoucher
          Table               #SalesTable
          Origin              #{82A47772-7C10-4606-9858-57DAB870E101}
          LegacyId            #45
          ExtendedDataType    #SalesSettlementType
          EnumType            #SettlementType
        ENDPROPERTIES
        
      FIELD #ShipCarrierAccount
        STRING
        PROPERTIES
          Name                #ShipCarrierAccount
          ConfigurationKey    #ShipCarrier
          Table               #SalesTable
          Origin              #{5D9DBD07-84AC-4225-9A40-75057D0E31A4}
          LegacyId            #136
          ExtendedDataType    #ShipCarrierAccount
          StringSize          #25
        ENDPROPERTIES
        
      FIELD #ShipCarrierAccountCode
        STRING
        PROPERTIES
          Name                #ShipCarrierAccountCode
          AllowEditOnCreate   #No
          AllowEdit           #No
          ConfigurationKey    #ShipCarrier
          Table               #SalesTable
          Origin              #{0EE071D3-40F9-44AC-9C38-A409EEAA92E0}
          LegacyId            #152
          ExtendedDataType    #ShipCarrierAccountCode
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #ShipCarrierBlindShipment
        ENUM
        PROPERTIES
          Name                #ShipCarrierBlindShipment
          ConfigurationKey    #ShipCarrier
          Table               #SalesTable
          Origin              #{AE6B6410-17D9-4AD3-9B00-04299310F9ED}
          LegacyId            #139
          ExtendedDataType    #ShipCarrierBlindShipment
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #ShipCarrierDeliveryContact
        STRING
        PROPERTIES
          Name                #ShipCarrierDeliveryContact
          Label               #@SYS116731
          HelpText            #@SYS117746
          ConfigurationKey    #ShipCarrier
          Table               #SalesTable
          Origin              #{319B7D5B-33F5-4437-8F68-60C6F13C3D6F}
          LegacyId            #141
          ExtendedDataType    #Name
          StringSize          #100
        ENDPROPERTIES
        
      FIELD #ShipCarrierDlvType
        ENUM
        PROPERTIES
          Name                #ShipCarrierDlvType
          Table               #SalesTable
          Origin              #{05DF8833-11CA-4C45-95DA-0E088967BB4A}
          LegacyId            #158
          EnumType            #ShipCarrierDlvType
        ENDPROPERTIES
        
      FIELD #ShipCarrierExpeditedShipment
        ENUM
        PROPERTIES
          Name                #ShipCarrierExpeditedShipment
          Table               #SalesTable
          Origin              #{BB9B39C3-E18B-47D6-ADF8-E44F43F6E86D}
          LegacyId            #168
          ExtendedDataType    #ShipCarrierExpeditedShipment
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #ShipCarrierFuelSurcharge
        ENUM
        PROPERTIES
          Name                #ShipCarrierFuelSurcharge
          ConfigurationKey    #ShipCarrier
          Table               #SalesTable
          Origin              #{697F3551-CA59-448B-A2BD-8C2B0DA1D457}
          LegacyId            #138
          ExtendedDataType    #ShipCarrierFuelSurcharge
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #ShipCarrierId
        STRING
        PROPERTIES
          Name                #ShipCarrierId
          AllowEditOnCreate   #No
          AllowEdit           #No
          ConfigurationKey    #ShipCarrier
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{7048125C-61C8-4F7B-A580-48EC3C4EBFEB}
          LegacyId            #137
          ExtendedDataType    #ShipCarrierId
        ENDPROPERTIES
        
      FIELD #ShipCarrierName
        STRING
        PROPERTIES
          Name                #ShipCarrierName
          Table               #SalesTable
          Origin              #{C7C90228-E7C5-48DD-B732-488C0882CDB3}
          LegacyId            #194
          ExtendedDataType    #LogisticsShipCarrierName
          StringSize          #100
        ENDPROPERTIES
        
      FIELD #ShipCarrierPostalAddress
        INT64
        PROPERTIES
          Name                #ShipCarrierPostalAddress
          Table               #SalesTable
          Origin              #{0B359857-D74D-4091-9909-F2E9F23154CA}
          LegacyId            #193
          ExtendedDataType    #LogisticsPostalAddressRecId
        ENDPROPERTIES
        
      FIELD #ShipCarrierResidential
        ENUM
        PROPERTIES
          Name                #ShipCarrierResidential
          Table               #SalesTable
          Origin              #{B2BD31BE-1846-4CA9-8399-FC04BF64CAB8}
          LegacyId            #169
          ExtendedDataType    #ShipCarrierResidentialDest
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #ShippingDateConfirmed
        DATE
        PROPERTIES
          Name                #ShippingDateConfirmed
          Table               #SalesTable
          Origin              #{540382D8-B0C2-4EDF-99B7-2B3D63567FEE}
          LegacyId            #117
          ExtendedDataType    #SalesShippingDateConfirmed
        ENDPROPERTIES
        
      FIELD #ShippingDateRequested
        DATE
        PROPERTIES
          Name                #ShippingDateRequested
          Mandatory           #Yes
          Table               #SalesTable
          Origin              #{A003FB6E-35F3-4834-98FE-67166AFD0FF8}
          LegacyId            #116
          ExtendedDataType    #SalesShippingDateRequested
        ENDPROPERTIES
        
      FIELD #SkipUpdate
        ENUM
        PROPERTIES
          Name                #SkipUpdate
          SaveContents        #No
          Visible             #No
          Table               #SalesTable
          Origin              #{BEFB0137-060A-46FD-8E15-E8B8A74E050C}
          LegacyId            #128
          EnumType            #InterCompanySkipUpdate
        ENDPROPERTIES
        
      FIELD #smmCampaignId
        STRING
        PROPERTIES
          Name                #smmCampaignId
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{0362B433-26A0-4776-B4B7-CAC0397A5DB4}
          LegacyId            #8004
          ExtendedDataType    #smmCampaignId
        ENDPROPERTIES
        
      FIELD #smmSalesAmountTotal
        REAL
        PROPERTIES
          Name                #smmSalesAmountTotal
          Table               #SalesTable
          Origin              #{AEFF394F-B32A-462E-8D11-8C49FE0DF068}
          LegacyId            #8003
          ExtendedDataType    #smmSalesAmountTotal
        ENDPROPERTIES
        
      FIELD #SourceDocumentHeader
        INT64
        PROPERTIES
          Name                #SourceDocumentHeader
          Label               #@SYS314386
          Visible             #No
          Table               #SalesTable
          Origin              #{3938A16C-5D4B-4EF4-A55E-D5F28AF58AB1}
          LegacyId            #205
          ExtendedDataType    #RefRecId
        ENDPROPERTIES
        
      FIELD #StatProcId
        STRING
        PROPERTIES
          Name                #StatProcId
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{1779FDDD-C435-4C9E-8791-B563FF672C5C}
          LegacyId            #104
          ExtendedDataType    #IntrastatProcId
        ENDPROPERTIES
        
      FIELD #SystemEntryChangePolicy
        INT64
        PROPERTIES
          Name                #SystemEntryChangePolicy
          AllowEditOnCreate   #No
          AllowEdit           #No
          Visible             #No
          Table               #SalesTable
          Origin              #{257C2061-52E9-4F4A-99F8-95ED6735431D}
          LegacyId            #186
          ExtendedDataType    #PriceDiscPolicySystem
        ENDPROPERTIES
        
      FIELD #SystemEntrySource
        ENUM
        PROPERTIES
          Name                #SystemEntrySource
          AllowEditOnCreate   #No
          AllowEdit           #No
          Visible             #No
          Table               #SalesTable
          Origin              #{AF629E91-2106-4EF1-A7B9-74D547C344E1}
          LegacyId            #185
          EnumType            #PriceDiscSystemSource
        ENDPROPERTIES
        
      FIELD #TaxGroup
        STRING
        PROPERTIES
          Name                #TaxGroup
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{5D31AB5E-E2D4-4908-8AAE-C76B03CE760A}
          LegacyId            #18
          ExtendedDataType    #TaxGroup
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #TaxPeriodPaymentCode_PL
        STRING
        PROPERTIES
          Name                #TaxPeriodPaymentCode_PL
          Table               #SalesTable
          Origin              #{512A3459-A452-4922-814D-8486FF0FEF30}
          ExtendedDataType    #PlTaxPeriodPaymentCode
        ENDPROPERTIES
        
      FIELD #TCSGroup_IN
        STRING
        PROPERTIES
          Name                #TCSGroup_IN
          Label               #@GLS5363
          HelpText            #@GLS5846
          Table               #SalesTable
          CountryRegionCodes  #IN
          Origin              #{4B022655-FC92-4569-A689-F037638A6153}
          LegacyId            #8055
          ExtendedDataType    #TaxWithholdGroup
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #TDSGroup_IN
        STRING
        PROPERTIES
          Name                #TDSGroup_IN
          Label               #@GLS5362
          HelpText            #@GLS5823
          Table               #SalesTable
          CountryRegionCodes  #IN
          Origin              #{126428FD-1414-42CC-8AA1-4473E90EC1C0}
          LegacyId            #8054
          ExtendedDataType    #TaxWithholdGroup
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #TotalSelisih
        REAL
        PROPERTIES
          Name                #TotalSelisih
          Label               #Total Selisih
          Table               #SalesTable
          Origin              #{60DC1FB7-B2F7-4C78-A6E1-D3A19DCBB062}
          ExtendedDataType    #LineAmount
        ENDPROPERTIES
        
      FIELD #Touched
        ENUM
        PROPERTIES
          Name                #Touched
          SaveContents        #No
          Visible             #No
          Table               #SalesTable
          Origin              #{D1D884FF-A184-4082-A7B6-2ACB8B54A4FD}
          LegacyId            #89
          ExtendedDataType    #TradeTouched
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #TransactionCode
        STRING
        PROPERTIES
          Name                #TransactionCode
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{45F4DDD6-622A-41BE-9A6F-91B1B73C68C7}
          LegacyId            #38
          ExtendedDataType    #IntrastatTransactionCodeId
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #Transport
        STRING
        PROPERTIES
          Name                #Transport
          Table               #SalesTable
          IgnoreEDTRelation   #Yes
          Origin              #{9439B6E0-E752-4830-A0BA-F8355D5A0473}
          LegacyId            #90
          ExtendedDataType    #IntrastatTransport
          StringSize          #30
        ENDPROPERTIES
        
      FIELD #TransportationDocument
        INT64
        PROPERTIES
          Name                #TransportationDocument
          Visible             #No
          Table               #SalesTable
          Origin              #{2E490ADE-216F-45B0-9E12-CB8268734395}
          ExtendedDataType    #TransportationDocumentRecId
        ENDPROPERTIES
        
      FIELD #UnitedVATInvoice_LT
        ENUM
        PROPERTIES
          Name                #UnitedVATInvoice_LT
          Table               #SalesTable
          Origin              #{A212B9DD-2DB4-4FF2-906E-7A18C41E0A43}
          LegacyId            #8111
          ExtendedDataType    #UnitedVATInvoice_LT
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #URL
        STRING
        PROPERTIES
          Name                #URL
          Table               #SalesTable
          Origin              #{CCBDE028-3FD0-4462-9343-7D7BD1FDE393}
          LegacyId            #8
          ExtendedDataType    #URL
          StringSize          #255
        ENDPROPERTIES
        
      FIELD #VATNum
        STRING
        PROPERTIES
          Name                #VATNum
          Table               #SalesTable
          Origin              #{FC791268-28F0-41DC-87D7-905961AF1D42}
          LegacyId            #70
          ExtendedDataType    #VATNumJournal
          StringSize          #20
        ENDPROPERTIES
        
      FIELD #WorkerSalesResponsible
        INT64
        PROPERTIES
          Name                #WorkerSalesResponsible
          Table               #SalesTable
          Origin              #{F55D06B2-2FE7-494C-9EF7-0B6A8366B324}
          ExtendedDataType    #WorkerSalesResponsible
        ENDPROPERTIES
        
      FIELD #WorkerSalesTaker
        INT64
        PROPERTIES
          Name                #WorkerSalesTaker
          Table               #SalesTable
          Origin              #{C56E4EAB-B7F3-4DC6-BC63-77ECBEBBBC98}
          LegacyId            #199
          ExtendedDataType    #SalesTaker
        ENDPROPERTIES
        
    ENDFIELDS
    GROUPS
      GROUP #AutoSummary
        PROPERTIES
          Name                #AutoSummary
        ENDPROPERTIES
        
        GROUPFIELDS
          #SalesId
          #SalesName
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #AutoReport
        PROPERTIES
          Name                #AutoReport
        ENDPROPERTIES
        
        GROUPFIELDS
          #SalesId
          #SalesName
          #CustAccount
          #InvoiceAccount
          #SalesStatus
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #AccountsReceivable
        PROPERTIES
          Name                #AccountsReceivable
          Label               #@SYS25196
        ENDPROPERTIES
        
        GROUPFIELDS
          #CustAccount
          #InvoiceAccount
          #OneTimeCustomer
          #ContactPersonId
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #AddressDisplay
        PROPERTIES
          Name                #AddressDisplay
          Label               #@SYS9362
        ENDPROPERTIES
        
        GROUPFIELDS
          #deliveryAddressing
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #AddressLookup
        PROPERTIES
          Name                #AddressLookup
          Label               #@SYS88672
        ENDPROPERTIES
        
        GROUPFIELDS
          #SalesId
          #CustAccount
          #InvoiceAccount
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #AddressReference
        PROPERTIES
          Name                #AddressReference
          Label               #@SYS88679
        ENDPROPERTIES
        
        GROUPFIELDS
          #AddressRefTableId
          #AddressRefRecId
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Administration
        PROPERTIES
          Name                #Administration
          Label               #@SYS9853
        ENDPROPERTIES
        
        GROUPFIELDS
          #WorkerSalesTaker
          #SalesPoolId
          #LanguageId
          #SalesUnitId
          #WorkerSalesResponsible
          #SalesOriginId
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Agreement
        PROPERTIES
          Name                #Agreement
          Label               #@SYS15240
        ENDPROPERTIES
        
        GROUPFIELDS
          #MatchingAgreement
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Agreement_RU
        PROPERTIES
          Name                #Agreement_RU
          Label               #@SYS15240
        ENDPROPERTIES
        
        GROUPFIELDS
          #agreementDocumentTitle_RU
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #BankAccounts_LV
        PROPERTIES
          Name                #BankAccounts_LV
          Label               #@SYS21829
        ENDPROPERTIES
        
        GROUPFIELDS
          #BankAccount_LV
          #CurBankAccount_LV
          #CustBankAccount_LV
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Campaign
        PROPERTIES
          Name                #Campaign
          Label               #@SYS80187
        ENDPROPERTIES
        
        GROUPFIELDS
          #smmCampaignId
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #CarrierInfo
        PROPERTIES
          Name                #CarrierInfo
          Label               #@SYS50722
        ENDPROPERTIES
        
        GROUPFIELDS
          #ShipCarrierId
          #ShipCarrierAccountCode
          #ShipCarrierAccount
          #ShipCarrierFuelSurcharge
          #ShipCarrierExpeditedShipment
          #ShipCarrierResidential
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #CarrierIssues
        PROPERTIES
          Name                #CarrierIssues
          Label               #@SYS116986
        ENDPROPERTIES
        
        GROUPFIELDS
          #SalesId
          #CustAccount
          #InvoiceAccount
          #SalesStatus
          #CurrencyCode
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #CaseMoreInformation
        PROPERTIES
          Name                #CaseMoreInformation
          Label               #@SYS314356
        ENDPROPERTIES
        
        GROUPFIELDS
          #SalesId
          #CustAccount
          #InvoiceAccount
          #SalesType
          #SalesStatus
          #CurrencyCode
          #ProjId
          #agreementIsLinked
          #PurchOrderFormNum
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #CaseMoreInformation_ReturnOrder
        PROPERTIES
          Name                #CaseMoreInformation_ReturnOrder
          Label               #@SYS314356
        ENDPROPERTIES
        
        GROUPFIELDS
          #ReturnItemNum
          #CustAccount
          #InvoiceAccount
          #SalesId
          #ReturnStatus
          #ReturnDeadline
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Commission
        PROPERTIES
          Name                #Commission
          Label               #@SYS2489
        ENDPROPERTIES
        
        GROUPFIELDS
          #SalesGroup
          #CommissionGroup
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #ConnIntegration
        PROPERTIES
          Name                #ConnIntegration
          Label               #@SYS4004713
        ENDPROPERTIES
        
        GROUPFIELDS
          #DAXIntegrationID
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #ConsTarget_JP
        PROPERTIES
          Name                #ConsTarget_JP
          Label               #@SYS106495
        ENDPROPERTIES
        
        GROUPFIELDS
          #ConsTarget_JP
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #ContactInfo
        PROPERTIES
          Name                #ContactInfo
          Label               #@SYS21663
        ENDPROPERTIES
        
        GROUPFIELDS
          #URL
          #Email
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #CreditCard
        PROPERTIES
          Name                #CreditCard
          Label               #@SYS101746
        ENDPROPERTIES
        
        GROUPFIELDS
          #editCreditCard
          #CreditCardAuthorization
          #CreditCardApprovalAmount
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Currency
        PROPERTIES
          Name                #Currency
          Label               #@SYS7572
        ENDPROPERTIES
        
        GROUPFIELDS
          #CurrencyCode
          #FixedExchRate
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #CurrencyShow
        PROPERTIES
          Name                #CurrencyShow
          Label               #@SYS7572
        ENDPROPERTIES
        
        GROUPFIELDS
          #CurrencyCode
          #editFixedExchRate
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #CustInvoice
        PROPERTIES
          Name                #CustInvoice
          Label               #@SYS14204
        ENDPROPERTIES
        
        GROUPFIELDS
          #CustInvoiceId
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Customer
        PROPERTIES
          Name                #Customer
          Label               #@SYS11779
        ENDPROPERTIES
        
        GROUPFIELDS
          #CustAccount
          #OneTimeCustomer
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Customs_IN
        PROPERTIES
          Name                #Customs_IN
          Label               #@GLS5007
        ENDPROPERTIES
        
        GROUPFIELDS
          #CustomsExportOrder_IN
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #CustomsMisc_IN
        PROPERTIES
          Name                #CustomsMisc_IN
          Label               #@SYS80069
        ENDPROPERTIES
        
        GROUPFIELDS
          #CustomsShippingBill_IN
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Delivery
        PROPERTIES
          Name                #Delivery
          Label               #@SYS4508
        ENDPROPERTIES
        
        GROUPFIELDS
          #ReceiptDateRequested
          #ShippingDateRequested
          #ReceiptDateConfirmed
          #ShippingDateConfirmed
          #DeliveryDateControlType
          #DlvMode
          #DlvTerm
          #DlvReason
          #ExportReason
          #ShipCarrierBlindShipment
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #DeliveryAddition
        PROPERTIES
          Name                #DeliveryAddition
          Label               #@SYS88262
        ENDPROPERTIES
        
        GROUPFIELDS
          #DlvTerm
          #ShipCarrierAccount
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #DeliveryAddress
        PROPERTIES
          Name                #DeliveryAddress
          Label               #@SYS7924
        ENDPROPERTIES
        
        GROUPFIELDS
          #ShipCarrierDeliveryContact
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #DeliveryAddress_RU
        PROPERTIES
          Name                #DeliveryAddress_RU
          Label               #@SYS7924
        ENDPROPERTIES
        
        GROUPFIELDS
          #DeliveryName
          #ShipCarrierDeliveryContact
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #DeliverySummary
        PROPERTIES
          Name                #DeliverySummary
          Label               #@SYS22058
        ENDPROPERTIES
        
        GROUPFIELDS
          #DeliveryName
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Dimension
        PROPERTIES
          Name                #Dimension
          Label               #@SYS342338
        ENDPROPERTIES
        
        GROUPFIELDS
          #DefaultDimension
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Discount
        PROPERTIES
          Name                #Discount
          Label               #@SYS11829
        ENDPROPERTIES
        
        GROUPFIELDS
          #LineDisc
          #MultiLineDisc
          #EndDisc
          #DiscPercent
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #DiscountMiscCharges
        PROPERTIES
          Name                #DiscountMiscCharges
          Label               #@SYS22031
        ENDPROPERTIES
        
        GROUPFIELDS
          #PriceGroupId
          #LineDisc
          #MultiLineDisc
          #EndDisc
          #MarkupGroup
          #PdsCustRebateGroupId
          #PdsRebateProgramTMAGroup
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #EInvoice
        PROPERTIES
          Name                #EInvoice
          Label               #@SYS100769
        ENDPROPERTIES
        
        GROUPFIELDS
          #EInvoiceLineSpec
          #EInvoiceAccountCode
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Emails
        PROPERTIES
          Name                #Emails
          Label               #@SYS96646
        ENDPROPERTIES
        
        GROUPFIELDS
          #Email
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #EPMiniPage
        PROPERTIES
          Name                #EPMiniPage
          Label               #@SYS108232
        ENDPROPERTIES
        
        GROUPFIELDS
          #SalesId
          #SalesName
          #SalesStatus
          #ContactPersonId
          #smmSalesAmountTotal
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #ExternalReference
        PROPERTIES
          Name                #ExternalReference
          Label               #@SYS21697
        ENDPROPERTIES
        
        GROUPFIELDS
          #PurchOrderFormNum
          #CustomerRef
          #ReturnItemNum
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #FiscalDocType_PL
        PROPERTIES
          Name                #FiscalDocType_PL
          Label               #@GLS109781
        ENDPROPERTIES
        
        GROUPFIELDS
          #FiscalDocType_PL
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #ForeignTrade
        PROPERTIES
          Name                #ForeignTrade
          Label               #@SYS27650
        ENDPROPERTIES
        
        GROUPFIELDS
          #TransactionCode
          #Transport
          #Port
          #StatProcId
          #Listcode
          #CountyOrigDest
          #IntrastatAddValue_LV
          #IntrastatFulfillmentDate_HU
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #GiroMoneyTransferSlip
        PROPERTIES
          Name                #GiroMoneyTransferSlip
          Label               #@SYS2723
        ENDPROPERTIES
        
        GROUPFIELDS
          #GiroType
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #HeaderToLineUpdate
        PROPERTIES
          Name                #HeaderToLineUpdate
          Label               #@SYS62436
        ENDPROPERTIES
        
        GROUPFIELDS
          #CustAccount
          #SalesGroup
          #TaxGroup
          #DefaultDimension
          #InventLocationId
          #Reservation
          #TransactionCode
          #Port
          #StatProcId
          #PriceGroupId
          #LineDisc
          #MarkupGroup
          #DeliveryDate
          #LanguageId
          #Transport
          #DlvMode
          #DlvTerm
          #ShipCarrierAccount
          #TCSGroup_IN
          #TDSGroup_IN
          #IntrastatFulfillmentDate_HU
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Identification
        PROPERTIES
          Name                #Identification
          Label               #@SYS5711
        ENDPROPERTIES
        
        GROUPFIELDS
          #SalesId
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Intercompany
        PROPERTIES
          Name                #Intercompany
          Label               #@SYS75319
        ENDPROPERTIES
        
        GROUPFIELDS
          #InterCompanyOrder
          #InterCompanyCompanyId
          #InterCompanyPurchId
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #InterCompanyAdmin
        PROPERTIES
          Name                #InterCompanyAdmin
          Label               #@SYS74106
        ENDPROPERTIES
        
        GROUPFIELDS
          #InterCompanyAutoCreateOrders
          #InterCompanyDirectDelivery
          #interCompanyOriginDisplay
          #InterCompanyAllowIndirectCreation
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #InterCompanyOriginal
        PROPERTIES
          Name                #InterCompanyOriginal
          Label               #@SYS93838
        ENDPROPERTIES
        
        GROUPFIELDS
          #InterCompanyOriginalSalesId
          #InterCompanyOriginalCustAccount
          #InterCompanyDirectDeliveryOrig
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #InterCompanyReturn
        PROPERTIES
          Name                #InterCompanyReturn
          Label               #@SYS120343
        ENDPROPERTIES
        
        GROUPFIELDS
          #ReturnReplacementCreated
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Inventory
        PROPERTIES
          Name                #Inventory
          Label               #@SYS981
        ENDPROPERTIES
        
        GROUPFIELDS
          #InventSiteId
          #InventLocationId
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #MCRCCAuthorization
        PROPERTIES
          Name                #MCRCCAuthorization
          Label               #@MCR23339
        ENDPROPERTIES
        
        GROUPFIELDS
          #SalesId
          #SalesName
          #CustAccount
          #SalesType
          #SalesStatus
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #MCRDefaultClassification
        PROPERTIES
          Name                #MCRDefaultClassification
          Label               #@MCR22225
        ENDPROPERTIES
        
        GROUPFIELDS
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #MCRReturn
        PROPERTIES
          Name                #MCRReturn
          Label               #@MCR12123
        ENDPROPERTIES
        
        GROUPFIELDS
          #ReturnItemNum
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #MCRWebConfirmation
        PROPERTIES
          Name                #MCRWebConfirmation
          Label               #@MCR28470
        ENDPROPERTIES
        
        GROUPFIELDS
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #NotificationToTheCentralBank
        PROPERTIES
          Name                #NotificationToTheCentralBank
          Label               #@SYS67156
        ENDPROPERTIES
        
        GROUPFIELDS
          #BankCentralBankPurposeCode
          #BankCentralBankPurposeText
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Other
        PROPERTIES
          Name                #Other
          Label               #@SYS1284
        ENDPROPERTIES
        
        GROUPFIELDS
          #CreditCardCustRefId
          #CreditCardAuthorizationError
          #ShipCarrierDlvType
          #ShipCarrierName
          #ShipCarrierPostalAddress
          #DeliveryPostalAddress
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Overview
        PROPERTIES
          Name                #Overview
          Label               #@SYS9039
        ENDPROPERTIES
        
        GROUPFIELDS
          #SalesId
          #CustAccount
          #InvoiceAccount
          #SalesType
          #SalesStatus
          #CurrencyCode
          #ProjId
          #qualityOrderStatusDisplay
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Overview_RU
        PROPERTIES
          Name                #Overview_RU
          Label               #@SYS9039
        ENDPROPERTIES
        
        GROUPFIELDS
          #SalesId
          #CustAccount
          #InvoiceAccount
          #SalesType
          #SalesStatus
          #CurrencyCode
          #ProjId
          #showContactPerson
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Payment
        PROPERTIES
          Name                #Payment
          Label               #@SYS828
        ENDPROPERTIES
        
        GROUPFIELDS
          #Payment
          #FixedDueDate
          #PaymMode
          #PaymSpec
          #PaymentSched
          #CashDisc
          #CashDiscBaseDate
          #CashDiscPercent
          #BankDocumentType
          #DirectDebitMandate
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Posting
        PROPERTIES
          Name                #Posting
          Label               #@SYS5943
        ENDPROPERTIES
        
        GROUPFIELDS
          #PostingProfile
          #SettleVoucher
          #NumberSequenceGroup
          #InvoiceRegister_LT
          #PackingSlipRegister_LT
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Project
        PROPERTIES
          Name                #Project
          Label               #@SYS4534
        ENDPROPERTIES
        
        GROUPFIELDS
          #ProjId
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Quotation
        PROPERTIES
          Name                #Quotation
          Label               #@SYS5864
        ENDPROPERTIES
        
        GROUPFIELDS
          #QuotationId
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #ReasonCode_W
        PROPERTIES
          Name                #ReasonCode_W
          Label               #@SYS114719
        ENDPROPERTIES
        
        GROUPFIELDS
          #CreditNoteReasonCode
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Reservation
        PROPERTIES
          Name                #Reservation
          Label               #@SYS7669
        ENDPROPERTIES
        
        GROUPFIELDS
          #Reservation
          #PdsBatchAttribAutoRes
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Return
        PROPERTIES
          Name                #Return
          Label               #@SYS24700
        ENDPROPERTIES
        
        GROUPFIELDS
          #ReturnReasonCodeId
          #ReturnStatus
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #ReturnItemNum
        PROPERTIES
          Name                #ReturnItemNum
          Label               #@SYS104082
        ENDPROPERTIES
        
        GROUPFIELDS
          #ReturnItemNum
          #CustAccount
          #ReturnStatus
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #ReturnListPage
        PROPERTIES
          Name                #ReturnListPage
          Label               #@SYS9039
        ENDPROPERTIES
        
        GROUPFIELDS
          #ReturnItemNum
          #CustAccount
          #InvoiceAccount
          #ReturnReasonCodeId
          #ReturnDeadline
          #ReturnStatus
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #ReturnOrder
        PROPERTIES
          Name                #ReturnOrder
          Label               #@SYS105841
        ENDPROPERTIES
        
        GROUPFIELDS
          #ReturnItemNum
          #SalesId
          #ReturnReasonCodeId
          #ReturnDeadline
          #CurrencyCode
          #CustAccount
          #InvoiceAccount
          #editContactPersonName
          #ContactPersonId
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #ReturnReplacement
        PROPERTIES
          Name                #ReturnReplacement
          Label               #@SYS84714
        ENDPROPERTIES
        
        GROUPFIELDS
          #ReturnReplacementId
          #ReturnReplacementCreated
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #RFIDTagging
        PROPERTIES
          Name                #RFIDTagging
          Label               #@SYS90171
        ENDPROPERTIES
        
        GROUPFIELDS
          #ItemTagging
          #CaseTagging
          #PalletTagging
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #SalesAmountTotal
        PROPERTIES
          Name                #SalesAmountTotal
          Label               #@SYS23862
        ENDPROPERTIES
        
        GROUPFIELDS
          #smmSalesAmountTotal
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #SalesOrderTable
        PROPERTIES
          Name                #SalesOrderTable
          Label               #@SYS12847
        ENDPROPERTIES
        
        GROUPFIELDS
          #ReturnItemNum
          #CovStatus
          #SalesName
          #SalesType
          #MarkupGroup
          #DocumentStatus
          #CustGroup
          #PostingProfile
          #SettleVoucher
          #SalesStatus
          #Reservation
          #PurchId
          #Deadline
          #Estimate
          #Touched
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #SalesTax
        PROPERTIES
          Name                #SalesTax
          Label               #@SYS5878
        ENDPROPERTIES
        
        GROUPFIELDS
          #TaxGroup
          #VATNum
          #EnterpriseNumber
          #InclTax
          #UnitedVATInvoice_LT
          #TaxPeriodPaymentCode_PL
          #editExportSales_PL
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Status
        PROPERTIES
          Name                #Status
          Label               #@SYS25587
        ENDPROPERTIES
        
        GROUPFIELDS
          #SalesStatus
          #DocumentStatus
          #Deadline
          #qualityOrderStatusDisplay
          #MCROrderStopped
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #SummaryNumber
        PROPERTIES
          Name                #SummaryNumber
          Label               #*** OUTDATED ***
        ENDPROPERTIES
        
        GROUPFIELDS
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #SummaryOrder
        PROPERTIES
          Name                #SummaryOrder
          Label               #@SYS24079
        ENDPROPERTIES
        
        GROUPFIELDS
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #SummaryUpdate
        PROPERTIES
          Name                #SummaryUpdate
          Label               #@SYS57755
        ENDPROPERTIES
        
        GROUPFIELDS
          #CustAccount
          #InvoiceAccount
          #SalesType
          #CurrencyCode
          #FixedExchRate
          #ContactPersonId
          #LanguageId
          #DefaultDimension
          #SalesPoolId
          #PostingProfile
          #NumberSequenceGroup
          #VATNum
          #InclTax
          #SalesGroup
          #CommissionGroup
          #DlvMode
          #DlvTerm
          #FreightZone
          #FreightSlipType
          #PriceGroupId
          #MultiLineDisc
          #EndDisc
          #DiscPercent
          #LineDisc
          #CashDisc
          #Payment
          #PaymentSched
          #TransactionCode
          #Listcode
          #InventLocationId
          #PaymMode
          #PaymSpec
          #FixedDueDate
          #InterCompanyCompanyId
          #InterCompanyOriginalCustAccount
          #InterCompanyDirectDeliveryOrig
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #SummaryUpdateParameters
        PROPERTIES
          Name                #SummaryUpdateParameters
          Label               #@SYS57738
        ENDPROPERTIES
        
        GROUPFIELDS
          #AutoSummaryModuleType
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #SummaryUpdateShow
        PROPERTIES
          Name                #SummaryUpdateShow
          Label               #@SYS57755
        ENDPROPERTIES
        
        GROUPFIELDS
          #CustAccount
          #InvoiceAccount
          #SalesType
          #CurrencyCode
          #FixedExchRate
          #ContactPersonId
          #LanguageId
          #DefaultDimension
          #SalesPoolId
          #PostingProfile
          #NumberSequenceGroup
          #VATNum
          #InclTax
          #SalesGroup
          #CommissionGroup
          #DlvMode
          #DlvTerm
          #FreightZone
          #FreightSlipType
          #PriceGroupId
          #MultiLineDisc
          #EndDisc
          #DiscPercent
          #LineDisc
          #CashDisc
          #Payment
          #PaymentSched
          #TransactionCode
          #Listcode
          #InventLocationId
          #PaymMode
          #PaymSpec
          #FixedDueDate
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Transport
        PROPERTIES
          Name                #Transport
          Label               #@SYS3843
        ENDPROPERTIES
        
        GROUPFIELDS
          #FreightZone
          #FreightSlipType
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #Warehouse
        PROPERTIES
          Name                #Warehouse
          Label               #@WAX374
        ENDPROPERTIES
        
        GROUPFIELDS
          #ReleaseStatus
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #WebCategoryBrowsing
        PROPERTIES
          Name                #WebCategoryBrowsing
          Label               #@SYS74258
        ENDPROPERTIES
        
        GROUPFIELDS
          #SalesStatus
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #WebCategoryBrowsingReturn
        PROPERTIES
          Name                #WebCategoryBrowsingReturn
          Label               #@SYS74258
        ENDPROPERTIES
        
        GROUPFIELDS
          #ReturnStatus
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #WebDelivery
        PROPERTIES
          Name                #WebDelivery
          Label               #@SYS4508
        ENDPROPERTIES
        
        GROUPFIELDS
          #DeliveryName
        ENDGROUPFIELDS
      ENDGROUP
      GROUP #WithholdingTax_IN
        PROPERTIES
          Name                #WithholdingTax_IN
          Label               #@SYS33817
        ENDPROPERTIES
        
        GROUPFIELDS
          #NatureOfAssessee_IN
          #TDSGroup_IN
          #TCSGroup_IN
        ENDGROUPFIELDS
      ENDGROUP
    ENDGROUPS
    
    INDICES
      #SalesIdx
      PROPERTIES
        Name                #SalesIdx
        AllowDuplicates     #No
        AlternateKey        #Yes
        Origin              #{2B080001-016E-1000-5361-6C6573496478}
        LegacyId            #1
      ENDPROPERTIES
      
      INDEXFIELDS
        #SalesId
      ENDINDEXFIELDS
      
      #CustIdx
      PROPERTIES
        Name                #CustIdx
        AllowDuplicates     #No
        Origin              #{2B070002-016E-1000-4375-737449647800}
        LegacyId            #2
      ENDPROPERTIES
      
      INDEXFIELDS
        #CustAccount
        #SalesId
        #PurchOrderFormNum
      ENDINDEXFIELDS
      
      #ProjIdIdx
      PROPERTIES
        Name                #ProjIdIdx
        ConfigurationKey    #ProjBasic
        Origin              #{2B090003-016E-1000-F8C6-816A49644964}
        LegacyId            #3
      ENDPROPERTIES
      
      INDEXFIELDS
        #ProjId
        #SalesId
      ENDINDEXFIELDS
      
      #StatusCustAccIdx
      PROPERTIES
        Name                #StatusCustAccIdx
        Origin              #{2B100005-016E-1000-7441-06E50F55056F}
        LegacyId            #5
      ENDPROPERTIES
      
      INDEXFIELDS
        #SalesStatus
        #CustAccount
      ENDINDEXFIELDS
      
      #InvoiceAccStatusIdx
      PROPERTIES
        Name                #InvoiceAccStatusIdx
        Origin              #{2B130006-016E-1000-6DB1-5FCC7B828353}
        LegacyId            #6
      ENDPROPERTIES
      
      INDEXFIELDS
        #InvoiceAccount
        #SalesStatus
      ENDINDEXFIELDS
      
      #ReturnNumIdx
      PROPERTIES
        Name                #ReturnNumIdx
        ConfigurationKey    #ReturnItem
        Origin              #{2B0C0007-016E-1000-D1BE-376FD6804E75}
        LegacyId            #7
      ENDPROPERTIES
      
      INDEXFIELDS
        #ReturnItemNum
      ENDINDEXFIELDS
      
      #SalesTypeIdx
      PROPERTIES
        Name                #SalesTypeIdx
        Origin              #{2B0C0009-016E-1000-FA81-2E5FD7667970}
        LegacyId            #9
      ENDPROPERTIES
      
      INDEXFIELDS
        #SalesType
        #SalesId
      ENDINDEXFIELDS
      
      #AgreementHeaderIdx
      PROPERTIES
        Name                #AgreementHeaderIdx
        Origin              #{2B120014-016E-1000-09A6-8E2BD269E89A}
        LegacyId            #20
      ENDPROPERTIES
      
      INDEXFIELDS
        #MatchingAgreement
      ENDINDEXFIELDS
      
      #CustCreatedDateIdx
      PROPERTIES
        Name                #CustCreatedDateIdx
        Origin              #{BDCB732C-DC58-43E4-9904-8BA05D765B57}
        LegacyId            #36
      ENDPROPERTIES
      
      INDEXFIELDS
        #CustAccount
        #createdDateTime
      ENDINDEXFIELDS
      
      #SourceDocumentIdx
      PROPERTIES
        Name                #SourceDocumentIdx
        AllowDuplicates     #No
        AlternateKey        #Yes
        Origin              #{05851D24-F058-410A-B94B-2197C602A559}
        LegacyId            #80
      ENDPROPERTIES
      
      INDEXFIELDS
        #SourceDocumentHeader
        #dataAreaId
      ENDINDEXFIELDS
      
      #ConsTarget_JPIdx
      PROPERTIES
        Name                #ConsTarget_JPIdx
        Origin              #{ED4E4437-387A-42F0-B108-8480F0DD745F}
        LegacyId            #8006
      ENDPROPERTIES
      
      INDEXFIELDS
        #InvoiceAccount
        #ConsTarget_JP
      ENDINDEXFIELDS
      
    ENDINDICES
    FULLTEXTINDICES
    ENDFULLTEXTINDICES
    REFERENCES
      REFERENCE #Agreement
        PROPERTIES
          Name                #Agreement
          Table               #AgreementHeader
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #AgreementHeader
          Role                #AgreementHeader_SalesTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #MatchingAgreement
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #BankAccount_LV
        PROPERTIES
          Name                #BankAccount_LV
          Table               #BankAccountTable
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroOne
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
          RelatedTableRole    #BankAccount_LV
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #BankAccount_LV
            RelatedField        #AccountID
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #BankCentralBankPurpose
        PROPERTIES
          Name                #BankCentralBankPurpose
          Table               #BankCentralBankPurpose
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #BankCentralBankPurposeCode
            RelatedField        #Code
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #CashDisc
        PROPERTIES
          Name                #CashDisc
          Table               #CashDisc
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #CashDisc
            RelatedField        #CashDiscCode
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #CommissionCustomerGroup
        PROPERTIES
          Name                #CommissionCustomerGroup
          Table               #CommissionCustomerGroup
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #CommissionGroup
            RelatedField        #GroupId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #CommissionSalesGroup
        PROPERTIES
          Name                #CommissionSalesGroup
          Table               #CommissionSalesGroup
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #SalesGroup
            RelatedField        #GroupId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #Common
        PROPERTIES
          Name                #Common
          Table               #Common
          Validate            #No
          RelationshipType    #Link
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #AddressRefRecId
            RelatedField        #RecId
          ENDPROPERTIES
          
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #AddressRefTableId
            RelatedField        #TableId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #ContactPerson
        PROPERTIES
          Name                #ContactPerson
          Table               #ContactPerson
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #ContactPersonId
            RelatedField        #ContactPersonId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #CountyOrigDest
        PROPERTIES
          Name                #CountyOrigDest
          Table               #LogisticsAddressCounty
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #CountyOrigDest
          Role                #SalesTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #CountyOrigDest
            RelatedField        #CountyId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #CreditCard
        PROPERTIES
          Name                #CreditCard
          Table               #CreditCardCust
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #CreditCardCustRefId
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #CurBankAccount_LV
        PROPERTIES
          Name                #CurBankAccount_LV
          Table               #BankAccountTable
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroOne
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
          RelatedTableRole    #CurBankAccount_LV
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #CurBankAccount_LV
            RelatedField        #AccountID
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #Currency
        PROPERTIES
          Name                #Currency
          Table               #Currency
          RelatedTableCardinality   #ExactlyOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #CurrencyCode
            RelatedField        #CurrencyCode
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #CustBankAccount_LV
        PROPERTIES
          Name                #CustBankAccount_LV
          Table               #CustBankAccount
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroOne
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #InvoiceAccount
            RelatedField        #CustAccount
          ENDPROPERTIES
          
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #CustBankAccount_LV
            RelatedField        #AccountID
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #CustDirectDebitMandate
        PROPERTIES
          Name                #CustDirectDebitMandate
          Table               #CustDirectDebitMandate
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #DirectDebitMandate
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #CustGroup
        PROPERTIES
          Name                #CustGroup
          Table               #CustGroup
          RelatedTableCardinality   #ExactlyOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #CustGroup
            RelatedField        #CustGroup
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #CustInvoiceJour
        PROPERTIES
          Name                #CustInvoiceJour
          Table               #CustInvoiceJour
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #CustInvoiceId
            RelatedField        #InvoiceId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #CustLedger
        PROPERTIES
          Name                #CustLedger
          Table               #CustLedger
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #PostingProfile
            RelatedField        #PostingProfile
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #CustLineDiscountGroup
        PROPERTIES
          Name                #CustLineDiscountGroup
          Table               #PriceDiscGroup
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #CustLineDiscountGroup
          Role                #SalesTable
          EDTRelation         #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #LineDisc
            RelatedField        #GroupId
            SourceEDT           #CustLineDiscCode
          ENDPROPERTIES
          
          REFERENCETYPE EXTERNFIXED
          PROPERTIES
            Value               #1
            Table               #PriceDiscGroup
            RelatedField        #Type
            SourceEDT           #CustLineDiscCode
          ENDPROPERTIES
          
          REFERENCETYPE EXTERNFIXED
          PROPERTIES
            Value               #1
            Table               #PriceDiscGroup
            RelatedField        #Module
            SourceEDT           #CustLineDiscCode
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #CustMarkupGroup
        PROPERTIES
          Name                #CustMarkupGroup
          Table               #MarkupGroup
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #CustMarkupGroup
          Role                #SalesTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #MarkupGroup
            RelatedField        #GroupId
          ENDPROPERTIES
          
          REFERENCETYPE EXTERNFIXED
          PROPERTIES
            Value               #1
            Table               #MarkupGroup
            RelatedField        #Module
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #CustMultiLineDiscountGroup
        PROPERTIES
          Name                #CustMultiLineDiscountGroup
          Table               #PriceDiscGroup
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #CustMultiLineDiscountGroup
          Role                #SalesTable
          EDTRelation         #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #MultiLineDisc
            RelatedField        #GroupId
            SourceEDT           #CustMultiLineDiscCode
          ENDPROPERTIES
          
          REFERENCETYPE EXTERNFIXED
          PROPERTIES
            Value               #2
            Table               #PriceDiscGroup
            RelatedField        #Type
            SourceEDT           #CustMultiLineDiscCode
          ENDPROPERTIES
          
          REFERENCETYPE EXTERNFIXED
          PROPERTIES
            Value               #1
            Table               #PriceDiscGroup
            RelatedField        #Module
            SourceEDT           #CustMultiLineDiscCode
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #CustPaymModeSpec
        PROPERTIES
          Name                #CustPaymModeSpec
          Table               #CustPaymModeSpec
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #PaymMode
            RelatedField        #PaymMode
          ENDPROPERTIES
          
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #PaymSpec
            RelatedField        #Specification
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #CustPaymModeTable
        PROPERTIES
          Name                #CustPaymModeTable
          Table               #CustPaymModeTable
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #PaymMode
            RelatedField        #PaymMode
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #CustPriceGroup
        PROPERTIES
          Name                #CustPriceGroup
          Table               #PriceDiscGroup
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #CustPriceGroup
          Role                #SalesTable
          EDTRelation         #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #PriceGroupId
            RelatedField        #GroupId
            SourceEDT           #CustPriceGroup
          ENDPROPERTIES
          
          REFERENCETYPE EXTERNFIXED
          PROPERTIES
            Table               #PriceDiscGroup
            RelatedField        #Type
            SourceEDT           #CustPriceGroup
          ENDPROPERTIES
          
          REFERENCETYPE EXTERNFIXED
          PROPERTIES
            Value               #1
            Table               #PriceDiscGroup
            RelatedField        #Module
            SourceEDT           #CustPriceGroup
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #CustTotalDiscountGroup
        PROPERTIES
          Name                #CustTotalDiscountGroup
          Table               #PriceDiscGroup
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #CustTotalDiscountGroup
          Role                #SalesTable
          EDTRelation         #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #EndDisc
            RelatedField        #GroupId
            SourceEDT           #CustEndDiscCode
          ENDPROPERTIES
          
          REFERENCETYPE EXTERNFIXED
          PROPERTIES
            Value               #3
            Table               #PriceDiscGroup
            RelatedField        #Type
            SourceEDT           #CustEndDiscCode
          ENDPROPERTIES
          
          REFERENCETYPE EXTERNFIXED
          PROPERTIES
            Value               #1
            Table               #PriceDiscGroup
            RelatedField        #Module
            SourceEDT           #CustEndDiscCode
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #DefaultDimension
        PROPERTIES
          Name                #DefaultDimension
          Table               #DimensionAttributeValueSet
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #DimensionAttributeValueSet
          Role                #DimensionAttributeValueSet_SalesTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #DefaultDimension
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #DeliveryPostalAddress_FK
        PROPERTIES
          Name                #DeliveryPostalAddress_FK
          Table               #LogisticsPostalAddress
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #LogisticsPostalAddress
          Role                #LogisticsPostalAddress_SalesTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #DeliveryPostalAddress
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #DlvMode
        PROPERTIES
          Name                #DlvMode
          Table               #DlvMode
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #DlvMode
            RelatedField        #Code
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #DlvReason
        PROPERTIES
          Name                #DlvReason
          Table               #DlvReason
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #DlvReason
            RelatedField        #Code
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #DlvTerm
        PROPERTIES
          Name                #DlvTerm
          Table               #DlvTerm
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #DlvTerm
            RelatedField        #Code
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #InterCompany
        PROPERTIES
          Name                #InterCompany
          Table               #DataArea
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #InterCompany
          Role                #SalesTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #InterCompanyCompanyId
            RelatedField        #id
          ENDPROPERTIES
          
          REFERENCETYPE EXTERNFIXED
          PROPERTIES
            Table               #DataArea
            RelatedField        #isVirtual
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #IntrastatPort
        PROPERTIES
          Name                #IntrastatPort
          Table               #IntrastatPort
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #Port
            RelatedField        #PortId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #IntrastatStatProc
        PROPERTIES
          Name                #IntrastatStatProc
          Table               #IntrastatStatProc
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #StatProcId
            RelatedField        #StatProcId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #IntrastatTransactionCode
        PROPERTIES
          Name                #IntrastatTransactionCode
          Table               #IntrastatTransactionCode
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #TransactionCode
            RelatedField        #TransactionCode
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #IntrastatTransportMode
        PROPERTIES
          Name                #IntrastatTransportMode
          Table               #IntrastatTransportMode
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #Transport
            RelatedField        #TransPortCode
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #InventLocation
        PROPERTIES
          Name                #InventLocation
          Table               #InventLocation
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #InventLocationId
            RelatedField        #InventLocationId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #InventSite
        PROPERTIES
          Name                #InventSite
          Table               #InventSite
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #InventSiteId
            RelatedField        #SiteId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #InvoiceCustomer
        PROPERTIES
          Name                #InvoiceCustomer
          Table               #CustTable
          RelatedTableCardinality   #ExactlyOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #InvoiceCustomer
          Role                #SalesTable
          EDTRelation         #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #InvoiceAccount
            RelatedField        #AccountNum
            SourceEDT           #CustInvoiceAccount
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #LanguageTable
        PROPERTIES
          Name                #LanguageTable
          Table               #LanguageTable
          RelatedTableCardinality   #ExactlyOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #LanguageId
            RelatedField        #LanguageId
          ENDPROPERTIES
          
          REFERENCETYPE EXTERNFIXED
          PROPERTIES
            Value               #1
            Table               #LanguageTable
            RelatedField        #LabelFile
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #MarkupGroup
        PROPERTIES
          Name                #MarkupGroup
          Table               #MarkupGroup
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE EXTERNFIXED
          PROPERTIES
            Value               #1
            Table               #MarkupGroup
            RelatedField        #Module
          ENDPROPERTIES
          
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #MarkupGroup
            RelatedField        #GroupId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #MCRHoldCodeTrans
        PROPERTIES
          Name                #MCRHoldCodeTrans
          Table               #MCRHoldCodeTrans
          Validate            #No
          RelatedTableCardinality   #ExactlyOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #SalesId
            RelatedField        #InventRefId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #MCRInstallmentPlanSalesTable
        PROPERTIES
          Name                #MCRInstallmentPlanSalesTable
          Table               #MCRInstallmentPlanSalesTable
          Validate            #No
          RelatedTableCardinality   #ExactlyOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #SalesId
            RelatedField        #SalesId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #NumberSequenceGroup
        PROPERTIES
          Name                #NumberSequenceGroup
          Table               #NumberSequenceGroup
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #NumberSequenceGroup
            RelatedField        #numberSequenceGroupId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #OrderCustomer
        PROPERTIES
          Name                #OrderCustomer
          Table               #CustTable
          RelatedTableCardinality   #ExactlyOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #OrderCustomer
          Role                #SalesTable
          EDTRelation         #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #CustAccount
            RelatedField        #AccountNum
            SourceEDT           #CustAccount
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #PaymSched
        PROPERTIES
          Name                #PaymSched
          Table               #PaymSched
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #PaymentSched
            RelatedField        #Name
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #PaymTerm
        PROPERTIES
          Name                #PaymTerm
          Table               #PaymTerm
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #Payment
            RelatedField        #PaymTermId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #PdsCustRebateGroup
        PROPERTIES
          Name                #PdsCustRebateGroup
          Table               #PdsCustRebateGroup
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #PdsCustRebateGroupId
            RelatedField        #PdsCustRebateGroupId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #PdsRebateProgramTMATable
        PROPERTIES
          Name                #PdsRebateProgramTMATable
          Table               #PdsRebateProgramTMATable
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #PdsRebateProgramTMAGroup
            RelatedField        #PdsRebateProgramTMAGroup
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #PlTaxDueTable
        PROPERTIES
          Name                #PlTaxDueTable
          Table               #PlTaxDueTable
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
          RelatedTableRole    #PlTaxDueTable
          Role                #SalesTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #TaxPeriodPaymentCode_PL
            RelatedField        #TaxPeriodPaymentCode
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #PriceDiscChangePolicyRecId1
        PROPERTIES
          Name                #PriceDiscChangePolicyRecId1
          Table               #PriceDiscChangePolicy
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #PriceDiscChangePolicy
          Role                #PriceDiscChangePolicy_SalesTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #SystemEntryChangePolicy
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #PriceDiscChangePolicyRecId2
        PROPERTIES
          Name                #PriceDiscChangePolicyRecId2
          Table               #PriceDiscChangePolicy
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #PriceDiscChangePolicy_1
          Role                #PriceDiscChangePolicy_1_SalesTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #ManualEntryChangepolicy
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #ProjTable
        PROPERTIES
          Name                #ProjTable
          Table               #ProjTable
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #ProjId
            RelatedField        #ProjId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #PurchTable
        PROPERTIES
          Name                #PurchTable
          Table               #PurchTable
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #PurchTable
          Role                #SalesTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE THISFIXED
          PROPERTIES
            Table               #SalesTable
            Field               #InterCompanyOrder
          ENDPROPERTIES
          
          REFERENCETYPE THISFIXED
          PROPERTIES
            Table               #SalesTable
            Field               #InterCompanyCompanyId
          ENDPROPERTIES
          
          REFERENCETYPE THISFIXED
          PROPERTIES
            Table               #SalesTable
            Field               #InterCompanyPurchId
          ENDPROPERTIES
          
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #PurchId
            RelatedField        #PurchId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #PurchTableInterCompany
        PROPERTIES
          Name                #PurchTableInterCompany
          Table               #PurchTable
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
          RelatedTableRole    #PurchTableInterCompany
          Role                #SalesTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE THISFIXED
          PROPERTIES
            Table               #SalesTable
            Field               #InterCompanyOrder
            Value               #1
          ENDPROPERTIES
          
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #InterCompanyCompanyId
            RelatedField        #dataAreaId
          ENDPROPERTIES
          
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #InterCompanyPurchId
            RelatedField        #PurchId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #ReasonTableRef
        PROPERTIES
          Name                #ReasonTableRef
          Table               #ReasonTableRef
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #CreditNoteReasonCode
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #ReturnReasonCode
        PROPERTIES
          Name                #ReturnReasonCode
          Table               #ReturnReasonCode
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #ReturnReasonCodeId
            RelatedField        #ReasonCodeId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #SalesOrigin
        PROPERTIES
          Name                #SalesOrigin
          Table               #SalesOrigin
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #SalesOriginId
            RelatedField        #OriginId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #SalesPool
        PROPERTIES
          Name                #SalesPool
          Table               #SalesPool
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #SalesPoolId
            RelatedField        #SalesPoolId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #SalesTable
        PROPERTIES
          Name                #SalesTable
          Table               #SalesTable
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
          EDTRelation         #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #ReturnReplacementId
            RelatedField        #SalesId
            SourceEDT           #ReturnReplacementId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #ShipCarrierPostalAddress_FK
        PROPERTIES
          Name                #ShipCarrierPostalAddress_FK
          Table               #LogisticsPostalAddress
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #LogisticsPostalAddress_1
          Role                #LogisticsPostalAddress_1_SalesTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #ShipCarrierPostalAddress
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #ShipCarrierTable
        PROPERTIES
          Name                #ShipCarrierTable
          Table               #ShipCarrierTable
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #ShipCarrierId
            RelatedField        #CarrierId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #smmCampaignTable
        PROPERTIES
          Name                #smmCampaignTable
          Table               #smmCampaignTable
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #smmCampaignId
            RelatedField        #CampaignId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #smmSalesUnit
        PROPERTIES
          Name                #smmSalesUnit
          Table               #smmSalesUnit
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #SalesUnitId
            RelatedField        #SalesUnitId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #SourceDocumentHeader
        PROPERTIES
          Name                #SourceDocumentHeader
          Table               #SourceDocumentHeader
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #SourceDocumentHeader
          Role                #SourceDocumentHeader_SalesTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #SourceDocumentHeader
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #TaxGroupHeading
        PROPERTIES
          Name                #TaxGroupHeading
          Table               #TaxGroupHeading
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #TaxGroup
            RelatedField        #TaxGroup
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #TaxServiceTariff
        PROPERTIES
          Name                #TaxServiceTariff
          Table               #TaxServiceTariff
          Validate            #No
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroOne
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
          RelatedTableRole    #TaxServiceTariff
          Role                #SalesTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #RecId
            RelatedField        #ParentRecId
          ENDPROPERTIES
          
          REFERENCETYPE NORMAL
          PROPERTIES
            Field               #TableId
            RelatedField        #ParentTableId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #TaxWithholdGroupHeadingTCS_IN
        PROPERTIES
          Name                #TaxWithholdGroupHeadingTCS_IN
          Table               #TaxWithholdGroupHeading
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #TaxWithholdGroupHeading_1
          Role                #TaxWithholdGroupHeading_1_SalesTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #TCSGroup_IN
            RelatedField        #TaxWithholdGroup
            SourceEDT           #TaxWithholdGroup
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #TaxWithholdGroupHeadingTDS_IN
        PROPERTIES
          Name                #TaxWithholdGroupHeadingTDS_IN
          Table               #TaxWithholdGroupHeading
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #TaxWithholdGroupHeading
          Role                #TaxWithholdGroupHeading_SalesTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #TDSGroup_IN
            RelatedField        #TaxWithholdGroup
            SourceEDT           #TaxWithholdGroup
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #TransportationDocument
        PROPERTIES
          Name                #TransportationDocument
          Table               #TransportationDocument
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroOne
          RelationshipType    #Association
          UseDefaultRoleNames #Yes
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #TransportationDocument
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #WorkerSalesResponsible_FK
        PROPERTIES
          Name                #WorkerSalesResponsible_FK
          Table               #HcmWorker
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #SalesResponsible
          Role                #SalesResponsible_SalesTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #WorkerSalesResponsible
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
      REFERENCE #WorkerSalesTaker_FK
        PROPERTIES
          Name                #WorkerSalesTaker_FK
          Table               #HcmWorker
          RelatedTableCardinality   #ZeroOne
          Cardinality         #ZeroMore
          RelationshipType    #Association
          RelatedTableRole    #SalesTaker
          Role                #SalesTaker_SalesTable
        ENDPROPERTIES
        
        FIELDREFERENCES
          REFERENCETYPE PKFK
          PROPERTIES
            Field               #WorkerSalesTaker
            RelatedField        #RecId
          ENDPROPERTIES
          
        ENDFIELDREFERENCES
      ENDREFERENCE
    ENDREFERENCES
    
    DELETEACTIONS
      #SalesTable_IN(SalesTable)
      PROPERTIES
        Table               #SalesTable_IN
        DeleteAction        #Cascade
        Relation            #SalesTable
      ENDPROPERTIES
      
      #CFMPlannedPaymentTable(SalesTable)
      PROPERTIES
        Table               #CFMPlannedPaymentTable
        DeleteAction        #Cascade
        Relation            #SalesTable
      ENDPROPERTIES
      
      #SalesTable_W(SalesTable)
      PROPERTIES
        Table               #SalesTable_W
        DeleteAction        #Cascade
        Relation            #SalesTable
      ENDPROPERTIES
      
      #SalesTable_Intrastat(SalesTable)
      PROPERTIES
        Table               #SalesTable_Intrastat
        DeleteAction        #Cascade
        Relation            #SalesTable
      ENDPROPERTIES
      
      #SourceDocumentHeader
      PROPERTIES
        Table               #SourceDocumentHeader
        DeleteAction        #Cascade
      ENDPROPERTIES
      
      #BankLGGuaranteeCustomerSalesOrder(SalesTable)
      PROPERTIES
        Table               #BankLGGuaranteeCustomerSalesOrder
        DeleteAction        #Restricted
        Relation            #SalesTable
      ENDPROPERTIES
      
      #TransportationDocument
      PROPERTIES
        Table               #TransportationDocument
        DeleteAction        #Cascade
      ENDPROPERTIES
      
      #RetailSalesTable(SalesTable)
      PROPERTIES
        Table               #RetailSalesTable
        DeleteAction        #Cascade
        Relation            #SalesTable
      ENDPROPERTIES
      
      #ExportSalesOrder(SalesTable)
      PROPERTIES
        Table               #ExportSalesOrder
        DeleteAction        #Cascade
        Relation            #SalesTable
      ENDPROPERTIES
      
      #TaxServiceTariff(SalesTable)
      PROPERTIES
        Table               #TaxServiceTariff
        DeleteAction        #Cascade
        Relation            #SalesTable
      ENDPROPERTIES
      
      #SalesTableSymbol(SalesTable)
      PROPERTIES
        Table               #SalesTableSymbol
        DeleteAction        #Cascade
        Relation            #SalesTable
      ENDPROPERTIES
      
      #RetailSalesTableInstanceValue(RetailSalesTableInstanceSalesTable)
      PROPERTIES
        Table               #RetailSalesTableInstanceValue
        DeleteAction        #Cascade
        Relation            #RetailSalesTableInstanceSalesTable
      ENDPROPERTIES
      
      #SalesTaxTransactionExchangeRate(SalesTable)
      PROPERTIES
        Table               #SalesTaxTransactionExchangeRate
        DeleteAction        #Cascade
        Relation            #SalesTable
      ENDPROPERTIES
      
      #SalesTable_BR(SalesTable)
      PROPERTIES
        Table               #SalesTable_BR
        DeleteAction        #Cascade
        Relation            #SalesTable
      ENDPROPERTIES
      
      #SalesTable_RU(SalesTable)
      PROPERTIES
        Table               #SalesTable_RU
        DeleteAction        #Cascade
        Relation            #SalesTable
      ENDPROPERTIES
      
      #PlInventPackageParm(SalesTable)
      PROPERTIES
        Table               #PlInventPackageParm
        DeleteAction        #Cascade
        Relation            #SalesTable
      ENDPROPERTIES
      
      #SalesTableExtensionTH(SalesTable)
      PROPERTIES
        Table               #SalesTableExtensionTH
        DeleteAction        #Cascade
        Relation            #SalesTable
      ENDPROPERTIES
      
      #CustPaymSched
      PROPERTIES
        Table               #CustPaymSched
        DeleteAction        #Cascade
      ENDPROPERTIES
      
      #CustVendCreditInvoicingTable
      PROPERTIES
        Table               #CustVendCreditInvoicingTable
        DeleteAction        #Cascade
      ENDPROPERTIES
      
      #DocuRef
      PROPERTIES
        Table               #DocuRef
        DeleteAction        #Cascade
      ENDPROPERTIES
      
      #InterCompanyPurchSalesReference
      PROPERTIES
        Table               #InterCompanyPurchSalesReference
        DeleteAction        #Cascade
      ENDPROPERTIES
      
      #LedgerCov
      PROPERTIES
        Table               #LedgerCov
        DeleteAction        #Cascade
      ENDPROPERTIES
      
      #MarkupTrans
      PROPERTIES
        Table               #MarkupTrans
        DeleteAction        #Cascade
      ENDPROPERTIES
      
      #PrintMgmtDocInstance
      PROPERTIES
        Table               #PrintMgmtDocInstance
        DeleteAction        #Cascade
      ENDPROPERTIES
      
      #SalesJournalAutoSummary
      PROPERTIES
        Table               #SalesJournalAutoSummary
        DeleteAction        #Cascade
      ENDPROPERTIES
      
      #TaxWorkRegulation
      PROPERTIES
        Table               #TaxWorkRegulation
        DeleteAction        #Cascade
      ENDPROPERTIES
      
      #RetailEventNotificationAction(SalesTable)
      PROPERTIES
        Table               #RetailEventNotificationAction
        DeleteAction        #Cascade
        Relation            #SalesTable
      ENDPROPERTIES
      
    ENDDELETEACTIONS
    
    METHODS
      SOURCE #accountCustLedgerDimension
        #//BP Deviation documented
        #display LedgerDimensionDefaultAccount accountCustLedgerDimension(CustPostingProfile _postingProfile_RU = '')
        #{
        #    SalesTableType  salesTableType;
        #
        #    salesTableType = this.type();
        #    return salesTableType.accountCustLedgerDimension(_postingProfile_RU);
        #}
      ENDSOURCE
      SOURCE #agreementDocumentTitle_RU
        #/// <summary>
        #///     Gets the document title of the related agreement.
        #/// </summary>
        #/// <returns>
        #///     The agreement document title.
        #/// </returns>
        #public display AgreementDocumentTitle agreementDocumentTitle_RU()
        #{
        #    return SalesAgreementHeader::find(this.MatchingAgreement).DocumentTitle;
        #}
      ENDSOURCE
      SOURCE #agreementHeaderExt_RU
        #/// <summary>
        #///     Retrieves the record ID of the <c>AgreementHeaderExt_RU</c> that is attached to the current sales order.
        #/// </summary>
        #/// <returns>
        #///     The agreement record ID.
        #/// </returns>
        #public AgreementHeaderExtRecId_RU agreementHeaderExt_RU()
        #{
        #    AgreementHeaderExtRecId_RU agreementHeaderExt;
        #
        #    #ISOCountryRegionCodes
        #
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
        #    {
        #        agreementHeaderExt = this.salesTable_RU().AgreementHeaderExt_RU;
        #    }
        #    return agreementHeaderExt;
        #}
      ENDSOURCE
      SOURCE #agreementIsLinked
        #display public SalesAgreementIsLinked agreementIsLinked()
        #{
        #    if (this.MatchingAgreement)
        #    {
        #        return NoYes::Yes;
        #    }
        #    return NoYes::No;
        #}
      ENDSOURCE
      SOURCE #amountDelivered
        #server display AmountCur  amountDelivered()
        #{
        #    SalesLine       salesLine;
        #    AmountCur       amountCur = 0;
        #
        #    while select salesLine
        #        where salesLine.SalesId     == this.SalesId
        #    {
        #        amountCur += salesLine.calcLineAmountExclTax(salesLine.SalesQty - salesLine.RemainSalesPhysical);
        #    }
        #
        #    return amountCur;
        #}
      ENDSOURCE
      SOURCE #amountInvoiced
        #server display AmountCur  amountInvoiced()
        #{
        #    CustInvoiceJour custInvoiceJour;
        #
        #    select sum(InvoiceAmount) from custInvoiceJour
        #        where custInvoiceJour.RefNum  == RefNum::SalesOrder
        #           && custInvoiceJour.SalesId == this.SalesId;
        #
        #    return custInvoiceJour.InvoiceAmount;
        #}
      ENDSOURCE
      SOURCE #amountMST
        #AmountMST amountMST(AmountCur _amountCur, TransDate _exchRateDate = systemDateGet())
        #{
        #    return Currency::mstAmount(_amountCur, this.CurrencyCode, _exchRateDate, this.fixedEuroTriangulation(), this.fixedExchRate(), this.fixedExchRateSecondary());
        #}
      ENDSOURCE
      SOURCE #amountOrderedNotInvoiced
        #server display AmountCur amountOrderedNotInvoiced()
        #{
        #    SalesLine  salesLine;
        #    AmountCur  ordered;
        #
        #    while select salesLine
        #        where salesLine.SalesId     == this.SalesId
        #    {
        #        ordered += salesLine.calcLineAmountExclTax(salesLine.RemainSalesPhysical+salesLine.RemainSalesFinancial);
        #    }
        #
        #    return ordered;
        #}
      ENDSOURCE
      SOURCE #amountRemainSalesFinancial
        #server display AmountCur  amountRemainSalesFinancial()
        #{
        #    SalesLine       salesLine;
        #    AmountCur       amountCur = 0;
        #
        #    while select salesLine
        #            index hint SalesLineIdx
        #            where salesLine.SalesId     == this.SalesId
        #    {
        #        amountCur += salesLine.calcLineAmountExclTax(salesLine.RemainSalesFinancial);
        #    }
        #
        #    return amountCur;
        #}
      ENDSOURCE
      SOURCE #amountRemainSalesPhysical
        #server display AmountCur  amountRemainSalesPhysical()
        #{
        #    SalesLine       salesLine;
        #    AmountCur       amountCur = 0;
        #
        #    while select salesLine
        #            index hint SalesLineIdx
        #            where salesLine.SalesId     == this.SalesId
        #    {
        #        amountCur += salesLine.calcLineAmountExclTax(salesLine.RemainSalesPhysical);
        #    }
        #
        #    return amountCur;
        #}
      ENDSOURCE
      SOURCE #calcDiscAmountForReturns
        #/// <summary>
        #/// Calculate the total discount for return order.
        #/// </summary>
        #/// <returns>
        #/// Return the calculated total discount for return order.
        #/// </returns>
        #public AmountCur calcDiscAmountForReturns()
        #{
        #    SalesLine               salesLine;
        #    CustInvoiceJour         custInvoiceJour;
        #    CustInvoiceTrans        custInvoiceTrans;
        #    Amount                  totalDiscount = 0;
        #
        #    while select LineAmount from salesLine
        #        where salesLine.SalesId == this.SalesId
        #        join RecId from custInvoiceTrans
        #            where custInvoiceTrans.RecId              == salesLine.RefReturnInvoiceTrans_W
        #        join EndDisc, SalesBalance from custInvoiceJour
        #            where custInvoiceJour.SalesId             == custInvoiceTrans.SalesId
        #               && custInvoiceJour.InvoiceId           == custInvoiceTrans.InvoiceId
        #               && custInvoiceJour.InvoiceDate         == custInvoiceTrans.InvoiceDate
        #               && custInvoiceJour.NumberSequenceGroup == custInvoiceTrans.NumberSequenceGroup
        #    {
        #        totalDiscount +=  custInvoiceJour.EndDisc / custInvoiceJour.SalesBalance * abs(salesLine.LineAmount);
        #    }
        #
        #    return totalDiscount;
        #}
      ENDSOURCE
      SOURCE #calcDue_RU
        #[SysObsoleteAttribute('The method has been deprecated and is no longer used.', false)]
        #public void calcDue_RU()
        #{
        #    if (! this.PaymentSched)
        #    {
        #        this.FixedDueDate = PaymTerm::find(this.Payment).due(this.DeliveryDate, this.paymDayId());
        #    }
        #}
      ENDSOURCE
      SOURCE #calcEstimateForced
        #boolean calcEstimateForced()
        #{
        #    this.Touched = NoYes::Yes;
        #
        #    if (this.validateWrite())
        #    {
        #        this.update();
        #    }
        #    else
        #    {
        #        this.reread();
        #        return false;
        #    }
        #
        #    return true;
        #}
      ENDSOURCE
      SOURCE #calculateTieredCharges
        #/// <summary>
        #/// Creates tiered misc. charges for the sales order.
        #/// </summary>
        #public void calculateTieredCharges()
        #{
        #    this.createMarkupTrans(false, true);
        #
        #    if (MarkupTrans::existTieredCharges(this.TableId, this.RecId))
        #    {
        #        info("@SYS4050024");
        #    }
        #    else
        #    {
        #        info("@SYS4050025");
        #    }
        #}
      ENDSOURCE
      SOURCE #canBeDirectlyInvoiced
        #/// <summary>
        #///    Determines whether the sales order can be directly invoiced through the Process Shipment feature.
        #/// </summary>
        #/// <returns>
        #///    true if the sales order has a payment term of COD or Credit card; otherwise, false.
        #/// </returns>
        #/// <remarks>
        #///    The Process shipment button is used for COD and credit card transactions.
        #///    If the payment type is a
        #///    credit card, the button will process the credit card and post the invoice.
        #///    If the payment type is
        #///    COD, the button with post the invoice.
        #///    The Invoice button is used to post all other transactions
        #///    that are not COD or credit card.
        #///    If the Process Shipment feature was used, the Invoice button will
        #///    print the invoice again.
        #/// </remarks>
        #boolean canBeDirectlyInvoiced()
        #{
        #    boolean     canBeInvoiced = false;
        #    PaymTerm    paymTerm;
        #
        #    paymTerm = this.payment();
        #    if (paymTerm.CreditCardPaymentType == CreditCardPaymentType::CreditCard ||
        #            paymTerm.PaymMethod == NetCurrent::COD)
        #    {
        #        canBeInvoiced = true;
        #    }
        #
        #    return canBeInvoiced;
        #}
      ENDSOURCE
      SOURCE #cancelPreAuthorization
        #server boolean cancelPreAuthorization()
        #{
        #    CreditCardAuthTrans     creditCardAuthTrans2Cancel;
        #    boolean ok;
        #
        #    if (!this.RecId)
        #    {
        #        return true;
        #    }
        #
        #    creditCardAuthTrans2Cancel = CreditCardAuthTrans::findValidPreApproval(this.SalesId);
        #    if (!creditCardAuthTrans2Cancel)
        #    {
        #        return true;
        #    }
        #    if (Box::okCancel("@SYS116762", DialogButton::Cancel)== DialogButton::Ok)
        #    {
        #        ok = CreditCardProcess::doVoidAuth(creditCardAuthTrans2Cancel);
        #        if (ok)
        #        {
        #            this.reread();
        #        }
        #        return ok;
        #    }
        #    else
        #    {
        #        return false;
        #    }
        #
        #    return true;
        #}
      ENDSOURCE
      SOURCE #canCreditNoteBeCreated
        #/// <summary>
        #/// Determines whether a credit note can be created for this sales order.
        #/// </summary>
        #/// <returns>
        #/// true if it is OK to create a credit note; otherwise, false.
        #/// </returns>
        #public boolean canCreditNoteBeCreated()
        #{
        #    return this.type().canCreditNoteBeCreated();
        #}
      ENDSOURCE
      SOURCE #canCreditNoteUseCreditCard
        #/// <summary>
        #/// Determines whether the a credit card can be used with a credit note.
        #/// </summary>
        #/// <returns>
        #/// true if a credit card can be used; otherwise, false.
        #/// </returns>
        #/// <remarks>
        #/// To refund a prior sales invoice, the same credit card must be used as found on the original
        #/// invoice.No refund is allowed with a credit note if there is no original invoice.
        #/// </remarks>
        #public boolean canCreditNoteUseCreditCard()
        #{
        #    SalesTotals totals;
        #    AmountCur invoiceTotal;
        #    CreditCardAuthTrans creditCardAuthTrans;
        #
        #    // No problem if the total is not negative
        #    totals = SalesTotals::construct(this, SalesUpdate::All);
        #    totals.calc();
        #    invoiceTotal = conPeek(totals.displayFields(), TradeTotals::posTotalAmount());
        #    if (invoiceTotal >= 0)
        #    {
        #        return true;
        #    }
        #
        #    creditCardAuthTrans = CreditCardAuthTrans::findRefundCharge(this.SalesId);
        #
        #    // Have a refund but user tried to change credit cards
        #    if(creditCardAuthTrans && !CreditCard::sameCard(this, creditCardAuthTrans))
        #    {
        #        this.CreditCardCustRefId = CreditCardCust::findByUniqueCardId(creditCardAuthTrans.UniqueCardId).RecId; // put back the original credit card
        #        return checkFailed("@SYS330573");
        #    }
        #
        #    // No preauth, no credit card allowed
        #    if (!creditCardAuthTrans && this.CreditCardCustRefId)
        #    {
        #        this.Payment = CustTable::find(this.CustAccount).PaymTermId; // reset to default payment terms
        #        this.CreditCardCustRefId = 0; // clear the credit card
        #        return checkFailed("@SYS330574");
        #    }
        #
        #    return true;
        #}
      ENDSOURCE
      SOURCE #canCustomerBeUpdated
        #boolean canCustomerBeUpdated(DocumentStatus _documentStatus)
        #{
        #    return CustTable::canCustomerBeUpdated(this.CustAccount, this.InvoiceAccount, _documentStatus);
        #}
      ENDSOURCE
      SOURCE #canDeliverySlipBeUpdatedBR
        #/// <summary>
        #/// Indicates whether a sales order can create delivery slips.
        #/// </summary>
        #/// <returns>
        #/// true if a delivery slip is found on the sales lines; otherwise false.
        #/// </returns>
        #public boolean canDeliverySlipBeUpdatedBR()
        #{
        #    SalesLine salesLine;
        #    SalesLine_BR salesLine_BR;
        #
        #    select firstonly RecId from salesLine
        #        where salesLine.SalesId == this.SalesId
        #            && salesLine.SalesStatus == SalesStatus::Backorder
        #        exists join salesLine_BR
        #            where  salesLine_BR.SalesLine == salesLine.RecId
        #                && salesLine_BR.DeliveryCFOPTable_BR != 0;
        #
        #    return salesLine.RecId != 0;
        #}
      ENDSOURCE
      SOURCE #canReleaseToWarehouse
        #/// <summary>
        #/// Check sales order and customer status to determine whether sales order can release to warehouse
        #/// </summary>
        #/// <returns>
        #/// True if the order can release to warehouse
        #/// </returns>
        #public boolean canReleaseToWarehouse()
        #{
        #    boolean ret = true;
        #
        #    if (this.SalesStatus == SalesStatus::Invoiced    ||
        #        this.SalesStatus == SalesStatus::Canceled    ||
        #        this.SalesStatus == SalesStatus::Delivered   ||
        #        this.mcrOrderStopped == NoYes::Yes)
        #    {
        #        ret = false;
        #    }
        #
        #    if (ret)
        #    {
        #        ret = CustTable::find(this.InvoiceAccount).Blocked != CustVendorBlocked::All;
        #        if (!ret)
        #        {
        #            warning(strFmt("@SYS7987", this.InvoiceAccount));
        #        }
        #    }
        #
        #    if (ret && isConfigurationkeyEnabled(configurationKeyNum(MCRCallCenter)))
        #    {
        #        ret = this.mcrCheckShipComplete();
        #        if (!ret)
        #        {
        #            warning(strFmt("@MCR12672", this.SalesId));
        #        }
        #    }
        #
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #canSubmitToWorkflow
        #boolean canSubmitToWorkflow(str _workflowType = '')
        #{
        #    boolean ret;
        #
        #
        #    if(this.AZ_SalesOrderWorkflowStatus == AZ_SalesOrderWorkflowStatus::NotSubmitted)
        #        return true;
        #
        #
        #    return false;
        #}
      ENDSOURCE
      SOURCE #canXMLBeSent
        #public boolean canXMLBeSent()
        #{
        #    boolean             ret;
        #    AifActionId         actionId;
        #    AifEndpointList     endpointList;
        #    AifConstraint       aifConstraint       = new AifConstraint();
        #    AifConstraintList   aifConstraintList   = new AifConstraintList();
        #
        #    actionId = AifSendService::getDefaultSendAction(classNum(ReturnReturnOrderOutService),AifSendActionType::SendByKey);
        #
        #    if (actionId)
        #    {
        #        aifConstraint.parmType(AifConstraintType::Customer);
        #        aifConstraint.parmId(this.CustAccount);
        #        aifConstraintList.addConstraint(aifConstraint);
        #
        #        endpointList = AifSendService::getEligibleEndpoints(actionId, aifConstraintList);
        #        if (endpointList.getEndpointCount() > 0)
        #        {
        #            ret = true;
        #        }
        #    }
        #
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #checkAccount
        #boolean  checkAccount()
        #{
        #    CustVendorBlocked   blockLevel = CustTable::blocked(this.CustAccount);
        #
        #    switch (blockLevel)
        #    {
        #        case CustVendorBlocked::All:
        #            return checkFailed(strFmt("@SYS18389", this.CustAccount, enum2str(blockLevel)));
        #        case CustVendorBlocked::Invoice:
        #            warning(strFmt("@SYS18389", this.CustAccount, enum2str(blockLevel)));
        #        break;
        #    }
        #
        #    return true;
        #}
      ENDSOURCE
      SOURCE #checkAgainstCreditLimit
        #boolean checkAgainstCreditLimit(Common _salesLineOrTable = this, SalesTotals _salesTotals = null)
        #{
        #    boolean         ret = true;
        #    CustCreditLimit custCreditLimit;
        #
        #    if (this.isCreditCheckEligible())
        #    {
        #        setPrefix(strFmt("@SYS76767", this.SalesId));
        #
        #        custCreditLimit = CustCreditLimit::construct(_salesLineOrTable, _salesTotals);
        #
        #        ret = custCreditLimit.check();
        #
        #        // when checking for credit limit excess during order entry, the user is always able to continue
        #        // regardless of whether Warning or Error is chosen.
        #        ret = true;
        #
        #        this.Touched = NoYes::No;
        #    }
        #
        #    return ret;
        #
        #}
      ENDSOURCE
      SOURCE #checkAgreement_RU
        #/// <summary>
        #///     Validates the <c>AgreementHeaderExt_RU</c> field for sales order.
        #/// </summary>
        #/// <param name="_agreementHeaderExtRecId">
        #///     The record ID of the sales agreement; optional.
        #/// </param>
        #/// <returns>
        #///     true if the <c>AgreementHeaderExt_RU</c> field is valid; otherwise, false.
        #/// </returns>
        #public boolean checkAgreement_RU(AgreementHeaderExtRecId_RU _agreementHeaderExtRecId = this.salesTable_RU().AgreementHeaderExt_RU)
        #{
        #    SalesAgreementHeader salesAgreementHeader;
        #    boolean ok = true;
        #
        #    if (SalesLine::exist(this.SalesId))
        #    {
        #        ok = checkFailed("@GLS220553");
        #    }
        #
        #    if (ok && _agreementHeaderExtRecId)
        #    {
        #        salesAgreementHeader = SalesAgreementHeaderExt_RU::salesAgreementHeader(_agreementHeaderExtRecId);
        #
        #        if (!salesAgreementHeader.canReleaseAgreement(this.ShippingDateRequested))
        #        {
        #            ok = checkFailed("@SYS103075");
        #        }
        #
        #        if (salesAgreementHeader.CustAccount != this.CustAccount)
        #        {
        #            ok = checkFailed(strFmt("@SYS112224",
        #                salesAgreementHeader.SalesNumberSequence, "@SYS309959", tableId2pname(tableNum(SalesAgreementHeader))));
        #        }
        #
        #        if (ok && this.InvoiceAccount && salesAgreementHeader.salesAgreementHeaderDefault().CustomerInvoiceAccount != this.InvoiceAccount)
        #        {
        #            ok = checkFailed(strFmt("@SYS112224",
        #                salesAgreementHeader.SalesNumberSequence, "@SYS309959", tableId2pname(tableNum(SalesAgreementHeader))));
        #        }
        #    }
        #
        #    return ok;
        #}
        #
      ENDSOURCE
      SOURCE #checkAndUpdateAvailableDlvDates
        #server boolean checkAndUpdateAvailableDlvDates()
        #{
        #    boolean ret;
        #    SalesCalcAvailableDlvDates  salesCalcAvailableDlvDates;
        #
        #    salesCalcAvailableDlvDates = SalesCalcAvailableDlvDates::newCommonSalesDlvDateType(this);
        #    ret = salesCalcAvailableDlvDates.validateWritePrompt(this, false, false);
        #    this.doUpdate();
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #checkCashPayment
        #boolean checkCashPayment()
        #{
        #    if (PaymTerm::isCashAccount(this.Payment) && this.PaymentSched )
        #    {
        #        return checkFailed(strFmt("@SYS25074"));
        #    }
        #    return true;
        #}
      ENDSOURCE
      SOURCE #checkContactPerson
        #boolean checkContactPerson()
        #{
        #    ContactPerson   contactPerson;
        #
        #    if (this.ContactPersonId)
        #    {
        #        contactPerson = ContactPerson::find(this.ContactPersonId);
        #        if (contactPerson.CustAccount != this.CustAccount)
        #        {
        #            return false;
        #        }
        #    }
        #    return true;
        #}
      ENDSOURCE
      SOURCE #checkCreditCard
        #public boolean checkCreditCard()
        #{
        #    if (!CustParameters::useCreditCardModule())
        #    {
        #        return true;
        #    }
        #    if (!RetailMCRChannelTable::mcrEnableOrderCompletion(this))
        #    {
        #        if (this.payment().CreditCardPaymentType == CreditCardPaymentType::CreditCard)
        #        {
        #            if (!this.CreditCardCustRefId)
        #            {
        #                // The credit card number must be specfied
        #                return checkFailed("@SYS116746");
        #            }
        #
        #            if (this.CreditCardCustRefId && !CreditCard::checkExpireDate(CreditCardCust::find(this.CreditCardCustRefId).ExpiryDate))
        #            {
        #                // Credit card is expired
        #                return checkFailed("@SYS116750");
        #            }
        #
        #            if (this.SettleVoucher == SettlementType::OpenTransact)
        #            {
        #                // Can't auto settle credit card orders
        #                return checkFailed("@SYS328656");
        #            }
        #        }
        #        else
        #        {
        #            if (this.CreditCardCustRefId)
        #            {
        #                // The payment type must be credit card, since the credit card number has been specified
        #                return checkFailed("@SYS116747");
        #            }
        #        }
        #    }
        #
        #    return true;
        #}
      ENDSOURCE
      SOURCE #checkCreditCardPaymentType
        #public boolean checkCreditCardPaymentType()
        #{
        #    if (!this.type().canHaveCreditCard() &&
        #        this.payment().CreditCardPaymentType == CreditCardPaymentType::CreditCard)
        #    {
        #        return checkFailed(strFmt("@SYS127403", this.SalesType));
        #    }
        #
        #    return true;
        #}
      ENDSOURCE
      SOURCE #checkCreditLimit
        #void checkCreditLimit(SalesTotals _salesTotals = null)
        #{
        #    SalesTableType::checkAgainstCreditLimit(this, _salesTotals);
        #}
      ENDSOURCE
      SOURCE #checkCreditNoteReason
        #/// <summary>
        #/// Checks the reason that a credit note is related to a <c>SalesTable</c> record.
        #/// </summary>
        #public void checkCreditNoteReason()
        #{
        #    #ISOCountryRegionCodes
        #
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU,#isoPL,#isoHU,#isoCZ,#isoLT,#isoLV,#isoEE])
        #        && CustParameters::find().CreditNoteReasonReq)
        #    {
        #        this.checkCreditNoteReasonServer();
        #    }
        #}
      ENDSOURCE
      SOURCE #checkCreditNoteReasonServer
        #private server void checkCreditNoteReasonServer()
        #{
        #    SalesLine   salesLine;
        #
        #    // Find if a Credit note line is missing the Reason comment
        #    while select CreditNoteReasonCode, LineNum from salesLine
        #        order by LineNum
        #        where salesLine.SalesId == this.SalesId &&
        #            ((salesLine.RefReturnInvoiceTrans_W == 0 && salesLine.CreditNoteInternalRef_PL != 0) ||
        #            (salesLine.RefReturnInvoiceTrans_W != 0 && salesLine.CreditNoteInternalRef_PL == 0))
        #    {
        #        if (salesLine.CreditNoteReasonCode == 0 || ReasonTableRef::find(salesLine.CreditNoteReasonCode).ReasonComment == "")
        #        {
        #            throw error(strFmt("@GLS220466",salesLine.LineNum));
        #        }
        #    }
        #}
      ENDSOURCE
      SOURCE #checkCurrencyCode
        #client server void  checkCurrencyCode()
        #{
        #    MCRCustPaymTotals mcrCustPaymTotals;
        #
        #    if (this)
        #    {
        #        if (isConfigurationkeyEnabled(configurationKeyNum(MCRCallCenter)))
        #        {
        #            // If one or more payments disallows changing the currency,
        #            //restore the old currency.
        #            if (this.CurrencyCode != this.orig().CurrencyCode)
        #            {
        #                mcrCustPaymTotals =
        #                    MCRCustPaymTotals::construct(this.TableId, this.RecId);
        #
        #                if (mcrCustPaymTotals && !mcrCustPaymTotals.allowEditCurrency())
        #                {
        #                    warning("@MCR10940");
        #
        #                    this.CurrencyCode = this.orig().CurrencyCode;
        #                }
        #            }
        #        }
        #        if (this.CurrencyCode != this.orig().CurrencyCode &&
        #            SalesLine::existDifferentCurrency(this.SalesId,this.CurrencyCode))
        #        {
        #            warning("@SYS15290");
        #
        #            this.CurrencyCode = this.orig().CurrencyCode;
        #        }
        #
        #        if (this.CurrencyCode != this.orig().CurrencyCode &&
        #            MarkupTrans::existDifferentCurrency(this.TableId, this.RecId, this.CurrencyCode))
        #        {
        #            warning("@SYS24528");
        #
        #            this.CurrencyCode = this.orig().CurrencyCode;
        #        }
        #    }
        #}
      ENDSOURCE
      SOURCE #checkDelete
        #boolean checkDelete(
        #    boolean _useWarning = true,
        #    boolean _setWarningToLocked = false)
        #{
        #    return this.type().checkDelete(_useWarning, _setWarningToLocked);
        #}
      ENDSOURCE
      SOURCE #checkDelivery
        #boolean checkDelivery()
        #{
        #    if (!this.DlvMode)
        #    {
        #        // "Mode of delivery must be specified."
        #        return checkFailed(strFmt("@SYS116733"));
        #    }
        #
        #    if (!this.DlvTerm)
        #    {
        #        // "Delivery term must be specified."
        #        return checkFailed(strFmt("@SYS116734"));
        #    }
        #
        #    if (!this.ShipCarrierId)
        #    {
        #        // "Carrier must be specified."
        #        return checkFailed("@SYS116735");
        #    }
        #
        #    return true;
        #}
      ENDSOURCE
      SOURCE #checkIfUpdate
        #/// <summary>
        #/// Determines whether the various posting updates are allowed for the order.
        #/// </summary>
        #/// <param name="_packedCheckIfUpdateContract">
        #/// Specifies which of the posting update allowance values to obtain for the order; optional.
        #/// </param>
        #/// <returns>
        #/// A packed instance of the <c>SalesTableCanBeUpdatedContract</c> class.
        #/// </returns>
        #server container checkIfUpdate(container _packedCheckIfUpdateContract = conNull())
        #{
        #    container   canBeUpdated;
        #    if (
        #        this.company()
        #        != curext())
        #    {
        #        changecompany(
        #                      this.company()
        #                      )
        #        {
        #            canBeUpdated = this.type().checkIfUpdate(_packedCheckIfUpdateContract);
        #        }
        #    }
        #    else
        #    {
        #        canBeUpdated = this.type().checkIfUpdate(_packedCheckIfUpdateContract);
        #    }
        #
        #    return canBeUpdated;
        #}
      ENDSOURCE
      SOURCE #checkIntrastatFulfillDate_HU
        #/// <summary>
        #/// Validates Intrastat fulfillment date.
        #/// </summary>
        #/// <returns>
        #/// ture if Intrastat fulfillment date is valid; otherwise, false.
        #/// </returns>
        #public boolean checkIntrastatFulfillDate_HU()
        #{
        #    LogisticsAddressCountryRegionId country;
        #    IntrastatParameters             intrastatParameters;
        #    ProjTable                       projTable;
        #    ProjInvoiceTable                projInvoiceTable;
        #
        #    if (this.ProjId)
        #    {
        #        projTable           = ProjTable::find(this.ProjId);
        #        projInvoiceTable    = ProjInvoiceTable::find(projTable.ProjInvoiceProjId);
        #        country             = projInvoiceTable.invoiceAddress().CountryRegionId;
        #    }
        #    else
        #    {
        #        country             = this.deliveryAddress().CountryRegionId;
        #    }
        #
        #    intrastatParameters = IntrastatParameters::find();
        #
        #    if (! country)
        #    {
        #        return checkFailed(strFmt("@GLS107637"));
        #    }
        #
        #    if (! IntrastatCountryRegionParameters::isInEU(country))
        #    {
        #        return true;
        #    }
        #
        #    if (intrastatParameters.IntrastatFulfillmentDateEmptyWarning_HU && ! this.IntrastatFulfillmentDate_HU)
        #    {
        #        return checkFailed(strFmt("@SYS4080012", fieldPName(SalesTable, IntrastatFulfillmentDate_HU)));
        #    }
        #
        #    return true;
        #}
      ENDSOURCE
      SOURCE #checkInventProfile_RU
        #public boolean checkInventProfile_RU(boolean _checkProfileId = false)
        #{
        #    SalesTable                  salesTableTmp;
        #    SalesTable_RU               salesTableTmpRU;
        #    SalesTable_RU               salesTableRU;
        #    SalesLine                   salesLine;
        #    InventDim                   inventDim;
        #    InventProfile_RU            inventProfile;
        #    SalesTable2LineParameters   salesTable2LineParameters;
        #    boolean                     ok = true;
        #
        #    salesTableTmp.data(this);
        #    salesTableTmp.salesTable_RU().setInventProfileId_RU();
        #
        #    salesTableRU = this.salesTable_RU();
        #    salesTableTmpRU = salesTableTmp.salesTable_RU();
        #
        #    if (salesTableRU.InventProfileType_RU != InventProfileType_RU::NotSpecified)
        #    {
        #        select firstonly salesLine
        #            where salesLine.SalesId                 == this.SalesId
        #        join InventProfileId_RU from inventDim
        #            where inventDim.InventDimId             == salesLine.InventDimId
        #        join TableId from inventProfile
        #            where inventProfile.InventProfileId     == inventDim.InventProfileId_RU
        #               && inventProfile.InventProfileType   != salesTableRU.InventProfileType_RU;
        #
        #        if (salesLine)
        #        {
        #            ok = checkFailed(strFmt("@GLS113728",
        #                                    inventDim.InventProfileId_RU,
        #                                    salesTableRU.InventProfileType_RU));
        #        }
        #
        #        if (salesTableRU.InventProfileType_RU != InventProfileType_RU::General)
        #        {
        #            select firstonly RecId from salesLine
        #                where salesLine.SalesId == this.SalesId &&
        #                      (salesLine.StockedProduct == NoYes::No ||
        #                      (salesLine.SalesCategory               &&
        #                      !salesLine.ItemId));
        #
        #            if (salesLine.RecId)
        #            {
        #                ok = checkFailed(
        #                    strFmt("@GLS220092",
        #                        salesTableRU.InventProfileType_RU));
        #            }
        #        }
        #        else if (InventProfile_RU::find(salesTableTmpRU.InventProfileId_RU).StockInTransit == StockInTransit_RU::BoughtInTransit)
        #        {
        #            select firstonly RecId from salesLine
        #                where salesLine.SalesId == this.SalesId      &&
        #                      (salesLine.StockedProduct == NoYes::No ||
        #                      (salesLine.SalesCategory               &&
        #                      !salesLine.ItemId));
        #
        #            if (salesLine.RecId)
        #            {
        #                ok = checkFailed(
        #                    strFmt("@GLS220091",
        #                        salesTableRU.InventProfileId_RU));
        #            }
        #        }
        #    }
        #
        #    if (!_checkProfileId)
        #    {
        #        salesTable2LineParameters = SalesTable2LineParameters::find(tableNum(SalesTable_RU), fieldNum(SalesTable_RU, InventProfileId_RU), false);
        #        if (salesTable2LineParameters.Table2LineUpdate == TradeTable2LineUpdate::Never)
        #        {
        #            // force check for consistent
        #            _checkProfileId = true;
        #        }
        #    }
        #
        #    if (_checkProfileId && salesTableTmpRU.InventProfileId_RU)
        #    {
        #        if (salesTableRU.InventProfileUseRelated_RU == NoYes::No)
        #        {
        #            select firstonly RecId from salesLine
        #                where salesLine.SalesId             == this.SalesId
        #            join InventProfileId_RU from inventDim
        #                where inventDim.InventDimId         == salesLine.InventDimId &&
        #                      inventDim.InventProfileId_RU                           &&
        #                      inventDim.InventProfileId_RU  != salesTableTmpRU.InventProfileId_RU;
        #
        #            if (salesLine)
        #            {
        #                ok = checkFailed(strFmt("@GLS113730",
        #                                        inventDim.InventProfileId_RU,
        #                                        salesTableTmpRU.InventProfileId_RU));
        #            }
        #        }
        #        else
        #        {
        #            while select salesLine
        #                group by TableId
        #                where salesLine.SalesId             == this.SalesId
        #            join inventDim
        #                group by InventProfileId_RU
        #                where inventDim.InventDimId         == salesLine.InventDimId
        #                   && inventDim.InventProfileId_RU
        #                   && inventDim.InventProfileId_RU  != salesTableTmpRU.InventProfileId_RU
        #            {
        #                if (! InventProfileRelation_RU::find(salesTableTmpRU.InventProfileId_RU, inventDim.InventProfileId_RU))
        #                {
        #                    ok = checkFailed(strFmt("@GLS113729",
        #                                            inventDim.InventProfileId_RU,
        #                                            salesTableTmpRU.InventProfileId_RU));
        #                }
        #            }
        #        }
        #    }
        #
        #    return ok;
        #}
        #
      ENDSOURCE
      SOURCE #checkInvoiceAccount
        #boolean checkInvoiceAccount()
        #{
        #    MCRCustPaymTotals mcrCustPaymTotals;
        #    CustVendorBlocked   blockLevel = CustTable::blocked(this.InvoiceAccount);
        #    if (isConfigurationkeyEnabled(configurationKeyNum(MCRCallCenter)))
        #    {
        #        if (this.RecId && this.InvoiceAccount != this.orig().InvoiceAccount)
        #        {
        #            // Check if one or more payments disallows modifying the invoice account.
        #            mcrCustPaymTotals =
        #                MCRCustPaymTotals::construct(this.TableId, this.RecId);
        #
        #            if (!mcrCustPaymTotals.allowEditInvoiceAccount())
        #            {
        #                error("@MCR11248");
        #                return false;
        #            }
        #        }
        #    }
        #
        #    switch (blockLevel)
        #    {
        #        case CustVendorBlocked::All:
        #            return checkFailed(strFmt("@SYS79283", this.InvoiceAccount, enum2str(blockLevel)));
        #        case CustVendorBlocked::Invoice:
        #            warning(strFmt(strFmt("@SYS79283", this.InvoiceAccount, enum2str(blockLevel))));
        #        break;
        #    }
        #    return true;
        #}
      ENDSOURCE
      SOURCE #checkInvoicePostingType_RU
        #public boolean checkInvoicePostingType_RU()
        #{
        #    boolean             ok = true;
        #    SalesLine           salesLine;
        #    SalesTable_RU       salesTableRU;
        #    InventDim           inventDim;
        #    InventProfile_RU    inventProfile;
        #    ;
        #    if (! this.RecId)
        #    {
        #        return ok;
        #    }
        #
        #    salesTableRU = this.salesTable_RU();
        #
        #    if (salesTableRU.InvoicePostingType_RU == SalesInvoicePostingType_RU::GoodsInRoute)
        #    {
        #        if (this.payment().Cash == NoYes::Yes)
        #        {
        #            ok = checkFailed("@GLS114805");
        #        }
        #
        #        ok = ok && InventProfile_RU::checkGITProfileType(salesTableRU.InventProfileType_RU);
        #
        #        if (ok)
        #        {
        #            select firstonly salesLine
        #                where salesLine.SalesId == this.SalesId
        #            join TableId from inventDim
        #                where inventDim.InventDimId == salesLine.InventDimId
        #            join InventProfileType from inventProfile
        #                where inventProfile.InventProfileId   == inventDim.InventProfileId_RU                   &&
        #                     (inventProfile.InventProfileType == InventProfileType_RU::CommissionAgent          ||
        #                      inventProfile.InventProfileType == InventProfileType_RU::CommissionPrincipalAgent ||
        #                      inventProfile.InventProfileType == InventProfileType_RU::Bailee);
        #
        #            if (salesLine)
        #            {
        #                ok = checkFailed(strFmt("@GLS114807", inventProfile.InventProfileType));
        #            }
        #        }
        #
        #        if (ok)
        #        {
        #            select firstonly RecId from salesLine
        #                where salesLine.SalesId == this.SalesId     &&
        #                     (salesLine.StockedProduct == NoYes::No ||
        #                     (!salesLine.ItemId                     &&
        #                      salesLine.SalesCategory));
        #
        #            if (salesLine.RecId)
        #            {
        #                ok = checkFailed("@GLS220090");
        #            }
        #        }
        #    }
        #
        #    return ok;
        #}
        #
      ENDSOURCE
      SOURCE #checkMarkupTrans_RU
        #server boolean checkMarkupTrans_RU()
        #{
        #    ;
        #    return MarkupTrans::checkMarkupTransCustVend_RU(this.TableId, this.RecId);
        #}
        #
      ENDSOURCE
      SOURCE #checkPayment
        #boolean checkPayment()
        #{
        #    #ISOCountryRegionCodes
        #    PaymTerm        paymTerm;
        #    CreditCardCust creditCardCust;
        #    CreditCardProcessors creditCardProcessors;
        #
        #    paymTerm = this.payment();
        #    if (paymTerm.PaymMethod == NetCurrent::COD && !this.returnItem())
        #    {
        #        if (!this.DlvMode)
        #        {
        #            return checkFailed(strFmt("@SYS24563"));
        #        }
        #
        #        if (this.PaymentSched)
        #        {
        #            return checkFailed(strFmt("@SYS24623"));
        #        }
        #    }
        #
        #    if (this.PaymentSched && this.FixedDueDate)
        #    {
        #        return checkFailed("@SYS69828");
        #    }
        #
        #    if (paymTerm.CreditCardPaymentType == CreditCardPaymentType::CreditCard && this.CreditCardCustRefId != 0)
        #    {
        #        creditCardCust = CreditCardCust::find(this.CreditCardCustRefId);
        #        creditCardProcessors = CreditCardProcessors::find(creditCardCust.CreditCardProcessors);
        #        if (creditCardCust && !CreditCardProcessors::validateCurrencyForProcessor(creditCardProcessors, this.CurrencyCode, creditCardCust.CreditCardTypeName) ||
        #                !this.checkPaymMode())
        #        {
        #            // The active credit card processor does not supports this currency.
        #            return checkFailed(strFmt("@SYS327527", creditCardProcessors.Name, this.CurrencyCode));
        #        }
        #
        #        if (this.PaymentSched)
        #        {
        #            return checkFailed("@SYS27358");
        #        }
        #    }
        #
        #    if (!this.ReceiptDateConfirmed              &&
        #        paymTerm.UseDeliveryDateForDueDate_ES   &&
        #        SysCountryRegionCode::isLegalEntityInCountryRegion([#isoES]))
        #    {
        #        return checkFailed(strFmt("@SYS4000478", this.Payment));
        #    }
        #
        #    return true;
        #}
      ENDSOURCE
      SOURCE #checkPaymMode
        #/// <summary>
        #/// Checks whether the payment mode is valid.
        #/// </summary>
        #/// <returns>
        #/// true if the payment mode is valid; otherwise, false.
        #/// </returns>
        #public boolean checkPaymMode()
        #{
        #    boolean ok = true;
        #    CustPaymModeTable custPaymModeTable;
        #    CustParameters custParameters;
        #    CreditCardCust creditCardCust;
        #    CreditCardProcessors creditCardProcessors;
        #
        #    if (this.payment().CreditCardPaymentType == CreditCardPaymentType::CreditCard)
        #    {
        #        creditCardCust = CreditCardCust::find(this.CreditCardCustRefId);
        #        creditCardProcessors = CreditCardProcessors::find(creditCardCust.CreditCardProcessors);
        #        custPaymModeTable = CustPaymModeTable::find(this.PaymMode);
        #
        #        if (custPaymModeTable.offsetLedgerDimension() &&
        #                !CreditCardProcessors::validateAccountForProcessor(creditCardProcessors, custPaymModeTable.paymACType(), custPaymModeTable.offsetLedgerDimension(), creditCardCust.CreditCardTypeName))
        #        {
        #            ok = false;
        #        }
        #        else if (custPaymModeTable.offsetLedgerDimension() == 0)
        #        {
        #            custParameters = CustParameters::find();
        #
        #            if (!CreditCardProcessors::validateAccountForProcessor(creditCardProcessors, custParameters.CreditCardPostingAccountType, custParameters.CreditCardPostingLedgerDimension, creditCardCust.CreditCardTypeName))
        #            {
        #                ok = false;
        #            }
        #        }
        #    }
        #
        #    return ok;
        #}
      ENDSOURCE
      SOURCE #checkReservation
        #boolean checkReservation()
        #{
        #    SalesLine   salesLine;
        #    boolean     ok = true;
        #
        #    select firstonly salesLine
        #           index hint SalesLineIdx
        #           where salesLine.SalesId          == this.SalesId
        #           &&    salesLine.InventRefTransId != '';
        #    if (salesLine
        #    &&  this.Reservation == ItemReservation::Explosion)
        #    {
        #        ok = checkFailed("@SYS105404");
        #    }
        #
        #    return ok;
        #}
      ENDSOURCE
      SOURCE #checkUpdate
        #boolean  checkUpdate(boolean  useWarning        = true,
        #                     boolean _interCompanyCheck = true)
        #{
        #    return this.type().checkUpdate(useWarning,_interCompanyCheck);
        #}
      ENDSOURCE
      SOURCE #clearAddressReference
        #public void clearAddressReference()
        #{
        #    this.AddressRefRecId    = 0;
        #    this.AddressRefTableId  = 0;
        #}
      ENDSOURCE
      SOURCE #clearAllPriceDiscChangePolicies
        #/// <summary>
        #/// Removes all the previously set price discount change policies for the corresponding
        #/// <c>SalesTable</c> record.
        #/// </summary>
        #/// <remarks>
        #/// Removes the policies from both manual and system groups.
        #/// </remarks>
        #void clearAllPriceDiscChangePolicies()
        #{
        #    this.type().clearAllPriceDiscChangePolicies();
        #}
      ENDSOURCE
      SOURCE #clearingLedgerDimension
        #public LedgerDimensionDefaultAccount clearingLedgerDimension(CustPostingProfile _postingProfile_RU = '')
        #{
        #    SalesTableType salesTableType;
        #
        #    salesTableType = this.type();
        #    return salesTableType.clearingLedgerDimension(_postingProfile_RU);
        #}
      ENDSOURCE
      SOURCE #clearingPeriod
        #ClearingPeriod clearingPeriod()
        #{
        #    return this.custTable_InvoiceAccount().clearingPeriod();
        #}
      ENDSOURCE
      SOURCE #companyInfo
        #/// <summary>
        #/// Retrieves a <c>CompanyInfo</c> record that is associated with the current record.
        #/// </summary>
        #/// <returns>
        #/// The <c>CompanyInfo</c> record.
        #/// </returns>
        #public CompanyInfo companyInfo()
        #{
        #    return CompanyInfo::findDataArea(this.company());
        #}
      ENDSOURCE
      SOURCE #contactPerson
        #ContactPerson contactPerson(boolean _forUpdate = false)
        #{
        #    return ContactPerson::find(this.ContactPersonId, _forUpdate);
        #}
      ENDSOURCE
      SOURCE #contactPersonName
        #display ContactPersonName contactPersonName()
        #{
        #    return ContactPerson::name(this.ContactPersonId);
        #}
      ENDSOURCE
      SOURCE #contributionMargin
        #server display ContributionMarginMST contributionMargin()
        #{
        #    SalesTotals             salesTotals;
        #    ContributionMarginMST   contributionMargin;
        #
        #    salesTotals = SalesTotals::construct(this, SalesUpdate::All);
        #    salesTotals.prepareBalanceCalculation();
        #    salesTotals.prepareCostValueCalculation();
        #    salesTotals.calc();
        #
        #    contributionMargin   = Currency::mstAmount(salesTotals.totalBalance() - salesTotals.totalEndDisc(), this.CurrencyCode);
        #    contributionMargin  -= salesTotals.totalCostValue();
        #
        #    return contributionMargin;
        #}
      ENDSOURCE
      SOURCE #convertCurrencyCode
        #server void convertCurrencyCode(CurrencyCode currencyCode, TradeCurencyConversion tradeCurencyConversion = TradeCurencyConversion::ExchRate)
        #{
        #    // <GEERU>
        #    #ISOCountryRegionCodes
        #    // </GEERU>
        #
        #    SalesLine                 salesLine;
        #    MarkupTrans               markupTrans;
        #
        #    ttsbegin;
        #
        #    while select forupdate salesLine
        #          where salesLine.SalesId   == this.SalesId
        #    {
        #        salesLine.convertCurrencyCode(currencyCode, tradeCurencyConversion);
        #        salesLine.doUpdate();
        #
        #        // <GEERU>
        #        if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]) &&
        #            isConfigurationkeyEnabled(configurationKeyNum(MCRCallCenter)))
        #        {
        #            salesLine.SysExtensionSerializerMap::postUpdate();
        #        }
        #        // </GEERU>
        #
        #        if (salesLine.MatchingAgreementLine && !AgreementLine::find(salesLine.MatchingAgreementLine).isLinkValid(salesLine,false))
        #        {
        #            salesLine.unLinkAgreementLine();
        #            info(strFmt("@SYS306908", this.SalesId, salesLine.ItemId));
        #        }
        #    }
        #
        #    while select forupdate markupTrans
        #          index hint TableRecIdIdx
        #          where markupTrans.TransTableId  == this.TableId &&
        #                markupTrans.TransRecId    == this.RecId   &&
        #               !markupTrans.IsDeleted
        #    {
        #        markupTrans.convertCurrencyCode(currencyCode);
        #        markupTrans.doUpdate();
        #    }
        #
        #    CustPaymSched::deleteCustPaymSched(this.TableId, this.RecId);
        #
        #    if (this.FixedExchRate)
        #    {
        #        info(strFmt("@SYS78763", this.SalesId));
        #    }
        #
        #    this.FixedExchRate  = 0;
        #
        #    this.CurrencyCode = currencyCode;
        #
        #    ttscommit;
        #}
      ENDSOURCE
      SOURCE #copyAddressToLine
        #server void  copyAddressToLine(DialogButton    copyAddress,
        #                               SalesTable      salesTable,
        #                               DeliveryDateUpdateInLines deliveryDateUpdateInLines = DeliveryDateUpdateInLines::RevertDeliveryDateControl)
        #{
        #    SalesLine  salesLine;
        #
        #    if (copyAddress == DialogButton::Cancel)
        #    {
        #        return;
        #    }
        #
        #    ttsbegin;
        #
        #    while select forupdate salesLine
        #        where salesLine.SalesId == this.SalesId &&
        #            (copyAddress                 == DialogButton::YesToAll ||
        #             salesLine.DeliveryPostalAddress == salesTable.orig().DeliveryPostalAddress)
        #    {
        #        if (!salesLine.isDropShipmentPOLineInvoiceMatched()
        #         && !salesLine.isInterCompanyOrderLineInvoiceMatched())
        #        {
        #            salesLine.setAddressFromSalesTable(this);
        #
        #            if (salesLine.DeliveryDateControlType != SalesDeliveryDateControlType::None)
        #            {
        #                SalesLineDeliveryDateControlRecalculate::applyDeliveryDateControl(salesLine, deliveryDateUpdateInLines);
        #            }
        #
        #            if (#PdsMRCEnabled)
        #            {
        #                if (!salesLine.validateWrite(true))
        #                {
        #                    throw error("@PDS894");
        #                }
        #            }
        #
        #            salesLine.write();
        #        }
        #    }
        #
        #    ttscommit;
        #}
        #
      ENDSOURCE
      SOURCE #copyDimension
        #/// <summary>
        #/// Returns a dimension set that can be applied to the <c>defaultDimension</c> field on this table.
        #/// </summary>
        #/// <param name="_defaultDimension">
        #/// A dimension set that should be applied to the <c>defaultDimension</c> field on this table.
        #/// </param>
        #/// <param name="_dimensionCopy">
        #/// A <c>dimensionCopy</c> object that was previously instantiated by using the current buffer;
        #/// optional.
        #/// </param>
        #/// <returns>
        #/// A dimension set that can be applied to the <c>defaultDimension</c> field on this table.
        #/// </returns>
        #/// <remarks>
        #/// This method makes sure that potential linked dimensions are not overwritten.
        #/// </remarks>
        #
        #public DimensionDefault copyDimension(
        #    DimensionDefault _defaultDimension,
        #    DimensionCopy    _dimensionCopy = DimensionCopy::newFromTable(this,
        #                                                                  this.companyInfo().RecId
        #                                                                  )
        #    )
        #{
        #    return _dimensionCopy.copy(_defaultDimension);
        #}
      ENDSOURCE
      SOURCE #copyPaymentSched
        #server void copyPaymentSched(CustInvoiceJour custInvoiceJour)
        #{
        #    CustPaymSched       custPaymSched;
        #    CustVendPaymSched   custVendPaymSched;
        #
        #    ttsbegin;
        #
        #    select custPaymSched
        #    where custPaymSched.ExtTableId       == this.TableId &&
        #          custPaymSched.ExtRecId         == this.RecId;
        #
        #    if (custPaymSched.RecId)
        #    {
        #        custVendPaymSched = CustVendPaymSched::construct(SysModule::Cust, custInvoiceJour);
        #        custVendPaymSched.copyCustVendPaymSched(custPaymSched);
        #    }
        #
        #    ttscommit;
        #}
      ENDSOURCE
      SOURCE #copyRMALines
        #/// <summary>
        #/// Copies the lines from a return order to a sales order.
        #/// </summary>
        #/// <param name="_returnTable">
        #/// A <c>SalesTable</c> record.
        #/// </param>
        #/// <param name="_copyRMALines">
        #/// A Boolean value that indicates whether the lines should be copied.
        #/// </param>
        #void copyRMALines(SalesTable _returnTable, NoYes _copyRMALines = NoYes::No)
        #{
        #    SalesLine       salesLine;
        #    SalesLine       replacementLine;
        #    SalesTable      returnTable = SalesTable::findRecId(_returnTable.RecId, true);
        #    InventDim       inventDim;
        #    SalesLine       origSalesLine;
        #    SalesLine_BR    salesLine_BR;
        #    SalesTableLinks     salesTableLinks;
        #    MCRReturnSalesTable mcrReturnSalesTable;
        #    MCRReturnSalesTable mcrReturnSalesTableLocal;
        #    boolean mcrCallCenterEnabled = isConfigurationkeyEnabled(configurationKeyNum(MCRCallCenter));
        #
        #    ttsbegin;
        #    if (mcrCallCenterEnabled)
        #    {
        #        returnTable.ReturnReplacementId = this.SalesId;
        #        if (RetailMCRChannelTable::mcrEnableOrderCompletion(_returnTable))
        #        {
        #            // Support credit being applied to the exchange and linking records.
        #            mcrReturnSalesTable = returnTable.mcrReturnSalesTable();
        #            mcrReturnSalesTable.ApplyCreditToExchange = NoYes::Yes;
        #            mcrReturnSalesTable.AdvanceExchange = MCRAdvanceExchange::DoNotRelease;
        #            mcrReturnSalesTable.AdvanceCredit = NoYes::No;
        #            returnTable.mcrPackMCRReturnSalesTable(mcrReturnSalesTable);
        #        }
        #
        #        if(this.ReturnReplacementId)
        #        {
        #            mcrReturnSalesTableLocal = this.mcrReturnSalesTable();
        #            salesTableLinks.MainSalesId = mcrReturnSalesTableLocal.OriginalSalesId;
        #            salesTableLinks.SubSalesId = this.ReturnReplacementId;
        #
        #            salesTableLinks.insert();
        #        }
        #
        #        returnTable.update();
        #    }
        #
        #    if (_copyRMALines == NoYes::Yes && returnTable.returnItem())
        #    {
        #        while select forupdate salesLine
        #            where salesLine.SalesId         == returnTable.SalesId
        #                && salesLine.StockedProduct == true
        #                && salesLine.ReturnStatus   != ReturnStatusLine::Canceled
        #        {
        #            replacementLine.clear();
        #
        #            replacementLine.SalesType = SalesType::Sales;
        #
        #            if (BrazilParameters::isEnabled())
        #            {
        #                // For BR returned orders the fiscal information needs to be retrieved from
        #                // the original sales order line.
        #                origSalesLine = null;
        #                origSalesLine = SalesLine::findInventTransId(salesLine.InventTransIdReturn);
        #                if (origSalesLine)
        #                {
        #                    salesLine_BR = salesLine.salesLine_BR();
        #                    salesLine_BR.TaxServiceCode_BR     = origSalesLine.salesLine_BR().TaxServiceCode_BR;
        #                    salesLine_BR.DeliveryCFOPTable_BR  = origSalesLine.salesLine_BR().DeliveryCFOPTable_BR;
        #                    salesLine.packSalesLine_BR(salesLine_BR);
        #
        #                    salesLine.type().updateFiscalDocumentText_BR(FiscalDocumentTextType_BR::CFOP);
        #                }
        #            }
        #
        #
        #            // copy from return line
        #            replacementLine.initFromSalesLine(salesLine);
        #
        #            //This call is to utilize the alternative-item functionallity
        #            replacementLine.createAlternativeItem(replacementLine.inventDim(), replacementLine);
        #
        #            // update with replacement sales order information
        #            replacementLine.initFromSalesTable(this);
        #
        #            replacementLine.DefaultDimension = replacementLine.copyDimension(salesLine.DefaultDimension);
        #
        #            if (replacementLine.isStocked())
        #            {
        #                inventDim = replacementLine.inventDim();
        #                replacementLine.setDeliveryDateControlType(inventDim.InventDimId);
        #                replacementLine.initBarcode(inventDim);
        #                replacementLine.calcPackingUnit(inventDim);
        #                replacementLine.calcPackingUnitQty(inventDim);
        #            }
        #
        #            replacementLine.PdsCWQty    = -salesLine.PdsCWExpectedRetQty;
        #
        #            replacementLine.SalesQty    = -salesLine.ExpectedRetQty;
        #            replacementLine.SalesPrice  = Currency::curPrice2CurPrice(replacementLine.SalesPrice, salesLine.CurrencyCode, replacementLine.CurrencyCode);
        #            replacementLine.LineAmount  = -Currency::curAmount2CurAmount(replacementLine.LineAmount, salesLine.CurrencyCode, replacementLine.CurrencyCode);
        #
        #            SalesCalcAvailableDlvDates::initDateFields(replacementLine);
        #
        #            replacementLine.LineAmount  = replacementLine.calcLineAmount();
        #
        #            replacementLine.createLine(true, false, false, true, true, false, this.Reservation == ItemReservation::Automatic, true
        #                , ''                // _oldInventTransId
        #                , false             // _ignoreSalesTableInventDim
        #                , true              // _setLineNum
        #                , true              // _searchAgreementLine
        #                , null              // _smaServiceOrderTable
        #                , 0                 // _oldAgreementLineRecId
        #                , salesLine.InventTransId); // _mcrExchangeInventRefTransId
        #        }
        #    }
        #
        #    returnTable.ReturnReplacementId = this.SalesId;
        #    returnTable.update();
        #
        #    ttscommit;
        #}
        #
        #
      ENDSOURCE
      SOURCE #copyThirdPartyAddressFromCust
        #/// <summary>
        #/// Copies address to the <c>SalesTable</c> buffer.
        #/// </summary>
        #/// <remarks>
        #/// When the customer has third-party information, the user is prompted whether to copy to sales order.
        #/// </remarks>
        #void copyThirdPartyAddressFromCust()
        #{
        #    CustTable       fromCustTable;
        #    SalesLine       toSalesLine;
        #
        #    LogisticsPostalAddress address;
        #    LogisticsLocationDefault defaultLocation;
        #    LogisticsLocationRole thirdPartyShipRole;
        #    Addressing      oldThirdPartyBillingAddr;
        #
        #    ShipCarrierAddress shipCarrierAddress;
        #    LogisticsLocationEntity fromTpLocation;
        #
        #    fromCustTable = this.custTable_CustAccount();
        #
        #    address = LogisticsPostalAddress::findRecId(this.ShipCarrierPostalAddress);
        #    oldThirdPartyBillingAddr = address.Address;
        #
        #    if (this.ShipCarrierPostalAddress)
        #    {
        #        ttsbegin;
        #
        #        // Update the sales lines delivery information
        #        toSalesLine.skipDataMethods(true);
        #        update_recordset toSalesLine setting
        #            DeliveryName = fromCustTable.name(),
        #            ShipCarrierAccount = fromCustTable.ShipCarrierAccount,
        #            ShipCarrierAccountCode = fromCustTable.ShipCarrierAccountCode,
        #            ShipCarrierId = fromCustTable.ShipCarrierId,
        #            DlvMode = fromCustTable.DlvMode
        #            where toSalesLine.SalesId == this.SalesId;
        #
        #        ttscommit;
        #    }
        #
        #    fromTpLocation = LogisticsLocationEntity::findLocation(fromCustTable, LogisticsLocationRoleType::ShipCarrierThirdPartyShipping);
        #
        #    if (!(fromTpLocation && fromTpLocation.parmLocationRecId()))
        #    {
        #        return;
        #    }
        #
        #    ttsbegin;
        #
        #    defaultLocation = LogisticsLocationDefault::construct(fromCustTable);
        #    thirdPartyShipRole = LogisticsLocationRole::findBytype(LogisticsLocationRoleType::ShipCarrierThirdPartyShipping);
        #    if (defaultLocation.defaultExists(thirdPartyShipRole))
        #    {
        #        address = LogisticsPostalAddress::findByLocation(defaultLocation.getDefaultLocation(thirdPartyShipRole).RecId);
        #        this.ShipCarrierPostalAddress = address.RecId;
        #    }
        #
        #    if (address)
        #    {
        #        shipCarrierAddress = ShipCarrierAddress::findByCustomerLocation(fromCustTable.AccountNum, address.Location);
        #    }
        #    else if (thirdPartyShipRole)
        #    {
        #        shipCarrierAddress = ShipCarrierAddress::findByCustomerLocation(fromCustTable.AccountNum, fromTpLocation.parmLocationRecId());
        #    }
        #
        #    this.ShipCarrierAccount = shipCarrierAddress.ShipCarrierAccount;
        #    this.ShipCarrierAccountCode = shipCarrierAddress.ShipCarrierAccountCode;
        #    this.ShipCarrierId = shipCarrierAddress.ShipCarrierId;
        #    if (shipCarrierAddress.DlvTermId == '')
        #    {
        #        this.DlvTerm = fromCustTable.DlvTerm;
        #    }
        #    else
        #    {
        #        this.DlvTerm = shipCarrierAddress.DlvTermId;
        #    }
        #
        #    if (shipCarrierAddress.DlvModeId == '')
        #    {
        #        this.DlvMode = fromCustTable.DlvMode;
        #    }
        #    else
        #    {
        #        this.DlvMode = shipCarrierAddress.DlvModeId;
        #    }
        #    this.ShipCarrierBlindShipment = shipCarrierAddress.ShipCarrierBlindShipment;
        #    this.ShipCarrierFuelSurcharge = fromCustTable.ShipCarrierFuelSurcharge;
        #    this.ShipCarrierResidential = shipCarrierAddress.ShipCarrierResidentialDest;
        #
        #    if (this.RecId)
        #    {
        #        this.update();
        #    }
        #    ttscommit;
        #
        #    if (this.tpAddress() != oldThirdPartyBillingAddr && SalesLine::exist(this.SalesId))
        #    {
        #        if (SalesTable::promptCopyThirdPartyBillingAddress() == DialogButton::Yes)
        #        {
        #            this.copyThirdPartyBillingAddressToLine();
        #        }
        #    }
        #}
      ENDSOURCE
      SOURCE #copyThirdPartyBillingAddressToLine
        #server void  copyThirdPartyBillingAddressToLine()
        #{
        #    SalesLine               salesLine;
        #    ShipCarrierAddress      shipCarrierAddress;
        #    LogisticsLocation       carrierLocation = LogisticsLocation::find(LogisticsPostalAddress::findRecId(this.ShipCarrierPostalAddress).Location);
        #    DlvModeId               custDlvModeId = this.custTable_CustAccount().DlvMode;
        #
        #    ttsbegin;
        #
        #    select firstonly ShipCarrierAccount,
        #                     ShipCarrierAccountCode,
        #                     ShipCarrierId,
        #                     DlvModeId
        #        from shipCarrierAddress
        #        where shipCarrierAddress.Location == carrierLocation.RecId;
        #
        #    while select forupdate salesLine
        #        where salesLine.SalesId == this.SalesId
        #    {
        #        if (!salesLine.isDropShipmentPOLineInvoiceMatched()
        #            && !salesLine.isInterCompanyOrderLineInvoiceMatched())
        #        {
        #            salesLine.SalesShipCarrierMap::setShipCarrierFromLogisticsLocation(
        #                carrierLocation,
        #                this.ShipCarrierPostalAddress,
        #                shipCarrierAddress);
        #            salesLine.update();
        #        }
        #    }
        #
        #    ttscommit;
        #}
      ENDSOURCE
      SOURCE #createCarrierInfoAndThirdPartyAddress
        #/// <summary>
        #/// Initializes third-party shipping address and carrier information.
        #/// </summary>
        #void createCarrierInfoAndThirdPartyAddress()
        #{
        #    CustTable               custTable;
        #    DlvMode                 dlvMode;
        #    LogisticsLocation       location;
        #    LogisticsLocationEntity locationEntity;
        #
        #    ttsbegin;
        #    if (isConfigurationkeyEnabled(configurationKeyNum(ShipCarrier)) &&
        #        !this.ShipCarrierPostalAddress)
        #    {
        #        custTable = CustTable::find(this.CustAccount);
        #
        #        location = LogisticsLocationDefault::findSimpleDefault(custTable, LogisticsLocationRole::findBytype(
        #            LogisticsLocationRoleType::ShipCarrierThirdPartyShipping));
        #        locationEntity = LogisticsLocationEntity::constructFromLocationRecId(location.RecId);
        #
        #        //if the delivery mode has not been changed in create form,
        #        //and the customer has those info, copy from custTable
        #        if (this.DlvMode == custTable.DlvMode && location)
        #        {
        #            this.selectForUpdate(true);
        #            this.ShipCarrierPostalAddress = locationEntity.getPostalAddress().RecId;
        #            this.update();
        #        }
        #        //otherwise, copy carrierID from dlvMode
        #        else
        #        {
        #            dlvMode = DlvMode::find(this.DlvMode);
        #            if (dlvMode && dlvMode.ShipCarrierId)
        #            {
        #                this.selectForUpdate(true);
        #                this.ShipCarrierPostalAddress = locationEntity.getPostalAddress().RecId;
        #                this.update();
        #            }
        #        }
        #    }
        #
        #    ttscommit;
        #}
      ENDSOURCE
      SOURCE #createCustTrans_BR
        #/// <summary>
        #/// Returns if the invoice will create customer transactions based on <c>SalesPurchOperationTye_BR</c> configuration.
        #/// </summary>
        #/// <returns>
        #/// Returns true is operation type is not set on <c>salesTable</c> or the operation type is configured to create customer transactions.
        #/// </returns>
        #public boolean createCustTrans_BR()
        #{
        #    return BrazilParameters::isEnabled() == false
        #        || this.salesTable_BR().SalesPurchOperationType_BR == 0
        #        || SalesPurchOperationType_BR::find(this.salesTable_BR().SalesPurchOperationType_BR).CreateFinancialTrans;
        #}
      ENDSOURCE
      SOURCE #createDate
        #/// <summary>
        #/// Retrieves the creation date of the current record.
        #/// </summary>
        #/// <returns>
        #/// The creation date of the current record.
        #/// </returns>
        #/// <remarks>
        #/// Retrieves the date only. Used in fact boxes.
        #/// </remarks>
        #display CreationDate  createDate()
        #{
        #    return DateTimeUtil::date(this.CreatedDateTime);
        #}
      ENDSOURCE
      SOURCE #createInventTrans_BR
        #/// <summary>
        #/// Returns if the invoice will create inventory transactions based on <c>SalesPurchOperationTye_BR</c> configuration.
        #/// </summary>
        #/// <returns>
        #/// Returns true is operation type is not set on <c>salesTable</c> or the operation type is configured to inventory transactions.
        #/// </returns>
        #public boolean createInventTrans_BR()
        #{
        #    return BrazilParameters::isEnabled() == false
        #        || this.salesTable_BR().SalesPurchOperationType_BR == false
        #        || SalesPurchOperationType_BR::find(this.salesTable_BR().SalesPurchOperationType_BR).CreateInventTrans;
        #}
      ENDSOURCE
      SOURCE #createMarkupTrans
        #/// <summary>
        #/// Creates markups for the sales order.
        #/// </summary>
        #/// <param name="_deleteExistingMarkupTrans">
        #/// Determines whether to delete existing markups before creating the new.
        #/// </param>
        #/// <param name="_createTieredMarkups">
        #/// Determines whether to create tiered markups. If this parameter is true then _deleteExistingMarkupTrans will be reset to false.
        #/// In this case only existing tiered markups will be deleted before creating the new.
        #/// </param>
        #server public void createMarkupTrans(boolean _deleteExistingMarkupTrans = true,
        #                                     boolean _createTieredMarkups = false)
        #{
        #    Amount  totalLineAmount;
        #    boolean deleteMarkups = _deleteExistingMarkupTrans;
        #    NoYes   mcrReturnValue;
        #
        #    if (this.markupAllowed())
        #    {
        #        if (this.SalesType == SalesType::ReturnItem)
        #        {
        #            mcrReturnValue = true;
        #        }
        #        else
        #        {
        #            mcrReturnValue = false;
        #        }
        #
        #        ttsbegin;
        #
        #        if (_createTieredMarkups)
        #        {
        #            totalLineAmount = this.getTotalLineAmount();
        #            MarkupTrans::deleteTieredCharges(this.TableId, this.RecId);
        #            deleteMarkups = false;
        #        }
        #
        #        if (!_createTieredMarkups || totalLineAmount > 0)
        #        {
        #            Markup::insertMarkupTrans(HeadingLine::Heading,
        #                                      MarkupModuleType::Cust,
        #                                      this,
        #                                      this.CustAccount,
        #                                      this.MarkupGroup,
        #                                      this.CurrencyCode,
        #                                      this.LanguageId,
        #                                      '',
        #                                      this.MarkupGroup,
        #                                      false,
        #                                      deleteMarkups,
        #                                      this.DlvMode,
        #                                      DlvMode::find(this.DlvMode).MarkupGroup,
        #                                      totalLineAmount,
        #                                      mcrReturnValue
        #                                     );
        #
        #            if (this.DlvMode)
        #            {
        #                // Handle delivery charges
        #                Markup::insertMarkupTrans(HeadingLine::Heading,
        #                                        MarkupModuleType::Delivery,
        #                                        this,
        #                                        this.CustAccount,
        #                                        this.MarkupGroup,
        #                                        this.CurrencyCode,
        #                                        this.LanguageId,
        #                                        '',
        #                                        this.MarkupGroup,
        #                                        false,
        #                                        false,
        #                                        this.DlvMode,
        #                                        DlvMode::find(this.DlvMode).MarkupGroup,
        #                                        totalLineAmount
        #                                    );
        #            }
        #
        #            if (this.isInterCompanyOrder())
        #            {
        #                Markup::setMarkupKeepForIntercompany(this);
        #            }
        #        }
        #
        #        ttscommit;
        #    }
        #}
      ENDSOURCE
      SOURCE #createOneTimeAccount
        #client server void createOneTimeAccount()
        #{
        #    boolean resetTmpCustomerName;
        #
        #    if (!this.DeliveryName)
        #    {//DeliveryName is used as customer name and is mandatory.
        #     //The customer name is updated again in transferToOnetimeCustomer which is called as soon as the sales order is being created.
        #        this.DeliveryName = "@SYS23011";
        #        resetTmpCustomerName = true;
        #    }
        #
        #    this.CustAccount = CustTable::createOneTimeAccount(this);
        #    this.initFromCustTable();
        #
        #    if (resetTmpCustomerName)
        #    {
        #        this.DeliveryName = '';
        #        this.SalesName = '';
        #    }
        #
        #    if (!this.InvoiceAccount)
        #    {
        #        this.InvoiceAccount = this.CustAccount;
        #    }
        #}
      ENDSOURCE
      SOURCE #createPaymentSched
        #server void createPaymentSched()
        #{
        #    CustVendPaymSched   custVendPaymSched;
        #    SalesTotals         salesTotals = SalesTotals::construct(this, SalesUpdate::All);
        #    CFMPlannedPaymentCalc cfmPlannedPaymentCalc;
        #
        #    salesTotals.prepareTotalAmountCalculation();
        #    salesTotals.calc();
        #
        #    custVendPaymSched = CustVendPaymSched::construct(SysModule::Cust,this);
        #    custVendPaymSched.setSalesTotals(salesTotals);
        #    custVendPaymSched.createPaymSched(PaymSched::find(this.PaymentSched));
        #
        #    if (CFMParameters::isModuleEnabled())
        #    {
        #        cfmPlannedPaymentCalc = CFMPlannedPaymentCalc::construct(this);
        #        if (cfmPlannedPaymentCalc)
        #        {
        #            cfmPlannedPaymentCalc.calc();
        #        }
        #    }
        #}
      ENDSOURCE
      SOURCE #createReplacementOrderAllowed
        #public boolean createReplacementOrderAllowed(SalesLine _salesLine = null)
        #{
        #    boolean ret = false;
        #    SalesLine localSalesLine = _salesLine as SalesLine;
        #
        #    if (this.isInterCompanyOrder()
        #    &&  this.InterCompanyDirectDeliveryOrig)
        #    {
        #        ret = false;
        #    }
        #    else if (this.ReturnStatus == ReturnStatusHeader::Created
        #         && !this.ReturnReplacementId
        #         && !this.interCompanyReplacementRegistered())
        #    {
        #        if (!localSalesLine.isStocked())
        #        {
        #            select firstonly localSalesLine
        #                where localSalesLine.SalesId == this.SalesId
        #                    && localSalesLine.StockedProduct;
        #
        #            ret = localSalesLine.RecId;
        #        }
        #        else
        #        {
        #            ret = true;
        #        }
        #    }
        #
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #createReturnMarkupTrans
        #server void createReturnMarkupTrans()
        #{
        #    if (this.markupAllowed())
        #    {
        #       Markup::insertReturnMarkupTrans(HeadingLine::Heading,
        #                                       MarkupModuleType::Cust,
        #                                       this,
        #                                       this.CustAccount,
        #                                       this.MarkupGroup,
        #                                       this.LanguageId);
        #    }
        #}
      ENDSOURCE
      SOURCE #creditCardAuthorizationCode
        #/// <summary>
        #/// Returns the authorization code that came from the credit card processor.
        #/// </summary>
        #/// <returns>
        #/// The authorization code returned by the credit card processor.
        #/// </returns>
        #[SysClientCacheDataMethodAttribute(true)]
        #public display CreditCardAuthorization creditCardAuthorizationCode()
        #{
        #    return CreditCardAuthTrans::findValidPreApproval(this.SalesId).Authorization;
        #}
      ENDSOURCE
      SOURCE #creditCardBypassCreditLimit
        #boolean creditCardBypassCreditLimit()
        #{
        #    return (RetailParameters::isRetailEnabledAndInUse() && this.isRetailSale()) || this.payment().CreditCardCreditCheck == CreditCardCreditCheck::ByPass;
        #}
      ENDSOURCE
      SOURCE #creditCardDoPreAuthorize
        #/// <summary>
        #/// Authorizes a credit card for a sales order.
        #/// </summary>
        #/// <param name="_presentExtraMsg">
        #/// true to display extra messages; otherwise, false.
        #/// </param>
        #/// <returns>
        #/// true if the authorization process was sucessful or not needed; otherwise, false.
        #/// </returns>
        #/// <remarks>
        #/// Authorization is required for a sales order if:
        #/// 1) the credit cards feature is configured,
        #/// 2) the payment type of the sales order is card card and
        #/// 3) credit card processing is configured to require authorization.
        #/// </remarks>
        #public boolean creditCardDoPreAuthorize(boolean _presentExtraMsg = true)
        #{
        #    // Only pre-authorization credit card when needed
        #    if (this.isCreditCardPaymentType() && CustParameters::find().CreditCardPreAuthorization)
        #    {
        #        return CreditCardProcess::doPreAuth(this, _presentExtraMsg);
        #    }
        #
        #    return true;
        #}
      ENDSOURCE
      SOURCE #creditCardPreauthorizationAmount
        #/// <summary>
        #/// Returns the preauthorization amount charged to the credit card.
        #/// </summary>
        #/// <returns>
        #/// The preauthorization amount for the credit card.
        #/// </returns>
        #[SysClientCacheDataMethodAttribute(true)]
        #public display CreditCardPreauthorizationAmount creditCardPreauthorizationAmount()
        #{
        #    return CreditCardAuthTrans::findValidPreApproval(this.SalesId).ApprovalAmountCur;
        #}
      ENDSOURCE
      SOURCE #customerEmail
        #display Email customerEmail()
        #{
        #    return this.custTable_CustAccount().email();
        #}
      ENDSOURCE
      SOURCE #customerName
        #display CustName customerName()
        #{
        #    return this.partyTable_CustAccount().Name;
        #}
      ENDSOURCE
      SOURCE #customerPhone
        #display Phone customerPhone()
        #{
        #    return this.custTable_CustAccount().phone();
        #}
      ENDSOURCE
      SOURCE #custTable_CustAccount
        #CustTable custTable_CustAccount(boolean _forUpdate = false)
        #{
        #    return CustTable::find(this.CustAccount, _forUpdate) as CustTable;
        #}
      ENDSOURCE
      SOURCE #custTable_InvoiceAccount
        #CustTable  custTable_InvoiceAccount(boolean  _forUpdate = false)
        #{
        #    return CustTable::find(this.InvoiceAccount, _forUpdate);
        #}
      ENDSOURCE
      SOURCE #delete
        #public void  delete()
        #{
        #    // <GIN>
        #    #ISOCountryRegionCodes
        #    // </GIN>
        #    SalesTableType salesTableType;
        #    boolean unlinkLinesToo = true;
        #
        #    // Before deletion of release order, remove agreement links
        #    this.unlinkAgreement(unlinkLinesToo);
        #
        #    salesTableType = this.type();
        #    salesTableType.delete();
        #
        #    TradeBLWIJournalPurposeCodes::deleteRecord(this.RecId, TradeBLWITypeOfForm::SalesTable);
        #
        #    // Update the CRM transaction log
        #    smmTransLog::initTrans(this, smmLogAction::delete);
        #
        #    // <GIN>
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoIN]))
        #    {
        #        this.TransitDocumentTransactionMap_IN::deleteTransitDocuments();
        #    }
        #    // </GIN>
        #}
      ENDSOURCE
      SOURCE #deliveryAddress
        #LogisticsPostalAddress deliveryAddress()
        #{
        #    return LogisticsPostalAddress::findRecId(this.DeliveryPostalAddress);
        #}
      ENDSOURCE
      SOURCE #deliveryAddressing
        #display LogisticsAddressing deliveryAddressing()
        #{
        #    return this.deliveryAddress().Address;
        #}
      ENDSOURCE
      SOURCE #deliveryCFOPTable_BR
        #/// <summary>
        #/// Retrieves the delivery cfop code of the sales order.
        #/// </summary>
        #/// <returns>
        #/// The delivery cfop code of the sales order.
        #/// </returns>
        #public RecId deliveryCFOPTable_BR()
        #{
        #    SalesLine salesLine;
        #    SalesLine_BR salesLine_BR;
        #
        #    select DeliveryCFOPTable_BR from salesLine_BR
        #        where salesLine_BR.DeliveryCFOPTable_BR != 0
        #        exists join salesLine
        #        where  salesLine.RecId == salesLine_BR.SalesLine
        #            && salesLine.SalesId == this.SalesId;
        #
        #    return salesLine_BR.DeliveryCFOPTable_BR;
        #}
      ENDSOURCE
      SOURCE #deliveryCNPJCPFNUM_BR
        #/// <summary>
        #/// Returns the delivery CNPJ or CPF for the current record.
        #/// </summary>
        #/// <returns>
        #/// Returns the CNPJ or CPF of the customer if the adddress is a primary address.
        #/// Returns the CNPJ or CPF related to delivery <c>logisticsPostalAddress</c> if the adddress is not a primary address.
        #/// </returns>
        #public display CNPJCPFNum_BR deliveryCNPJCPFNUM_BR()
        #{
        #    DirPartyLocation dirPartyLocation;
        #
        #    if (!BrazilParameters::isEnabled())
        #        return '';
        #
        #    dirPartyLocation = DirPartyLocation::findByPartyLocation(this.custTable_CustAccount().Party, this.deliveryLocation());
        #
        #    if (!dirPartyLocation.RecId ||  dirPartyLocation.IsPrimary)
        #    {
        #        return this.custTable_CustAccount().cnpjcpfNum_BR;
        #    }
        #    else
        #    {
        #        return (select cnpjcpfNum_BR from logisticsLocationExt
        #            where logisticsLocationExt.Location == this.deliveryLocation()).cnpjcpfNum_BR;
        #    }
        #}
      ENDSOURCE
      SOURCE #deliveryDateDisplay
        #display DlvDate deliveryDateDisplay(DlvDate _blankDate = dateNull())
        #{
        #    if (this.ShippingDateConfirmed || this.ShippingDateRequested)
        #    {
        #        return this.ShippingDateConfirmed ? this.ShippingDateConfirmed : this.ShippingDateRequested;
        #    }
        #
        #    if (prmisDefault(_blankDate))
        #    {
        #        return InventOrderEntryDeadlineTable::effectiveOrderDate(this.InventSiteId,CustTable::find(this.CustAccount).OrderEntryDeadlineGroupId);
        #    }
        #    return _blankDate;
        #}
      ENDSOURCE
      SOURCE #deliveryIENum_BR
        #/// <summary>
        #/// Returns the delivery IE for the current record.
        #/// </summary>
        #/// <returns>
        #/// Returns the IE of the customer if the adddress is a primary address.
        #/// Returns the IE related to delivery <c>logisticsPostalAddress</c> if the adddress is not a primary address.
        #/// </returns>
        #public display IENum_BR deliveryIENum_BR()
        #{
        #    DirPartyLocation dirPartyLocation;
        #
        #    if (!BrazilParameters::isEnabled())
        #        return '';
        #
        #    dirPartyLocation = DirPartyLocation::findByPartyLocation(this.custTable_CustAccount().Party, this.deliveryLocation());
        #
        #    if (!dirPartyLocation.RecId ||  dirPartyLocation.IsPrimary)
        #    {
        #        return this.custTable_CustAccount().ieNum_BR;
        #    }
        #    else
        #    {
        #        return (select ieNum_BR from logisticsLocationExt
        #            where logisticsLocationExt.Location == this.deliveryLocation()).ieNum_BR;
        #    }
        #}
      ENDSOURCE
      SOURCE #deliveryLocation
        #public LogisticsLocationRecId deliveryLocation()
        #{
        #    return LogisticsPostalAddress::getLocation(this.DeliveryPostalAddress);
        #}
      ENDSOURCE
      SOURCE #deliveryPhone
        #/// <summary>
        #/// Gets the telephone number that is associated with the delivery of a sales order.
        #/// </summary>
        #/// <returns>
        #/// The telephone number that is associated with the delivery of a sales order; otherwise, an empty
        #/// string.
        #/// </returns>
        #public Phone deliveryPhone()
        #{
        #    Phone                       phone;
        #    LogisticsLocationRecId      locationRecId;
        #    LogisticsLocation           locationChild;
        #    LogisticsElectronicAddress  logisticsElectronicAddress;
        #
        #    // First see if a contact person phone number is available
        #    if (this.ContactPersonId)
        #    {
        #        phone = this.contactPerson().phone();
        #        if (phone)
        #        {
        #            return phone;
        #        }
        #    }
        #
        #    // See if a phone number associated with the delivery location is available
        #    locationRecId = this.deliveryLocation();
        #    if (locationRecId)
        #    { // Find a phone number associated with the postal delivery location
        #        select firstonly TableId from locationChild
        #            where locationChild.ParentLocation  == locationRecId
        #                && locationChild.IsPostalAddress == NoYes::No
        #            join Locator from logisticsElectronicAddress
        #            where logisticsElectronicAddress.Location   == locationChild.RecId
        #                &&   logisticsElectronicAddress.Type       == LogisticsElectronicAddressMethodType::Phone
        #                &&   logisticsElectronicAddress.Locator    != '';
        #        phone = logisticsElectronicAddress.Locator;
        #        if (phone)
        #        {
        #            return phone;
        #        }
        #    }
        #
        #    return this.customerPhone();
        #}
      ENDSOURCE
      SOURCE #deliveryTransDateTime
        #TransDateTime deliveryTransDateTime()
        #{
        #    return DateTimeUtil::newDateTime(this.DeliveryDate,0,DateTimeUtil::getCompanyTimeZone());
        #}
      ENDSOURCE
      SOURCE #dispLastConsDate_JP
        #/// <summary>
        #/// Displays the latest consolidation date for this sales order.
        #/// </summary>
        #/// <returns>
        #/// Consolidation date.
        #/// </returns>
        #//BP Deviation documented
        #public display CustVendConsDate_JP dispLastConsDate_JP()
        #{
        #    return this.SalesPurchTable::getLastConsDate_JP();
        #}
        #
      ENDSOURCE
      SOURCE #dispLastConsId_JP
        #/// <summary>
        #/// Gets latest consolidation invoice Id for this purchase order.
        #/// </summary>
        #/// <returns>
        #/// Consolidation invoice Id.
        #/// </returns>
        #//BP Deviation documented
        #public display CustConsId_JP dispLastConsId_JP()
        #{
        #    return this.SalesPurchTable::getLastConsId_JP();
        #}
        #
      ENDSOURCE
      SOURCE #displayBankDocumentInfo
        #/// <summary>
        #/// Sets the title on top of the preview pane on the <c>BankLCExportListPage </c>form.
        #/// </summary>
        #/// <returns>
        #/// The title field of the preview pane.
        #/// </returns>
        #public display Caption displayBankDocumentInfo()
        #{
        #    return strFmt("@SYS327590", this.SalesId, this.BankDocumentType);
        #}
      ENDSOURCE
      SOURCE #displayProformaAmountForBankLC
        #/// <summary>
        #/// The display method to display the total proforma invoice amount of the sales order.
        #/// </summary>
        #/// <returns>
        #/// The total proforma invoice amount.
        #/// </returns>
        #display AmountCur displayProformaAmountForBankLC()
        #{
        #    return BankLCExport::amountProformaTotalInclTax(this.SalesId);
        #}
      ENDSOURCE
      SOURCE #dlvModeMandatory
        #boolean dlvModeMandatory()
        #{
        #    return this.type().dlvModeMandatory();
        #}
      ENDSOURCE
      SOURCE #editContactPersonName
        #client server edit ContactPersonName  editContactPersonName(boolean _set, ContactPersonName _name)
        #{
        #    ContactPersonName   name = _name;
        #    ContactPerson       contactPerson;
        #    DirPartyTable       partyTable;
        #    ContactPersonId     contactPersonId;
        #
        #    if (_set)
        #    {
        #        if (name)
        #        {
        #            contactPersonId = this.ContactPersonId;
        #            contactPerson = ContactPerson::find(_name);
        #            this.ContactPersonId = contactPerson.ContactPersonId;
        #            if (this.ContactPersonId)
        #            {
        #                name = contactPerson.personName();
        #            }
        #            else
        #            {
        #                select contactPerson
        #                        where contactPerson.CustAccount ==   this.CustAccount
        #                    join Name from partyTable
        #                        where partyTable.RecId == contactPerson.Party &&
        #                              partyTable.Name        like name;
        #                if (contactPerson)
        #                {
        #                    this.ContactPersonId=contactPerson.ContactPersonId;
        #                    name=partyTable.Name;
        #                }
        #            }
        #            if (contactPersonId != this.ContactPersonId)
        #            {
        #                if (this.checkContactPerson())
        #                {
        #                    this.initFromContactInfo();
        #                    if (this.dataSource())
        #                    {
        #                        this.dataSource().refresh();
        #                    }
        #                }
        #                else
        #                {
        #                    this.ContactPersonId = contactPersonId;
        #                }
        #
        #            }
        #        }
        #        else
        #        {
        #            this.ContactPersonId='';
        #        }
        #    }
        #    else
        #    {
        #        name = this.contactPersonName();
        #    }
        #
        #    return name;
        #}
      ENDSOURCE
      SOURCE #editCreditCard
        #// NOTE: The value in parameter _creditCardNumber is not a credit card number
        #// (EDT CreditCardNumber, type string) but rather the value of CreditCardCust.RecId converted
        #// to a string by the lookup form (CreditCardLookup) for the form field.
        #// There are two reasons for this:
        #// 1) Becuase this is an edit method, it must have a certain signature, RecId is not allowed.
        #// 2) We do not want to pass the real credit card number around on the client.
        #// The lookup for the credit card number field on a form returns the RecId and this
        #// method uses that value to lookup the CreditCardCust record.  Using that (non-HBI)
        #// record we then get the obscured credit card number (leading asterisks and last 4
        #// digits) and display that string.
        #[SysClientCacheDataMethodAttribute(true)]
        #client server edit CreditCardNumber editCreditCard(boolean _set, CreditCardNumber _creditCardNumber)
        #{
        #    RecId recId = str2int64(strRTrim(strLTrim(_creditCardNumber)));
        #    CreditCardNumber creditCardNumber;
        #    CreditCardCust creditCardCust;
        #
        #    boolean okToChange(RefRecId _creditCard)
        #    {
        #        if (this.CreditCardCustRefId == _creditCard) // same CC?
        #        {
        #            return true; // Yes, same one, no change
        #        }
        #        return this.cancelPreAuthorization(); // Yes, see if we need to cancel the PreAuth
        #    }
        #
        #    if (_set)
        #    {
        #        if (okToChange(recId))
        #        {
        #            if (recId)
        #            {
        #                creditCardCust = CreditCardCust::find(recId);
        #                if (creditCardCust.RecId && this.InvoiceAccount == creditCardCust.CustAccount)
        #                {
        #                    this.CreditCardCustRefId = creditCardCust.RecId;
        #                }
        #                else
        #                {
        #                    this.CreditCardCustRefId = 0;
        #                }
        #            }
        #            else
        #            {
        #                this.CreditCardCustRefId = 0;
        #            }
        #
        #            this.validateField(fieldNum(SalesTable, CreditCardCustRefId));
        #
        #            // ensure the credit card number is blanked out if its reference was cleared during
        #            // field validation
        #            if(this.CreditCardCustRefId == 0)
        #            {
        #                creditCardNumber = '';
        #            }
        #            else
        #            {
        #                creditCardNumber = CreditCard::creditCardNumber(this.CreditCardCustRefId);
        #            }
        #
        #            return creditCardNumber;
        #        }
        #    }
        #
        #    // Double check to make sure the record hasn't been deleted
        #    if (this.CreditCardCustRefId && CreditCardCust::exist(this.CreditCardCustRefId))
        #    {
        #        creditCardNumber = CreditCard::creditCardNumber(this.CreditCardCustRefId);
        #    }
        #    else
        #    {
        #        this.CreditCardCustRefId = 0;
        #    }
        #
        #    return creditCardNumber;
        #}
      ENDSOURCE
      SOURCE #editExportSales_PL
        #/// <summary>
        #/// Edits the export sales value for the sales order.
        #/// </summary>
        #/// <param name="_set">
        #/// A Boolean value that indicates whether the value has been modified.
        #/// </param>
        #/// <param name="_value">
        #/// The new export sales value.
        #/// </param>
        #/// <returns>
        #/// The export sales value.
        #/// </returns>
        #public edit PlExportSales editExportSales_PL(boolean _set, PlExportSales _value)
        #{
        #    #ISOCountryRegionCodes
        #    boolean isExportSalesOrder;
        #
        #    if (isConfigurationkeyEnabled(configurationKeyNum(LedgerBasicSalesTax)) &&
        #        SysCountryRegionCode::isLegalEntityInCountryRegion([#isoPL]))
        #    {
        #        if (_set)
        #        {
        #            if (!ExportSalesOrder::existSalesOrder(this.SalesId))
        #            {
        #                if (_value)
        #                {
        #                    ExportSalesOrder::createFromSalesOrder(this.SalesId);
        #                }
        #            }
        #            else
        #            {
        #                if (!_value)
        #                {
        #                    ExportSalesOrder::deleteBySalesOrder(this.SalesId);
        #                }
        #            }
        #
        #            isExportSalesOrder = _value;
        #        }
        #        else
        #        {
        #            isExportSalesOrder = ExportSalesOrder::existSalesOrder(this.SalesId);
        #        }
        #    }
        #
        #    return isExportSalesOrder;
        #}
      ENDSOURCE
      SOURCE #editFixedExchRate
        #public edit SalesFixedExchRate editFixedExchRate(boolean set, SalesFixedExchRate _exchRate)
        #{
        #    ExchangeRateHelper exchangeRateHelper = ExchangeRateHelper::newCurrency(Ledger::primaryLedger(CompanyInfo::findDataArea(curext()).RecId), this.CurrencyCode);
        #
        #    if (set)
        #    {
        #        this.FixedExchRate = exchangeRateHelper.prepareExchangeRateForStorage(_exchRate);
        #    }
        #    else
        #    {
        #        _exchRate = exchangeRateHelper.displayStoredExchangeRate(this.FixedExchRate);
        #    }
        #
        #    return _exchRate;
        #}
      ENDSOURCE
      SOURCE #editReasonCode
        #/// <summary>
        #/// Gets and sets the reason code.
        #/// </summary>
        #/// <param name="_set">
        #/// A Boolean value that indicates whether the reason code is set.
        #/// </param>
        #/// <param name="_reasonCode">
        #/// The new reason code when the <paramref name="set" /> value is true.
        #/// </param>
        #/// <returns>
        #/// The reason code of the record in the <c>ReasonTableRef</c> table.
        #/// </returns>
        #//BP Deviation Documented
        #public edit ReasonCode editReasonCode(boolean _set, ReasonCode _reasonCode)
        #{
        #    ReasonCode      reasonCode = strLRTrim(_reasonCode);
        #    RefRecId        originalReasonRefRecId;
        #    FormDataSource  formSalesTable;
        #
        #    if (_set)
        #    {
        #        if (this.CreditNoteReasonCode == 0)
        #        {
        #            this.CreditNoteReasonCode = ReasonTableRef::createFromCode(reasonCode);
        #        }
        #        else
        #        {
        #            if (reasonCode)
        #            {
        #                //The reasonCode value is not blank.
        #                // Save the current ReasonRefRecID for comparision.
        #                originalReasonRefRecId = this.CreditNoteReasonCode;
        #                this.CreditNoteReasonCode = ReasonTableRef::updateCode(reasonCode, this.CreditNoteReasonCode);
        #
        #                if (this.CreditNoteReasonCode == originalReasonRefRecId)
        #                {
        #                    // The reason code has changed but the referenced record ID has not.
        #                    // Get the current FormDataSource and set forceWrite() to true so that
        #                    // data validation (validateWrite()) is performed on the updated reason code.
        #                    formSalesTable = this.dataSource();
        #                    if (formSalesTable)
        #                    {
        #                        formSalesTable.forceWrite(true);
        #                    }
        #                }
        #            }
        #            else
        #            {
        #                // The reasonCode is blank.
        #                this.CreditNoteReasonCode = ReasonTableRef::updateCode(reasonCode, this.CreditNoteReasonCode);
        #            }
        #        }
        #
        #        // Update the reason comment with the default comment value for the updated reason code.
        #        // A blank reasonCode will result in a blank comment because a blank reasonCode
        #        // will return an empty reasonTable buffer.
        #
        #        this.editReasonComment(true, ReasonTable::find(_reasonCode).Description);
        #    }
        #    else
        #    {
        #        reasonCode = ReasonTableRef::find(this.CreditNoteReasonCode).Reason;
        #    }
        #
        #    return reasonCode;
        #}
      ENDSOURCE
      SOURCE #editReasonCodeTH
        #/// <summary>
        #///     Gets and sets the reason code.
        #/// </summary>
        #/// <param name="set">
        #///     true if the reason code is set; otherwise, set to false.
        #/// </param>
        #/// <param name="_reasonCode">
        #///     The new reason code when <paramref name="set" /> is true.
        #/// </param>
        #/// <returns>
        #///     The reason code of the record in the <c>ReasonTableRef</c> table.
        #/// </returns>
        #public edit ReasonCode editReasonCodeTH(boolean set, ReasonCode _reasonCode)
        #{
        #    return this.salesTableExtensionTH().editReasonCode(set, _reasonCode);
        #}
      ENDSOURCE
      SOURCE #editReasonComment
        #/// <summary>
        #/// Gets and sets the reason comment.
        #/// </summary>
        #/// <param name="set">
        #/// A Boolean value that indicates whether the reason code is set.
        #/// </param>
        #/// <param name="_reasonComment">
        #/// The new reason comment when the <paramref name="set" /> value is true.
        #/// </param>
        #/// <returns>
        #/// The reason comment of the record in the <c>ReasonTableRef</c> table.
        #/// </returns>
        #//BP Deviation Documented
        #public edit ReasonComment editReasonComment(boolean set, ReasonComment _reasonComment)
        #{
        #    ReasonComment   reasonComment = _reasonComment;
        #
        #    if (set)
        #    {
        #        // If the ReasonRefRecID is 0, then create a new ReasonTableRef record
        #        // otherwise, update the existing record.
        #        if (this.CreditNoteReasonCode == 0)
        #        {
        #            this.CreditNoteReasonCode = ReasonTableRef::createFromComment(reasonComment);
        #        }
        #        else
        #        {
        #            this.CreditNoteReasonCode = ReasonTableRef::updateComment(reasonComment, this.CreditNoteReasonCode);
        #        }
        #    }
        #    else
        #    {
        #        reasonComment = ReasonTableRef::find(this.CreditNoteReasonCode).ReasonComment;
        #    }
        #
        #    return reasonComment;
        #}
      ENDSOURCE
      SOURCE #euroTriangulation
        #EUROTriangulation euroTriangulation(date _date = systemDateGet())
        #{
        #    if (this.SettleVoucher == SettlementType::SelectedTransact && SalesParameters::find().UseSettleExchRate)
        #    {
        #        if (this.settleExchRate())
        #        {
        #            return NoYes::No;
        #        }
        #    }
        #
        #    if (this.FixedExchRate)
        #    {
        #        return NoYes::No;
        #    }
        #
        #    return Currency::triangulation(this.CurrencyCode, _date);
        #}
      ENDSOURCE
      SOURCE #evaluateAddTmsChargeToRetailOrder
        #/// <summary>
        #/// Evaluates whether transportation charges can be added to the retail sales order
        #/// based on the <c>TMSDlvTerm</c> setup.
        #/// </summary>
        #/// <returns>
        #/// <c>NoYes::Yes</c> if the transportation charge can be added; <c>NoYes::No</c> otherwise.
        #/// </returns>
        #public NoYes evaluateAddTmsChargeToRetailOrder()
        #{
        #    NoYes ret;
        #
        #    if (this.isRetailSale())
        #    {
        #        ret = TMSDlvTerm::find(this.DlvTerm).AddChargeToRetailOrderPolicy;
        #    }
        #    else
        #    {
        #        ret = NoYes::Yes;
        #    }
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #evaluateAddTmsChargeToSalesOrder
        #/// <summary>
        #/// Evaluates whether transportation charges can be added to the sales order based on
        #/// the <c>TMSDlvTerm</c> setup.
        #/// </summary>
        #/// <returns>
        #/// <c>NoYes::Yes</c> if the transportation charge can be added; <c>NoYes::No</c> otherwise.
        #/// </returns>
        #public NoYes evaluateAddTmsChargeToSalesOrder()
        #{
        #    return TMSDlvTerm::find(this.DlvTerm).TransferChargesToOrder
        #        && this.evaluateAddTmsChargeToRetailOrder();
        #}
      ENDSOURCE
      SOURCE #exchRate
        #CustExchRate exchRate(date _date = systemDateGet(), boolean throwOnError = false)
        #{
        #    CustExchRate    exchRate = 0;
        #
        #    if (this.SettleVoucher == SettlementType::SelectedTransact && SalesParameters::find().UseSettleExchRate)
        #    {
        #        exchRate = this.settleExchRate(throwOnError);
        #    }
        #
        #    if (!exchRate)
        #    {
        #        if (this.FixedExchRate)
        #        {
        #            exchRate = this.FixedExchRate;
        #        }
        #        else
        #        {
        #            exchRate = Currency::exchRate(this.CurrencyCode, _date);
        #        }
        #    }
        #
        #    return exchRate;
        #}
      ENDSOURCE
      SOURCE #exchRateSecondary
        #ExchrateSecondary exchRateSecondary(date _date = systemDateGet())
        #{
        #    ExchRate exchRateSecondary;
        #
        #    if (this.SettleVoucher == SettlementType::SelectedTransact &&
        #        SalesParameters::find().UseSettleExchRate &&
        #        (SpecTrans::getSpecTransCount(this.company(), this.TableId, this.RecId) > 0))
        #    {
        #        exchRateSecondary = 0;
        #    }
        #    else if (this.FixedExchRate)
        #    {
        #        exchRateSecondary = 0;
        #    }
        #    else
        #    {
        #        exchRateSecondary = Currency::exchRateSecond(this.CurrencyCode, _date);
        #    }
        #
        #    return exchRateSecondary;
        #}
      ENDSOURCE
      SOURCE #existDirectDelivery
        #boolean existDirectDelivery()
        #{
        #    SalesLine   salesLine;
        #
        #    select firstonly RecId from salesLine where
        #        salesLine.SalesId           == this.SalesId &&
        #        salesLine.InventRefId       != ''           &&
        #        salesLine.DeliveryType      == TradeLineDlvType::DropShip;
        #
        #    return salesLine.RecId != 0;
        #}
      ENDSOURCE
      SOURCE #existingJournals
        #/// <summary>
        #/// Indicates whether the journals exist for a <c>SalesTable</c> record.
        #/// </summary>
        #/// <param name="_journalTypes">
        #/// A packed set of journal types to check; optional.
        #/// </param>
        #/// <param name="_continueOnFound">
        #/// A Boolean value that indicates whether the check must continue after the first journal is found;
        #/// optional.
        #/// </param>
        #/// <returns>
        #/// A container that contains a set of Boolean values that indicate if a journal exists.
        #/// </returns>
        #server container existingJournals(
        #    container   _journalTypes    = conNull(),
        #    boolean     _continueOnFound        = true)
        #{
        #    container   existingJournalContainer;
        #    Set         journalsToCheckSet;
        #    boolean     checkQuotation;
        #    boolean     checkConfirmation;
        #    boolean     checkPickingList;
        #    boolean     checkPackingSlip;
        #    boolean     checkInvoice;
        #    boolean     found;
        #    boolean     checkInvoice4Payment;
        #    boolean     checkFacture;
        #
        #    #ISOCountryRegionCodes
        #
        #    boolean     isCountryRegion_RU = SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]);
        #
        #    void setExistJournal(boolean _exists, int _pos)
        #    {
        #        existingJournalContainer = conPoke(existingJournalContainer, _pos, _exists);
        #        if (_exists)
        #        {
        #            found = true;
        #        }
        #    }
        #
        #    if (_journalTypes)
        #    {
        #        journalsToCheckSet = Set::create(_journalTypes);
        #    }
        #    checkQuotation       = journalsToCheckSet ? journalsToCheckSet.in(DocumentStatus::Quotation)   : true;
        #    checkConfirmation    = journalsToCheckSet ? journalsToCheckSet.in(DocumentStatus::Confirmation): true;
        #    checkPickingList     = journalsToCheckSet ? journalsToCheckSet.in(DocumentStatus::PickingList) : true;
        #    checkPackingSlip     = journalsToCheckSet ? journalsToCheckSet.in(DocumentStatus::PackingSlip) : true;
        #    checkInvoice         = journalsToCheckSet ? journalsToCheckSet.in(DocumentStatus::Invoice)     : true;
        #    if (isCountryRegion_RU)
        #    {
        #        checkInvoice4Payment = journalsToCheckSet ? journalsToCheckSet.in(DocumentStatus::Invoice4Paym_RU) : true;
        #        checkFacture         = journalsToCheckSet ? journalsToCheckSet.in(DocumentStatus::Facture_RU)      : true;
        #
        #        existingJournalContainer = [false,
        #                                    false,
        #                                    false,
        #                                    false,
        #                                    false,
        #                                    false,
        #                                    false,
        #                                    false,
        #                                    false];
        #    }
        #    else
        #    {
        #        existingJournalContainer = [false,
        #                                    false,
        #                                    false,
        #                                    false,
        #                                    false];
        #    }
        #
        #    if (checkQuotation)
        #    {
        #        setExistJournal(this.lastQuotation() != '', SalesTableType::posQuotation());
        #    }
        #    if (checkConfirmation && (_continueOnFound || !found))
        #    {
        #        setExistJournal(this.lastConfirm() != '', SalesTableType::posConfirmation());
        #    }
        #    if (checkPickingList && (_continueOnFound || !found))
        #    {
        #        setExistJournal(this.lastPickingList() != '', SalesTableType::posPickingList());
        #    }
        #    if (checkPackingSlip && (_continueOnFound || !found))
        #    {
        #        setExistJournal(this.lastPackingSlip() != '', SalesTableType::posPackingSlip());
        #    }
        #    if (checkInvoice && (_continueOnFound || !found))
        #    {
        #        setExistJournal(this.lastInvoice() != '', SalesTableType::posInvoice());
        #    }
        #    if (isCountryRegion_RU)
        #    {
        #        if (checkInvoice4Payment && (_continueOnFound || !found))
        #        {
        #            setExistJournal(this.lastInvoice4Paym_RU() != '', SalesTableType::posInvoice4Paym_RU());
        #        }
        #        if (checkFacture && (_continueOnFound || !found))
        #        {
        #            setExistJournal(this.lastFacture_RU() != '', SalesTableType::posFacture_RU());
        #        }
        #    }
        #
        #    return existingJournalContainer;
        #}
      ENDSOURCE
      SOURCE #existInterCompanyPurch
        #boolean existInterCompanyPurch()
        #{
        #    InterCompanyPurchSalesReference interCompanyPurchSalesReference;
        #
        #    select firstonly RecId from interCompanyPurchSalesReference
        #           index hint SalesPurchIdx
        #           where interCompanyPurchSalesReference.SalesId == this.SalesId;
        #
        #    return interCompanyPurchSalesReference.RecId ? true : false;
        #}
      ENDSOURCE
      SOURCE #existInterCompanySales
        #boolean existInterCompanySales(boolean _checkOnlyOne = false)
        #{
        #    InterCompanyPurchSalesReference interCompanyPurchSalesReference;
        #    PurchTable                      purchTable;
        #
        #    select forceplaceholders firstonly RecId from interCompanyPurchSalesReference
        #           index hint SalesPurchIdx
        #           where interCompanyPurchSalesReference.SalesId == this.SalesId
        #    join RecId from purchTable
        #           index hint PurchIdx
        #           where purchTable.PurchId == interCompanyPurchSalesReference.PurchId
        #           &&    purchTable.InterCompanyOrder
        #           &&   (!_checkOnlyOne
        #             || ( _checkOnlyOne && purchTable.InterCompanyOriginalSalesId == this.SalesId));
        #
        #    return purchTable.RecId ? true : false;
        #}
      ENDSOURCE
      SOURCE #existMarkedSettlement
        #boolean existMarkedSettlement(FieldId _fieldId)
        #{
        #    if (this.SettleVoucher && SpecTrans::getSpecTransCount(this.DataAreaId, this.TableId, this.RecId))
        #    {
        #        switch(_fieldId)
        #        {
        #            case fieldNum(SalesTable, CustAccount):     error("@SYS99928");
        #                                                        break;
        #
        #            case fieldNum(SalesTable, InvoiceAccount):  error("@SYS100001");
        #                                                        break;
        #
        #            default:                                    return false;
        #        }
        #        return true;
        #    }
        #
        #    return false;
        #}
      ENDSOURCE
      SOURCE #existNonCanceledLines
        #public boolean existNonCanceledLines()
        #{
        #    SalesLine   salesLine;
        #
        #    select firstonly RecId from salesLine where salesLine.SalesId == this.SalesId && salesLine.ReturnStatus != ReturnStatusLine::Canceled;
        #
        #    return salesLine.RecId != 0;
        #}
      ENDSOURCE
      SOURCE #existRegisteredReceivedInvoicedLines
        #public boolean existRegisteredReceivedInvoicedLines()
        #{
        #    boolean                           ret;
        #    SalesLine                         salesLine;
        #    InterCompanyPurchSalesReference   interCompanyPurchSalesReference;
        #    PurchTable                        purchTable;
        #    SalesTable                        salesTable;
        #    ReturnDispositionCode             returnDispositionCode;
        #
        #    select firstonly RecId from salesLine
        #           where salesLine.SalesId      == this.SalesId
        #           &&   (salesLine.ReturnStatus == ReturnStatusLine::Registered
        #              || salesLine.ReturnStatus == ReturnStatusLine::Quarantine
        #              || salesLine.ReturnStatus == ReturnStatusLine::Received
        #              || salesLine.ReturnStatus == ReturnStatusLine::Invoiced)
        #        notexists join returnDispositionCode
        #            where returnDispositionCode.DispositionCodeId == salesLine.ReturnDispositionCodeId
        #            &&    returnDispositionCode.DispositionAction == DispositionAction::CreditOnly
        #            &&    salesLine.ReturnStatus                  == ReturnStatusLine::Received;
        #
        #    ret = salesLine.RecId != 0;
        #
        #    if (!ret)
        #    {
        #        while select RecId from interCompanyPurchSalesReference
        #              where interCompanyPurchSalesReference.SalesId == this.SalesId
        #        join InterCompanyCompanyId, InterCompanySalesId from purchTable
        #             where purchTable.PurchId == interCompanyPurchSalesReference.PurchId
        #             &&    purchTable.InterCompanyOrder
        #        {
        #            changecompany(purchTable.InterCompanyCompanyId)
        #            {
        #                salesTable = null;
        #                salesTable = SalesTable::find(purchTable.InterCompanySalesId);
        #                ret = salesTable.existRegisteredReceivedInvoicedLines();
        #            }
        #            if (ret)
        #            {
        #                break;
        #            }
        #        }
        #    }
        #
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #existSalesLine
        #boolean existSalesLine()
        #{
        #    Query       query;
        #    QueryRun    queryRun;
        #    SalesLine   salesLine;
        #
        #    query = this.querySalesLine();
        #    query.dataSourceTable(tableNum(SalesLine)).firstOnly(true);
        #
        #    queryRun = new QueryRun(query);
        #    while (queryRun.next())
        #    {
        #        if (queryRun.changed(tableNum(SalesLine)))
        #        {
        #            salesLine = queryRun.get(tableNum(SalesLine)) as SalesLine;
        #            if (salesLine.RecId)
        #            {
        #                break;
        #            }
        #        }
        #    }
        #
        #    return salesLine.RecId != 0;
        #}
      ENDSOURCE
      SOURCE #existShippedNotInvoiced
        #public boolean existShippedNotInvoiced()
        #{
        #    SalesLine                   salesLine;
        #    InventTrans                 inventTrans;
        #    InventTransOriginSalesLine  inventTransOriginSalesLine;
        #
        #    select firstonly RecId from inventTrans
        #        where inventTrans.StatusIssue   == StatusIssue::Deducted
        #           || inventTrans.StatusReceipt == StatusReceipt::Received
        #        exists join inventTransOriginSalesLine
        #            where inventTransOriginSalesLine.InventTransOrigin == inventTrans.InventTransOrigin
        #            exists join salesLine
        #                where salesLine.DataAreaId    == inventTransOriginSalesLine.SalesLineDataAreaId
        #                   && salesLine.InventTransId == inventTransOriginSalesLine.SalesLineInventTransId
        #                   && salesLine.SalesId       == this.SalesId;
        #
        #    return (inventTrans.RecId!= 0);
        #}
      ENDSOURCE
      SOURCE #factureJourSortedList_RU
        #public RecordSortedList factureJourSortedList_RU()
        #{
        #    return this.SalesPurchTable::factureJourSortedList_RU();
        #}
        #
      ENDSOURCE
      SOURCE #fieldChanged
        #boolean  fieldChanged(FieldId  fieldId)
        #{
        #    boolean  ok = false;
        #
        #    if (!this.RecId)
        #    {
        #        ok = true;
        #    }
        #
        #    if (this.orig().(fieldId) != this.(fieldId))
        #    {
        #        ok = true;
        #    }
        #
        #    return ok;
        #}
      ENDSOURCE
      SOURCE #fixedEuroTriangulation
        #UnknownNoYes fixedEuroTriangulation()
        #{
        #    if (this.SettleVoucher == SettlementType::SelectedTransact && SalesParameters::find().UseSettleExchRate)
        #    {
        #        if (this.settleExchRate())
        #        {
        #            return UnknownNoYes::No;
        #        }
        #    }
        #
        #    if (this.FixedExchRate)
        #    {
        #        return UnknownNoYes::No;
        #    }
        #
        #    return UnknownNoYes::Unknown;
        #}
      ENDSOURCE
      SOURCE #fixedExchRate
        #CustExchRate fixedExchRate(boolean throwOnError = false)
        #{
        #    ExchRate exchRate = 0;
        #
        #    if (this.SettleVoucher == SettlementType::SelectedTransact && SalesParameters::find().UseSettleExchRate)
        #    {
        #        exchRate = this.settleExchRate(throwOnError);
        #    }
        #
        #    if (!exchRate)
        #    {
        #        exchRate = this.FixedExchRate;
        #    }
        #
        #    return exchRate;
        #}
      ENDSOURCE
      SOURCE #fixedExchRateSecondary
        #ExchrateSecondary fixedExchRateSecondary()
        #{
        #/*
        #//  Should always return zero
        #    return (this.FixedExchRate ? 0 : 0);
        #*/
        #    return (0);
        #}
      ENDSOURCE
      SOURCE #getCountryRegionIdByDocumentStatus
        #public LogisticsAddressCountryRegionId getCountryRegionIdByDocumentStatus()
        #{
        #    switch(this.DocumentStatus)
        #    {
        #        case DocumentStatus::PackingSlip:
        #            return LogisticsPostalAddress::findRecId(this.DeliveryPostalAddress).CountryRegionId;
        #        case DocumentStatus::Invoice:
        #            return this.custTable_InvoiceAccount().postalAddress().CountryRegionId;
        #        default:
        #            return this.custTable_CustAccount().postalAddress().CountryRegionId;
        #    }
        #}
      ENDSOURCE
      SOURCE #getDeliveryEntityRecord
        #/// <summary>
        #///     Gets the delivery entity record based on the postal address.
        #/// </summary>
        #/// <returns>
        #///    A <c>CustTable</c> record.
        #/// </returns>
        #public Common getDeliveryEntityRecord()
        #{
        #    return this.TradePostalAddress::getDeliveryEntityRecord();
        #}
      ENDSOURCE
      SOURCE #getFinalDiscPriceDate
        #/// <summary>
        #/// Calculates date for which total discount should be calculated according to the price date type
        #/// setting.
        #/// </summary>
        #/// <returns>
        #/// The date for which total discount has to be calculated.
        #/// </returns>
        #/// <remarks>
        #/// The price date type can be set up to use today, the requested shipping date, or the requested
        #/// receipt date as price date.
        #/// </remarks>
        #PriceDate getFinalDiscPriceDate()
        #{
        #    SalesParameters         salesParameters;
        #    PriceDate                  priceDate;
        #    #ISOCountryRegionCodes
        #    PriceDate                  priceDate_RU;
        #    PriceAgreementDate_RU   priceAgreementDate;
        #    SalesLine               salesLine;
        #
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
        #    {
        #        priceAgreementDate = this.SalesPurchTable::getPriceAgreementDate();
        #        if (! priceAgreementDate)
        #        {
        #            select minof(PriceAgreementDate_RU) from salesLine
        #                where salesLine.SalesId == this.SalesId;
        #
        #            priceAgreementDate = salesLine.PriceAgreementDate_RU;
        #        }
        #
        #        if (priceAgreementDate)
        #        {
        #            return priceAgreementDate;
        #        }
        #    }
        #
        #    salesParameters = SalesParameters::find();
        #
        #    switch (salesParameters.PriceDateType)
        #    {
        #        case SalesPriceDateType::ShippingDateRequested:
        #            priceDate = (select minof(ShippingDateRequested) from salesLine
        #                            where salesLine.SalesId == this.SalesId).ShippingDateRequested;
        #            break;
        #
        #        case SalesPriceDateType::ReceiptDateRequested:
        #            priceDate = (select minof(ReceiptDateRequested) from salesLine
        #                            where salesLine.SalesId == this.SalesId).ReceiptDateRequested;
        #            break;
        #
        #        default:
        #            priceDate = systemDateGet();
        #            break;
        #    }
        #
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
        #    {
        #        priceDate_RU = this.SalesPurchTable::priceDate_RU();
        #
        #        if (priceDate_RU != dateNull())
        #        {
        #            return priceDate_RU;
        #        }
        #    }
        #
        #    return priceDate;
        #}
      ENDSOURCE
      SOURCE #getTotalLineAmount
        #/// <summary>
        #/// Aggregates line amounts for all lines of the sales order.
        #/// </summary>
        #/// <returns>
        #/// Total amount of all lines.
        #/// </returns>
        #public Amount getTotalLineAmount()
        #{
        #    SalesLine salesLine;
        #
        #    select sum(LineAmount) from salesLine
        #        where salesLine.SalesId == this.SalesId;
        #
        #    return salesLine.LineAmount;
        #}
      ENDSOURCE
      SOURCE #getTransationEntity_RU
        #/// <summary>
        #/// Get entity of transaction.
        #/// </summary>
        #/// <param name="_roleType">
        #/// The value of <c>LogisticsLocationRoleType</c> base enum.
        #/// </param>
        #/// <returns>
        #/// Entity of transaction
        #/// </returns>
        #public Common getTransationEntity_RU(LogisticsLocationRoleType _roleType)
        #{
        #
        #    SalesTotals salesTotals;
        #    boolean     isCreditNote    = false;
        #
        #
        #    Common getLadingEntity()
        #    {
        #        if(this.InventLocationId)
        #        {
        #            return InventLocation::find(this.InventLocationId);
        #        }
        #        if(this.salesTable_RU().ConsignorAccount_RU)
        #        {
        #            return VendTable::find(this.salesTable_RU().ConsignorAccount_RU);
        #        }
        #        return CompanyInfo::find();
        #    }
        #
        #    Common getUnladingEntity()
        #    {
        #        return CustTable::find(this.salesTable_RU().ConsigneeAccount_RU ?
        #                               this.salesTable_RU().ConsigneeAccount_RU :
        #                               this.CustAccount);
        #    }
        #
        #    //check if credit note
        #
        #    salesTotals = SalesTotals::construct(this);
        #    salesTotals.calc();
        #    isCreditNote = salesTotals.totalAmount() < 0;
        #
        #    switch(_roleType)
        #    {
        #        case LogisticsLocationRoleType::Lading_W :
        #            return isCreditNote ? getUnladingEntity() : getLadingEntity();
        #
        #        case LogisticsLocationRoleType::Unlading_W :
        #            return isCreditNote ? getLadingEntity() : getUnladingEntity();
        #    }
        #
        #    return CompanyInfo::find();
        #}
      ENDSOURCE
      SOURCE #hasCODPaymentMethod
        #/// <summary>
        #/// Indicates whether the payment method of the sales order is COD.
        #/// </summary>
        #/// <returns>
        #/// true if the payment method is COD; otherwise, false.
        #/// </returns>
        #public boolean hasCODPaymentMethod()
        #{
        #    return this.payment().PaymMethod == NetCurrent::COD;
        #}
      ENDSOURCE
      SOURCE #hasIssueFiscalDocument_BR
        #/// <summary>
        #/// Determines whether issues has fiscal documents.
        #/// </summary>
        #/// <returns>
        #/// true if issues has fiscal documents; otherwise, false.
        #/// </returns>
        #public boolean hasIssueFiscalDocument_BR()
        #{
        #    if (RetailParameters::isRetailEnabledAndInUse()
        #        && this.isRetailStatement_BR())
        #    {
        #        return false;
        #    }
        #    else if (this.SalesType == SalesType::ReturnItem)
        #    {
        #        return this.custTable_CustAccount().GenerateIncomingFiscalDocument_BR;
        #    }
        #    else
        #    {
        #        return this.SalesType != SalesType::ReturnItem;
        #    }
        #}
        #
      ENDSOURCE
      SOURCE #hasLinesWithoutRefrence_MY
        #/// <summary>
        #/// Determines whether any lines don't have original invoice.
        #/// </summary>
        #/// <returns>
        #/// true if any lines don't have original invoice; otherwise, false.
        #/// </returns>
        #public boolean hasLinesWithoutRefrence_MY()
        #{
        #    SalesLine           salesLine;
        #    SalesLine_W         salesLine_W;
        #
        #    select firstonly salesLine
        #        where salesLine.SalesId             == this.SalesId
        #        notexists join salesLine_W
        #        where salesLine_W.SalesLine         == salesLine.RecId
        #           && salesLine_W.RefInvoiceId_MY   != "";
        #    if (salesLine)
        #    {
        #        return true;
        #    }
        #    return false;
        #}
      ENDSOURCE
      SOURCE #hasLinesWithRefrence_MY
        #/// <summary>
        #/// Determines whether any lines have original invoice.
        #/// </summary>
        #/// <returns>
        #/// true if any lines have original invoice; otherwise, false.
        #/// </returns>
        #public boolean hasLinesWithRefrence_MY()
        #{
        #    SalesLine           salesLine;
        #    SalesLine_W         salesLine_W;
        #
        #    select firstonly salesLine
        #        where salesLine.SalesId             == this.SalesId
        #        exists join salesLine_W
        #        where salesLine_W.SalesLine         == salesLine.RecId
        #           && salesLine_W.RefInvoiceId_MY   != "";
        #    if (salesLine)
        #    {
        #        return true;
        #    }
        #
        #    return false;
        #}
      ENDSOURCE
      SOURCE #hasPriceDiscChangePolicy
        #/// <summary>
        #/// Indicates whether price discount policies exist for a specified record.
        #/// </summary>
        #/// <returns>
        #/// true if price discount policies exist; otherwise, false.
        #/// </returns>
        #public boolean hasPriceDiscChangePolicy()
        #{
        #    return this.type().hasPriceDiscChangePolicy();
        #}
      ENDSOURCE
      SOURCE #icCheckUpdateHeaderDiscounts
        #/// <summary>
        #///     Determines if prices and disounts can be updated in the context of intercompany.
        #/// </summary>
        #/// <returns>
        #///     true if the context is not intercompany or if the context is intercompany and prices and discounts can be updated; otherwise, false.
        #/// </returns>
        #public boolean icCheckUpdateHeaderDiscounts()
        #{
        #    return !this.isInterCompanyOrder()
        #        || (this.SalesType != SalesType::ReturnItem
        #            && !this.isInterCompanyPOInvoiceMatched()
        #            && this.interCompanyEndpointActionPolicy().PriceDiscountSearch);
        #}
      ENDSOURCE
      SOURCE #initBankAccounts_LV
        #public void initBankAccounts_LV()
        #{
        ##isoCountryRegionCodes
        #
        #    CurrencyCode standardCurrency;
        #    BankAccountID bankAccount;
        #    BankAccountID curBankAcc;
        #
        #    if(SysCountryRegionCode::isLegalEntityInCountryRegion([#isoLV]))
        #    {
        #        this.CustBankAccount_LV = CustBankAccount::findDefault_LV(this.InvoiceAccount, this.CurrencyCode).AccountID;
        #    }
        #
        #    if(SysCountryRegionCode::isLegalEntityInCountryRegion([#isoCZ, #isoEE, #isoHU, #isoLT, #isoLV, #isoPL]))
        #    {
        #        standardCurrency = CompanyInfo::standardCurrency();
        #        bankAccount = BankAccountTable::findDefault_LV(standardCurrency).AccountID;
        #        curBankAcc = BankAccountTable::findDefault_LV(this.CurrencyCode).AccountID;
        #
        #        if(curBankAcc || BankParameters::checkCurrCodeControl_W())
        #        {
        #            this.CurBankAccount_LV = standardCurrency != this.CurrencyCode ? curBankAcc : '';
        #        }
        #
        #        this.BankAccount_LV = bankAccount ? bankAccount : CompanyInfo::find().Bank;
        #    }
        #}
      ENDSOURCE
      SOURCE #initDefaultReturnAddress
        #public void initDefaultReturnAddress()
        #{
        #    CompanyInfo companyInfo = CompanyInfo::find();
        #    LogisticsLocationRecId locationRecId;
        #
        #    this.DeliveryName = companyInfo.Name;
        #
        #    locationRecId = LogisticsLocationDefault::warehouseSiteDefaultLocation(LogisticsLocationRoleType::Delivery,
        #        this.InventLocationId, this.InventSiteId);
        #    if (locationRecId)
        #    {
        #        this.setLocation(locationRecId);
        #    }
        #    else
        #    {
        #        // Warehouse and site didn't have location, use company location
        #        companyInfo = CompanyInfo::find();
        #        locationRecId = LogisticsLocationDefault::findSimpleDefault(companyInfo,
        #            LogisticsLocationRole::findBytype(LogisticsLocationRoleType::Delivery)).RecId;
        #
        #        this.DeliveryPostalAddress  = LogisticsPostalAddress::addressRecIdFromLocationRecId(locationRecId);
        #        this.AddressRefRecId        = companyInfo.RecId;
        #        this.AddressRefTableId      = companyInfo.TableId;
        #        this.setDeliveryName();
        #    }
        #}
      ENDSOURCE
      SOURCE #initFromContactInfo
        #void initFromContactInfo()
        #{
        #    ContactPerson contactPerson = this.contactPerson();
        #
        #    if (contactPerson)
        #    {
        #        this.url = contactPerson.url();
        #        this.Email = contactPerson.email();
        #    }
        #}
      ENDSOURCE
      SOURCE #initFromCustConfirmJour
        #void  initFromCustConfirmJour(CustConfirmJour  custConfirmJour)
        #{
        #    this.DlvTerm                = custConfirmJour.DlvTerm;
        #    this.DlvMode                = custConfirmJour.DlvMode;
        #    this.LanguageId             = custConfirmJour.LanguageId;
        #    this.Payment                = custConfirmJour.Payment;
        #    this.CashDisc               = custConfirmJour.CashDiscCode;
        #    this.CurrencyCode           = custConfirmJour.CurrencyCode;
        #    this.DefaultDimension       =  this.copyDimension(custConfirmJour.DefaultDimension);
        #    this.InclTax                = custConfirmJour.InclTax;
        #}
      ENDSOURCE
      SOURCE #initFromCustInvoiceJour
        #void initFromCustInvoiceJour(CustInvoiceJour custInvoiceJour)
        #{
        #    MCRReturnSalesTable mcrReturnSalesTable;
        #    #ISOCountryRegionCodes
        #
        #    SalesTable_BR salesTable_BR;
        #    // <GMY>
        #    SalesTable_W    salesTable_W;
        #    // </GMY>
        #
        #    this.LanguageId                 = custInvoiceJour.LanguageId;
        #    this.Payment                    = custInvoiceJour.Payment;
        #    this.NumberSequenceGroup        = custInvoiceJour.NumberSequenceGroup;
        #    this.CashDisc                   = custInvoiceJour.CashDiscCode;
        #
        #    if (TaxParameters::find().CashDiscOnInvoice)
        #    {
        #        this.CashDiscPercent        = custInvoiceJour.CashDiscPercent;
        #    }
        #
        #    this.CurrencyCode               = custInvoiceJour.CurrencyCode;
        #    this.DlvTerm                    = custInvoiceJour.DlvTerm;
        #    this.DlvMode                    = custInvoiceJour.DlvMode;
        #    this.DefaultDimension           = this.copyDimension(custInvoiceJour.DefaultDimension);
        #    this.InclTax                    = custInvoiceJour.InclTax;
        #    this.SalesOriginId              = custInvoiceJour.SalesOriginId;
        #    this.setShipCarrierInformation(null, null, custInvoiceJour);
        #
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoLV]))
        #    {
        #        this.IntrastatAddValue_LV       = custInvoiceJour.custInvoiceJour_W().IntrastatAddValue_LV;
        #    }
        #
        #    if (BrazilParameters::isEnabled())
        #    {
        #        salesTable_BR = this.salesTable_BR();
        #        salesTable_BR.ServiceCodeOnDlvAddress_BR    = custInvoiceJour.custInvoiceJour_BR().ServiceCodeOnDlvAddress_BR;
        #        salesTable_BR.SalesPurchOperationType_BR    = custInvoiceJour.custInvoiceJour_BR().SalesPurchOperationType_BR;
        #        salesTable_BR.cfpsId_BR                     = custInvoiceJour.fiscalDocument_BR().cfpsId;
        #        salesTable_BR.CustFinalUser_BR              = custInvoiceJour.custInvoiceJour_BR().CustFinalUser_BR;
        #        salesTable_BR.PresenceType                  = custInvoiceJour.custTable_InvoiceAccount().PresenceType_BR;
        #        this.packSalesTable_BR(salesTable_BR);
        #    }
        #    if (isConfigurationkeyEnabled(configurationKeyNum(MCRCallCenter)))
        #    {
        #        if(this.SalesType == SalesType::ReturnItem)
        #        {
        #            mcrReturnSalesTable = this.mcrReturnSalesTable();
        #            mcrReturnSalesTable.OriginalSalesId = custInvoiceJour.SalesId;
        #            this.mcrPackMCRReturnSalesTable(mcrReturnSalesTable);
        #        }
        #    }
        #
        #    // <GMY>
        #    if (TaxGSTFeatureChecker_MY::isCountryRegionMY())
        #    {
        #        salesTable_W                = this.salesTable_W();
        #        salesTable_W.InvoiceType_MY = custInvoiceJour.custInvoiceJour_W().InvoiceType_MY;
        #        this.packSalesTable_W(salesTable_W);
        #    }
        #    // </GMY>
        #}
      ENDSOURCE
      SOURCE #initFromCustPackingSlipJour
        #void  initFromCustPackingSlipJour(CustPackingSlipJour custPackingSlipJour)
        #{
        #    this.LanguageId                 = custPackingSlipJour.LanguageId;
        #    this.DlvTerm                    = custPackingSlipJour.DlvTerm;
        #    this.DlvMode                    = custPackingSlipJour.DlvMode;
        #    this.DlvReason                  = custPackingSlipJour.DlvReason;
        #    this.DefaultDimension           = this.copyDimension(custPackingSlipJour.DefaultDimension);
        #    this.setShipCarrierInformation(null, custPackingSlipJour);
        #}
      ENDSOURCE
      SOURCE #initFromCustQuotationJour
        #void  initFromCustQuotationJour(CustQuotationJour  custQuotationJour)
        #{
        #    this.DlvTerm                = custQuotationJour.DlvTerm;
        #    this.DlvMode                = custQuotationJour.DlvMode;
        #    this.LanguageId             = custQuotationJour.LanguageId;
        #    this.Payment                = custQuotationJour.Payment;
        #    this.CashDisc               = custQuotationJour.CashDiscCode;
        #    this.CurrencyCode           = custQuotationJour.CurrencyCode;
        #    this.DefaultDimension       = this.copyDimension(custQuotationJour.DefaultDimension);
        #    this.InclTax                = custQuotationJour.InclTax;
        #}
      ENDSOURCE
      SOURCE #initFromCustTable
        #server void initFromCustTable()
        #{
        #    #isoCountryRegionCodes
        #
        #    container salesTableContainer;
        #    CustTable custTable;
        #    RetailSalesAffiliation retailSalesAffiliation;
        #    RetailCustAffiliation retailCustAffiliation;
        #    SalesIdBase salesId = this.SalesId;
        #
        #    // pack the raw RU values from the form data source into the
        #    // extension container to ensure the latest values are sent to IL
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
        #    {
        #        this.packSalesTable_RU(this.salesTable_RU().data());
        #    }
        #
        #    if (BrazilParameters::isEnabled())
        #    {
        #        this.packSalesTable_BR(this.salesTable_BR().data());
        #    }
        #
        #    if (SalesTable_W::isLegalEntityInCountryRegion())
        #    {
        #        this.packSalesTable_W(this.salesTable_W().data());
        #    }
        #
        #    salesTableContainer  = SalesTable::initFromCustTableServer(buf2Con(this, true));
        #
        #    this.con2buf(salesTableContainer);
        #
        #    // copy the raw RU fields using this.data().salesTable_RU() from the
        #    // extension to the buffer instance using this.salesTable_RU().data(<input>)
        #    // because packing and unpacking causes a disconnect
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
        #    {
        #        this.salesTable_RU().data(this.data().salesTable_RU());
        #    }
        #
        #    if (BrazilParameters::isEnabled())
        #    {
        #        this.salesTable_BR().data(this.data().salesTable_BR());
        #    }
        #
        #    if (SalesTable_W::isLegalEntityInCountryRegion())
        #    {
        #        this.salesTable_W().data(this.data().salesTable_W());
        #    }
        #
        #    if (#PdsRebateEnabled)
        #    {
        #        custTable = this.custTable_CustAccount();
        #
        #        this.PdsRebateProgramTMAGroup = custTable.PdsRebateTMAGroup;
        #        this.PdsCustRebateGroupId     = custTable.PdsCustRebateGroupId;
        #    }
        #
        #    // Create RetailSalesAffiliation.
        #    if (RetailParameters::isRetailEnabledAndInUse())
        #    {
        #        insert_recordset retailSalesAffiliation (SalesId, Affiliation)
        #        select salesId, RetailAffiliationId from retailCustAffiliation
        #            where retailCustAffiliation.CustAccountNum == this.CustAccount;
        #    }
        #}
      ENDSOURCE
      SOURCE #initFromCustTableMandatoryFields
        #server void  initFromCustTableMandatoryFields()
        #{
        #    CustTable               custTable  = this.custTable_CustAccount();
        #    DirPartyTable           partyTable = this.partyTable_CustAccount();
        #    LogisticsLocation       location;
        #    LogisticsLocationEntity locationEntity;
        #
        #    this.CustGroup                  = custTable.CustGroup;
        #
        #    location = LogisticsLocationDefault::findSimpleDefault(custTable, LogisticsLocationRole::findBytype(
        #        LogisticsLocationRoleType::Delivery));
        #    if (location.RecId)
        #    {
        #        locationEntity = LogisticsLocationEntity::constructFromLocationRecId(location.RecId);
        #        this.DeliveryPostalAddress  = locationEntity.getPostalAddress().RecId;
        #        this.AddressRefRecId        = custTable.RecId;
        #        this.AddressRefTableId      = custTable.TableId;
        #
        #        this.setDeliveryName();
        #
        #        LogisticsLocationSelectForm_SalesTable::construct(this).copyShipCarrierInfo(location);
        #    }
        #}
      ENDSOURCE
      SOURCE #initFromPayment
        #void initFromPayment()
        #{
        #    // Use the installment plan payment schedule if an installment plan exists.
        #    if ((!isConfigurationkeyEnabled(configurationKeyNum(MCRCallCenter)))
        #        || (!MCRInstallmentPlanSalesTable::existSalesId(this.SalesId)))
        #    {
        #        this.PaymentSched = this.payment().PaymSched;
        #    }
        #
        #    this.FixedDueDate = dateNull();
        #}
      ENDSOURCE
      SOURCE #initFromProjInvoiceJour
        #void initFromProjInvoiceJour(ProjInvoiceJour projInvoiceJour)
        #{
        #    // <GMY>
        #    SalesTable_W    salesTable_W;
        #    // </GMY>
        #
        #    this.LanguageId                 = projInvoiceJour.LanguageId;
        #    this.Payment                    = projInvoiceJour.Payment;
        #    this.NumberSequenceGroup        = projInvoiceJour.NumberSequenceGroupId;
        #    this.CashDisc                   = projInvoiceJour.CashDiscCode;
        #
        #    if (TaxParameters::find().CashDiscOnInvoice)
        #    {
        #        this.CashDiscPercent        = projInvoiceJour.CashDiscPercent;
        #    }
        #    this.CurrencyCode               = projInvoiceJour.CurrencyId;
        #    this.DlvTerm                    = projInvoiceJour.DlvTerm ? projInvoiceJour.DlvTerm : this.DlvTerm;
        #    this.DlvMode                    = projInvoiceJour.DlvMode ? projInvoiceJour.DlvMode : this.DlvMode;
        #    this.DefaultDimension           = this.copyDimension(projInvoiceJour.DefaultDimension);
        #
        #    // <GMY>
        #    if (TaxGSTFeatureChecker_MY::isCountryRegionMY())
        #    {
        #        salesTable_W                = this.salesTable_W();
        #        salesTable_W.InvoiceType_MY = projInvoiceJour.InvoiceType_MY;
        #        this.packSalesTable_W(salesTable_W);
        #    }
        #    // </GMY>
        #}
      ENDSOURCE
      SOURCE #initFromProjInvoiceTable
        #void initFromProjInvoiceTable()
        #{
        #    ProjTable           projTable;
        #    ProjInvoiceTable    projInvoiceTable;
        #    #ISOCountryRegionCodes
        #
        #    projTable               = this.projTable();
        #    projInvoiceTable        = projTable.projInvoice();
        #
        #    this.TransactionCode    = projInvoiceTable.TransactionCodeId;
        #    if (this.Listcode == Listcode::IncludeNot)
        #    {
        #        this.Listcode = projInvoiceTable.ListCodeId;
        #    }
        #    this.DefaultDimension   = this.copyDimension(projTable.DefaultDimension);
        #    this.Payment            = projInvoiceTable.Payment;
        #
        #    this.FixedExchRate = ProjInvoiceCurrency::find(projInvoiceTable.ProjInvoiceProjId,this.CurrencyCode).ExchRate;
        #
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoNO]))
        #    {
        #        this.BankCentralBankPurposeCode = projInvoiceTable.BankCentralBankPurposeCode;
        #        this.BankCentralBankPurposeText = projInvoiceTable.BankcentralBankPurposeText;
        #    }
        #}
        #
        #
      ENDSOURCE
      SOURCE #initFromProjTable
        #void initFromProjTable(ProjTable _projTable)
        #{
        #    LogisticsLocationEntity location;
        #    ProjPriceGroupID        projPriceGroupID;
        #
        #    ProjFundingSourceEInvoice_NO eInvoiceData;
        #
        #    if (_projTable.RecId)
        #    {
        #        this.ProjId             = _projTable.ProjId;
        #        this.CustAccount        = _projTable.type().custAccount();
        #
        #        this.initFromCustTable();
        #
        #        this.InvoiceAccount     = _projTable.type().invoiceAccount();
        #        this.initInvoiceAccount();
        #        this.CurrencyCode               = _projTable.currencyId();
        #
        #        this.initFromProjInvoiceTable();
        #
        #        this.InclTax                    = NoYes::No;
        #
        #        location = LogisticsLocationEntity::constructFromLocationRecId(_projTable.DeliveryLocation);
        #
        #        this.DeliveryName = location.getPostalAddress().displayLocationDescription();
        #        this.DeliveryPostalAddress = location.getPostalAddress().RecId;
        #
        #        projPriceGroupID = ProjTable::findPriceGroup(this.ProjId);
        #        if (projPriceGroupID)
        #        {
        #            this.PriceGroupId = projPriceGroupID;
        #        }
        #
        #        if (BrazilParameters::isEnabled())
        #        {
        #            this.salesTable_BR().data(this.data().salesTable_BR());
        #        }
        #
        #        if (CustTable::isCustPublic_NO(this.InvoiceAccount))
        #        {
        #            eInvoiceData = ProjFundingSource::findCustAccount(
        #                _projTable.ProjInvoiceProjId).getEInvoiceData(
        #                    _projTable.ProjId);
        #
        #            this.EInvoiceAccountCode = eInvoiceData.EInvoiceAccountCode;
        #            this.CustomerRef         = eInvoiceData.CustRef;
        #            this.PurchOrderFormNum   = eInvoiceData.CustPurchaseOrder;
        #            this.ContactPersonId     = eInvoiceData.ContactPersonId;
        #        }
        #    }
        #}
      ENDSOURCE
      SOURCE #initFromSalesAgreementHeader
        #/// <summary>
        #/// Initiates a <c>SalesTable</c> record with values that are based on <c>SalesAgreementHeader</c>
        #/// record.
        #/// </summary>
        #/// <param name="_salesAgreementHeader">
        #/// Record of <c>SalesAgreementHeader</c> to copy initial values from
        #/// </param>
        #/// <param name="_copyDeliveryLocation">
        #/// When set to true delivery location is copyed from <c>SalesAgreementHeader</c> Default is true.
        #/// </param>
        #public void initFromSalesAgreementHeader( SalesAgreementHeader  _salesAgreementHeader, boolean _copyDeliveryLocation = true)
        #{
        #    AgreementHeaderDefault          agreementHeaderDefault;
        #    SalesAgreementHeaderDefault     salesAgreementHeaderDefault;
        #    CashDisc                        cashDisc;
        #    #ISOCountryRegionCodes
        #    SalesAgreementHeaderExt_RU      salesAgreementHeaderExt;
        #    SalesTable_RU                   salesTableRU;
        #    SalesTable_W                    salesTable_W;
        #
        #    select firstonly DeliveryMode
        #                    ,DeliveryTerm
        #                    ,DeliveryName
        #                    ,DeliveryPostalAddress
        #                    ,PaymentTerms
        #                    ,PaymentSchedule
        #                    ,CashDiscountCode
        #                    ,ContactPerson
        #                    ,MiscChargeGroup
        #                    ,Project
        #                    ,ExternalReference
        #        from agreementHeaderDefault
        #        where agreementHeaderDefault.AgreementHeader == _salesAgreementHeader.RecId
        #        outer join firstonly CustomerInvoiceAccount
        #                      ,Campaign
        #                      ,SalesUnit
        #                      ,SalesPool
        #                      ,WorkerSalesResponsible
        #                      ,CommissionSalesGroup
        #                      ,CommissionCustomerGroup
        #                      ,FixedExchangeRate
        #                      ,CustomerMethodOfPayment
        #                      ,CustomerPaymentSpec
        #                      ,CustomerRequisitionNumber
        #                      ,EntryCertificateRequired_W
        #                      ,IssueOwnEntryCertificate_W
        #            from  salesAgreementHeaderDefault
        #            where salesAgreementHeaderDefault.SalesAgreementHeader == _salesAgreementHeader.RecId
        #        outer join firstonly RecId,
        #                             InventProfileType,
        #                             InventProfileId,
        #                             CustPostingProfile,
        #                             SalesInvoicePostingType
        #            from salesAgreementHeaderExt
        #            where salesAgreementHeaderExt.AgreementHeader == _salesAgreementHeader.RecId
        #            ;
        #
        #    if (agreementHeaderDefault.CashDiscountCode)
        #    {
        #        // When CashDiscountCode is set for agreement header, query cash discount record to set proper cashDiscPercent value
        #        cashDisc = CashDisc::find(agreementHeaderDefault.CashDiscountCode);
        #    }
        #
        #    this.MatchingAgreement = _salesAgreementHeader.RecId;
        #
        #    this.DefaultDimension = this.mergeDimension(_salesAgreementHeader.DefaultDimension, this.DefaultDimension);
        #
        #    if (_copyDeliveryLocation)
        #    {
        #        this.DeliveryName = agreementHeaderDefault.DeliveryName;
        #        this.DeliveryPostalAddress = agreementHeaderDefault.DeliveryPostalAddress;
        #    }
        #
        #    this.CurrencyCode   = _salesAgreementHeader.Currency;
        #    this.LanguageId     = _salesAgreementHeader.Language;
        #
        #    this.DlvMode         = agreementHeaderDefault.DeliveryMode;
        #    this.DlvTerm         = agreementHeaderDefault.DeliveryTerm;
        #    this.Payment         = agreementHeaderDefault.PaymentTerms;
        #    this.PaymentSched    = agreementHeaderDefault.PaymentSchedule;
        #    this.MarkupGroup     = agreementHeaderDefault.MiscChargeGroup;
        #    this.ProjId          = agreementHeaderDefault.Project;
        #    this.CustomerRef     = agreementHeaderDefault.ExternalReference;
        #    this.CashDisc        = agreementHeaderDefault.CashDiscountCode;
        #    this.CashDiscPercent = (cashDisc.RecId) ? cashDisc.Percent : 0.0;
        #    this.ContactPersonId = agreementHeaderDefault.ContactPerson;
        #
        #    this.SmmCampaignId      = salesAgreementHeaderDefault.Campaign;
        #    this.SalesUnitId        = salesAgreementHeaderDefault.SalesUnit;
        #    this.SalesPoolId        = salesAgreementHeaderDefault.SalesPool;
        #    this.WorkerSalesResponsible = salesAgreementHeaderDefault.WorkerSalesResponsible;
        #    this.SalesGroup         = salesAgreementHeaderDefault.CommissionSalesGroup;
        #    this.CommissionGroup    = salesAgreementHeaderDefault.CommissionCustomerGroup;
        #    this.FixedExchRate      = salesAgreementHeaderDefault.FixedExchangeRate;
        #    this.PaymMode           = salesAgreementHeaderDefault.CustomerMethodOfPayment;
        #    this.PaymSpec           = salesAgreementHeaderDefault.CustomerPaymentSpec;
        #    this.PurchOrderFormNum  = salesAgreementHeaderDefault.CustomerRequisitionNumber;
        #
        #    if (salesAgreementHeaderDefault.CustomerInvoiceAccount)
        #    {
        #        // Copy CustomerInvoiceAccount ONLY when it is not-empty in Agreement!
        #        this.InvoiceAccount     = salesAgreementHeaderDefault.CustomerInvoiceAccount;
        #    }
        #
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
        #    {
        #        salesTableRU = this.salesTable_RU();
        #
        #        salesTableRU.AgreementHeaderExt_RU = salesAgreementHeaderExt.RecId;
        #
        #        this.DefaultDimension = this.copyDimension(_salesAgreementHeader.DefaultDimension);
        #
        #        if (salesAgreementHeaderExt.InventProfileType || salesAgreementHeaderExt.InventProfileId)
        #        {
        #            salesTableRU.InventProfileType_RU = salesAgreementHeaderExt.InventProfileType;
        #            salesTableRU.InventProfileId_RU   = salesAgreementHeaderExt.InventProfileId;
        #        }
        #
        #        if (salesAgreementHeaderExt.CustPostingProfile)
        #        {
        #            this.PostingProfile = salesAgreementHeaderExt.CustPostingProfile;
        #        }
        #
        #        salesTableRU.initInvoicePostingType_RU(_salesAgreementHeader.custTable(), salesAgreementHeaderExt);
        #
        #        this.packSalesTable_RU(salesTableRU);
        #    }
        #
        #    if (SalesTable_W::isLegalEntityInCountryRegion())
        #    {
        #        salesTable_W = this.salesTable_W();
        #        salesTable_W.EntryCertificateRequired_W = salesAgreementHeaderDefault.EntryCertificateRequired_W;
        #        salesTable_W.IssueOwnEntryCertificate_W = salesAgreementHeaderDefault.IssueOwnEntryCertificate_W;
        #        this.packSalesTable_W(salesTable_W);
        #    }
        #
        #    TMSSalesTable::initFromTMSSalesAgreement(this.SalesId, _salesAgreementHeader.RecId);
        #}
      ENDSOURCE
      SOURCE #initFromSalesBasket
        #void initFromSalesBasket(SalesBasket salesBasket)
        #{
        #    this.ContactPersonId        = salesBasket.ContactPersonId;
        #
        #    this.DeliveryDateControlType = SalesDeliveryDateControlType::None;
        #    this.ShippingDateRequested   = salesBasket.DeliveryDate;
        #    this.ReceiptDateRequested    = salesBasket.DeliveryDate;
        #}
      ENDSOURCE
      SOURCE #initFromSalesQuotationTable
        #/// <summary>
        #/// Initializes a record in the <c>SalesTable</c> table from a record in the <c>SalesQuotationTable</c>
        #/// table.
        #/// </summary>
        #/// <param name="_salesQuotationTable">
        #/// The record in the <c>SalesQuotationTable</c> table from which to initialize.
        #/// </param>
        #void initFromSalesQuotationTable(SalesQuotationTable    _salesQuotationTable)
        #{
        #    SalesTable_BR           salesTable_BR;
        #    MCRSalesTable           mcrSalesTable;
        #    MCRSalesQuotationTable  mcrSalesQuotationTable;
        #    RetailSalesQuotationTable retailQuotation;
        #    RetailSalesTable          retailSales;
        #
        #    this.QuotationId                = _salesQuotationTable.QuotationId;
        #
        #    this.CustAccount                = _salesQuotationTable.CustAccount;
        #    this.initFromCustTable();
        #
        #    this.CurrencyCode               = _salesQuotationTable.CurrencyCode;
        #
        #    if (_salesQuotationTable.InvoiceAccount)
        #    {
        #        this.InvoiceAccount         =  _salesQuotationTable.InvoiceAccount;
        #    }
        #
        #    this.SmmCampaignId              = _salesQuotationTable.CampaignId;
        #
        #    this.SalesName                  = _salesQuotationTable.QuotationName;
        #    this.DeliveryDate               = _salesQuotationTable.ShippingDateRequested;
        #    this.Deadline                   = _salesQuotationTable.QuotationExpiryDate;
        #
        #    this.ContactPersonId            = _salesQuotationTable.ContactPersonId;
        #    this.CustomerRef                = _salesQuotationTable.CustomerRef;
        #    this.PurchOrderFormNum          = _salesQuotationTable.CustPurchaseOrder;
        #    this.DefaultDimension           = this.copyDimension(_salesQuotationTable.DefaultDimension);
        #    this.DeliveryName               = _salesQuotationTable.DeliveryName;
        #
        #    this.TransactionCode            = _salesQuotationTable.TransactionCode;
        #    this.Transport                  = _salesQuotationTable.Transport;
        #    this.Port                       = _salesQuotationTable.Port;
        #    this.StatProcId                 = _salesQuotationTable.StatProcId;
        #    this.Listcode                   = _salesQuotationTable.Listcode;
        #    this.CountyOrigDest             = _salesQuotationTable.CountyOrigDest;
        #
        #    if (_salesQuotationTable.DeliveryPostalAddress)
        #    {
        #        this.DeliveryPostalAddress  = _salesQuotationTable.DeliveryPostalAddress;
        #        this.AddressRefRecId        = _salesQuotationTable.AddressRefRecId;
        #        this.AddressRefTableId      = _salesQuotationTable.AddressRefTableId;
        #    }
        #
        #    this.vatNum                     = _salesQuotationTable.vatNum;
        #    this.TaxGroup                   = _salesQuotationTable.TaxGroup;
        #    this.InclTax                    = _salesQuotationTable.InclTax;
        #
        #    this.CashDisc                   = _salesQuotationTable.CashDisc;
        #
        #    this.CashDiscPercent            = _salesQuotationTable.CashDiscPercent;
        #
        #    this.DiscPercent                = _salesQuotationTable.DiscPercent;
        #    this.EndDisc                    = _salesQuotationTable.EndDisc;
        #    this.LineDisc                   = _salesQuotationTable.LineDisc;
        #    this.MultiLineDisc              = _salesQuotationTable.MultiLineDisc;
        #    this.CommissionGroup            = _salesQuotationTable.CommissionGroup;
        #
        #    this.DlvMode                    = _salesQuotationTable.DlvMode;
        #    this.DlvTerm                    = _salesQuotationTable.DlvTerm;
        #    this.DlvReason                  = _salesQuotationTable.DlvReason;
        #
        #    this.SalesGroup                 = _salesQuotationTable.SalesGroup;
        #    this.PriceGroupId               = _salesQuotationTable.PriceGroupId;
        #    this.LanguageId                 = _salesQuotationTable.LanguageId;
        #    this.MarkupGroup                = _salesQuotationTable.MarkupGroup;
        #    this.Payment                    = _salesQuotationTable.Payment;
        #    if(_salesQuotationTable.Payment)
        #    {
        #        this.PaymentSched           = _salesQuotationTable.payment().PaymSched;
        #    }
        #
        #    this.PostingProfile             = _salesQuotationTable.PostingProfile;
        #    this.WorkerSalesResponsible     = _salesQuotationTable.WorkerSalesResponsible;
        #    this.WorkerSalesTaker           = _salesQuotationTable.WorkerSalesTaker;
        #    this.SalesUnitId                = _salesQuotationTable.SalesUnitId;
        #    this.SalesOriginId              = _salesQuotationTable.SalesOriginId;
        #
        #    this.ShippingDateRequested      = _salesQuotationTable.ShippingDateRequested;
        #    this.ReceiptDateRequested       = _salesQuotationTable.ReceiptDateRequested;
        #    this.InventLocationId           = _salesQuotationTable.InventLocationId;
        #    this.setInventSiteId(_salesQuotationTable.InventSiteId);
        #
        #    if (BrazilParameters::isEnabled())
        #    {
        #        salesTable_BR = this.salesTable_BR();
        #        salesTable_BR.CustFinalUser_BR              = _salesQuotationTable.CustFinalUser_BR;
        #        salesTable_BR.SalesPurchOperationType_BR    = _salesQuotationTable.SalesPurchOperationType_BR;
        #        salesTable_BR.FineCode_BR                   = _salesQuotationTable.FineCode_BR;
        #        salesTable_BR.InterestCode_BR               = _salesQuotationTable.InterestCode_BR;
        #        this.packSalesTable_BR(salesTable_BR);
        #    }
        #    if (isConfigurationkeyEnabled(configurationKeyNum(MCRCallCenter)))
        #    {
        #        mcrSalesTable = this.mcrSalesTable();
        #        mcrSalesQuotationTable           = _salesQuotationTable.mcrSalesQuotationTable();
        #        // Copy the source code.
        #
        #        if (mcrSalesTable.SourceId != mcrSalesQuotationTable.SourceId)
        #        {
        #            mcrSalesTable.SourceId = mcrSalesQuotationTable.SourceId;
        #            this.mcrPackMCRSalesTable(mcrSalesTable);
        #        }
        #    }
        #
        #    if (isConfigurationkeyEnabled(configurationKeyNum(Retail)))
        #    {
        #        retailQuotation = _salesQuotationTable.retailSalesQuotationTable();
        #        if (retailQuotation && retailQuotation.RetailChannel)
        #        {
        #            retailSales = this.retailSalesTable();
        #            retailSales.RetailChannel = retailQuotation.RetailChannel;
        #            retailSales.TotalManualDiscountAmount = retailQuotation.TotalManualDiscountAmount;
        #            retailSales.TotalManualDiscountPercentage = retailQuotation.TotalManualDiscountPercentage;
        #            retailSales.RetailLoyaltyCard = retailQuotation.RetailLoyaltyCard;
        #
        #            this.retailPackRetailSalesTable(retailSales);
        #        }
        #    }
        #}
        #
        #
      ENDSOURCE
      SOURCE #initFromSalesTable
        #void initFromSalesTable(SalesTable salesTable)
        #{
        #    SalesTable_BR           salesTable_BR;
        #    MCRSalesTableShipping   mcrSalesTableShippingLocal;
        #    MCRSalesTableShipping   mcrSalesTableShipping;
        #    MCRSalesTable           mcrSalesTableLocal;
        #    MCRSalesTable           mcrSalesTable;
        #    // <GMY>
        #    SalesTable_W            salesTable_W;
        #    // </GMY>
        #
        #    RetailSalesTable retailSalesTable;
        #    #ISOCountryRegionCodes
        #
        #    this.Payment                    = salesTable.Payment;
        #    this.PaymMode                   = salesTable.PaymMode;
        #    this.PaymSpec                   = salesTable.PaymSpec;
        #    this.NumberSequenceGroup        = salesTable.NumberSequenceGroup;
        #    this.CashDisc                   = salesTable.CashDisc;
        #    this.CashDiscBaseDays           = salesTable.CashDiscBaseDays;
        #    this.CashDiscBaseDate           = salesTable.CashDiscBaseDate;
        #    this.CashDiscPercent            = salesTable.CashDiscPercent;
        #    this.CurrencyCode               = salesTable.CurrencyCode;
        #    this.DlvTerm                    = salesTable.DlvTerm;
        #    this.DlvMode                    = salesTable.DlvMode;
        #    this.DlvReason                  = salesTable.DlvReason;
        #    this.DefaultDimension           = this.copyDimension(salesTable.DefaultDimension);
        #    this.setTaxGroup(salesTable.TaxGroup);
        #    this.InclTax                    = salesTable.InclTax;
        #    this.Transport                  = salesTable.Transport;
        #    this.Port                       = salesTable.Port;
        #    this.StatProcId                 = salesTable.StatProcId;
        #    this.DiscPercent                = salesTable.DiscPercent;
        #    this.DeliveryName               = salesTable.DeliveryName;
        #
        #    if (this.CustAccount == salesTable.CustAccount)
        #    {
        #        this.DeliveryPostalAddress = salesTable.DeliveryPostalAddress;
        #    }
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
        #    {
        #        if (salesTable.salesTable_RU().AgreementHeaderExt_RU)
        #        {
        #            this.DefaultDimension = AgreementHeaderExt_RU::clearAgreementDimension(this.DefaultDimension);
        #        }
        #    }
        #
        #    if (RetailParameters::isRetailEnabledAndInUse())
        #    {
        #        retailSalesTable = this.retailSalesTable();
        #        retailSalesTable.RetailLoyaltyCard    = salesTable.retailSalesTable().RetailLoyaltyCard;
        #        this.packRetailSalesTable(retailSalesTable);
        #    }
        #    this.AddressRefRecId            = salesTable.AddressRefRecId;
        #    this.AddressRefTableId          = salesTable.AddressRefTableId;
        #    this.setShipCarrierInformation(salesTable);
        #
        #    if (isConfigurationkeyEnabled(configurationKeyNum(MCRCallCenter)))
        #    {
        #        mcrSalesTableShippingLocal  = this.mcrSalesTableShipping();
        #        mcrSalesTableShipping       = salesTable.mcrSalesTableShipping();
        #        mcrSalesTableLocal          = this.mcrSalesTable();
        #        mcrSalesTable               = salesTable.mcrSalesTable();
        #
        #        this.DeliveryPostalAddress               = salesTable.DeliveryPostalAddress;
        #        this.DeliveryName                        = salesTable.DeliveryName;
        #
        #        if (mcrSalesTableShippingLocal.Expedite != mcrSalesTableShipping.Expedite
        #            || mcrSalesTableShippingLocal.ShipComplete != mcrSalesTableShipping.ShipComplete)
        #        {
        #            mcrSalesTableShippingLocal.Expedite      = mcrSalesTableShipping.Expedite;
        #            mcrSalesTableShippingLocal.ShipComplete  = mcrSalesTableShipping.ShipComplete;
        #            this.mcrPackMCRSalesTableShipping(mcrSalesTableShippingLocal);
        #        }
        #
        #        if (mcrSalesTableLocal.PostageGroupID != mcrSalesTable.PostageGroupID)
        #        {
        #            mcrSalesTableLocal.PostageGroupID        = mcrSalesTable.PostageGroupID;
        #            this.mcrPackMCRSalesTable(mcrSalesTableLocal);
        #        }
        #    }
        #    if (BrazilParameters::isEnabled())
        #    {
        #        salesTable_BR = this.salesTable_BR();
        #        salesTable_BR.SalesPurchOperationType_BR    = salesTable.salesTable_BR().SalesPurchOperationType_BR;
        #        salesTable_BR.ServiceCodeOnDlvAddress_BR    = salesTable.salesTable_BR().ServiceCodeOnDlvAddress_BR;
        #        salesTable_BR.CustFinalUser_BR              = salesTable.salesTable_BR().CustFinalUser_BR;
        #        salesTable_BR.PresenceType                  = this.custTable_CustAccount().PresenceType_BR;
        #        this.packSalesTable_BR(salesTable_BR);
        #    }
        #
        #    if (this.InvoiceAccount == salesTable.InvoiceAccount)
        #    {
        #        this.DirectDebitMandate = salesTable.DirectDebitMandate;
        #    }
        #
        #    // <GMY>
        #    if (TaxGSTFeatureChecker_MY::isCountryRegionMY())
        #    {
        #        salesTable_W                = this.salesTable_W();
        #        salesTable_W.InvoiceType_MY = salesTable.salesTable_W().InvoiceType_MY;
        #        this.packSalesTable_W(salesTable_W);
        #    }
        #    // </GMY>
        #}
      ENDSOURCE
      SOURCE #initInvoiceAccount
        #void  initInvoiceAccount()
        #{
        #    CustTable      custTable;
        #    #ISOCountryRegionCodes
        #
        #    custTable = this.custTable_InvoiceAccount();
        #
        #    this.NumberSequenceGroup    = custTable.NumberSequenceGroup;
        #    this.Payment                = custTable.PaymTermId;
        #    this.initFromPayment();
        #    if (custTable.PaymSched)
        #    {
        #        this.PaymentSched   = custTable.PaymSched;
        #    }
        #    if (RetailMCRChannelTable::mcrEnableOrderCompletion(this))
        #    {
        #        // Clearing base payment fields, use attached payment record logic instead.
        #        this.PaymMode               = '';
        #        this.PaymSpec               = '';
        #    }
        #    else
        #    {
        #        this.PaymMode               = custTable.PaymMode;
        #        this.PaymSpec               = custTable.PaymSpec;
        #    }
        #    this.CashDisc               = custTable.CashDisc;
        #    this.CashDiscBaseDays       = custTable.CashDiscBaseDays;
        #    this.setListCode();
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoLV, #isoLT]))
        #    {
        #        this.InvoiceRegister_LT         = LtInvoiceAutoNumberingGroups::autoNumberingForSalesInvoice(this.InvoiceAccount);
        #        this.PackingSlipRegister_LT     = LtInvoiceAutoNumberingGroups::autoNumberingForSalesPackingSlip(this.InvoiceAccount);
        #    }
        #}
      ENDSOURCE
      SOURCE #initReturnFromSalesTable
        #void initReturnFromSalesTable(SalesTable _other)
        #{
        #    this.CustAccount        = _other.CustAccount;
        #    this.CustGroup          = _other.CustGroup;
        #    this.InvoiceAccount     = _other.InvoiceAccount;
        #
        #    this.initFromCustTable();
        #    this.initFromSalesTable(_other);
        #
        #    this.DeliveryDateControlType = SalesDeliveryDateControlType::None;
        #    this.ShippingDateRequested   = _other.DeliveryDate;
        #    this.ReceiptDateRequested    = _other.DeliveryDate;
        #
        #    this.SalesId            = NumberSeq::newGetNum(SalesParameters::numRefSalesId()).num();
        #    this.ReturnItemNum      = NumberSeq::newGetNum(SalesParameters::numRefReturnItemNum()).num();
        #
        #    this.SalesType          = SalesType::ReturnItem;
        #    this.ReturnStatus       = ReturnStatusHeader::Created;
        #}
      ENDSOURCE
      SOURCE #initTaxDefaultsFromInvoiceAccount
        #/// <summary>
        #/// Copies fiscal data fields from the invoice account.
        #/// </summary>
        #private void initTaxDefaultsFromInvoiceAccount()
        #{
        #    CustTable      custTable;
        #    CustParameters custParameters;
        #
        #    custTable = this.custTable_InvoiceAccount();
        #
        #    this.vatNum = custTable.vatNum;
        #    this.setTaxGroup(TaxSales::custTaxGroup(custTable.DlvTerm, custTable.TaxGroup));
        #    this.CustGroup = custTable.CustGroup;
        #    custParameters = CustParameters::find();
        #    if (custParameters.CustNameFromVATNum)
        #    {
        #        this.setNameUsingVATNum(custTable.vatNum,
        #                                this.payerPostalAddress().CountryRegionId,
        #                                custTable.name(),
        #                                custParameters);
        #    }
        #    else
        #    {
        #        this.SalesName = custTable.name();
        #    }
        #}
      ENDSOURCE
      SOURCE #initValue
        #void initValue(SalesType _salesType = SalesParameters::find().OrderType)
        #{
        #    this.SalesType = _salesType;
        #
        #    super();
        #
        #    this.initValue_Server();
        #}
      ENDSOURCE
      SOURCE #initValue_Server
        #server void initValue_Server()
        #{
        #    SalesTableType salesTableType;
        #
        #    salesTableType = this.type();
        #    salesTableType.initValue();
        #
        #    if (smmLicense::crm())
        #    {
        #        this.WorkerSalesResponsible   = currentWorker();
        #        this.SalesUnitId              = smmUtility::getCurrentSalesUnit();
        #    }
        #    this.WorkerSalesTaker   = currentWorker();
        #
        #    //Add for Connector integration
        #    if(!this.daxIntegrationID)
        #    {
        #        this.daxIntegrationID = newGuid();
        #    }
        #}
      ENDSOURCE
      SOURCE #insert
        #void insert(boolean _skipMarkup = false)
        #{
        #    SalesTableType                  salesTableType;
        #    RetailEventNotificationSetting  retailEventNotificationSetting;
        #
        #    #ISOCountryRegionCodes
        #
        #    if (!this.SalesId)
        #    {
        #        throw(error(strFmt("@SYS26332", fieldId2pname(tableNum(SalesTable), fieldNum(SalesTable, SalesId)))));
        #    }
        #
        #    ttsbegin;
        #
        #    salesTableType = this.type();
        #    salesTableType.insert(_skipMarkup);
        #
        #    this.SysExtensionSerializerMap::postInsert();
        #
        #    TradeBLWIJournalPurposeCodes::createRecord(TradeBLWICustVend::Customer, this.RecId, this.CustAccount, TradeBLWITypeOfForm::SalesTable);
        #    if (isConfigurationkeyEnabled(configurationKeyNum(LedgerBasicSalesTax)) &&
        #        SysCountryRegionCode::isLegalEntityInCountryRegion([#isoPL]))
        #    {
        #        if (CustTable::find(this.CustAccount).ExportSales_PL)
        #        {
        #            ExportSalesOrder::createFromSalesOrder(this.SalesId);
        #        }
        #    }
        #    ttscommit;
        #
        #    select firstonly RecId  from retailEventNotificationSetting
        #        where retailEventNotificationSetting.DataAreaId == curext()
        #        && retailEventNotificationSetting.EventNotificationType == RetailEventNotificationType::ReplacementOrderCreation;
        #
        #    // If replacement order is created
        #    if ((this.SalesType == SalesType::Sales)
        #        && (this.ReturnItemNum != '')
        #        && retailEventNotificationSetting.RecId)
        #    {
        #        RetailEventNotificationAction::insertRetailOENAction(
        #                        RetailEventNotificationType::ReplacementOrderCreation,
        #                        this.RecId,
        #                        this);
        #    }
        #    else // Else, any other type of order creation
        #    {
        #        RetailEventNotificationAction::insertRetailOENAction(
        #                        RetailEventNotificationType::OrderCreation,
        #                        this.RecId,
        #                        this);
        #    }
        #}
      ENDSOURCE
      SOURCE #interCompanyAllowIndirectCreationOrig
        #public InterCompanyAllowIndirectCreationTxt interCompanyAllowIndirectCreationOrig()
        #{
        #    InterCompanyAllowIndirectCreationTxt interCompanyAllowIndirectCreationTxt;
        #
        #    if (this.InterCompanyDirectDeliveryOrig
        #    && !this.InterCompanyAllowIndirectCreationOrig)
        #    {
        #        interCompanyAllowIndirectCreationTxt = "@SYS95179";
        #    }
        #    return interCompanyAllowIndirectCreationTxt;
        #}
      ENDSOURCE
      SOURCE #interCompanyAllowIndirectCreationTxt
        #display InterCompanyAllowIndirectCreationTxt interCompanyAllowIndirectCreationTxt()
        #{
        #    return this.interCompanyAllowIndirectCreationOrig();
        #}
      ENDSOURCE
      SOURCE #interCompanyCheckCurrency
        #boolean interCompanyCheckCurrency()
        #{
        #    MarkupTrans     markupTrans;
        #
        #    if (this.isInterCompanyOrder()
        #    &&  this.CurrencyCode != this.orig().CurrencyCode)
        #    {
        #        if (SalesLine::exist(this.SalesId))
        #        {
        #            return checkFailed(strFmt("@SYS105402"));
        #        }
        #
        #        select firstonly markupTrans
        #               index hint TableRecIdIdx
        #               where markupTrans.TransTableId == this.TableId
        #               &&    markupTrans.TransRecId   == this.RecId
        #               &&   !markupTrans.IsDeleted;
        #        if (markupTrans)
        #        {
        #            return checkFailed(strFmt("@SYS105402"));
        #        }
        #    }
        #    return true;
        #}
      ENDSOURCE
      SOURCE #interCompanyDirectDeliveryReturn
        #/// <summary>
        #///    Sets the InterCompanyAutoCreateOrders and InterCompanyAllowIndirectCreate fieldsto the value of the
        #///    InterCompanyDirectDelivery field.
        #/// </summary>
        #/// <remarks>
        #///    This method is used, when the InterCompanyDirectDelivery field is changed for a return order.
        #/// </remarks>
        #public void interCompanyDirectDeliveryReturn()
        #{
        #    this.InterCompanyAutoCreateOrders      = this.InterCompanyDirectDelivery;
        #    this.InterCompanyAllowIndirectCreation = this.InterCompanyDirectDelivery;
        #}
      ENDSOURCE
      SOURCE #interCompanyEndpointActionPolicy
        #/// <summary>
        #/// Gets the intercompany trading policy for the current <c>SalesTable</c> table record.
        #/// </summary>
        #/// <param name="_forUpdate">
        #/// A Boolean value that indicates whether to read the record for update; optional.
        #/// </param>
        #/// <returns>
        #/// A record in the <c>InterCompanyEndpointActionPolicy</c> table; otherwise, an empty record.
        #/// </returns>
        #public InterCompanyEndpointActionPolicy interCompanyEndpointActionPolicy(boolean   _forUpdate = false)
        #{
        #    InterCompanyEndpointActionPolicy    interCompanyEndpointActionPolicy;
        #
        #    changecompany (
        #                   this.company()
        #                   )
        #    {
        #        interCompanyEndpointActionPolicy = CustTable::find(this.CustAccount).interCompanyTradingPartner().interCompanyEndpointActionPolicy(_forUpdate);
        #    }
        #    return interCompanyEndpointActionPolicy;
        #}
      ENDSOURCE
      SOURCE #interCompanyNonICExist
        #public boolean interCompanyNonICExist()
        #{
        #    SalesLine   salesLine;
        #    PurchLine   purchLine;
        #
        #    select firstonly RecId from salesLine
        #           where salesLine.SalesId == this.SalesId
        #           &&   (salesLine.InventRefType != InventRefType::Purch
        #             || (salesLine.InventRefType == InventRefType::Purch
        #              && salesLine.InventRefTransId))
        #    notexists join purchLine
        #         where (purchLine.ItemRefType       == InventRefType::Sales
        #         &&    !purchLine.IsDeleted
        #         &&     purchLine.InventTransId     == salesLine.InventRefTransId
        #         &&     purchLine.InterCompanyInventTransId);
        #
        #    return salesLine.RecId ? true : false;
        #}
      ENDSOURCE
      SOURCE #interCompanyOriginalSalesInfo
        #public server container interCompanyOriginalSalesInfo()
        #{
        #    InterCompanySalesType   salesType;
        #    SalesTable              salesTable;
        #    SalesStatus             salesStatus = SalesStatus::None;
        #    PurchTable              purchTable;
        #    PurchStatus             purchStatus = PurchStatus::None;
        #
        #    if (this.InterCompanyOrder
        #    &&  this.InterCompanyCompanyId)
        #    {
        #        changecompany(this.InterCompanyCompanyId)
        #        {
        #            if (this.InterCompanyOriginalSalesId)
        #            {
        #                select SalesType, SalesStatus from salesTable
        #                       index hint SalesIdx
        #                       where salesTable.SalesId == this.InterCompanyOriginalSalesId;
        #                salesType   = enum2str(salesTable.SalesType);
        #                salesStatus = salesTable.SalesStatus;
        #            }
        #
        #            select PurchStatus from purchTable
        #                   index hint PurchIdx
        #                   where purchTable.PurchId == this.InterCompanyPurchId;
        #            purchStatus = purchTable.PurchStatus;
        #        }
        #    }
        #    return [purchStatus,salesType,salesStatus];
        #}
      ENDSOURCE
      SOURCE #interCompanyOriginDisplay
        #display InterCompanyOriginDisplay interCompanyOriginDisplay()
        #{
        #    InterCompanyOriginDisplay   interCompanyOriginDisplay;
        #    DictEnum                    dictEnum = new DictEnum(enumNum(InterCompanyOrigin));
        #
        #    if (this.InterCompanyOrder)
        #    {
        #        interCompanyOriginDisplay = dictEnum.value2Name(this.InterCompanyOrigin);
        #    }
        #    return interCompanyOriginDisplay;
        #}
      ENDSOURCE
      SOURCE #interCompanyPurchTable
        #PurchTable  interCompanyPurchTable(boolean  _forUpdate = false)
        #{
        #    PurchTable      purchTable;
        #
        #    if (this.InterCompanyOrder
        #    &&  this.InterCompanyCompanyId
        #    &&  this.InterCompanyPurchId)
        #    {
        #        changecompany(this.InterCompanyCompanyId)
        #        {
        #            purchTable = PurchTable::find(this.InterCompanyPurchId, _forUpdate);
        #        }
        #
        #    }
        #    return purchTable;
        #}
      ENDSOURCE
      SOURCE #interCompanyReplacementRegistered
        #private boolean interCompanyReplacementRegistered()
        #{
        #    boolean                 ret;
        #    SalesLine               salesLine;
        #    ReturnDispositionCode   returnDispositionCode;
        #
        #    while select forceplaceholders salesLine
        #          where salesLine.SalesId       == this.SalesId
        #          &&    salesLine.InventRefType == InventRefType::Purch
        #          &&    salesLine.InventRefTransId
        #    join returnDispositionCode
        #         where returnDispositionCode.DispositionCodeId == salesLine.ReturnDispositionCodeId
        #    {
        #        if (salesLine.interCompanySalesLineExist()
        #        &&  returnDispositionCode.createReplacement())
        #        {
        #            ret = true;
        #            break;
        #        }
        #    }
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #interCompanyTradingValueMap
        #/// <summary>
        #/// Gets the intercompany trading value mapping for the current <c>SalesTable</c> table record.
        #/// </summary>
        #/// <param name="_forUpdate">
        #/// A Boolean value that indicates whether to read the record for update; optional.
        #/// </param>
        #/// <returns>
        #/// A record in the <c>InterCompanyTradingValueMap</c> table; otherwise, an empty record.
        #/// </returns>
        #public InterCompanyTradingValueMap interCompanyTradingValueMap(boolean   _forUpdate = false)
        #{
        #    InterCompanyTradingValueMap interCompanyTradingValueMap;
        #
        #    changecompany (
        #                   this.company()
        #                   )
        #    {
        #        interCompanyTradingValueMap = CustTable::find(this.CustAccount).interCompanyTradingPartner().interCompanyTradingValueMap(_forUpdate);
        #    }
        #    return interCompanyTradingValueMap;
        #}
      ENDSOURCE
      SOURCE #interCompanyUpdateNow
        #boolean  interCompanyUpdateNow()
        #{
        #    boolean  ok;
        #    #isoCountryRegionCodes
        #    SalesTable_RU salesTableRU;
        #
        #    if (!this.RecId)
        #    {
        #        ok = true;
        #    }
        #
        #    if (this.orig().SalesType                       != this.SalesType
        #    ||  this.orig().CurrencyCode                    != this.CurrencyCode
        #    ||  this.orig().DlvTerm                         != this.DlvTerm
        #    ||  this.orig().DlvMode                         != this.DlvMode
        #    ||  this.orig().DeliveryDate                    != this.DeliveryDate
        #    ||  this.orig().ReceiptDateRequested            != this.ReceiptDateRequested
        #    ||  this.orig().ReceiptDateConfirmed            != this.ReceiptDateConfirmed
        #    ||  this.orig().ShippingDateRequested           != this.ShippingDateRequested
        #    ||  this.orig().ShippingDateConfirmed           != this.ShippingDateConfirmed
        #    ||  this.orig().DeliveryPostalAddress           != this.DeliveryPostalAddress
        #    ||  this.orig().DeliveryName                    != this.DeliveryName
        #    ||  this.orig().InterCompanyOriginalSalesId     != this.InterCompanyOriginalSalesId
        #    ||  this.orig().InterCompanyOriginalCustAccount != this.InterCompanyOriginalCustAccount
        #    ||  this.orig().InterCompanyDirectDelivery      != this.InterCompanyDirectDelivery
        #    ||  this.orig().InterCompanyDirectDeliveryOrig  != this.InterCompanyDirectDeliveryOrig
        #    ||  this.orig().PurchOrderFormNum               != this.PurchOrderFormNum
        #    ||  this.orig().CustomerRef                     != this.CustomerRef
        #    ||  this.orig().ReturnItemNum                   != this.ReturnItemNum
        #    ||  this.orig().DefaultDimension                != this.DefaultDimension
        #    ||  this.orig().DiscPercent                     != this.DiscPercent
        #    ||  this.orig().ReturnReasonCodeId              != this.ReturnReasonCodeId
        #    ||  this.orig().ReturnReplacementCreated        != this.ReturnReplacementCreated
        #    ||  this.orig().MatchingAgreement               != this.MatchingAgreement)
        #    {
        #        ok = true;
        #    }
        #    else
        #    {
        #        if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
        #        {
        #            salesTableRU = this.salesTable_RU();
        #            ok = salesTableRU.orig().InventProfileId_RU != salesTableRU.InventProfileId_RU;
        #        }
        #    }
        #
        #    return ok;
        #}
      ENDSOURCE
      SOURCE #invoiceName
        #display CustName invoiceName()
        #{
        #    return this.custTable_InvoiceAccount().name();
        #}
      ENDSOURCE
      SOURCE #isBankDocumentCreated
        #/// <summary>
        #/// Checks if a bank document has been created for this order.
        #/// </summary>
        #/// <returns>
        #/// true if it a bank document has been created; otherwise, false.
        #/// </returns>
        #public boolean isBankDocumentCreated()
        #{
        #    return this.isBankLCCreated()
        #        || this.isBankLGCreated();
        #}
      ENDSOURCE
      SOURCE #isBankLCCreated
        #/// <summary>
        #/// Checks if a bank LC has been created for this order.
        #/// </summary>
        #/// <returns>
        #/// true if a bank LC has been created; otherwise, false.
        #/// </returns>
        #public boolean isBankLCCreated()
        #{
        #    boolean     ret = false;
        #
        #    if (this.isMarkedForBankLC())
        #    {
        #        ret = BankLCExport::existBySalesTable(this.SalesId);
        #    }
        #
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #isBankLGCreated
        #/// <summary>
        #/// Checks if a bank LG has been created for this order.
        #/// </summary>
        #/// <returns>
        #/// true if a bank LG has been created; otherwise, false.
        #/// </returns>
        #public boolean isBankLGCreated()
        #{
        #    boolean     ret = false;
        #
        #    if (this.isMarkedForBankLG() && this.BankLGDocumentMap::isLinkedToGuarantee())
        #    {
        #        ret = true;
        #    }
        #
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #isCancellingFiscalDocApproved_BR
        #/// <summary>
        #/// Checks if the fiscal document being cancelled is approved
        #/// </summary>
        #/// <returns>
        #/// True if the fiscal document being cancelled is approved, false otherwise
        #/// </returns>
        #public boolean isCancellingFiscalDocApproved_BR()
        #{
        #    SalesTable_BR       salesTable_BR;
        #    FiscalDocument_BR   fiscalDocumentBeingCancelled;
        #
        #    salesTable_BR = this.salesTable_BR();
        #
        #    if (!salesTable_BR.InvoiceRefRecID_BR)
        #    {
        #        return false;
        #    }
        #
        #    fiscalDocumentBeingCancelled = FiscalDocument_BR::findByRef(tableNum(CustInvoiceJour), salesTable_BR.InvoiceRefRecID_BR);
        #
        #    return fiscalDocumentBeingCancelled.Status == FiscalDocumentStatus_BR::Approved;
        #}
      ENDSOURCE
      SOURCE #isCancellingSalesReturn_BR
        #/// <summary>
        #///     Verifies whether the sales order is for cancelling a sales return previously entered.
        #/// </summary>
        #/// <returns>
        #///     true if the sales order is for cancelling a sales return; false otherwise.
        #/// </returns>
        #public boolean isCancellingSalesReturn_BR()
        #{
        #    SalesTable_BR       salesTable_BR;
        #    FiscalDocument_BR   fiscalDocumentBeingCancelled;
        #
        #    salesTable_BR = this.salesTable_BR();
        #
        #    if (!salesTable_BR.InvoiceRefRecID_BR)
        #    {
        #        return false;
        #    }
        #
        #    fiscalDocumentBeingCancelled = FiscalDocument_BR::findByRef(tableNum(CustInvoiceJour), salesTable_BR.InvoiceRefRecID_BR);
        #
        #    if (fiscalDocumentBeingCancelled.Direction == FiscalDocDirection_BR::Incoming)
        #    {
        #        return true;
        #    }
        #
        #    return false;
        #}
        #
      ENDSOURCE
      SOURCE #isCreditCardPaymentType
        #public boolean isCreditCardPaymentType()
        #{
        #    return isConfigurationkeyEnabled(configurationKeyNum(CreditCard)) && this.payment().CreditCardPaymentType == CreditCardPaymentType::CreditCard;
        #}
      ENDSOURCE
      SOURCE #isCreditCheckEligible
        #/// <summary>
        #/// Checks to see whether the current sales order type is eligible for the credit limit check.
        #/// </summary>
        #/// <returns>
        #/// true if current sales order type is eligible fot the credit limit check; otherwise, false.
        #/// </returns>
        #/// <remarks>
        #/// Calls to the related types overwritten method.
        #/// </remarks>
        #boolean isCreditCheckEligible()
        #{
        #    return this.type().isCreditCheckEligible();
        #}
      ENDSOURCE
      SOURCE #isCreditNote_CZ
        #/// <summary>
        #///     Checks to see if any of the lines associated with the current header is a credit note.
        #/// </summary>
        #/// <returns>
        #///     True, if at least one line is a credit note.
        #/// </returns>
        #public boolean isCreditNote_CZ()
        #{
        #    SalesLine salesLine;
        #    SalesLine salesLineRefRet;
        #
        #    select firstonly RecId from salesLine
        #        where salesLine.SalesId == this.SalesId &&
        #                salesLine.InventTransIdReturn;
        #
        #    select firstonly RecId from salesLineRefRet
        #        where salesLineRefRet.SalesId == this.SalesId &&
        #                salesLineRefRet.RefReturnInvoiceTrans_W;
        #
        #
        #    return salesLine.RecId != 0 || salesLineRefRet.RecId != 0;
        #}
        #
        #
      ENDSOURCE
      SOURCE #isCreditNote_PL
        #/// <summary>
        #///     Checks to see if any of the lines associated with the current header is a credit note.
        #/// </summary>
        #/// <returns>
        #///     True, if at least one line is a credit note.
        #/// </returns>
        #public boolean isCreditNote_PL()
        #{
        #    #ISOCountryRegionCodes
        #    SalesLine salesLine;
        #
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoPL,#isoHU,#isoCZ,#isoLT,#isoLV,#isoEE]) && this.SalesId)
        #    {
        #        select firstonly RecId from salesLine
        #            where salesLine.SalesId == this.SalesId &&
        #                    salesLine.CreditNoteInternalRef_PL;
        #    }
        #
        #    return salesLine.RecId != 0;
        #}
      ENDSOURCE
      SOURCE #isExcisable_IN
        #/// <summary>
        #///     Checks to see if any of the lines associated with the current header is a excise type.
        #/// </summary>
        #/// <returns>
        #///     True, if at least one line is of excise type.
        #/// </returns>
        #// <GIN>
        #public boolean isExcisable_IN()
        #{
        #    SalesLine       salesLine;
        #    TaxOnItem       taxOnItem;
        #    TaxTable        taxTable;
        #    SalesLine_IN    salesLine_IN;
        #
        #    select firstonly RecId, SalesId, SalesQty from salesLine
        #        where salesLine.SalesId == this.SalesId &&
        #            salesLine.SalesType == SalesType::Sales &&
        #                salesLine.SalesQty > 0
        #    exists join salesLine_IN
        #        where salesLine_IN.SalesLine == salesLine.RecId &&
        #            (salesLine_IN.ExciseType_IN == ExciseType_IN::Manufacturer
        #                || salesLine_IN.ExciseType_IN == ExciseType_IN::Trader)
        #    exists join taxOnItem
        #        where taxOnItem.TaxItemGroup == salesLine.TaxItemGroup
        #    exists join taxTable
        #        where taxTable.TaxCode == taxOnItem.TaxCode &&
        #            taxTable.TaxType_IN == TaxType_IN::Excise;
        #
        #    return salesLine.RecId;
        #}
        #// </GIN>
      ENDSOURCE
      SOURCE #isInterCompanyOrder
        #boolean  isInterCompanyOrder()
        #{
        #    return (this.InterCompanyCompanyId != ''
        #        &&  this.InterCompanyOrder
        #        && !this.SkipUpdate
        #        &&  this.SalesType != SalesType::ItemReq);
        #}
      ENDSOURCE
      SOURCE #isInterCompanyPOInvoiceMatched
        #/// <summary>
        #/// Indicates whether a related intercompany purchase order was partially or fully invoiced.
        #/// </summary>
        #/// <returns>
        #/// true if the related intercompany purchase order was partially or fully invoiced; otherwise, false.
        #/// </returns>
        #public boolean isInterCompanyPOInvoiceMatched()
        #{
        #    boolean ret;
        #
        #    if (this.isInterCompanyOrder())
        #    {
        #        ret = (select firstonly crosscompany RecId from vendInvoicePurchLink
        #                where vendInvoicePurchLink.OrigPurchId == this.InterCompanyPurchId
        #                   && vendInvoicePurchLink.DataAreaId  == this.InterCompanyCompanyId).RecId != 0;
        #    }
        #
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #isMarkedForBankLC
        #/// <summary>
        #/// Indicates whether the sales order is marked for <c>Letter of Credit</c>.
        #/// </summary>
        #/// <returns>
        #/// true if the Sales order is marked for <c>Letter of Credit</c>; otherwise, false.
        #/// </returns>
        #public boolean isMarkedForBankLC()
        #{
        #    return this.BankDocumentType == BankDocumentType::LetterOfCredit
        #        || this.BankDocumentType == BankDocumentType::ImportCollection;
        #}
      ENDSOURCE
      SOURCE #isMarkedForBankLG
        #/// <summary>
        #/// Indicates whether the sales order is marked for <c>Letter of Guarantee</c>.
        #/// </summary>
        #/// <returns>
        #/// true if the sales order is marked for <c>Letter of Guarantee</c>; otherwise, false.
        #/// </returns>
        #public boolean isMarkedForBankLG()
        #{
        #    return this.BankDocumentType == BankDocumentType::LetterOfGuarantee;
        #}
      ENDSOURCE
      SOURCE #isOnlineOrder
        #private boolean isOnlineOrder()
        #{
        #    RetailOnlineChannelTable channelTable;
        #    RetailSalesTable retailSalesTable;
        #
        #    // find an online channel if this SO links to it
        #    select firstonly RecId from channelTable
        #        join SalesTable, RetailChannel from retailSalesTable
        #        where retailSalesTable.SalesTable == this.RecId
        #           && channelTable.RecId == retailSalesTable.RetailChannel;
        #
        #    return (channelTable.RecId != 0);
        #}
      ENDSOURCE
      SOURCE #isRetailSale
        #/// <summary>
        #/// Indicates whether the <c>SalesTable</c> record is a Retail sales record
        #/// </summary>
        #/// <returns>
        #/// true if the <c>SalesTable</c> record is a Retail sales record; otherwise, false.
        #/// </returns>
        #public display NoYes isRetailSale()
        #{
        #    return this.retailSalesTable().RetailOrder == NoYes::Yes;
        #}
      ENDSOURCE
      SOURCE #isRetailStatement
        #/// <summary>
        #/// Indicates whether the <c>SalesTable</c> record is originated from a Retail statement
        #/// </summary>
        #/// <returns>
        #/// True if the <c>SalesTable</c> record is originated from a Retail statement; otherwise, false.
        #/// </returns>
        #/// <remarks>
        #/// Customer orders have also channel reference ID populate, but they are not posted through statements.
        #/// </remarks>
        #public NoYes isRetailStatement()
        #{
        #    return this.retailSalesTable().RetailOrder == NoYes::Yes
        #        && this.retailSalesTable().ChannelReferenceId == '';
        #}
      ENDSOURCE
      SOURCE #isRetailStatement_BR
        #/// <summary>
        #/// Indicates whether the <c>SalesTable</c> record is originated from a Retail statement
        #/// </summary>
        #/// <returns>
        #/// True if the <c>SalesTable</c> record is originated from a Retail statement; otherwise, false.
        #/// </returns>
        #/// <remarks>
        #/// All transactions originated at the POS have terminal ID populated. Customer orders
        #/// have also channel reference ID populate, but they are not posted through statements.
        #/// </remarks>
        #public NoYes isRetailStatement_BR()
        #{
        #    return this.retailSalesTable().RetailTerminalId != ''
        #        && this.retailSalesTable().ChannelReferenceId == '';
        #}
      ENDSOURCE
      SOURCE #jumpRefIntercompanyOriginalSalesOrder
        #/// <summary>
        #/// Serves as the jump reference for the original sales order that relates to the sales order.
        #/// </summary>
        #/// <param name="_caller">
        #/// The object that is calling the <c>SalesTable.jumpRefIntercompanyOriginalSalesOrder</c> method;
        #/// optional.
        #/// </param>
        #public void jumpRefIntercompanyOriginalSalesOrder(Object _caller = null)
        #{
        #    if (this.SalesType == SalesType::ReturnItem)
        #    {
        #        TradeInterCompany::construct(this,true).formRun(formStr(ReturnTable),_caller);
        #    }
        #    else
        #    {
        #        TradeInterCompany::construct(this,true).formRun(formStr(SalesTable),_caller);
        #    }
        #}
      ENDSOURCE
      SOURCE #jumpRefIntercompanyPurchaseOrder
        #/// <summary>
        #/// Serves as the jump reference for the intercompany purchase order that relates to the sales order.
        #/// </summary>
        #/// <param name="_caller">
        #/// The object that is calling the <c>SalesTable.jumpRefIntercompanyPurchaseOrder</c> method; optional.
        #/// </param>
        #public void jumpRefIntercompanyPurchaseOrder(Object _caller = null)
        #{
        #    TradeInterCompany::construct(this).formRun(formStr(PurchTable),_caller);
        #}
      ENDSOURCE
      SOURCE #jumpRefReturnItemNum
        #void jumpRefReturnItemNum(Object object)
        #{
        #    Args            args;
        #    FormRun         formRun;
        #    SalesTable      salesTable;
        #
        #    salesTable = this.SalesType != SalesType::ReturnItem ? SalesTable::findReturnItemNum(this.ReturnItemNum) : this;
        #
        #    args = new Args(formStr(ReturnTable));
        #    args.record(salesTable);
        #    args.caller(object);
        #
        #    // Menu item info will be used by security framework, when setting access rights to form datasources
        #    args.menuItemType(MenuItemType::Display);
        #    args.menuItemName(menuitemDisplayStr(ReturnTableDetails));
        #
        #    formRun = classfactory.formRunClass(args);
        #    formRun.init();
        #    formRun.run();
        #    formRun.detach();
        #}
      ENDSOURCE
      SOURCE #lastConfirm
        #[SysClientCacheDataMethodAttribute(true)]
        #server display CustConfirmDocNum lastConfirm()
        #{
        #    CustConfirmSalesLink    custConfirmSalesLink;
        #    CustConfirmJour         custConfirmJour;
        #
        #    select firstonly TableId from custConfirmSalesLink
        #            index hint origSalesIdx
        #            order by ConfirmDate desc, ConfirmId desc
        #            where custConfirmSalesLink.OrigSalesId == this.SalesId
        #        join ConfirmDocNum from custConfirmJour
        #            where custConfirmJour.ConfirmId     == custConfirmSalesLink.ConfirmId   &&
        #                  custConfirmJour.ConfirmDate   == custConfirmSalesLink.ConfirmDate;
        #    return custConfirmJour.ConfirmDocNum;
        #}
      ENDSOURCE
      SOURCE #lastConfirmDate
        #[SysClientCacheDataMethodAttribute(true)]
        #server display TransDate lastConfirmDate()
        #{
        #    return (select maxof(ConfirmDate) from custConfirmSalesLink
        #                index hint origSalesIdx
        #                where custConfirmSalesLink.OrigSalesId == this.SalesId).ConfirmDate;
        #}
      ENDSOURCE
      SOURCE #lastFacture_RU
        ##define.FactureNumPosition(1)
        #public FactureExternalId_RU lastFacture_RU()
        #{
        #    return conPeek(this.lastFactureNumDate_RU(), #FactureNumPosition);
        #}
      ENDSOURCE
      SOURCE #lastFactureNumDate_RU
        #private container lastFactureNumDate_RU()
        #{
        #    FactureJour_RU       jour;
        #    RecordSortedList     list = new RecordSortedList(tableNum(FactureJour_RU)),
        #                         tmpList;
        #    CustInvoiceSalesLink invoiceSalesLink;
        #    CustInvoiceJour      invoiceJour;
        #
        #    // to avoid BP warning
        #    void dummy()
        #    {
        #    }
        #    ;
        #    select firstonly RecId from jour;
        #    if(! jour.RecId)
        #        return [ "", dateNull() ];
        #
        #    list.sortOrder(fieldNum(FactureJour_RU, FactureDate),
        #                   fieldNum(FactureJour_RU, FactureId),
        #                   fieldNum(FactureJour_RU, ModifiedDateTime),
        #                   fieldNum(FactureJour_RU, RecId));
        #
        #    while select RecId from invoiceSalesLink
        #        index hint origSalesIdx
        #        where invoiceSalesLink.OrigSalesId == this.SalesId
        #    join invoiceJour
        #        where invoiceJour.SalesId          == invoiceSalesLink.SalesId   &&
        #              invoiceJour.InvoiceId        == invoiceSalesLink.InvoiceId &&
        #              invoiceJour.InvoiceDate      == invoiceSalesLink.InvoiceDate
        #    {
        #        tmpList = invoiceJour.factureJourSortedList_RU();
        #        tmpList.first(jour);
        #        if (jour)
        #        {
        #            while (tmpList.next(jour))
        #            {
        #                dummy();
        #            } // last element
        #
        #            if (! list.find(jour))
        #            {
        #                list.ins(jour);
        #            }
        #        }
        #    }
        #
        #    list.first(jour);
        #    while (list.next(jour))
        #    {
        #        dummy();
        #    }  // last element
        #
        #    return [ jour.FactureExternalId, jour.FactureDate ];
        #}
      ENDSOURCE
      SOURCE #lastInvoice
        #/// <summary>
        #/// Returns the document number of the last invoice posted for this sales order.
        #/// </summary>
        #/// <param name="_skipVendorFulfilledInvoices">
        #/// true if sales invoices that have been fulfilled by intercompany invoices should be skipped; otherwise, false.
        #/// </param>
        #/// <returns>
        #/// The document number of the last invoice posted for this sales order.
        #/// </returns>
        #[SysClientCacheDataMethodAttribute(true)]
        #server display InvoiceId lastInvoice(boolean _skipVendorFulfilledInvoices = false)
        #{
        #    ProjInvoiceItem         projInvoiceItem;
        #    CustInvoiceSalesLink    custInvoiceSalesLink;
        #    VendInvoiceJour         vendInvoiceJour;
        #    container               vendInvoiceCompany = [this.InterCompanyCompanyId];
        #    InvoiceId               firstInvoiceId;
        #
        #    if (!this.ProjId)
        #    {
        #        while select InvoiceId from custInvoiceSalesLink
        #            index hint origSalesIdx
        #            order by InvoiceDate desc, InvoiceId desc
        #               where custInvoiceSalesLink.OrigSalesId == this.SalesId
        #        {
        #            if (_skipVendorFulfilledInvoices)
        #            {
        #                // Return the most recent sales invoice without a corresponding vendor invoice
        #                select crossCompany:vendInvoiceCompany RecId from vendInvoiceJour
        #                    where vendInvoiceJour.PurchId == this.InterCompanyPurchId &&
        #                          vendInvoiceJour.InvoiceId == custInvoiceSalesLink.InvoiceId;
        #
        #                if (vendInvoiceJour.RecId == 0)
        #                {
        #                    return custInvoiceSalesLink.InvoiceId;
        #                }
        #
        #                if (firstInvoiceId == '')
        #                {
        #                    firstInvoiceId = custInvoiceSalesLink.InvoiceId;
        #                }
        #            }
        #            else
        #            {
        #                return custInvoiceSalesLink.invoiceId;
        #            }
        #        }
        #
        #        // If we didn't find any sales invoice without a corresponding vendor invoice, return the first invoice ID
        #        return firstInvoiceId;
        #    }
        #
        #    // This is invoiced from Project
        #    return (select firstonly ProjInvoiceId
        #            from projInvoiceItem
        #            index hint InvoiceIdx
        #            order by InvoiceDate desc, ProjInvoiceId desc
        #            where projInvoiceItem.SalesId == this.SalesId).ProjInvoiceId;
        #}
      ENDSOURCE
      SOURCE #lastInvoice4Paym_RU
        #//BP deviation documented
        #server display Invoice4PaymId_RU lastInvoice4Paym_RU()
        #{
        #    CustInvoice4PaymSalesLink_RU custInvoice4PaymSalesLink_RU;
        #
        #    return (select reverse firstonly Invoice4PaymId from custInvoice4PaymSalesLink_RU
        #                index hint OrigSalesIdx
        #                order by Invoice4PaymDate
        #                where custInvoice4PaymSalesLink_RU.OrigSalesId == this.SalesId).Invoice4PaymId;
        #}
      ENDSOURCE
      SOURCE #lastInvoice4PaymDate_RU
        #//BP deviation documented
        #server display TransDate lastInvoice4PaymDate_RU()
        #{
        #    CustInvoice4PaymSalesLink_RU custInvoice4PaymSalesLink_RU;
        #
        #    return (select maxof(Invoice4PaymDate) from custInvoice4PaymSalesLink_RU
        #                index hint OrigSalesIdx
        #                where custInvoice4PaymSalesLink_RU.OrigSalesId == this.SalesId).Invoice4PaymDate;
        #}
      ENDSOURCE
      SOURCE #lastInvoiceDate
        #[SysClientCacheDataMethodAttribute(true)]
        #server display TransDate lastInvoiceDate()
        #{
        #    ProjInvoiceItem projInvoiceItem;
        #
        #    if (!this.ProjId)
        #    {
        #        return (select maxof(InvoiceDate) from custInvoiceSalesLink
        #                    index hint origSalesIdx
        #                    where  custInvoiceSalesLink.OrigSalesId == this.SalesId).InvoiceDate;
        #    }
        #
        #    // This is invoiced from Project
        #    return (select maxof(InvoiceDate)
        #            from projInvoiceItem
        #            where projInvoiceItem.SalesId==this.SalesId).InvoiceDate;
        #}
      ENDSOURCE
      SOURCE #lastJournals
        #server container lastJournals()
        #{
        #    #ISOCountryRegionCodes
        #
        #    container  c;
        #
        #    c = conIns(c, SalesTableType::posQuotation(),       [this.lastQuotation(),      this.lastQuotationDate()]);
        #    c = conIns(c, SalesTableType::posConfirmation(),    [this.lastConfirm(),        this.lastConfirmDate()]);
        #    c = conIns(c, SalesTableType::posPickingList(),     [this.lastPickingList(),    this.lastPickingListDate()]);
        #    c = conIns(c, SalesTableType::posPackingSlip(),     [this.lastPackingSlip(),    this.lastPackingSlipDate()]);
        #    c = conIns(c, SalesTableType::posInvoice(),         [this.lastInvoice(),        this.lastInvoiceDate()]);
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
        #    {
        #        c += ["", dateNull()];
        #        c += ["", dateNull()];
        #        c = conIns(c, SalesTableType::posInvoice4Paym_RU(), [this.lastInvoice4Paym_RU(),this.lastInvoice4PaymDate_RU()]);
        #        c = conIns(c, SalesTableType::posFacture_RU(),      this.lastFactureNumDate_RU());
        #    }
        #
        #    return c;
        #}
      ENDSOURCE
      SOURCE #lastPackingSlip
        #[SysClientCacheDataMethodAttribute(true)]
        #server display PackingSlipId lastPackingSlip()
        #{
        #    return (select firstonly PackingSlipId from custPackingSlipSalesLink
        #                index hint origSalesIdx
        #                order by DeliveryDate desc, PackingSlipId desc
        #                where custPackingSlipSalesLink.OrigSalesId  == this.SalesId).PackingSlipId;
        #}
      ENDSOURCE
      SOURCE #lastPackingSlipDate
        #[SysClientCacheDataMethodAttribute(true)]
        #server display TransDate  lastPackingSlipDate()
        #{
        #    return (select maxof(DeliveryDate) from custPackingSlipSalesLink
        #                index hint origSalesIdx
        #                where custPackingSlipSalesLink.OrigSalesId  == this.SalesId).DeliveryDate;
        #}
      ENDSOURCE
      SOURCE #lastPaymentRequest
        #client server display CFMPaymentRequestId  lastPaymentRequest()
        #{
        #    CFMPaymentRequestTable  paymentRequestTable;
        #    CustTrans               custTrans;
        #    CustInvoiceJour         custInvoice;
        #    CustInvoiceSalesLink    custInvoiceSalesLink;
        #
        #    if (CFMParameters::isPaymentRequestsEnabled())
        #    {
        #        select firstonly PaymentRequestId from paymentRequestTable
        #            order by PaymentDate desc
        #            where paymentRequestTable.SourceType == CFMPaymentRequestSourceType::CustInvoice
        #            exists join custTrans
        #                where custTrans.RecId == paymentRequestTable.HeaderRefRecId
        #            exists join custInvoice
        #                where custInvoice.InvoiceId == custTrans.Invoice
        #                   && custInvoice.LedgerVoucher == custTrans.Voucher
        #                   && custInvoice.InvoiceDate == custTrans.TransDate
        #                   && custInvoice.InvoiceAccount == custTrans.AccountNum
        #            exists join custInvoiceSalesLink
        #                where custInvoice.SalesId == custInvoiceSalesLink.SalesId
        #                   && custInvoice.InvoiceId == custInvoiceSalesLink.InvoiceId
        #                   && custInvoice.InvoiceDate == custInvoiceSalesLink.InvoiceDate
        #                   && custInvoiceSalesLink.origSalesId == this.SalesId;
        #
        #        return paymentRequestTable.PaymentRequestId;
        #    }
        #    return '';
        #}
      ENDSOURCE
      SOURCE #lastPickingList
        #[SysClientCacheDataMethodAttribute(true)]
        #server display WMSPickingRouteID  lastPickingList()
        #{
        #    return (select firstonly PickingRouteId from wmsPickingRouteLink
        #                order by ActivationDateTime desc, PickingRouteId desc
        #                where wmsPickingRouteLink.OrigInventTransRefId == this.SalesId).PickingRouteId;
        #}
      ENDSOURCE
      SOURCE #lastPickingListDate
        #[SysClientCacheDataMethodAttribute(true)]
        #server display TransDate  lastPickingListDate()
        #{
        #    WMSPickingRoute     wmsPickingRoute;
        #    WMSPickingRouteLink wmsPickingRouteLink;
        #    utcdatetime         dateTime;
        #
        #    select maxof(ActivationDateTime) from wmsPickingRouteLink
        #        where wmsPickingRouteLink.OrigInventTransRefId == this.SalesId;
        #
        #    dateTime = wmsPickingRouteLink.ActivationDateTime;
        #
        #    if (!dateTime)
        #    {
        #        select maxof(EndDateTime) from wmsPickingRoute
        #            exists join wmsPickingRouteLink
        #                where wmsPickingRouteLink.PickingRouteId        == wmsPickingRoute.PickingRouteID
        #                &&    wmsPickingRouteLink.ActivationDateTime    == wmsPickingRoute.ActivationDateTime
        #                &&    wmsPickingRouteLink.OrigInventTransRefId  == this.SalesId;
        #
        #        dateTime = wmsPickingRoute.EndDateTime;
        #    }
        #
        #    dateTime = DateTimeUtil::applyTimeZoneOffset(dateTime,DateTimeUtil::getUserPreferredTimeZone());
        #    return DateTimeUtil::date(dateTime);
        #}
      ENDSOURCE
      SOURCE #lastQuotation
        #[SysClientCacheDataMethodAttribute(true)]
        #client server display QuotationDocNum lastQuotation()
        #{
        #    CustQuotationConfirmSalesLink   custQuotationConfirmSalesLink;
        #    CustQuotationConfirmJour        custQuotationConfirmJour;
        #
        #    if (this.QuotationId)
        #    {
        #        select firstonly TableId from custQuotationConfirmSalesLink
        #                order by QuotationDate desc, QuotationConfirmId desc
        #                where custQuotationConfirmSalesLink.OrigQuotationId == this.QuotationId
        #            join QuotationDocNum from custQuotationConfirmJour
        #                where custQuotationConfirmJour.QuotationConfirmId   == custQuotationConfirmSalesLink.QuotationConfirmId   &&
        #                      custQuotationConfirmJour.QuotationDate        == custQuotationConfirmSalesLink.QuotationDate &&
        #                      custQuotationConfirmJour.QuotationType        == QuotationType::Sales;
        #    }
        #    return custQuotationConfirmJour.QuotationDocNum;
        #}
      ENDSOURCE
      SOURCE #lastQuotationDate
        #[SysClientCacheDataMethodAttribute(true)]
        #client server display TransDate lastQuotationDate()
        #{
        #    TransDate   lastQuotationDate;
        #
        #    if (this.QuotationId)
        #    {
        #        lastQuotationDate = (select maxof(QuotationDate) from custQuotationConfirmSalesLink
        #                where custQuotationConfirmSalesLink.OrigQuotationId == this.QuotationId).QuotationDate;
        #    }
        #    return lastQuotationDate;
        #}
      ENDSOURCE
      SOURCE #lineMapping
        #/// <summary>
        #/// Retrieves the table ID of the table considered the line table in the current header-line
        #/// relationship.
        #/// </summary>
        #/// <returns>
        #/// ID of the <c>SalesLine</c> table.
        #/// </returns>
        #public RefTableId lineMapping()
        #{
        #    return tableNum(SalesLine);
        #}
      ENDSOURCE
      SOURCE #lineNumForCreditNote
        #/// <summary>
        #/// Gets the line number of the sales credit note line.
        #/// </summary>
        #/// <returns>
        #/// The line number.
        #/// </returns>
        #public server LineNum lineNumForCreditNote()
        #{
        #    SalesLine   tmpSalesLine;
        #    LineNum     lineCount = 0;
        #
        #    select RecId from tmpSalesLine
        #        where tmpSalesLine.SalesId == this.SalesId &&
        #            tmpSalesLine.CreditNoteInternalRef_PL != 0;
        #
        #    if (tmpSalesLine.RecId)
        #    {
        #        // Force the new line to have the last LineNum
        #        select count (LineNum) from tmpSalesLine
        #            where tmpSalesLine.SalesId == this.SalesId;
        #
        #        lineCount = tmpSalesLine.LineNum;
        #    }
        #
        #    return lineCount;
        #}
      ENDSOURCE
      SOURCE #markupAllowed
        #public boolean markupAllowed()
        #{
        #    return this.type().markupAllowed();
        #}
      ENDSOURCE
      SOURCE #mayBankDocumentTypeBeBankLCExport
        #/// <summary>
        #/// Checks whether the Bank document type can be set to the types of Bank LC Export.
        #/// </summary>
        #/// <returns>
        #/// true if it is allowed; otherwise, false.
        #/// </returns>
        #public boolean mayBankDocumentTypeBeBankLCExport()
        #{
        #    return this.SalesType           == SalesType::Sales
        #        && this.SalesStatus         == SalesStatus::Backorder
        #        && this.InterCompanyOrder   == NoYes::No;
        #}
      ENDSOURCE
      SOURCE #mayBankDocumentTypeBeBankLG
        #/// <summary>
        #/// Indicates whether the <c>Bank</c> document type can be set to the types of <c>Bank LG</c>.
        #/// </summary>
        #/// <returns>
        #/// true if the document type can be set to the specified types; otherwise, false.
        #/// </returns>
        #public boolean mayBankDocumentTypeBeBankLG()
        #{
        #    // It is not allowed to create LG on sales order if
        #    // the related project's bank document type is set to LG.
        #    return !(this.ProjId && ProjTable::find(this.ProjId).isMarkedForBankLG());
        #}
      ENDSOURCE
      SOURCE #mayConfirmationBeUpdated
        #boolean mayConfirmationBeUpdated()
        #{
        #    return this.type().mayConfirmationBeUpdated();
        #}
      ENDSOURCE
      SOURCE #mayInvoice4PaymBeUpdated_RU
        #public boolean mayInvoice4PaymBeUpdated_RU()
        #{
        #    return this.type().mayInvoice4PaymBeUpdated_RU();
        #}
        #
      ENDSOURCE
      SOURCE #mayInvoiceBeUpdated
        #boolean mayInvoiceBeUpdated()
        #{
        #    return this.type().mayInvoiceBeUpdated();
        #}
      ENDSOURCE
      SOURCE #mayPackingSlipBeUpdated
        #boolean mayPackingSlipBeUpdated()
        #{
        #    return this.type().mayPackingSlipBeUpdated();
        #}
      ENDSOURCE
      SOURCE #mayPickingListBeRegistered
        #boolean mayPickingListBeRegistered()
        #{
        #    return this.type().mayPickingListBeRegistered();
        #}
      ENDSOURCE
      SOURCE #mayPickingListBeUpdated
        #boolean mayPickingListBeUpdated()
        #{
        #    return this.type().mayPickingListBeUpdated();
        #}
      ENDSOURCE
      SOURCE #mayProjectPackingSlipBeUpdated
        #boolean mayProjectPackingSlipBeUpdated()
        #{
        #    return this.type().mayProjectPackingSlipBeUpdated();
        #}
      ENDSOURCE
      SOURCE #mcrAllowOpenOrder
        #/// <summary>
        #/// Determines if the sales order is allowed to remain in the open order
        #/// status.
        #/// </summary>
        #/// <returns>
        #/// true if the sales order is allowed to remain in the open order status; otherwise, false.
        #/// </returns>
        #boolean mcrAllowOpenOrder()
        #{
        #    return this.type().mcrAllowOpenOrder();
        #}
      ENDSOURCE
      SOURCE #mcrAllowStatusRollback
        #/// <summary>
        #///     Validates if the sales order status can be rolled back or not.
        #/// </summary>
        #/// <returns>
        #///     true if the sales order status can be rolled back; otherwise, false.
        #/// </returns>
        #public server boolean mcrAllowStatusRollback()
        #{
        #    boolean ok = true;
        #    SalesLine salesLineLocal;
        #    MCRSalesLineDropShipment mcrSalesLineDropShipmentLocal;
        #
        #    if (this.SalesStatus != SalesStatus::Backorder)
        #    {
        #        // If the order is a return and the status is no longer open,
        #        // don't allow the user to rollback which also makes it so the modify button is disabled.
        #        if (this.SalesType == SalesType::ReturnItem)
        #        {
        #            ok = false;
        #        }
        #        else
        #        {
        #            select firstonly RecId from salesLineLocal
        #                where salesLineLocal.SalesId == this.SalesId
        #                    && salesLineLocal.SalesStatus == SalesStatus::Canceled;
        #            if (salesLineLocal)
        #            {
        #                ok = false;
        #            }
        #            else
        #            {
        #                // Allow changes as long as PO has not been released to the vendor.
        #                // If any line is a drop ship and released to the customer, do not allow rollback
        #                select firstonly RecId from salesLineLocal
        #                    where salesLineLocal.SalesId == this.SalesId
        #                        exists join mcrSalesLineDropShipmentLocal
        #                            where mcrSalesLineDropShipmentLocal.DropShipment == NoYes::Yes
        #                                && mcrSalesLineDropShipmentLocal.DropShipStatus != MCRDropShipStatus::ToBeDropShipped
        #                                && mcrSalesLineDropShipmentLocal.SalesLine == salesLineLocal.RecId;
        #                if (salesLineLocal)
        #                {
        #                    ok = false;
        #                }
        #            }
        #        }
        #    }
        #
        #    return ok;
        #}
      ENDSOURCE
      SOURCE #mcrAnySalesLinesNegative
        #/// <summary>
        #/// Checks if any <c>SalesLine</c> records have a negative quantity.
        #/// </summary>
        #/// <returns>
        #/// true if there are any <c>SalesLine</c> records that have a negative quantity; otherwise, false.
        #/// </returns>
        #boolean mcrAnySalesLinesNegative()
        #{
        #    SalesLine salesLine;
        #    boolean   ret = false;
        #
        #    select firstonly RecId from salesLine
        #        where salesLine.SalesId == this.SalesId
        #            && salesLine.LineDeliveryType  != LineDeliveryType::OrderLineWithMultipleDeliveries
        #            && salesLine.SalesStatus       != SalesStatus::Canceled && salesLine.SalesQty          <  0;
        #
        #    if (salesLine.RecId)
        #    {
        #        ret = true;
        #    }
        #
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #mcrApplyPostageDisc
        #/// <summary>
        #/// Calculates and applies any postage discounts to the postage of an order.
        #/// </summary>
        #/// <param name="_totalPostageValue">
        #/// Current value of postage for a sales order.
        #/// </param>
        #/// <param name="_orderTotal">
        #/// Total order value for a sales order.
        #/// </param>
        #/// <returns>
        #/// The amount the postage value was discounted.
        #/// </returns>
        #public AmountCur mcrApplyPostageDisc(AmountCur _totalPostageValue, AmountCur _orderTotal)
        #{
        #    AmountCur   discAmount;
        #    AmountCur   discPercent;
        #    AmountCur   discountedAmount;
        #
        #    if (_totalPostageValue)
        #    {
        #        [discAmount, discPercent] = PriceDisc::mcrFindPostageDisc(this, _orderTotal);
        #
        #        //Customization can be made to reduce postage amount by postage discount.
        #    }
        #
        #    return discountedAmount;
        #}
      ENDSOURCE
      SOURCE #mcrCheckShipComplete
        #/// <summary>
        #/// Determines whether the sales order should be shipped as a whole
        #/// </summary>
        #/// <returns>
        #/// true if the order should be shipped as a whole; otherwise, false.
        #/// </returns>
        #public boolean mcrCheckShipComplete()
        #{
        #    InventTrans         inventTrans;
        #    SalesLine           salesLine;
        #    boolean             ret = false;
        #    InventTransOrigin   inventTransOrigin;
        #    MCRSalesLine        mcrSalesLine;
        #
        #    if (!this.mcrSalesTableShipping().ShipComplete)
        #    {
        #        // If ship complete flag not on then check passes.
        #        ret = true;
        #    }
        #    else
        #    {
        #        // If there is an open quantity on any lines, the order is not going to ship complete.
        #        select firstonly RecId from inventTrans
        #            where (inventTrans.StatusIssue == StatusIssue::OnOrder
        #                || inventTrans.StatusIssue == StatusIssue::ReservOrdered)
        #            join RecId from inventTransOrigin
        #            join RecId from salesLine
        #            where inventTrans.InventTransOrigin == inventTransOrigin.RecId
        #                && inventTransOrigin.InventTransId == salesLine.InventTransId
        #                && salesLine.SalesId == this.SalesId
        #                && salesLine.LineDeliveryType != LineDeliveryType::OrderLineWithMultipleDeliveries
        #            outer join RecId from mcrSalesLine
        #            where mcrSalesLine.SalesLine == salesLine.RecId
        #                && !mcrSalesLine.ContinuityScheduleId;
        #
        #        if (!inventTrans.RecId)
        #        {
        #            ret = true;
        #        }
        #    }
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #mcrCreateExchangeHeader
        #/// <summary>
        #/// Creates an exchange sales order.
        #/// </summary>
        #/// <param name="_salesTableOriginal">
        #/// The original <c>SalesTable</c> record for which this method is creating an exchange; optional.
        #/// </param>
        #/// <param name="_salesParameters">
        #/// The <c>SalesParameters</c> record used in the creation of the exchange order.
        #/// </param>
        #/// <returns>
        #/// The newly created <c>SalesTable</c> record for the exchange order.
        #/// </returns>
        #public SalesTable mcrCreateExchangeHeader(SalesTable _salesTableOriginal = null, SalesParameters _salesParameters = null)
        #{
        #    NumberSeq           numberSeq;
        #    SalesTable          salesTableCopy;
        #    SalesTable          salesTableExchange;
        #    SalesTable          salesTableOriginal;
        #    SalesParameters     salesParameters;
        #    SalesTableLinks     salesTableLinks;
        #    MCROrderParameters  mcrOrderParameters = MCROrderParameters::find();
        #    Catalog             catalog;
        #    MCRReturnSalesTable mcrReturnSalesTable;
        #    MCRReturnSalesTable mcrReturnSalesTableLocal;
        #    MCRSalesTable       mcrSalesTable, mcrSalesTableOriginal;
        #
        #    if (this.ReturnReplacementId)
        #    {
        #        return this.mcrSalesTableExchange();
        #    }
        #
        #    try
        #    {
        #        ttsbegin;
        #
        #        if (_salesTableOriginal)
        #        {
        #            salesTableOriginal = _salesTableOriginal;
        #        }
        #        else
        #        {
        #            salesTableOriginal = this.mcrSalesTableOriginal();
        #        }
        #
        #        if (_salesParameters)
        #        {
        #            salesParameters = _salesParameters;
        #        }
        #        else
        #        {
        #            salesParameters = SalesParameters::find();
        #        }
        #
        #        // load exchange header.
        #        numberSeq = NumberSeq::newGetNum(SalesParameters::numRefSalesId(), false, true);
        #        mcrSalesTable = salesTableExchange.mcrSalesTable();
        #        mcrSalesTableOriginal = salesTableOriginal.mcrSalesTable();
        #        salesTableExchange.SalesId = numberSeq.num();
        #        salesTableExchange.SalesType = SalesType::Sales;
        #        salesTableExchange.SalesStatus = SalesStatus::Backorder;
        #
        #        if (mcrOrderParameters.mcrExchangeSourceCode == MCRExchangeSourceCode::Original)
        #        {
        #            mcrSalesTable.SourceId = mcrSalesTableOriginal.SourceId;
        #
        #            // If the original source code is not valid, use the default one specified in sales parameters.
        #            catalog = Catalog::find(MCRSourceCodeSetup::find(mcrSalesTable.SourceId).Catalog);
        #
        #            if (!mcrOrderParameters.mcrAllowExpiredSourceCode
        #                && (catalog.ValidFrom > systemDateGet()
        #                || catalog.ValidTo < systemDateGet()) )
        #            {
        #                mcrSalesTable.SourceId = mcrOrderParameters.mcrDefaultExchangeSourceID;
        #            }
        #        }
        #        else if (mcrOrderParameters.mcrExchangeSourceCode == MCRExchangeSourceCode::DefaultSourceCode)
        #        {
        #            mcrSalesTable.SourceId = mcrOrderParameters.mcrDefaultExchangeSourceID;
        #        }
        #
        #        // Default to the original sales order.
        #        salesTableExchange.DlvMode = salesTableOriginal.DlvMode;
        #
        #        salesTableExchange.CustAccount = this.CustAccount;
        #        salesTableExchange.initFromCustTable();
        #
        #        if (salesTableOriginal.InvoiceAccount)
        #        {
        #            salesTableExchange.InvoiceAccount = salesTableOriginal.InvoiceAccount;
        #        }
        #        mcrReturnSalesTable = salesTableExchange.mcrReturnSalesTable();
        #        mcrReturnSalesTable.IsExchange = NoYes::Yes;
        #        salesTableExchange.mcrPackMCRReturnSalesTable(mcrReturnSalesTable);
        #        SalesCalcAvailableDlvDates::initDateFields(salesTableExchange);
        #
        #        salesTableExchange.SmmCampaignId = salesTableOriginal.SmmCampaignId;
        #        salesTableExchange.ContactPersonId = salesTableOriginal.ContactPersonId;
        #        mcrSalesTable.SmmTMCallListId = mcrSalesTableOriginal.SmmTMCallListId;
        #        salesTableExchange.mcrPackMCRSalesTable(mcrSalesTable);
        #
        #        // Default to the original sales order.
        #        if (salesTableOriginal.DlvMode)
        #        {
        #            salesTableExchange.DlvMode = salesTableOriginal.DlvMode;
        #        }
        #
        #        if (salesTableExchange.validateWrite())
        #        {
        #            salesTableExchange.insert();
        #
        #            // Link exchange order to return.
        #            salesTableCopy.data(this);
        #            this.selectForUpdate(true);
        #            this.reread();
        #            this.data(salesTableCopy);
        #            this.ReturnReplacementId = salesTableExchange.SalesId;
        #            this.ReturnReplacementCreated = NoYes::Yes;
        #
        #            if (RetailMCRChannelTable::mcrEnableOrderCompletion(_salesTableOriginal))
        #            {
        #                mcrReturnSalesTableLocal = this.mcrReturnSalesTable();
        #                mcrReturnSalesTableLocal.ApplyCreditToExchange = NoYes::Yes;
        #                mcrReturnSalesTableLocal.AdvanceExchange = MCRAdvanceExchange::DoNotRelease;
        #                mcrReturnSalesTableLocal.AdvanceCredit = NoYes::No;
        #                this.mcrPackMCRReturnSalesTable(mcrReturnSalesTableLocal);
        #            }
        #            this.doUpdate();
        #
        #            if (this.ReturnReplacementId)
        #            {
        #                salesTableLinks.MainSalesId = this.mcrReturnSalesTable().OriginalSalesId;
        #                salesTableLinks.SubSalesId = this.ReturnReplacementId;
        #
        #                if (salesTableLinks.validateWrite())
        #                {
        #                    salesTableLinks.insert();
        #                }
        #                else
        #                {
        #                    throw error("@SYS104318");
        #                }
        #            }
        #        }
        #
        #        ttscommit;
        #    }
        #    catch (Exception::Deadlock)
        #    {
        #        retry;
        #    }
        #    catch (Exception::Error)
        #    {
        #        ttsabort;
        #        throw error("@SYS93835");
        #    }
        #
        #    return salesTableExchange;
        #}
      ENDSOURCE
      SOURCE #mcrDeliveryInfo
        #/// <summary>
        #/// Gets the customer's default delivery address.
        #/// </summary>
        #/// <returns>
        #/// The delivery information for the customer's default delivery address.
        #/// </returns>
        #public display MCRString100 mcrDeliveryInfo()
        #{
        #    str deliveryInfo;
        #
        #    if (this.DeliveryName)
        #    {
        #        deliveryInfo = this.DeliveryName;
        #    }
        #    if (this.deliveryAddress())
        #    {
        #       deliveryInfo = deliveryInfo + '\n' + this.deliveryAddress().Address + " ";
        #    }
        #    return deliveryInfo;
        #}
      ENDSOURCE
      SOURCE #mcrDisplayCustCreditMax
        #/// <summary>
        #/// Displays the maximum credit allowed for the specified customer.
        #/// </summary>
        #/// <returns>
        #/// The maximum credit allowed for the specified customer.
        #/// </returns>
        #public display CustCreditMaxMST mcrDisplayCustCreditMax()
        #{
        #    return CustTable::find(this.CustAccount).CreditMax;
        #}
      ENDSOURCE
      SOURCE #mcrDisplayDeliveryName
        #/// <summary>
        #///  Displays the delivery name from the <c>SalesTable</c> unless the order lines
        #///  ship to a different address.
        #/// </summary>
        #/// <returns>
        #/// The delivery name on the <c>SalesTable</c> if the order lines have the same ship to address;
        #/// otherwise, a message saying to check the line delivery information.
        #/// </returns>
        #public display CustName mcrDisplayDeliveryName()
        #{
        #    if (this.mcrLineHasDifferentAddress())
        #    {
        #        return "@MCR12684";
        #    }
        #    else
        #    {
        #        return this.DeliveryName;
        #    }
        #
        #}
        #
      ENDSOURCE
      SOURCE #mcrDisplayLastShipDate
        #/// <summary>
        #/// Displays the last date something was shipped on the order.
        #/// </summary>
        #/// <returns>
        #/// The last date something was shipped on the order.
        #/// </returns>
        #public display TransDate mcrDisplayLastShipDate()
        #{
        #    CustPackingSlipJour custPackingSlipJour;
        #    TransDate           dateCreated = dateNull();
        #
        #    select maxof(CreatedDateTime) from custPackingSlipJour
        #        where   custPackingSlipJour.RefNum == RefNum::SalesOrder
        #            && custPackingSlipJour.SalesId == this.SalesId;
        #
        #    if (custPackingSlipJour)
        #    {
        #        dateCreated = DateTimeUtil::date(custPackingSlipJour.CreatedDateTime);
        #    }
        #    return dateCreated;
        #}
      ENDSOURCE
      SOURCE #mcrDisplayMiscChargesTotal
        #/// <summary>
        #/// Displays the total amount of miscellaneous charges.
        #/// </summary>
        #/// <returns>
        #/// The total amount of miscellaneous charges.
        #/// </returns>
        #public display MarkupSumSales mcrDisplayMiscChargesTotal()
        #{
        #    MCRSalesOrderTotals  mcrSalesOrderTotals;
        #
        #    mcrSalesOrderTotals = new MCRSalesOrderTotals(this);
        #
        #    return mcrSalesOrderTotals.getTotalMarkup();
        #}
      ENDSOURCE
      SOURCE #mcrDisplayOnHold
        #/// <summary>
        #/// Displays the image for a held order.
        #/// </summary>
        #/// <returns>
        #/// The image for a held order.
        #/// </returns>
        #[SysClientCacheDataMethodAttribute(true)]
        #public display MCRResourceNum mcrDisplayOnHold()
        #{
        #    #MCRresAppl
        #    int image = 0;
        #
        #    if (this.mcrOrderStopped
        #        && MCRHoldCodeTrans::findActiveOrderHolds(this.SalesId))
        #    {
        #        image = #MCRImage_OnHold;
        #    }
        #    return image;
        #}
        #
      ENDSOURCE
      SOURCE #mcrDisplayOrderNotes
        #/// <summary>
        #/// Collects all of the order notes into one string and display them.
        #/// </summary>
        #/// <returns>
        #/// A string of all of the order notes.
        #/// </returns>
        #public display Notes mcrDisplayOrderNotes()
        #{
        #    DocuRef             docuRef;
        #    MCROrderParameters  mcrOrderParameters;
        #    TextBuffer          textBuffer = new TextBuffer();
        #    SelectableDataArea  refCompanyID = curext();
        #    TransDate           dateCreated;
        #    SalesParameters     salesParameters = SalesParameters::find();
        #
        #    mcrOrderParameters = MCROrderParameters::find();
        #
        #    // Don't show fraud or hold code notes because these are shown on other tabs.
        #    while select docuRef order by RecId desc
        #        where   docuRef.RefCompanyId == refCompanyID
        #            && docuRef.RefTableId == tableNum(SalesTable)
        #            && docuRef.RefRecId == this.RecId
        #            && docuRef.TypeId != salesParameters.mcrHoldCodeNoteType
        #            && docuRef.TypeId != mcrOrderParameters.mcrFraudCommentTypeId
        #    {
        #        textBuffer.appendText("@MCR28844");
        #        textBuffer.appendText(' ');
        #        textBuffer.appendText(docuRef.CreatedBy);
        #        textBuffer.appendText(' ');
        #        textBuffer.appendText("@MCR31247");
        #        textBuffer.appendText(' ');
        #        dateCreated = DateTimeUtil::date(docuRef.CreatedDateTime);
        #        textBuffer.appendText(date2StrUsr(dateCreated, DateFlags::FormatAll));
        #        textBuffer.appendText(' ');
        #        textBuffer.appendText("@SYS77038");
        #        textBuffer.appendText(' ');
        #        textBuffer.appendText(docuRef.Notes);
        #        textBuffer.appendText('\n\n');
        #    }
        #    return textBuffer.getText();
        #}
      ENDSOURCE
      SOURCE #mcrDisplayOrderTotal
        #/// <summary>
        #/// Displays the total amount of the sales order.
        #/// </summary>
        #/// <returns>
        #/// The total amount of the sales order.
        #/// </returns>
        #public display AmountCur mcrDisplayOrderTotal()
        #{
        #    MCRSalesOrderTotals  mcrSalesOrderTotals;
        #
        #    if (this.RecId)
        #    {
        #        mcrSalesOrderTotals = new MCRSalesOrderTotals(this);
        #        return mcrSalesOrderTotals.getTotalOrder();
        #    }
        #    else
        #    {
        #        return 0;
        #    }
        #}
      ENDSOURCE
      SOURCE #mcrDisplayOrderTotalLessTax
        #/// <summary>
        #///  Gets the order total less tax.
        #/// </summary>
        #/// <returns>
        #/// The order total less tax.
        #/// </returns>
        #public display AmountCur mcrDisplayOrderTotalLessTax()
        #{
        #    MCRSalesOrderTotals     mcrSalesOrderTotals;
        #    AmountCur               totalWithoutTax;
        #
        #    mcrSalesOrderTotals = new MCRSalesOrderTotals(this);
        #    totalWithoutTax = mcrSalesOrderTotals.getTotalOrder() - mcrSalesOrderTotals.getTotalTax();
        #
        #    return totalWithoutTax;
        #}
      ENDSOURCE
      SOURCE #mcrDisplayOverallOldestOverUnderpaidDate
        #/// <summary>
        #/// Gets the oldest order payment created date that is over the customers credit limit.
        #/// </summary>
        #/// <returns>
        #/// The oldest order payment created date that is over the customers credit limit.
        #/// </returns>
        #public display TransDate mcrDisplayOverallOldestOverUnderpaidDate()
        #{
        #    MCRCustPaymTable    mcrCustPaymTable;
        #    TransDate           dateCreated = dateNull();
        #
        #    select minof(CreatedDateTime) from mcrCustPaymTable
        #        where (mcrCustPaymTable.Status == MCRCustPaymStatus::NotSubmitted);
        #
        #    if (mcrCustPaymTable)
        #    {
        #        dateCreated = DateTimeUtil::date(mcrCustPaymTable.CreatedDateTime);
        #    }
        #    return dateCreated;
        #}
      ENDSOURCE
      SOURCE #mcrDisplayOverallTotalOrders
        #/// <summary>
        #/// Gets the number of orders in the <c>MCRCustPaymTable</c> that are
        #/// over the customers credit limit.
        #/// </summary>
        #/// <returns>
        #/// The number of orders in the <c>MCRCustPaymTable</c> that are
        #/// over the customers credit limit.
        #/// </returns>
        #public display Integer mcrDisplayOverallTotalOrders()
        #{
        #    MCRCustPaymTable mcrCustPaymTable;
        #
        #    select count(RecId) from mcrCustPaymTable
        #        where (mcrCustPaymTable.Status == MCRCustPaymStatus::NotSubmitted);
        #
        #    return (any2int(mcrCustPaymTable.RecId));
        #}
      ENDSOURCE
      SOURCE #mcrDisplayPhone
        #/// <summary>
        #/// Displays the phone contact information of the customer on the sales order.
        #/// </summary>
        #/// <returns>
        #/// The phone contact information of the customer on the sales order.
        #/// </returns>
        #public display LogisticsElectronicAddressLocator mcrDisplayPhone()
        #{
        #    LogisticsLocation           logisticsLocation;
        #    LogisticsElectronicAddress  logisticsElectronicAddress;
        #
        #    select firstonly RecId, ParentLocation from logisticsLocation
        #        where logisticsLocation.ParentLocation == this.deliveryAddress().Location
        #    join Locator, Location, Type from logisticsElectronicAddress
        #        where logisticsElectronicAddress.Location == logisticsLocation.RecId
        #        && logisticsElectronicAddress.Type == LogisticsElectronicAddressMethodType::Phone;
        #
        #    return logisticsElectronicAddress.Locator;
        #}
      ENDSOURCE
      SOURCE #mcrDisplayProductTotal
        #/// <summary>
        #/// Displays the total amount of the product.
        #/// </summary>
        #/// <returns>
        #/// The total amount of the product.
        #/// </returns>
        #public display AmountCur mcrDisplayProductTotal()
        #{
        #    MCRSalesOrderTotals  mcrSalesOrderTotals;
        #
        #    mcrSalesOrderTotals = new MCRSalesOrderTotals(this);
        #
        #    return mcrSalesOrderTotals.getTotalProduct();
        #}
      ENDSOURCE
      SOURCE #mcrDisplayTaxTotal
        #/// <summary>
        #/// Displays the total tax amount for the sales order.
        #/// </summary>
        #/// <returns>
        #/// The total tax amount for the sales order.
        #/// </returns>
        #public display TaxAmountCur mcrDisplayTaxTotal()
        #{
        #    MCRSalesOrderTotals  mcrSalesOrderTotals;
        #
        #    mcrSalesOrderTotals = new MCRSalesOrderTotals(this);
        #
        #    return mcrSalesOrderTotals.getTotalTax();
        #}
      ENDSOURCE
      SOURCE #mcrDisplayTender
        #/// <summary>
        #/// Returns the tender type being used to pay for the order.
        #/// </summary>
        #/// <returns>
        #/// If only one payment then the tender used to pay for the order;
        #///     otherwise; a label indicating multiple.
        #/// </returns>
        #public display RetailTenderTypeId mcrDisplayTender()
        #{
        #    MCRCustPaymTable    mcrCustPaymTable;
        #    PaymMode            paymMethod;
        #
        #    while select TenderTypeId from mcrCustPaymTable
        #        where mcrCustPaymTable.RefTableId == this.TableId
        #        && mcrCustPaymTable.RefRecId == this.RecId
        #        && mcrCustPaymTable.Amount != 0
        #    {
        #        if (paymMethod)
        #        {
        #            return "@SYS78137";
        #        }
        #
        #        paymMethod = mcrCustPaymTable.TenderTypeId;
        #    }
        #
        #    return paymMethod;
        #}
      ENDSOURCE
      SOURCE #mcrDisplayTotalDisc
        #/// <summary>
        #/// Displays the total ending discount amount for the sales order.
        #/// </summary>
        #/// <returns>
        #/// The total ending discount amount for the sales order.
        #/// </returns>
        #public display SalesEndDiscAmount mcrDisplayTotalDisc()
        #{
        #    MCRSalesOrderTotals  mcrSalesOrderTotals;
        #
        #    mcrSalesOrderTotals = new MCRSalesOrderTotals(this);
        #
        #    return mcrSalesOrderTotals.getTotalDisc();
        #}
      ENDSOURCE
      SOURCE #mcrDlvModeModified
        #/// <summary>
        #/// Defaults the <c>MCRExpedite</c> flag based on the delivery mode.
        #/// </summary>
        #void mcrDlvModeModified()
        #{
        #    MCRExpedite             mcrExpedite;
        #    MCRSalesTableShipping   mcrSalesTableShipping = this.mcrSalesTableShipping();
        #
        #    mcrExpedite = DlvMode::find(this.DlvMode).mcrExpedite;
        #
        #    if (mcrSalesTableShipping.Expedite != mcrExpedite)
        #    {
        #        mcrSalesTableShipping.Expedite = mcrExpedite;
        #        this.mcrPackMCRSalesTableShipping(mcrSalesTableShipping);
        #    }
        #}
      ENDSOURCE
      SOURCE #mcrEvalSalesOrderType
        #/// <summary>
        #/// Evaluates the sales order type.
        #/// </summary>
        #/// <returns>
        #/// The sales order type.
        #/// </returns>
        #/// <remarks>
        #/// A sales order based on the current MCR functionality can be of a few different types.
        #/// Regular order, that has custpaym record tie to the sales order.
        #/// Installment only  that has custpaymrecord tied custpaymsched lines and may or may not have
        #///  a record that needs to be authorized.
        #/// Continuity only that has a custpaym record tied to the continuity cust header and may or may not
        #///  a record that needs to be authorized.
        #/// Regular order and installment.If the installment has a record that needs to be authorized
        #/// Regular order and continuity.
        #/// Regular order, installment and continuity.
        #/// </remarks>
        #MCRSalesOrderType mcrEvalSalesOrderType()
        #{
        #    MCRSalesOrderTotals             mcrSalesOrderTotals;
        #    MCRSalesOrderType               mcrSalesOrderType;
        #    AmountCur                       totalOrderAmount;
        #    AmountCur                       totalOnInstallment;
        #    AmountCur                       totalContinuityAmt;
        #    AmountCur                       installmentTotal;
        #    AmountCur                       remainingOrder;
        #    AmountCur                       invoicedOrder;
        #    MCRCustPaymTable                mcrCustPaymTable;
        #    MCRSalesTable                   mcrSalesTable;
        #    boolean                         installmentExist;
        #
        #    if (this.mcrIsCallCenter())
        #    {
        #        mcrSalesTable = this.mcrSalesTable();
        #
        #        // Retrieve the custpaymtable record to ensure that some part of the order
        #        // was paid down before deciding that this order is an order and an installment.
        #        select firstonly mcrCustPaymTable
        #            where mcrCustPaymTable.RefTableId == tableNum(SalesTable)
        #            && mcrCustPaymTable.RefRecId == this.RecId
        #            && mcrCustPaymTable.Amount > 0;
        #
        #        mcrSalesOrderTotals = new MCRSalesOrderTotals(this);
        #
        #        // Assign all totals buckets from salesordertotals
        #        totalOrderAmount = mcrSalesOrderTotals.getTotalOrder();
        #        remainingOrder = mcrSalesOrderTotals.getRemainingOrder();
        #        invoicedOrder = mcrSalesOrderTotals.getInvoicedOrder();
        #
        #        if (invoicedOrder != 0)
        #        {
        #            totalOrderAmount = remainingOrder+invoicedOrder;
        #        }
        #        totalContinuityAmt = mcrSalesOrderTotals.getContinuityPayNow();
        #        totalOnInstallment = mcrSalesOrderTotals.getInstallmentEligibleRemaining();
        #        // Assign totals bucket from the installment totals if applicable.
        #        installmentTotal = mcrSalesOrderTotals.getInstallmentEligibleTotal();
        #
        #        installmentExist = MCRInstallmentPlanSalesTable::existSalesId(this.SalesId);
        #        if (!mcrSalesTable.ContinuityOrder
        #            && !installmentExist)
        #        {
        #            mcrSalesOrderType = MCRSalesOrderType::RegularOrder;
        #        }
        #        else if (mcrSalesTable.ContinuityOrder
        #            && !installmentExist)
        #        {
        #            // Determine if this is a continuity order and a regular order or
        #            // just a continuity order.
        #            if ((totalOrderAmount - totalContinuityAmt) == 0)
        #            {
        #                mcrSalesOrderType = MCRSalesOrderType::Continuityonly;
        #            }
        #            else
        #            {
        #                mcrSalesOrderType = MCRSalesOrderType::OrderAndContinuity;
        #            }
        #        }
        #        else if (!mcrSalesTable.ContinuityOrder
        #            && installmentExist)
        #        {
        #            // Set the sales order type to installment only unless
        #            // we determine otherwise.
        #            mcrSalesOrderType = MCRSalesOrderType::InstallmentOnly;
        #
        #            // For installments not only the sales order totals but the installment
        #            // totals also needs to be considered.
        #            if (installmentTotal == 0)
        #            {
        #                if (totalOrderAmount - totalOnInstallment == 0)
        #                {
        #                    mcrSalesOrderType = MCRSalesOrderType::InstallmentOnly;
        #                }
        #                else
        #                {
        #                    if (mcrCustPaymTable)
        #                    {
        #                        mcrSalesOrderType = MCRSalesOrderType::OrderAndInstallment;
        #                    }
        #                }
        #            }
        #            else
        #            {
        #                if (totalOrderAmount == installmentTotal)
        #                {
        #                    mcrSalesOrderType = MCRSalesOrderType::InstallmentOnly;
        #                }
        #                else
        #                {
        #                    if (mcrCustPaymTable)
        #                    {
        #                        mcrSalesOrderType = MCRSalesOrderType::OrderAndInstallment;
        #                    }
        #                }
        #            }
        #        }
        #        else if (mcrSalesTable.ContinuityOrder
        #            && installmentExist)
        #        {
        #            mcrSalesOrderType = MCRSalesOrderType::MixedOrder;
        #        }
        #    }
        #
        #    return mcrSalesOrderType;
        #}
      ENDSOURCE
      SOURCE #mcrExistNonOnAccountPaym
        #/// <summary>
        #/// Validates whether payments with types other than on account exist for the
        #/// sales order.
        #/// </summary>
        #/// <returns>
        #/// true if payments with types other than on account exist for the sales order;
        #/// otherwise, false.
        #/// </returns>
        #boolean mcrExistNonOnAccountPaym()
        #{
        #    MCRCustPaymTable    mcrCustPaymTable;
        #    boolean             nonOnAccountPaymentsExist = false;
        #
        #    select firstonly RecId from mcrCustPaymTable
        #        where mcrCustPaymTable.RefTableId == tableNum(SalesTable)
        #            && mcrCustPaymTable.RefRecId == this.RecId
        #            && mcrCustPaymTable.CustPaymType != MCRCustPaymType::OnAccount;
        #
        #        if (mcrCustPaymTable.RecId)
        #        {
        #            nonOnAccountPaymentsExist = true;
        #        }
        #
        #    return nonOnAccountPaymentsExist;
        #}
      ENDSOURCE
      SOURCE #mcrExistOpenReturn
        #/// <summary>
        #/// Determines whether an open return order exists for this sales order.
        #/// </summary>
        #/// <returns>
        #/// true if a return order exists; otherwise, false.
        #/// </returns>
        #public boolean mcrExistOpenReturn()
        #{
        #    SalesTable salesTable;
        #    MCRReturnSalesTable mcrReturnSalesTable;
        #
        #    select firstonly RecId from salesTable
        #        where salesTable.ReturnStatus == ReturnStatusHeader::Open
        #        exists join mcrReturnSalesTable
        #        where mcrReturnSalesTable.SalesTable == salesTable.RecId
        #            && mcrReturnSalesTable.OriginalSalesId == this.SalesId;
        #
        #    if (salesTable.RecId)
        #    {
        #        return true;
        #    }
        #    else
        #    {
        #        return false;
        #    }
        #}
      ENDSOURCE
      SOURCE #mcrFraudHold
        #/// <summary>
        #/// Validates whether the order has a fraud hold or not.
        #/// </summary>
        #/// <param name="_clearedHolds">
        #/// A <c>Boolean</c> value defining whether the method will check for cleared holds on the order.
        #/// </param>
        #/// <param name="_isNowOnHold">
        #/// A <c>Boolean</c> value defining whether the method will check to see if
        #/// the order is currently on hold; optional.
        #/// </param>
        #/// <returns>
        #/// A <c>Boolean</c> value defining whether the order has or has had fraud holds,
        #/// based on the passed parameters.
        #/// </returns>
        #/// <remarks>
        #/// Parameter is whether or not you want to only check cleared holds.
        #/// If <c>_clearedHolds</c> equals true:  returns true if order has fraud hold codes and has been cleared. else false
        #/// If <c>_clearedHolds</c> equals false: returns true if an order has ever had fraud hold codes. else false
        #/// If <c>_IsNowOnHold</c> equals true: returns true if an order is now on hold and hasn't been cleared yet.
        #/// </remarks>
        #boolean mcrFraudHold(boolean _clearedHolds, boolean _isNowOnHold = false)
        #{
        #    MCRHoldCodeTrans    mcrHoldCodeTrans;
        #    MCROrderParameters  mcrOrderParameters;
        #    boolean             ret = false;
        #
        #    // Go through the hold codes looking for hold codes that are fraud holds.
        #    mcrOrderParameters = MCROrderParameters::find();
        #
        #    while select mcrHoldCode, mcrCleared from mcrHoldCodeTrans
        #        where mcrHoldCodeTrans.InventRefId == this.SalesId
        #        && (mcrHoldCodeTrans.mcrHoldCode == mcrOrderParameters.mcrFraudHoldCode
        #        || mcrHoldCodeTrans.mcrHoldCode == mcrOrderParameters.mcrFraudManualHoldCode)
        #    {
        #        // If on hold but not cleared yet.
        #        if (_isNowOnHold == true)
        #        {
        #            if (mcrHoldCodeTrans.mcrCleared == NoYes::No)
        #            ret = true;
        #            break;
        #        }
        #        else
        #        {
        #
        #            if (_clearedHolds)
        #            {
        #                // If on hold but cleared
        #                if (mcrHoldCodeTrans.mcrCleared == NoYes::Yes)
        #                {
        #                    ret = true;
        #                    break;
        #                }
        #            }
        #            else
        #            {
        #                // If order has ever been on hold.
        #                ret = true;
        #                break;
        #            }
        #        }
        #    }
        #
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #mcrGetDeclinedCCAuthRecords
        #/// <summary>
        #/// Builds a query to gather a list of declined credit card authorization
        #/// records attached to this sales order's payment records.
        #/// </summary>
        #/// <returns>
        #/// The <c>CustPaymTable</c> query that was built.
        #/// </returns>
        #Query mcrGetDeclinedCCAuthRecords()
        #{
        #    Query query = new Query();
        #    QueryBuildDataSource qbdsCustPaymTable, qbdsCCAuthTable;
        #
        #    qbdsCustPaymTable = query.addDataSource(tableNum(MCRCustPaymTable));
        #
        #    qbdsCustPaymTable.addRange(fieldNum(MCRCustPaymTable, RefTableId)).value(
        #                                queryValue(this.TableId));
        #    qbdsCustPaymTable.addRange(fieldNum(MCRCustPaymTable, RefRecId)).value(
        #                                queryValue(this.RecId));
        #    qbdsCustPaymTable.addRange(fieldNum(MCRCustPaymTable, CustPaymType)).value(
        #                                queryValue(MCRCustPaymType::CreditCard));
        #    qbdsCustPaymTable.addRange(fieldNum(MCRCustPaymTable, CustPaymType)).value(
        #                                queryValue(MCRCustPaymStatus::Declined));
        #
        #    qbdsCCAuthTable = qbdsCustPaymTable.addDataSource(tableNum(CreditCardAuthTrans));
        #    qbdsCCAuthTable.addLink(fieldNum(MCRCustPaymTable, RecId), fieldNum(CreditCardAuthTrans, mcrPaymRecId));
        #    qbdsCCAuthTable.addRange(fieldNum(CreditCardAuthTrans, ProcessorStatus)).value(
        #                                queryValue(CreditCardProcessorStatus::Declined));
        #
        #    return query;
        #}
      ENDSOURCE
      SOURCE #mcrGetDeliveryAddresses
        #/// <summary>
        #/// Builds a query which will get all the unique delivery addresses used on all <c>SalesLine</c> records
        #/// on this order.
        #/// </summary>
        #/// <returns>
        #/// The <c>SalesLine</c> query for delivery addresses.
        #/// </returns>
        #Query mcrGetDeliveryAddresses()
        #{
        #    Query query = new Query();
        #    QueryBuildDataSource qbdsSalesLine;
        #
        #    qbdsSalesLine = query.addDataSource(tableNum(SalesLine));
        #
        #    qbdsSalesLine.addRange(fieldNum(SalesLine, SalesId)).value(this.SalesId);
        #
        #    qbdsSalesLine.addRange(fieldNum(SalesLine, LineDeliveryType)).
        #        value(SysQuery::valueNot(LineDeliveryType::OrderLineWithMultipleDeliveries));
        #
        #    qbdsSalesLine.orderMode(OrderMode::GroupBy);
        #
        #    qbdsSalesLine.addSortField(fieldNum(SalesLine, DeliveryName));
        #
        #    return query;
        #}
      ENDSOURCE
      SOURCE #mcrGetNumExpeditedLines
        #/// <summary>
        #/// Gets the count of expedited lines on this sales order.
        #/// </summary>
        #/// <returns>
        #/// The count of expedited lines on this sales order.
        #/// </returns>
        #public int64 mcrGetNumExpeditedLines()
        #{
        #    SalesLine               salesLine;
        #    MCRSalesLine            mcrSalesLine;
        #
        #    select count(RecId) from salesLine
        #        where salesLine.SalesId == this.SalesId
        #        exists join mcrSalesLine
        #        where mcrSalesLine.SalesLine == salesLine.RecId
        #            && mcrSalesLine.Expedite;
        #
        #    return salesLine.RecId;
        #}
      ENDSOURCE
      SOURCE #mcrGetPaymStatus
        #/// <summary>
        #/// Calculates and returns the overall payment status for the sales order.
        #/// </summary>
        #/// <returns>
        #/// The overall payment status for the sales order.
        #/// </returns>
        #public display MCRCustPaymStatus mcrGetPaymStatus()
        #{
        #    MCRCustPaymStatus mcrCustPaymStatus = MCRCustPaymStatus::NotSubmitted;
        #    MCRCustPaymTotals mcrCustPaymTotals;
        #    MCRSalesTable     mcrSalesTable;
        #
        #    mcrCustPaymTotals = MCRCustPaymTotals::construct(this.TableId, this.RecId);
        #
        #    if (mcrCustPaymTotals)
        #    {
        #        mcrCustPaymStatus = mcrCustPaymTotals.getOverallPaymStatus();
        #        mcrSalesTable = MCRSalesTable::find(this.RecId);
        #        if (mcrSalesTable.ContinuityOrder
        #            && mcrSalesTable.ContinuityLineEval == MCRContinuityLineEval::PayAllLater
        #            && this.SalesStatus != SalesStatus::Canceled
        #            && mcrCustPaymStatus == MCRCustPaymStatus::NotSubmitted
        #            && mcrCustPaymTotals.existPaym())
        #        {
        #            return MCRCustPaymStatus::Authorized;
        #        }
        #    }
        #
        #    return mcrCustPaymStatus;
        #}
      ENDSOURCE
      SOURCE #mcrGetTotalPaymAmount
        #/// <summary>
        #/// Calculates and returns the sum of payment amounts for this sales order.
        #/// </summary>
        #/// <returns>
        #/// The sum of payment amounts for this sales order.
        #/// </returns>
        #public display Amount mcrGetTotalPaymAmount()
        #{
        #    MCRCustPaymTotals mcrCustPaymTotals;
        #
        #    mcrCustPaymTotals = MCRCustPaymTotals::construct(this.TableId, this.RecId);
        #
        #    if (mcrCustPaymTotals)
        #    {
        #        return mcrCustPaymTotals.getTotalPaymAmount();
        #    }
        #    else
        #    {
        #        return 0.0;
        #    }
        #}
      ENDSOURCE
      SOURCE #mcrHasExpeditedLines
        #/// <summary>
        #/// Indicates whether the order has one or more <c>SalesLine</c> records marked as expedited.
        #/// </summary>
        #/// <returns>
        #/// true if the order has one or more <c>SalesLine</c> records marked as expedited;
        #/// otherwise, false.
        #/// </returns>
        #display public MCRExpeditedOrder mcrHasExpeditedLines()
        #{
        #    SalesLine       salesLine;
        #    MCRSalesLine    mcrSalesLine;
        #
        #    select firstonly RecId from salesLine
        #        where salesLine.SalesId == this.SalesId
        #        exists join mcrSalesLine
        #        where mcrSalesLine.SalesLine == salesLine.RecId
        #            && mcrSalesLine.Expedite;
        #
        #    return (salesLine.RecId ? NoYes::Yes: NoYes::No);
        #}
      ENDSOURCE
      SOURCE #mcrHasMultipleCCPayments
        #/// <summary>
        #/// Gets the number of credit card payments associated with this order.
        #/// </summary>
        #/// <returns>
        #/// The number of credit card payments associated with this order.
        #/// </returns>
        #public display Integer mcrHasMultipleCCPayments()
        #{
        #    MCRCustPaymTable mcrCustPaymTable;
        #
        #    select count(RecId) from mcrCustPaymTable
        #        where mcrCustPaymTable.RefRecId == this.RecId
        #            && mcrCustPaymTable.RefTableId == this.TableId
        #            && mcrCustPaymTable.CustPaymType == MCRCustPaymType::CreditCard;
        #
        #    return (any2int(mcrCustPaymTable.RecId));
        #}
      ENDSOURCE
      SOURCE #mcrHasReturn
        #/// <summary>
        #/// Determines whether the sales order has a return order associated with it.
        #/// </summary>
        #/// <returns>
        #/// true if the sales order has a return order associated with it; otherwise, false.
        #/// </returns>
        #public boolean mcrHasReturn()
        #{
        #    SalesTable          salesTableReturn;
        #    MCRReturnSalesTable mcrReturnSalesTable;
        #
        #    if (this.SalesId)
        #    {
        #        select firstonly salesTableReturn
        #            exists join mcrReturnSalesTable
        #            where mcrReturnSalesTable.SalesTable == salesTableReturn.RecId
        #                && mcrReturnSalesTable.OriginalSalesId == this.SalesId;
        #    }
        #
        #    if (salesTableReturn)
        #    {
        #        return true;
        #    }
        #    else
        #    {
        #        return false;
        #    }
        #}
      ENDSOURCE
      SOURCE #mcrHasShipped
        #/// <summary>
        #/// Checks if any part of the order has shipped.
        #/// </summary>
        #/// <returns>
        #/// true if any part of the order has shipped; otherwise, false.
        #/// </returns>
        #boolean mcrHasShipped()
        #{
        #    SalesLine           salesLine;
        #    InventTrans         inventTrans;
        #    boolean             hasShipped;
        #    InventTransOrigin   inventTransOrigin;
        #
        #     select firstonly RecId, InventTransId from salesLine
        #        where salesLine.SalesId == this.SalesId
        #        exists join inventTrans
        #        exists join inventTransOrigin
        #            where inventTrans.InventTransOrigin == inventTransOrigin.RecId
        #            && inventTransOrigin.InventTransId == salesLine.InventTransId
        #            && (inventTrans.StatusIssue == StatusIssue::Sold
        #            || inventTrans.StatusIssue == StatusIssue::Deducted);
        #
        #    hasShipped = (salesLine.RecId == 0) ? false: true;
        #
        #    return hasShipped;
        #}
      ENDSOURCE
      SOURCE #mcrHasTender
        #/// <summary>
        #/// Determines if one or more payments using the specified tender
        #///  are associated with this sales order.
        #/// </summary>
        #/// <param name="_tenderTypeId">
        #/// The tender for which to check the sales order.
        #/// </param>
        #/// <param name="_ignoreCanceled">
        #/// A <c>Boolean</c> value that defines whether the search should take into acount
        #/// canceled orders or not; optional.
        #/// </param>
        #/// <returns>
        #/// true if one or more payments using the specified tender
        #///     are associated with this sales order; otherwise, false.
        #/// </returns>
        #boolean mcrHasTender(RetailTenderTypeId _tenderTypeId, boolean _ignoreCanceled = true)
        #{
        #    MCRCustPaymTable mcrCustPaymTable;
        #
        #    if (_ignoreCanceled)
        #    {
        #        select firstonly RecId from mcrCustPaymTable
        #            where mcrCustPaymTable.RefTableId == this.TableId
        #                && mcrCustPaymTable.RefRecId == this.RecId
        #                && mcrCustPaymTable.TenderTypeId == _tenderTypeId
        #                && (mcrCustPaymTable.PercentAmount != 0.0
        #                || mcrCustPaymTable.Amount != 0.0
        #                || mcrCustPaymTable.PostedAmount != 0);
        #    }
        #    else
        #    {
        #        select firstonly RecId from mcrCustPaymTable
        #            where mcrCustPaymTable.RefTableId == this.TableId
        #                && mcrCustPaymTable.RefRecId == this.RecId
        #                && mcrCustPaymTable.TenderTypeId == _tenderTypeId;
        #    }
        #
        #    return mcrCustPaymTable.RecId != 0;
        #}
      ENDSOURCE
      SOURCE #mcrInterCompanyAutoCreateOrders
        #/// <summary>
        #/// Generates intercompany orders.
        #/// </summary>
        #void mcrInterCompanyAutoCreateOrders()
        #{
        #    SalesLine   salesLineLocal;
        #    InventTable inventTable;
        #    VendTable   vendTable;
        #    boolean     interCompanyVendorFound;
        #
        #    if (this.InterCompanyAutoCreateOrders
        #        && (this.CreatedBy == curUserId()
        #        || this.ModifiedBy == curUserId()
        #        || !SalesTable::find(this.SalesId).InterCompanyAutoCreateOrders)
        #        && SalesTableType::construct(this).canCreatePurchOrder()
        #        && (!this.existInterCompanySales()))
        #    {
        #        while select SalesId from salesLineLocal
        #            where salesLineLocal.SalesId == this.SalesId && salesLineLocal.InventRefId == ''
        #            exists join inventTable
        #            where inventTable.ItemId == salesLineLocal.ItemId
        #            join  vendTable
        #            where vendTable.AccountNum == inventTable.PrimaryVendorId
        #        {
        #            if (vendTable.interCompanyTradingPartnerAccount())
        #            {
        #                interCompanyVendorFound = true;
        #                break;
        #            }
        #        }
        #        if (interCompanyVendorFound)
        #        {
        #            TradeInterCompany::autoCreateOrder(this);
        #        }
        #    }
        #}
      ENDSOURCE
      SOURCE #mcrInterCompanyOrigSalesId
        #/// <summary>
        #/// Finds the corresponding <c>SalesId</c> for the intercompany direct delivery sales order
        #/// transaction based on the current sales order.
        #/// </summary>
        #/// <returns>
        #/// the corresponding <c>SalesId</c> for the intercompany direct delivery sales order
        #/// transaction based on the current sales order.
        #/// </returns>
        #SalesId mcrInterCompanyOrigSalesId()
        #{
        #    PurchTable          purchTable;
        #    MCRReturnSalesTable mcrReturnSalesTable;
        #
        #    select firstonly InterCompanyOriginalSalesId, InterCompanySalesId from purchTable
        #        exists join mcrReturnSalesTable
        #        where mcrReturnSalesTable.SalesTable == this.RecId
        #        && purchTable.InterCompanyOriginalSalesId == mcrReturnSalesTable.OriginalSalesId;
        #
        #    return purchTable.InterCompanySalesId;
        #}
      ENDSOURCE
      SOURCE #mcrIsCallCenter
        #/// <summary>
        #/// Returns whether the sales order is associated with a call center or not.
        #/// </summary>
        #/// <returns>
        #/// true if the sales order is a call center order; otherwise, false.
        #/// </returns>
        #public boolean mcrIsCallCenter()
        #{
        #    if (MCROrderParameters::isCallCenterEnabledAndInUse())
        #    {
        #        return RetailMCRChannelTable::findRecId(RetailSalesTable::findSalesTable(this).RetailChannel).RecId != 0;
        #    }
        #    else
        #    {
        #        return false;
        #    }
        #}
      ENDSOURCE
      SOURCE #mcrIsContParentOrderBillUpFront
        #/// <summary>
        #/// Checks whether or not the continuity parent order is bill up front.
        #/// </summary>
        #/// <returns>
        #/// true if the continuity parent order is bill up front; otherwise, false.
        #/// </returns>
        #boolean mcrIsContParentOrderBillUpFront()
        #{
        #    MCRContinuityCustLine   mcrContinuityCustLine;
        #    MCRContinuityCustHeader mcrContinuityCustHeader;
        #    boolean                 ret = false;
        #    MCRSalesTable           mcrSalesTable = this.mcrSalesTable();
        #
        #    if (mcrSalesTable.ContinuityChild)
        #    {
        #        // If it is paid, it was bill up front without schedule.
        #        if (mcrSalesTable.ContinuityLineEval == MCRContinuityLineEval::Paid)
        #        {
        #            ret = true;
        #        }
        #        else
        #        {
        #            select firstonly InventTransId, RecId from mcrContinuityCustLine
        #                where mcrContinuityCustLine.SalesId == this.SalesId
        #                    && mcrContinuityCustLine.InventTransId
        #                exists join mcrContinuityCustHeader
        #                where mcrContinuityCustHeader.InventTransId == mcrContinuityCustLine.InventTransId;
        #
        #            if (mcrContinuityCustLine.RecId)
        #            {
        #                ret = true;
        #            }
        #        }
        #    }
        #
        #    return ret;
        #
        #}
      ENDSOURCE
      SOURCE #mcrIsOrderFullyReturned
        #/// <summary>
        #/// Validates whether or not all invoiced quantity on the order has been returned.
        #/// </summary>
        #/// <returns>
        #/// true if all invoiced quantity on the order has been returned; otherwise, false.
        #/// </returns>
        #boolean mcrIsOrderFullyReturned()
        #{
        #    boolean     fullyReturned = true;
        #    SalesLine   salesLine;
        #
        #    while select salesLine
        #        where salesLine.SalesId == this.SalesId
        #    {
        #        // If line is not fully returned.
        #        if (!salesLine.mcrIsLineFullyReturned())
        #        {
        #            fullyReturned = false;
        #            break;
        #        }
        #    }
        #
        #    return fullyReturned;
        #}
      ENDSOURCE
      SOURCE #mcrIsOrderInFuture
        #/// <summary>
        #/// Validates the future order processing dates.
        #/// </summary>
        #/// <returns>
        #/// true if the delivery date is greater than the number of days the user has set up on the
        #/// sales parameters form for future orders; otherwise, false.
        #/// </returns>
        #boolean mcrIsOrderInFuture()
        #{
        #    boolean             orderInFuture = false;
        #    MCRFutureOrderDays  days;
        #    MCROrderParameters  mcrOrderParameters;
        #    date                deliverydate;
        #    SalesLine           salesLine;
        #
        #    mcrOrderParameters = MCROrderParameters::find();
        #    // If future orders processing is on.
        #    if (mcrOrderParameters.mcrFutureOrder)
        #    {
        #        days = mcrOrderParameters.mcrFutureOrderDays;
        #        if (days>0)
        #        {
        #            // Obtain the erliest shipping date from the sales lines.
        #            select minof(ConfirmedDlv) from salesLine
        #                    where salesLine.SalesId == this.SalesId;
        #
        #            deliveryDate = salesLine.ConfirmedDlv;
        #            if ((deliveryDate -systemDateGet())>days)
        #            {
        #                orderInFuture = true;
        #            }
        #        }
        #    }
        #    return orderInFuture;
        #}
      ENDSOURCE
      SOURCE #mcrIsOrderInstallment
        #/// <summary>
        #/// Validates whether or not this order has an installment plan.
        #/// </summary>
        #/// <returns>
        #/// true if the order has an installment plan; otherwise, false.
        #/// </returns>
        #boolean mcrIsOrderInstallment()
        #{
        #    if (MCRInstallmentPlanSalesTable::existSalesId(this.SalesId)
        #        && !this.mcrSalesTable().ContinuityOrder)
        #    {
        #        return true;
        #    }
        #    else
        #    {
        #        return false;
        #    }
        #}
      ENDSOURCE
      SOURCE #mcrIsOrderOnFraudHold
        #/// <summary>
        #/// Validates whether or not the order is on fraud hold.
        #/// </summary>
        #/// <returns>
        #/// true if the order is on fraud hold; otherwise, false.
        #/// </returns>
        #boolean mcrIsOrderOnFraudHold()
        #{
        #    if (this.mcrOrderStopped == NoYes::Yes)
        #    {
        #        if (MCRHoldCodeTrans::isOrderOnFraudHold(this.SalesId))
        #        {
        #            return true;
        #        }
        #    }
        #
        #    return false;
        #}
      ENDSOURCE
      SOURCE #mcrLineHasDifferentAddress
        #/// <summary>
        #/// Checks for a different delivery address on the order lines.
        #/// </summary>
        #/// <returns>
        #/// true if there is a different delivery address on the order lines; otherwise, false.
        #/// </returns>
        #boolean mcrLineHasDifferentAddress()
        #{
        #    SalesLine   salesLine;
        #
        #    select firstonly salesLine
        #     where salesLine.SalesId == this.SalesId
        #        && salesLine.LineDeliveryType != LineDeliveryType::OrderLineWithMultipleDeliveries
        #        && salesLine.DeliveryName != this.DeliveryName;
        #
        #    if (salesLine && salesLine.deliveryAddress() == this.deliveryAddress())
        #    {
        #        return true;
        #    }
        #    else
        #    {
        #        return false;
        #    }
        #
        #}
      ENDSOURCE
      SOURCE #mcrLineHasNonBillAddress
        #/// <summary>
        #/// Checks the order line delivery addresses against the sold-to address on the customer.
        #/// </summary>
        #/// <returns>
        #/// true if the order line delivery addresses differs from the sold-to address on the customer;
        #/// otherwise, false.
        #/// </returns>
        #boolean mcrLineHasNonBillAddress()
        #{
        #    SalesLine   salesLine;
        #    CustTable   custTable;
        #
        #    custTable = this.custTable_CustAccount();
        #
        #    select firstonly RecId from salesLine
        #     where salesLine.SalesId == this.SalesId
        #        && salesLine.DeliveryPostalAddress != custTable.invoiceAddress().RecId
        #        && salesLine.LineDeliveryType != LineDeliveryType::OrderLineWithMultipleDeliveries;
        #
        #    if (salesLine.RecId)
        #    {
        #        return true;
        #    }
        #    else
        #    {
        #        return false;
        #    }
        #
        #}
      ENDSOURCE
      SOURCE #mcrOpenSalesOrder
        #/// <summary>
        #/// Updates that sales status to be that of an open order.
        #/// </summary>
        #void mcrOpenSalesOrder()
        #{
        #    MCRSalesTable           mcrSalesTable;
        #
        #    if (this.checkUpdate(false))
        #    {
        #        this.SalesStatus = SalesStatus::Backorder;
        #        if (RetailMCRChannelTable::mcrEnableOrderCompletion(this))
        #        {
        #            this.mcrOrderStopped = NoYes::Yes;
        #        }
        #
        #        // Modification of a sales order nullifies out of
        #        // balance status as well as it's release
        #        mcrSalesTable = this.mcrSalesTable();
        #        if (mcrSalesTable.PaymOutOfBalance != MCRPaymOutOfBalance::None
        #            || mcrSalesTable.OutOfBalanceReleased != MCROutOfBalanceReleaseType::None)
        #        {
        #            mcrSalesTable.PaymOutOfBalance = MCRPaymOutOfBalance::None;
        #            mcrSalesTable.OutOfBalanceReleased = MCROutOfBalanceReleaseType::None;
        #            this.mcrPackMCRSalesTable(mcrSalesTable);
        #        }
        #
        #        ttsbegin;
        #        this.update();
        #        ttscommit;
        #    }
        #}
      ENDSOURCE
      SOURCE #mcrOrderProcessed
        #/// <summary>
        #/// Determines if the current order has been processed.
        #/// </summary>
        #/// <returns>
        #/// true if it has been processed; otherwise, false.
        #/// </returns>
        #public boolean mcrOrderProcessed()
        #{
        #    MCRCustPaymTotals mcrCustPaymTotals;
        #
        #    // If order completion is not enabled, skip all logic.
        #    if (RetailMCRChannelTable::mcrEnableOrderCompletion(this))
        #    {
        #        // if the status of the order being evaluated has had
        #        // its status changed to something other than backorder
        #        // or if there are payments return true
        #        if (this.SalesStatus == SalesStatus::Backorder
        #            && this.mcrOrderStopped == NoYes::Yes
        #            && !MCRHoldCodeTrans::findActiveOrderHolds(this.SalesId))
        #        {
        #            mcrCustPaymTotals = MCRCustPaymTotals::construct(this.TableId, this.RecId);
        #            if (!MCRCustPaymTable::exists(this.TableId, this.RecId)
        #                || !mcrCustPaymTotals.allPaymentsSubmitted())
        #            {
        #                return false;
        #            }
        #        }
        #    }
        #    return true;
        #}
      ENDSOURCE
      SOURCE #mcrOrderReleaseDate
        #/// <summary>
        #///  Gets the date on which a future order will be released.
        #/// </summary>
        #/// <returns>
        #/// The order realse date of the future order.
        #/// </returns>
        #public display TransDate mcrOrderReleaseDate()
        #{
        #    date                releaseDate;
        #    MCRFutureOrderDays  mcrFutureOrderDays;
        #    date                deliverydate;
        #    SalesLine           salesLine;
        #
        #    // Only if the order is in the future will the release
        #    // date need to be calculated.
        #    if (this.mcrIsOrderInFuture())
        #    {
        #        mcrFutureOrderDays = MCROrderParameters::find().mcrFutureOrderDays;
        #
        #        // Obtain the earliest shipping date from the sales lines
        #        select minof(ConfirmedDlv) from salesLine
        #                    where salesLine.SalesId == this.SalesId;
        #
        #        deliveryDate = salesLine.ConfirmedDlv;
        #
        #        releaseDate = deliveryDate-mcrFutureOrderDays;
        #    }
        #    else
        #    {
        #        releaseDate = DateTimeUtil::date(this.CreatedDateTime);
        #    }
        #
        #    return releaseDate;
        #}
      ENDSOURCE
      SOURCE #mcrPackMCRReturnSalesTable
        #/// <summary>
        #/// Packs the retail return sales table extension table into <c>MCRReturnSalesTable</c> field.
        #/// </summary>
        #/// <param name="_mcrReturnSalesTable">
        #/// Extension table to be packed.
        #/// </param>
        #public void mcrPackMCRReturnSalesTable(MCRReturnSalesTable _mcrReturnSalesTable)
        #{
        #    _mcrReturnSalesTable.SalesTable = this.RecId;
        #    this.SysExtensionSerializerMap::packExtensionTable(_mcrReturnSalesTable);
        #}
        #
      ENDSOURCE
      SOURCE #mcrPackMCRSalesTable
        #/// <summary>
        #/// Packs the retail sales table extension table into <c>MCRSalesTable</c> field.
        #/// </summary>
        #/// <param name="_mcrSalesTable">
        #/// Extension table to be packed.
        #/// </param>
        #public void mcrPackMCRSalesTable(MCRSalesTable _mcrSalesTable)
        #{
        #    _mcrSalesTable.SalesTable = this.RecId;
        #    this.SysExtensionSerializerMap::packExtensionTable(_mcrSalesTable);
        #}
        #
      ENDSOURCE
      SOURCE #mcrPackMCRSalesTableShipping
        #/// <summary>
        #/// Packs the retail sales table shipping extension table into <c>MCRSalesTableShipping</c> field.
        #/// </summary>
        #/// <param name="_mcrSalesTableShipping">
        #/// Extension table to be packed.
        #/// </param>
        #public void mcrPackMCRSalesTableShipping(MCRSalesTableShipping _mcrSalesTableShipping)
        #{
        #    _mcrSalesTableShipping.SalesTable = this.RecId;
        #    this.SysExtensionSerializerMap::packExtensionTable(_mcrSalesTableShipping);
        #}
        #
      ENDSOURCE
      SOURCE #mcrReturnSalesTable
        #/// <summary>
        #/// Recovers the retail return sales table record.
        #/// </summary>
        #/// <returns>
        #/// A record of <c>MCRReturnSalesTable</c>
        #/// </returns>
        #public MCRReturnSalesTable mcrReturnSalesTable()
        #{
        #    return this.SysExtensionSerializerMap::getExtensionTable(tableNum(MCRReturnSalesTable));
        #}
        #
      ENDSOURCE
      SOURCE #mcrSalesManualFraudHold
        #/// <summary>
        #/// Puts a sales order on manual fraud hold.
        #/// </summary>
        #/// <returns>
        #/// The form arguments from the fraud hold form.
        #/// </returns>
        #Args mcrSalesManualFraudHold()
        #{
        #    FormRun             formRun;
        #    Args                formArgs = new Args();
        #    str                 formArgsFormStr;
        #
        #    // Pop up form for user to enter a comment
        #    // as to why the order is going on fraud hold.
        #    formArgsFormStr = formStr(MCRFraudHoldCommentDialog);
        #    formArgs.name(formArgsFormStr);
        #    formArgs.record(this);
        #    formRun = classfactory.formRunClass(formArgs);
        #    formRun.init();
        #    formRun.run();
        #    formRun.wait();
        #
        #    if (formArgs.parmEnum()) // Put order on hold.
        #    {
        #        //Even if the args().parm() is empty, meaning the user did not enter a comment
        #        //the order should still be put on hold.
        #        SalesTable::mcrInsertFraudHold(this.SalesId, formRun.args().parm());
        #    }
        #    return formArgs;
        #}
      ENDSOURCE
      SOURCE #mcrSalesOrderDetailedStatus
        #/// <summary>
        #/// Displays the order sales status.
        #/// </summary>
        #/// <returns>
        #/// The detailed order status of the sales order.
        #/// </returns>
        #public display MCRSalesOrderDetailedStatus mcrSalesOrderDetailedStatus()
        #{
        #    MCRSalesOrderDetailedStatus status;
        #
        #    status = MCRSalesDetailedStatus::salesOrderDetailedStatus(this);
        #
        #    return status;
        #}
      ENDSOURCE
      SOURCE #mcrSalesTable
        #/// <summary>
        #/// Recovers the retail sales table record.
        #/// </summary>
        #/// <param name="_packNewExtensionTable">
        #/// A Boolean value that indicates whether to pack new extension table record; optional.
        #/// </param>
        #/// <returns>
        #/// A record of <c>MCRSalesTable</c>
        #/// </returns>
        #public MCRSalesTable mcrSalesTable(boolean _packNewExtensionTable = false)
        #{
        #    return this.SysExtensionSerializerMap::getExtensionTable(tableNum(MCRSalesTable), _packNewExtensionTable);
        #}
        #
      ENDSOURCE
      SOURCE #mcrSalesTableExchange
        #/// <summary>
        #/// Gets the <c>SalesTable</c> record marked as an exchange for this record.
        #/// </summary>
        #/// <param name="_forUpdate">
        #/// A boolean that determines whether to select the record for update; optional.
        #/// </param>
        #/// <returns>
        #/// The <c>SalesTable</c> record marked as an exchange for this record if one exists;
        #/// otherwise, and empty buffer.
        #/// </returns>
        #public SalesTable mcrSalesTableExchange(boolean _forUpdate = false)
        #{
        #    SalesTable  salesTableExchange;
        #
        #    salesTableExchange.selectForUpdate(_forUpdate);
        #
        #    select firstonly salesTableExchange
        #        where salesTableExchange.SalesId == this.ReturnReplacementId;
        #
        #    return salesTableExchange;
        #}
      ENDSOURCE
      SOURCE #mcrSalesTableOriginal
        #/// <summary>
        #/// Gets the original <c>SalesTable</c> record associated with this records.
        #/// </summary>
        #/// <param name="_forUpdate">
        #/// A boolean that determines whether to select the table for update; optional.
        #/// </param>
        #/// <returns>
        #/// The original <c>SalesTable</c> record associated with this record if one exists;
        #/// otherwise, an empty buffer.
        #/// </returns>
        #public SalesTable mcrSalesTableOriginal(boolean _forUpdate = false)
        #{
        #    SalesTable          salesTableOriginal;
        #    MCRReturnSalesTable mcrReturnSalesTable;
        #
        #    salesTableOriginal.selectForUpdate(_forUpdate);
        #
        #    select firstonly salesTableOriginal
        #        exists join mcrReturnSalesTable
        #        where mcrReturnSalesTable.SalesTable == this.RecId
        #            && salesTableOriginal.SalesId == mcrReturnSalesTable.OriginalSalesId;
        #
        #    return salesTableOriginal;
        #}
      ENDSOURCE
      SOURCE #mcrSalesTableShipping
        #/// <summary>
        #/// Recovers the retail sales table shipping record.
        #/// </summary>
        #/// <param name="_packNewExtensionTable">
        #/// A Boolean value that indicates whether to pack new extension table record; optional.
        #/// </param>
        #/// <returns>
        #/// A record of <c>MCRSalesTableShipping</c>
        #/// </returns>
        #public MCRSalesTableShipping mcrSalesTableShipping(boolean _packNewExtensionTable = false)
        #{
        #    return this.SysExtensionSerializerMap::getExtensionTable(tableNum(MCRSalesTableShipping), _packNewExtensionTable);
        #}
        #
      ENDSOURCE
      SOURCE #mcrShowNotes
        #/// <summary>
        #///  Shows the existing notes field and allows editing.
        #/// </summary>
        #void mcrShowNotes()
        #{
        #    FormRun    formRun;
        #    Args       formArgs = new Args();
        #    str        formArgsFormStr;
        #    Common     formArgsRecord;
        #
        #    formArgsRecord = this;
        #    formArgsFormStr = formStr(MCRFraudHoldCommentDialog);
        #    formArgs.name(formArgsFormStr);
        #    formArgs.record(formArgsRecord);
        #    formRun = classfactory.formRunClass(formArgs);
        #    formRun.init();
        #    formRun.run();
        #    formRun.wait();
        #}
      ENDSOURCE
      SOURCE #mergeDimension
        #/// <summary>
        #/// Retrieves a dimension set that holds the merged combination of the current <c>defaultDimension</c>
        #/// field on this table and the provided dimension set.
        #/// </summary>
        #/// <param name="_primaryDefaultDimension">
        #/// A first dimension set to merge with the current <c>defaultDimension</c> field on this table.
        #/// </param>
        #/// <param name="_secondaryDefaultDimension">
        #/// A second dimension set to merge with the current <c>defaultDimension</c> field on this table;
        #/// optional.
        #/// </param>
        #/// <param name="_dimensionMerge">
        #/// A <c>dimensionMerge</c> object that was initialized from the current buffer; optional.
        #/// </param>
        #/// <returns>
        #/// A dimension set that holds the merged combination of the current <c>defaultDimension</c> field on
        #/// this table and the provided dimension set.
        #/// </returns>
        #/// <remarks>
        #/// This method makes sure that potential linked dimensions are not overwritten when they are merged.
        #/// </remarks>
        #
        #public DimensionDefault mergeDimension(
        #    DimensionDefault _primaryDefaultDimension,
        #    DimensionDefault _secondaryDefaultDimension = 0,
        #    DimensionMerge   _dimensionMerge = DimensionMerge::newFromTable(this,
        #                                                                    this.companyInfo().RecId
        #                                                                    )
        #    )
        #{
        #    return _dimensionMerge.merge(_primaryDefaultDimension, _secondaryDefaultDimension);
        #}
      ENDSOURCE
      SOURCE #modifiedField
        #public void modifiedField(FieldId _fieldId)
        #{
        #    SalesTableType  salesTableType;
        #
        #    super(_fieldId);
        #
        #    salesTableType = this.type();
        #    salesTableType.modifiedField(_fieldId);
        #    if (isConfigurationkeyEnabled(configurationKeyNum(MCRCallCenter)))
        #    {
        #        // Default in the MCRExpedite flag based on the delivery mode.
        #        if (_fieldId == fieldNum(SalesTable, DlvMode))
        #        {
        #            this.mcrDlvModeModified();
        #        }
        #
        #        // Refresh to update any other form controls displaying this field.
        #        if (this.isFormDataSource())
        #        {
        #            this.dataSource().refresh();
        #        }
        #    }
        #
        #    if (isConfigurationkeyEnabled(configurationKeyNum(Retail)))
        #    {
        #        if (_fieldId == fieldNum(SalesTable, CustAccount))
        #        {
        #            RetailLoyaltyManager::UpdateLoyaltyGroupsForCustomerOrder(this.SalesId);
        #        }
        #    }
        #
        #}
      ENDSOURCE
      SOURCE #modifiedFieldDDC
        #/// <summary>
        #/// Processes the modified field event for delivery date control fields.
        #/// </summary>
        #/// <param name="_fieldId">
        #/// The field ID for the modified field.
        #/// </param>
        #void modifiedFieldDDC(FieldId _fieldId) //Enhanced Delivery Date Control
        #{
        #    Object                      obj;
        #    SalesCalcAvailableDlvDates  calcAvailableDlvDates;
        #    container                   c;
        #
        #    if (this.DeliveryDateControlType != SalesDeliveryDateControlType::None)
        #    {
        #        calcAvailableDlvDates = SalesCalcAvailableDlvDates::newCommonSalesDlvDateType(this,_fieldId);
        #
        #        switch (_fieldId)
        #        {
        #            case fieldNum(SalesTable, DeliveryPostalAddress):        //fall through
        #            case fieldNum(SalesTable, DlvMode):                 //fall through
        #            case fieldNum(SalesTable, InventLocationId):
        #                if (!this.RecId)
        #                {
        #                    calcAvailableDlvDates = SalesCalcAvailableDlvDates::modifiedFieldOrderEntryDeadLine(this,_fieldId);
        #                }
        #                break;
        #
        #            case fieldNum(SalesTable, DeliveryDateControlType):
        #                if (this.RecId)
        #                {
        #                    calcAvailableDlvDates.modifiedField(this);
        #                }
        #                else
        #                {
        #                    calcAvailableDlvDates = SalesCalcAvailableDlvDates::modifiedFieldOrderEntryDeadLine(this,_fieldId);
        #                }
        #                break;
        #
        #            case fieldNum(SalesTable, ReceiptDateRequested):
        #                calcAvailableDlvDates.modifiedField(this);
        #
        #                if (this.ShippingDateRequested > this.ReceiptDateRequested)
        #                {
        #                    this.ShippingDateRequested = this.ReceiptDateRequested;
        #                }
        #                break;
        #
        #            case fieldNum(SalesTable, ShippingDateRequested):
        #                calcAvailableDlvDates.modifiedField(this);
        #
        #                if (this.ShippingDateRequested > this.ReceiptDateRequested)
        #                {
        #                    this.ReceiptDateRequested = this.ShippingDateRequested;
        #                }
        #                break;
        #
        #            case fieldNum(SalesTable, ShippingDateConfirmed):
        #                calcAvailableDlvDates.modifiedField(this);
        #
        #                if (this.ShippingDateConfirmed > this.ReceiptDateConfirmed)
        #                {
        #                    this.ReceiptDateConfirmed = this.ShippingDateConfirmed;
        #                }
        #                break;
        #
        #            case fieldNum(SalesTable, ReceiptDateConfirmed):
        #                calcAvailableDlvDates.modifiedField(this);
        #
        #                if (this.ShippingDateConfirmed > this.ReceiptDateConfirmed)
        #                {
        #                    this.ShippingDateConfirmed = this.ReceiptDateConfirmed;
        #                }
        #                break;
        #
        #            default:
        #        }
        #    }
        #
        #    if (this.isFormDataSource() && this.dataSource().formRun() && this.dataSource().formRun().name() == formStr(SalesCreateOrder))
        #    {
        #        obj = this.dataSource().formRun();
        #
        #        if (calcAvailableDlvDates && calcAvailableDlvDates.parmCancelModifiedField())
        #        {
        #            if (formHasMethod(obj,identifierStr(getInitialValuesDeliveryDate)))
        #            {
        #                c = obj.getInitialValuesDeliveryDate();
        #
        #                if (c)
        #                {
        #                    this.ShippingDateConfirmed   = conPeek(c, 1);
        #                    this.ShippingDateRequested   = conPeek(c, 2);
        #                    this.ReceiptDateConfirmed    = conPeek(c, 3);
        #                    this.ReceiptDateRequested    = conPeek(c, 4);
        #                    this.DeliveryDateControlType = conPeek(c, 5);
        #                }
        #            }
        #            else
        #            {
        #                this.(_fieldId) = this.orig().(_fieldId);
        #            }
        #        }
        #        else
        #        {
        #            if (formHasMethod(obj,identifierStr(setInitialValuesDeliveryDate)))
        #            {
        #                obj.setInitialValuesDeliveryDate();
        #            }
        #        }
        #    }
        #
        #    this.DeliveryDate = this.ShippingDateConfirmed ? this.ShippingDateConfirmed : this.ShippingDateRequested;
        #}
      ENDSOURCE
      SOURCE #modifiedInterCompanyOrder
        #public void modifiedInterCompanyOrder()
        #{
        #    if (this.InterCompanyOrder)
        #    {
        #        this.InterCompanyCompanyId = this.custTable_CustAccount().interCompanyTradingPartnerCompanyID();
        #        if (this.isMarkedForBankLC())
        #        {
        #            this.BankDocumentType = BankDocumentType::None;
        #        }
        #    }
        #    else
        #    {
        #        this.InterCompanyCompanyId = '';
        #    }
        #}
      ENDSOURCE
      SOURCE #modifiedInventSiteFromParent
        #public void modifiedInventSiteFromParent()
        #{
        #    this.InventStorageDimMap::modifiedInventSiteFromParent(this);
        #}
      ENDSOURCE
      SOURCE #modifiedOneTimeCustomer
        #void  modifiedOneTimeCustomer()
        #{
        #    if (!CustTable::createOneTimeAccountValidate())
        #    {
        #        this.OneTimeCustomer = NoYes::No;
        #    }
        #
        #    if (this.OneTimeCustomer && !this.CustAccount)
        #    {
        #        this.createOneTimeAccount();
        #    }
        #}
      ENDSOURCE
      SOURCE #modifiedProjId
        #void  modifiedProjId()
        #{
        #    ProjTable           projTable = ProjTable::find(this.ProjId);
        #    ProjFundingSource   projFundingSource;
        #
        #    this.initFromProjTable(projTable);
        #
        #    if (ProjFundingSource::numberOfFundingSources(projTable.ProjInvoiceProjId) == 1)
        #    {
        #        // Project does not support Sales Orders / Item Requirements for multiple funded contracts
        #        select firstonly CustAccount, LanguageId from projFundingSource where projFundingSource.ContractId == projTable.ProjInvoiceProjId;
        #        this.LanguageId       = projFundingSource.LanguageId;
        #    }
        #
        #    this.OneTimeCustomer  = false;
        #}
      ENDSOURCE
      SOURCE #moduleType
        #ModuleInventPurchSales moduleType()
        #{
        #    return ModuleInventPurchSales::Sales;
        #}
      ENDSOURCE
      SOURCE #mustBeCovPlanned
        #boolean  mustBeCovPlanned()
        #{
        #    SalesTableType  salesTableType;
        #
        #    salesTableType = this.type();
        #    return salesTableType.mustBeCovPlanned();
        #}
      ENDSOURCE
      SOURCE #mustDoCreditLimitAfterUpdate
        #/**
        #    The method returns true if creditlimit must be executed after salesTable.update().
        #**/
        #boolean mustDoCreditLimitAfterUpdate()
        #{
        #    SalesTable this_orig = this.orig();
        #
        #    return (this.InclTax            != this_orig.InclTax ||
        #            this.CustAccount        != this_orig.CustAccount
        #            || this.SalesType       != this_orig.SalesType
        #            || this.FixedExchRate   != this_orig.FixedExchRate
        #            );
        #}
      ENDSOURCE
      SOURCE #numberOfLines
        #public NumberOfRecords numberOfLines()
        #{
        #    return (select count(RecId) from salesLine where salesLine.SalesId == this.SalesId).RecId;
        #}
      ENDSOURCE
      SOURCE #packingSlipTotal
        #public Amount packingSlipTotal()
        #{
        #    SalesTotals_Sales   salesTotals = SalesTotals_Sales::construct(this, SalesUpdate::PackingSlip);
        #    container           displayFields = salesTotals.displayFieldsCurrency(salesTotals.currencyCode());
        #
        #    return conPeek(displayFields, TradeTotals::posTotalAmount());
        #}
      ENDSOURCE
      SOURCE #packRetailSalesTable
        #/// <summary>
        #/// Packs Retail extension table into <c>PackedExtensions</c> field
        #/// </summary>
        #/// <param name="_retailSalesTable">
        #/// Extension table to be packed
        #/// </param>
        #public void packRetailSalesTable(RetailSalesTable _retailSalesTable)
        #{
        #    _retailSalesTable.SalesTable = this.RecId;
        #    this.SysExtensionSerializerMap::packExtensionTable(_retailSalesTable);
        #}
      ENDSOURCE
      SOURCE #packSalesTable_BR
        #/// <summary>
        #/// Packs brazilian extension table into <c>PackedExtensions</c> field
        #/// </summary>
        #/// <param name="_salesTable_BR">
        #/// Extension table to be packed
        #/// </param>
        #public void packSalesTable_BR(SalesTable_BR _salesTable_BR)
        #{
        #    _salesTable_BR.SalesTable = this.RecId;
        #    this.SysExtensionSerializerMap::packExtensionTable(_salesTable_BR);
        #}
      ENDSOURCE
      SOURCE #packSalesTable_IN
        #/// <summary>
        #/// Packs indian extension table into <c>PackedExtensions</c> field
        #/// </summary>
        #/// <param name="_salesTable_IN">
        #/// Extension table to be packed
        #/// </param>
        #// <GIN>
        #public void packSalesTable_IN(SalesTable_IN _salesTable_IN)
        #{
        #    _salesTable_IN.SalesTable = this.RecId;
        #    this.SysExtensionSerializerMap::packExtensionTable(_salesTable_IN);
        #}
        #// </GIN>
      ENDSOURCE
      SOURCE #packSalesTable_Intrastat
        #/// <summary>
        #/// Packs <c>SalesTable_Intrastat</c> extension table record.
        #/// </summary>
        #/// <param name="_salesTable_Intrastat">
        #/// The extension table record to pack.
        #/// </param>
        #public void packSalesTable_Intrastat(SalesTable_Intrastat _salesTable_Intrastat)
        #{
        #    this.SysExtensionSerializerMap::packExtensionTable(_salesTable_Intrastat);
        #}
        #
      ENDSOURCE
      SOURCE #packSalesTable_RU
        #/// <summary>
        #/// Packs an <c>SalesTable_RU</c> record to the container field <C>PackedExtensions</C>.
        #/// </summary>
        #/// <param name="_salesTable_RU">
        #/// The source record of <c>SalesTable_RU</c> table.
        #/// </param>
        #public void packSalesTable_RU(SalesTable_RU _salesTable_RU)
        #{
        #    _salesTable_RU.SalesTable = this.RecId;
        #    this.SysExtensionSerializerMap::packExtensionTable(_salesTable_RU);
        #}
        #
      ENDSOURCE
      SOURCE #packSalesTable_W
        #/// <summary>
        #///    Packs an <c>SalesTable_W</c> record to the container field <C>PackedExtensions</C>.
        #/// </summary>
        #/// <param name="_salesTable_W">
        #///    The source record of <c>SalesTable_W</c> table.
        #/// </param>
        #public void packSalesTable_W(SalesTable_W _salesTable_W)
        #{
        #    _salesTable_W.SalesTable = this.RecId;
        #    this.SysExtensionSerializerMap::packExtensionTable(_salesTable_W);
        #}
        #
      ENDSOURCE
      SOURCE #partyTable_CustAccount
        #DirPartyTable partyTable_CustAccount(boolean _forUpdate = false)
        #{
        #    DirPartyTable   partyTable;
        #    CustTable       custTable;
        #
        #    if (this.CustAccount)
        #    {
        #        if (_forUpdate)
        #        {
        #            partyTable.selectForUpdate(_forUpdate);
        #        }
        #
        #        select firstonly partyTable
        #            exists join custTable
        #            where custTable.Party      == partyTable.RecId
        #               && custTable.AccountNum == this.CustAccount;
        #    }
        #    return partyTable;
        #}
      ENDSOURCE
      SOURCE #payer
        #CustTable payer(boolean  _forUpdate = false)
        #{
        #    return this.custTable_InvoiceAccount(_forUpdate);
        #}
      ENDSOURCE
      SOURCE #payerPostalAddress
        #LogisticsPostalAddress payerPostalAddress()
        #{
        #    return DirParty::primaryPostalAddress(this.custTable_InvoiceAccount().Party,this.deliveryTransDateTime());
        #}
      ENDSOURCE
      SOURCE #paymDayId
        #CustPaymDayId paymDayId()
        #{
        #    CustPaymDayId    paymDayId;
        #
        #    paymDayId = this.custTable_InvoiceAccount().PaymDayId;
        #
        #    if (!paymDayId)
        #    {
        #        paymDayId = this.payment().PaymDayId;
        #    }
        #
        #    return paymDayId;
        #}
      ENDSOURCE
      SOURCE #payment
        #PaymTerm payment(boolean _update = false)
        #{
        #    return PaymTerm::find(this.Payment, _update);
        #}
      ENDSOURCE
      SOURCE #paymModeModified
        #void paymModeModified()
        #{
        #    this.PaymModeMap::modifiedPaymMode();
        #}
      ENDSOURCE
      SOURCE #previewPaneTitle
        #/// <summary>
        #/// Sets the title on top of the preview pane.
        #/// </summary>
        #/// <returns>
        #/// The title field of the preview pane.
        #/// </returns>
        #display Caption previewPaneTitle()
        #{
        #    return strFmt("@SYS330566", this.SalesId);
        #}
      ENDSOURCE
      SOURCE #previewPaneTitleReturnItemNum
        #/// <summary>
        #/// Sets the title on top of the preview pane.
        #/// </summary>
        #/// <returns>
        #/// The title field of the preview pane.
        #/// </returns>
        #display Caption previewPaneTitleReturnItemNum()
        #{
        #    return strFmt("@SYS330566", this.ReturnItemNum);
        #}
      ENDSOURCE
      SOURCE #priceDiscChangePolicyExistOnLine
        #/// <summary>
        #/// Indicates whether a line record related to the current record has a price discount policy.
        #/// </summary>
        #/// <returns>
        #/// true if a line with a price discount policy exists; otherwise, false
        #/// </returns>
        #public boolean priceDiscChangePolicyExistOnLine()
        #{
        #    SalesLine salesLine;
        #
        #    select firstonly RecId from salesLine
        #        where salesLine.SalesId == this.SalesId
        #           && (salesLine.SystemEntryChangePolicy != 0
        #           || salesLine.ManualEntryChangepolicy != 0);
        #
        #    return salesLine.RecId != 0;
        #}
      ENDSOURCE
      SOURCE #priceDiscChangePolicyUpdateLine
        #/// <summary>
        #/// Updates the price discount policy fields on a set of purchase line records related to the current
        #/// <c>SalesTable</c> record.
        #/// </summary>
        #/// <param name="_priceDiscChangePoliciesTmp">
        #/// A buffer of the temporary <c>PriceDiscChangePoliciesTmp</c> table.
        #/// </param>
        #public void priceDiscChangePolicyUpdateLine(PriceDiscChangePoliciesTmp  _priceDiscChangePoliciesTmp)
        #{
        #    SalesLine salesLine;
        #
        #    salesLine.skipDataMethods();
        #    update_recordset salesLine
        #    setting ManualEntryChangepolicy = _priceDiscChangePoliciesTmp.ManualEntryChangepolicy,
        #            SystemEntryChangePolicy = _priceDiscChangePoliciesTmp.SystemEntryChangePolicy,
        #            SystemEntrySource       = _priceDiscChangePoliciesTmp.SystemEntrySource
        #    join _priceDiscChangePoliciesTmp
        #        where _priceDiscChangePoliciesTmp.RefRecId == salesLine.RecId;
        #}
      ENDSOURCE
      SOURCE #projectedFreightCharge
        #public AmountCur projectedFreightCharge(AmountCur _amt = 0)
        #{
        #    CustParameters      custParameters = CustParameters::find();
        #    AmountCur           amtTotal, amtFreight, amtTax, amtMisc;
        #    SalesTotals_Sales   salesTotals;
        #
        #    if (custParameters.CreditCardEstShippingChargeType == CreditCardEstShippingChargeType::Fixed)
        #    {
        #        amtFreight = custParameters.CreditCardEstShippingChargeValue;
        #    }
        #    else
        #    {
        #        amtTotal = _amt;
        #        if (prmisDefault(_amt) || _amt == 0)
        #        {
        #            salesTotals = SalesTotals_Sales::construct(this, SalesUpdate::All);
        #            amtTotal    = salesTotals.totalAmount();
        #            amtTax      = salesTotals.totalTaxAmount();
        #            amtMisc     = salesTotals.totalMarkup();
        #        }
        #
        #        amtFreight = amtTotal - amtTax - amtMisc;
        #
        #        if (amtFreight > 0)
        #        {
        #            amtFreight = amtFreight * custParameters.CreditCardEstShippingChargeValue / 100;
        #            if (custParameters.CreditCardEstShippingChargeMax)
        #            {
        #                amtFreight = min(custParameters.CreditCardEstShippingChargeMax, amtFreight);
        #            }
        #        }
        #        else
        #        {
        #            amtFreight = 0;
        #        }
        #    }
        #
        #    return amtFreight;
        #}
      ENDSOURCE
      SOURCE #projTable
        #ProjTable projTable(boolean  _forUpdate = false)
        #{
        #    return ProjTable::find(this.ProjId, _forUpdate);
        #}
      ENDSOURCE
      SOURCE #qualityOrderStatusDisplay
        #/// <summary>
        #///    Returns the status of the associated quality orders.
        #/// </summary>
        #/// <returns>
        #///    The current quality order status.
        #/// </returns>
        #display InventTestOrderStatusDisplay qualityOrderStatusDisplay()
        #{
        #    InventQualityOrderTable orderTable;
        #
        #    if (!InventParameters::find().UseQualityManagement)
        #    {
        #        return InventTestOrderStatusDisplay::None;
        #    }
        #
        #    orderTable = InventQualityOrderTable::findLastQualityOrder(InventTestReferenceType::Sales, this.SalesId);
        #
        #    return orderTable ? orderTable.statusDisplay() : InventTestOrderStatusDisplay::None;
        #}
      ENDSOURCE
      SOURCE #querySalesLine
        #Query querySalesLine(boolean _update = false)
        #{
        #    DictRelation    dictRelation;
        #    DictField       externdictField;
        #    DictField       dictField;
        #    Query           query = new Query();
        #    Counter         c;
        #
        #    query.addDataSource(tableNum(SalesLine));
        #
        #    dictRelation = new DictRelation(tableNum(SalesLine));
        #    dictRelation.loadTableRelation(this.TableId);
        #
        #    if (dictRelation.lines())
        #    {
        #        for (c=1; c <= dictRelation.lines(); c++)
        #        {
        #            externdictField   = new DictField(this.TableId,dictRelation.lineExternTableValue(c));
        #            dictField   = new DictField(tableNum(SalesLine),dictRelation.lineTableValue(c));
        #            query.dataSourceTable(tableNum(SalesLine)).addRange(dictField.id()).value(queryValue(this.(externdictField.id())));
        #        }
        #    }
        #    query.dataSourceTable(tableNum(SalesLine)).update(_update);
        #
        #    return query;
        #}
      ENDSOURCE
      SOURCE #referencePurchTable
        #/// <summary>
        #/// Gets a reference purchase table record.
        #/// </summary>
        #/// <returns>
        #/// A reference purchase table record.
        #/// </returns>
        #/// <remarks>
        #/// This method is used for finding the reference purchase table in the same legal entity in 3-leged
        #/// intercompany scenarios.
        #/// </remarks>
        #public PurchTable referencePurchTable()
        #{
        #    InterCompanyPurchSalesReference     interCompanyPurchSalesReference;
        #    PurchTable                          referencePurchTable;
        #
        #    select firstonly referencePurchTable order by InterCompanySalesId desc
        #        exists join interCompanyPurchSalesReference
        #        where interCompanyPurchSalesReference.PurchId == referencePurchTable.PurchId
        #        &&    interCompanyPurchSalesReference.SalesId == this.SalesId;
        #
        #    return referencePurchTable;
        #}
      ENDSOURCE
      SOURCE #removeReferenceToCancelledFiscalDoc_BR
        #/// <summary>
        #/// removes the reference to cancelled fiscal document for Brazil Localization.
        #/// </summary>
        #public server void removeReferenceToCancelledFiscalDoc_BR()
        #{
        #    SalesTable_BR salesTable_BR;
        #
        #    ttsbegin;
        #    salesTable_BR = this.salesTable_BR();
        #    salesTable_BR.selectForUpdate(true);
        #    salesTable_BR.InvoiceRefRecID_BR = 0;
        #    salesTable_BR.update();
        #    ttscommit;
        #}
      ENDSOURCE
      SOURCE #resetLinePolicies
        #/// <summary>
        #/// Resets price discount policies on the lines that are related to the current record.
        #/// </summary>
        #public void resetLinePolicies()
        #{
        #    SalesLine salesLine;
        #
        #    update_recordset salesLine
        #        setting SystemEntrySource       = PriceDiscSystemSource::None,
        #                SystemEntryChangePolicy = 0,
        #                ManualEntryChangepolicy = 0
        #    where salesLine.SalesId == this.SalesId;
        #}
      ENDSOURCE
      SOURCE #retailConcessionContractId
        #/// <summary>
        #/// Gets the Retail concession contract Id
        #/// </summary>
        #/// <returns>
        #/// The Retail concession contract Id
        #/// </returns>
        #public display RetailConcessionContractId retailConcessionContractId()
        #{
        #    return this.retailSalesTable().RetailConcessionContractId;
        #}
      ENDSOURCE
      SOURCE #retailPackRetailSalesTable
        #/// <summary>
        #/// Packs the retail sales table extension table into <c>RetailSalesTable</c> field.
        #/// </summary>
        #/// <param name="_retailSalesTable">
        #/// Extension table to be packed.
        #/// </param>
        #public void retailPackRetailSalesTable(RetailSalesTable _retailSalesTable)
        #{
        #    _retailSalesTable.SalesTable = this.RecId;
        #    this.SysExtensionSerializerMap::packExtensionTable(_retailSalesTable);
        #}
        #
      ENDSOURCE
      SOURCE #retailSalesTable
        #/// <summary>
        #/// Unpacks Retail extension table from <c>PackedExtensions</c> field
        #/// </summary>
        #/// <param name="_packNewExtensionTable">
        #/// A Boolean value that indicates whether to pack new extension table record; optional.
        #/// </param>
        #/// <returns>
        #/// The unpacked <c>RetailSalesTable</c> record
        #/// </returns>
        #public RetailSalesTable retailSalesTable(boolean _packNewExtensionTable = true)
        #{
        #    return this.SysExtensionSerializerMap::getExtensionTable(tableNum(RetailSalesTable), _packNewExtensionTable);
        #}
      ENDSOURCE
      SOURCE #returnChangeStatus
        #/// <summary>
        #/// Changes the return status.
        #/// </summary>
        #/// <param name="_newStatus">
        #/// The <c>ReturnStatusHeader</c> enumeration value to set.
        #/// </param>
        #public void returnChangeStatus(ReturnStatusHeader _newStatus)
        #{
        #    if (this.RecId
        #        && this.ReturnStatus != _newStatus)
        #    {
        #        this.ReturnStatus = _newStatus;
        #        this.update();
        #    }
        #}
      ENDSOURCE
      SOURCE #returnCreateReplacement
        #/// <summary>
        #///    Checks whether a replacement order can be created for the sales table that is in scope.
        #/// </summary>
        #/// <returns>
        #///    true if no replacement order exists; otherwise, false.
        #/// </returns>
        #public boolean returnCreateReplacement()
        #{
        #    boolean ret = true;
        #
        #    if (this.ReturnReplacementCreated == NoYes::Yes
        #    || (this.InterCompanyOrder && this.InterCompanyDirectDeliveryOrig))
        #    {
        #        ret = false;
        #    }
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #returnExistReturnToCustLines
        #/// <summary>
        #/// Determines if Return to cust lines exist for the sales order.
        #/// </summary>
        #/// <returns>
        #/// true if Return to cust lines exist; otherwise,false.
        #/// </returns>
        #public boolean returnExistReturnToCustLines()
        #{
        #    SalesLine               returnToCustLine;
        #    ReturnDispositionCode   returnDispositionCode;
        #
        #    select firstonly RecId from returnToCustLine
        #        where returnToCustLine.SalesId         == this.SalesId
        #           && returnToCustLine.SalesType       == SalesType::ReturnItem
        #           && returnToCustLine.ExpectedRetQty  >  0
        #        exists join returnDispositionCode
        #            where returnDispositionCode.DispositionCodeId == returnToCustLine.ReturnDispositionCodeId
        #            &&    returnDispositionCode.DispositionAction == DispositionAction::ReturnToCust;
        #
        #    return returnToCustLine.RecId;
        #}
      ENDSOURCE
      SOURCE #returnItem
        #/// <summary>
        #/// Indicates if the current item is the return item.
        #/// </summary>
        #/// <returns>
        #/// true if the current item is return item; otherwise, false.
        #/// </returns>
        #boolean returnItem()
        #{
        #    return this.type().returnItem();
        #}
      ENDSOURCE
      SOURCE #returnReservationAllowedIsSet
        #public boolean returnReservationAllowedIsSet()
        #{
        #    SalesLine returnLine;
        #    boolean   ret;
        #
        #    select firstonly RecId from returnLine where returnLine.SalesId                == this.SalesId &&
        #                                                 returnLine.ReturnAllowReservation == NoYes::Yes;
        #
        #    ret = returnLine.RecId ? true : false;
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #returnValidateDeleteReplaceId
        #/// <summary>
        #/// Launches a dialog box that asks for confirmation of deletion of the specified return order in case
        #/// a replacement order exists.
        #/// </summary>
        #/// <returns>
        #/// true if the user confirms deletion; otherwise, false.
        #/// </returns>
        #boolean returnValidateDeleteReplaceId()
        #{
        #    boolean ret = true;
        #
        #    // Are you sure you want to delete return order %1. A replacement order is attached
        #    if (this.ReturnReplacementId && Box::yesNo(strFmt("@SYS106299", this.ReturnItemNum), DialogButton::No) == DialogButton::No)
        #    {
        #        ret = false;
        #    }
        #
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #salesTable_BR
        #/// <summary>
        #/// Recovers brazilian extension table
        #/// </summary>
        #/// <returns>
        #/// A record of <c>SalesTable_BR</c>
        #/// </returns>
        #public SalesTable_BR salesTable_BR()
        #{
        #    return this.SysExtensionSerializerMap::getExtensionTable(tableNum(SalesTable_BR));
        #}
        #
      ENDSOURCE
      SOURCE #salesTable_IN
        #/// <summary>
        #/// Recovers india extension table
        #/// </summary>
        #/// <returns>
        #/// A record of <c>SalesTable_IN</c>
        #/// </returns>
        #// <GIN>
        #public SalesTable_IN salesTable_IN()
        #{
        #    return this.SysExtensionSerializerMap::getExtensionTable(tableNum(SalesTable_IN));
        #}
        #// </GIN>
        #
      ENDSOURCE
      SOURCE #salesTable_Intrastat
        #/// <summary>
        #/// Retrieves <c>SalesTable_Intrastat</c> extension table record.
        #/// </summary>
        #/// <returns>
        #/// The extension table record related to current record.
        #/// </returns>
        #public SalesTable_Intrastat salesTable_Intrastat()
        #{
        #    return this.SysExtensionSerializerMap::getExtensionTable(tableNum(SalesTable_Intrastat));
        #}
        #
      ENDSOURCE
      SOURCE #salesTable_RU
        #/// <summary>
        #/// Gets extension table record for current base table record.
        #/// </summary>
        #/// <returns>
        #/// The extension table record.
        #/// </returns>
        #public SalesTable_RU salesTable_RU()
        #{
        #    return this.SysExtensionSerializerMap::getExtensionTable(tableNum(SalesTable_RU));
        #}
        #
      ENDSOURCE
      SOURCE #salesTable_W
        #/// <summary>
        #///    Gets extension table record for current base table record.
        #/// </summary>
        #/// <returns>
        #///    The extension table record.
        #/// </returns>
        #public SalesTable_W salesTable_W()
        #{
        #    return this.SysExtensionSerializerMap::getExtensionTable(tableNum(SalesTable_W));
        #}
        #
      ENDSOURCE
      SOURCE #salesTableExtensionTH
        #/// <summary>
        #/// Get the <c>SalesTableExtensionTH</c> table.
        #/// </summary>
        #/// <returns>
        #/// The table <c>SalesTableExtensionTH</c> associated with the current record.
        #/// </returns>
        #public SalesTableExtensionTH salesTableExtensionTH()
        #{
        #    return this.SysExtensionSerializerMap::getExtensionTable(tableNum(SalesTableExtensionTH));
        #}
      ENDSOURCE
      SOURCE #sendReturnOrderElectronically
        #public void sendReturnOrderElectronically(XMLDocPurpose _xmlDocPurpose, AifSendMode _aifSendMode = AifSendMode::Async)
        #{
        #    AxdSendContext          axdSendContext      = AxdSendContext::construct();
        #    AifEntityKey            aifEntityKey        = AifEntityKey::construct();
        #    AifAction               aifAction;
        #    AifConstraint           aifConstraint       = new AifConstraint();
        #    AifConstraintList       aifConstraintList   = new AifConstraintList();
        #
        #    aifAction = AifAction::find(AifSendService::getDefaultSendAction(classNum(ReturnReturnOrderOutService),AifSendActionType::SendByKey));
        #
        #    aifEntityKey.parmTableId(this.TableId);
        #    aifEntityKey.parmRecId(this.RecId);
        #    aifEntityKey.parmKeyDataMap(SysDictTable::getKeyData(this));
        #
        #    axdSendContext.parmXMLDocPurpose(_xmlDocPurpose);
        #    axdSendContext.parmSecurity(false);
        #
        #    aifConstraint.parmType(AifConstraintType::Customer);
        #    aifConstraint.parmId(this.CustAccount);
        #    aifConstraintList.addConstraint(aifConstraint);
        #
        #    AifSendService::submitDefault(classNum(ReturnReturnOrderOutService),
        #                                    aifEntityKey,
        #                                    aifConstraintList,
        #                                    _aifSendMode,
        #                                    axdSendContext.pack());
        #}
      ENDSOURCE
      SOURCE #setAgreement_RU
        #/// <summary>
        #///     Initializes sales order from the agreement.
        #/// </summary>
        #public void setAgreement_RU()
        #{
        #    SalesAgreementHeaderExt_RU salesAgreementHeaderExt;
        #    SalesAgreementHeader salesAgreementHeader;
        #    SalesTable_RU salesTableRU;
        #
        #    salesTableRU = this.salesTable_RU();
        #
        #    if (salesTableRU.AgreementHeaderExt_RU)
        #    {
        #        salesAgreementHeaderExt = SalesAgreementHeaderExt_RU::find(salesTableRU.AgreementHeaderExt_RU);
        #
        #        salesAgreementHeader = SalesAgreementHeader::find(salesAgreementHeaderExt.AgreementHeader);
        #
        #        if (Box::yesNo("@SYS305724",DialogButton::Yes) == DialogButton::Yes)
        #        {
        #            // Transfer default settings from Agreement to SalesTable buffer...
        #            this.initFromSalesAgreementHeader(salesAgreementHeader);
        #        }
        #        else
        #        {
        #            this.DefaultDimension = this.copyDimension(salesAgreementHeader.DefaultDimension);
        #        }
        #    }
        #    else
        #    {
        #        this.MatchingAgreement = 0;
        #        this.DefaultDimension = AgreementHeaderExt_RU::clearAgreementDimension(this.DefaultDimension);
        #        this.transferCustAccount_Server(true);
        #        this.initInvoiceAccount();
        #    }
        #}
        #
      ENDSOURCE
      SOURCE #setDeliveryName
        #/// <summary>
        #/// Sets the delivery name field that is based on a specified logistic location.
        #/// </summary>
        #/// <param name="_skipDeliveryRoleCheck">
        #/// A flag indicating whether this is a new online Retail sale; optional;
        #/// </param>
        #public void setDeliveryName(boolean _skipDeliveryRoleCheck = false)
        #{
        #    this.TradePostalAddress::setDeliveryName(_skipDeliveryRoleCheck);
        #}
      ENDSOURCE
      SOURCE #setEstimate
        #/**
        #    Returns true if the estimated amount is calculated and has changed
        #**/
        #server boolean setEstimate(SalesTotals _salesTotals = null)
        #{
        #    SalesTotals             salesTotals;
        #    SalesUpdate             qtySpec;
        #    CustParameters          custParameters          = CustParameters::find();
        #    TypeOfCreditmaxCheck    typeOfCreditmaxCheck    = custParameters.CreditMaxCheck;
        #    boolean                 hasEstimatedChanged;
        #    AmountMST               estimatedOld;
        #    MCRSalesOrderTotals      mcrSalesOrderTotals;
        #
        #    hasEstimatedChanged = false;
        #    //Total estimate for the order would be calculated on order save, if credit limit check is enabled for the company.
        #    if (this.custTable_CustAccount().shouldEstimateBeCalculated())
        #    {
        #        qtySpec = (typeOfCreditmaxCheck == TypeOfCreditmaxCheck::BalanceDelivered ? SalesUpdate::PackingSlip :
        #                   typeOfCreditmaxCheck == TypeOfCreditmaxCheck::BalanceAll       ? SalesUpdate::All         : 0);
        #
        #        if (qtySpec && this.isCreditCheckEligible())
        #        {
        #            estimatedOld        = this.Estimate;
        #
        #            if (this.mcrIsCallCenter())
        #            {
        #                if (qtySpec == SalesUpdate::All)
        #                {
        #                    mcrSalesOrderTotals = new MCRSalesOrderTotals(this);
        #                    this.Estimate = Currency::amountCur2MST(mcrSalesOrderTotals.getRemainingOrder(), this.CurrencyCode);
        #                }
        #                else
        #                {
        #                    salesTotals         = SalesTotals::construct(this, qtySpec);
        #                    this.Estimate       = Currency::amountCur2MST(salesTotals.totalAmount(), this.CurrencyCode);
        #                }
        #            }
        #            else
        #            {
        #                salesTotals         = (_salesTotals == null) ? SalesTotals::construct(this, qtySpec) : _salesTotals;
        #                this.Estimate       = Currency::amountCur2MST(salesTotals.totalAmount(), this.CurrencyCode, this.fixedExchRate());
        #            }
        #
        #            hasEstimatedChanged = (this.Estimate != estimatedOld);
        #        }
        #    }
        #
        #    this.Touched = NoYes::No;
        #
        #    return hasEstimatedChanged;
        #}
      ENDSOURCE
      SOURCE #setInventSiteId
        #public void setInventSiteId(InventSiteId _inventSiteId)
        #{
        #    this.InventSiteId = _inventSiteId;
        #    this.modifiedInventSiteFromParent();
        #}
      ENDSOURCE
      SOURCE #setListCode
        #void setListCode()
        #{
        #    this.Listcode = EUSalesList::resolveListCode(this.deliveryAddress().CountryRegionId);
        #}
      ENDSOURCE
      SOURCE #setLocation
        #/// <summary>
        #/// Sets the delivery address information and related information.
        #/// </summary>
        #/// <param name="_location">
        #/// The record ID of the logistics location.
        #/// </param>
        #/// <param name="_skipDeliveryRoleCheck">
        #/// A flag indicating whether this is a new online Retail sale; optional;
        #/// </param>
        #/// <remarks>
        #/// If the <c>SalesType</c> enumeration value is <c>ReturnItem</c>, the address is set to the default
        #/// value of a receiving address.
        #/// </remarks>
        #void  setLocation(LogisticsLocationRecId _location, boolean _skipDeliveryRoleCheck = false)
        #{
        #    LogisticsLocationEntity location = LogisticsLocationEntity::constructFromLocationRecId(_location);
        #    Common transferFromTable;
        #
        #    this.DeliveryPostalAddress = location.getPostalAddress().RecId;
        #
        #    if (location)
        #    {
        #        this.setDeliveryName(_skipDeliveryRoleCheck);
        #
        #        this.Email                      = location.getEmail();
        #        this.url                        = location.getURL();
        #
        #        if (this.SalesType == SalesType::ReturnItem)
        #        {
        #            transferFromTable = this.getDeliveryEntityRecord();
        #            this.AddressRefRecId = transferFromTable.RecId;
        #            this.AddressRefTableId = transferFromTable.TableId;
        #        }
        #        else
        #        {
        #            this.AddressRefRecId            = location.parmLocationRecId();
        #            this.AddressRefTableId          = tableNum(LogisticsLocation);
        #        }
        #    }
        #    this.setListCode();
        #    this.setTaxGroup(TaxSales::custTaxGroup(this.DlvTerm, this.TaxGroup, _location));
        #}
      ENDSOURCE
      SOURCE #setNameUsingVATNum
        #private void setNameUsingVATNum(VATNum                              _vatNum,
        #                                LogisticsAddressCountryRegionId     _countryRegionId,
        #                                Name                                _name,
        #                                CustParameters                      _custParameters = CustParameters::find())
        #{
        #    TaxVATNumTable      taxVATNumTable;
        #    CountryRegionType   countryRegionType;
        #
        #    taxVATNumTable = TaxVATNumTable::find(_vatNum, _countryRegionId);
        #
        #    if (taxVATNumTable.Name)
        #    {
        #        this.SalesName      = taxVATNumTable.Name;
        #    }
        #    else
        #    {
        #        switch(_custParameters.MandatoryInvoiceVATNum)
        #        {
        #            case TaxVATNumCountryRegionType::None:
        #                this.SalesName = _name;
        #                break;
        #            case TaxVATNumCountryRegionType::DomesticEU:
        #                countryRegionType = IntrastatCountryRegionParameters::type(_countryRegionId);
        #                switch(countryRegionType)
        #                {
        #                    case CountryRegionType::Domestic:
        #                    case CountryRegionType::EU:
        #                        this.SalesName = '';
        #                        break;
        #                    default:
        #                        this.SalesName = _name;
        #                        break;
        #                }
        #                break;
        #            case TaxVATNumCountryRegionType::EU:
        #                countryRegionType = IntrastatCountryRegionParameters::type(_countryRegionId);
        #                switch(countryRegionType)
        #                {
        #                    case CountryRegionType::EU:
        #                        this.SalesName = '';
        #                        break;
        #                    default:
        #                        this.SalesName = _name;
        #                        break;
        #                }
        #                break;
        #        }
        #    }
        #}
      ENDSOURCE
      SOURCE #setPriceDiscChangePolicy
        #/// <summary>
        #/// Sets the price disc change policy.
        #/// </summary>
        #/// <param name="_policySource">
        #/// An outcome of the PriceDiscSystemSource enumeration specifying the source of the policy.
        #/// </param>
        #/// <param name="_fieldId">
        #/// The id of the field in question.
        #/// </param>
        #client server void setPriceDiscChangePolicy(PriceDiscSystemSource _policySource, RefFieldId _fieldId = 0)
        #{
        #    if (!this.isInterCompanyOrder())
        #    {
        #        this.PriceDiscResultFields::createPriceDiscChangePolicy(ModuleSalesPurch::Sales, _policySource, _fieldId);
        #    }
        #}
      ENDSOURCE
      SOURCE #setPriceDiscChangePolicyMultiLine
        #/// <summary>
        #/// Calls the <c>setPriceDiscChangePolicy</c> method with fixed price discount change parameters for
        #/// the multiline discount fields.
        #/// </summary>
        #public void setPriceDiscChangePolicyMultiLine()
        #{
        #    this.setPriceDiscChangePolicy(PriceDiscSystemSource::ManualEntry, fieldNum(SalesTable, MultiLineDisc));
        #}
      ENDSOURCE
      SOURCE #setPriceDiscSystemChangePolicy
        #/// <summary>
        #/// Determines the policy source for selected system sources.
        #/// </summary>
        #
        #void setPriceDiscSystemChangePolicy()
        #{
        #    if (this.ProjId)
        #    {
        #        this.setPriceDiscChangePolicy(PriceDiscSystemSource::Project);
        #    }
        #
        #    if (this.QuotationId)
        #    {
        #        this.setPriceDiscChangePolicy(PriceDiscSystemSource::SalesQuotation);
        #    }
        #}
      ENDSOURCE
      SOURCE #setReturnAddressFromInventLocationId
        #public boolean setReturnAddressFromInventLocationId(InventLocationId _inventLocationId)
        #{
        #    InventLocation                      inventLocation;
        #    LogisticsLocationRecId              inventLocationAddress;
        #
        #    boolean                             addressSet;
        #
        #    addressSet = false;
        #
        #    if (_inventLocationId)
        #    {
        #        inventLocation          = InventLocation::find(_inventLocationId);
        #        inventLocationAddress   = LogisticsLocationDefault::findSimpleDefault(inventLocation,
        #                                    LogisticsLocationRole::findBytype(LogisticsLocationRoleType::Delivery)).RecId;
        #
        #        if (inventLocationAddress)
        #        {
        #            this.setLocation(inventLocationAddress);
        #            addressSet = true;
        #        }
        #    }
        #
        #    if (!addressSet)
        #    {
        #        addressSet = this.setReturnAddressFromInventSiteId(this.InventSiteId);
        #    }
        #
        #    return addressSet;
        #}
      ENDSOURCE
      SOURCE #setReturnAddressFromInventSiteId
        #public boolean setReturnAddressFromInventSiteId(InventSiteId _inventSiteId)
        #{
        #    LogisticsLocationRecId          logisticsLocationRecId;
        #    boolean                         addressSet = false;
        #
        #    if (_inventSiteId)
        #    {
        #        logisticsLocationRecId = LogisticsLocationDefault::findSimpleDefault(InventSite::find(_inventSiteId), LogisticsLocationRole::findBytype(LogisticsLocationRoleType::Delivery)).RecId;
        #
        #        if (logisticsLocationRecId)
        #        {
        #            this.setLocation(logisticsLocationRecId);
        #            addressSet = true;
        #        }
        #    }
        #
        #    if (!addressSet)
        #    {
        #        this.initDefaultReturnAddress();
        #        addressSet = true;
        #    }
        #
        #    return addressSet;
        #}
      ENDSOURCE
      SOURCE #setShipCarrierFromLogisticsLocation
        #/// <summary>
        #/// Sets the ship carrier data both on the header and the line level, depending on the
        #/// <c>LogisticsLocation</c> data.
        #/// </summary>
        #/// <param name="_logisticsLocation">
        #/// A <c>LogisticsLocation</c> record of a ship carrier.
        #/// </param>
        #/// <param name="_addressRecId">
        #/// The <c>LogisticsPostalAddress</c> record ID of the ship carrier.
        #/// </param>
        #/// <param name="_shipCarrierAddress">
        #/// A <c>ShipCarrierAddress</c> record.
        #/// </param>
        #/// <remarks>
        #/// If the ship carrier address has delivery terms assigned, the delivery terms are transferred to the
        #/// sales header.
        #/// </remarks>
        #public void setShipCarrierFromLogisticsLocation(LogisticsLocation _logisticsLocation,  LogisticsPostalAddressRecId _addressRecId, ShipCarrierAddress _shipCarrierAddress = null)
        #{
        #    ShipCarrierAddress      shipCarrierAddress;
        #    CustTable               custTable = this.custTable_CustAccount();
        #
        #    if (_shipCarrierAddress)
        #    {
        #        shipCarrierAddress = _shipCarrierAddress;
        #    }
        #    else
        #    {
        #        shipCarrierAddress = ShipCarrierAddress::findByCustomerLocation(this.CustAccount, _logisticsLocation.RecId);
        #    }
        #
        #    this.SalesShipCarrierMap::setShipCarrierFromLogisticsLocation(
        #        _logisticsLocation,
        #        _addressRecId,
        #        shipCarrierAddress);
        #
        #    if (shipCarrierAddress.DlvTermId)
        #    {
        #        this.DlvTerm = shipCarrierAddress.DlvTermId;
        #    }
        #    else
        #    {
        #        this.DlvTerm = custTable.DlvTerm;
        #    }
        #
        #    this.ShipCarrierResidential     = shipCarrierAddress.ShipCarrierResidentialDest;
        #    this.ShipCarrierBlindShipment   = shipCarrierAddress.ShipCarrierBlindShipment;
        #    this.ShipCarrierFuelSurcharge   = custTable.ShipCarrierFuelSurcharge;
        #}
      ENDSOURCE
      SOURCE #setShipCarrierInformation
        #void setShipCarrierInformation(SalesTable           _salesTable,
        #                               CustPackingSlipJour  _custPackingSlipJour = null,
        #                               CustInvoiceJour      _custInvoiceJour = null)
        #{
        #    DlvMode     dlvMode;
        #    DlvModeId   dlvModeId;
        #
        #    if (_custPackingSlipJour)
        #    {
        #        dlvModeId   = _custPackingSlipJour.DlvMode;
        #    }
        #    else if (_custInvoiceJour)
        #    {
        #        dlvModeId   = _custInvoiceJour.DlvMode;
        #    }
        #    else
        #    {
        #        dlvModeId = _salesTable.DlvMode;
        #    }
        #
        #    dlvMode = DlvMode::find(dlvModeId);
        #
        #    this.ShipCarrierId              = dlvMode.ShipCarrierId;
        #    this.ShipCarrierAccountCode     = dlvMode.ShipCarrierAccountCode;
        #    this.ShipCarrierDlvType         = dlvMode.ShipCarrierDlvType;
        #
        #    if (_salesTable)
        #    {
        #        this.ShipCarrierAccount         = _salesTable.ShipCarrierAccount;
        #        this.ShipCarrierDeliveryContact = _salesTable.ShipCarrierDeliveryContact;
        #        this.ShipCarrierFuelSurcharge   = _salesTable.ShipCarrierFuelSurcharge;
        #        this.ShipCarrierBlindShipment   = _salesTable.ShipCarrierBlindShipment;
        #        this.ShipCarrierResidential     = _salesTable.ShipCarrierResidential;
        #    }
        #}
      ENDSOURCE
      SOURCE #setTaxGroup
        #void setTaxGroup(TaxGroup _taxGroup)
        #{
        #    SalesTableType salesTableType;
        #
        #    salesTableType = this.type();
        #    salesTableType.setTaxGroup(_taxGroup);
        #}
      ENDSOURCE
      SOURCE #settleExchRate
        #CustExchRate settleExchRate(boolean throwOnError = false)
        #{
        #    QueryRun        queryRun;
        #    CustTransOpen   custTransOpen;
        #    CustTrans       custTrans;
        #    CustExchRate    exchRate = 0;
        #    CustExchRate    custExchRate;
        #
        #    if (this.SettleVoucher == SettlementType::SelectedTransact && SalesParameters::find().UseSettleExchRate)
        #    {
        #        queryRun = SpecTrans::createQueryRunToRefTable(this.company(), this.TableId, this.RecId, tableNum(CustTransOpen));
        #
        #        queryRun.allowCrossCompany(true);
        #
        #        while (queryRun.next())
        #        {
        #            if (queryRun.changed(tableNum(CustTransOpen)))
        #            {
        #                custTransOpen = queryRun.get(tableNum(CustTransOpen)) as CustTransOpen;
        #                if (custTransOpen)
        #                {
        #                    custTrans = custTransOpen.custTrans();
        #                    custExchRate = round(custTrans.AmountMST * 100 / custTrans.AmountCur, 0.01);
        #                    if (!exchRate)
        #                    {
        #                        exchRate = custExchRate;
        #                    }
        #                    else
        #                    {
        #                        if (exchRate != custExchRate)
        #                        {
        #                            exchRate = 0;
        #                            if (throwOnError)
        #                            {
        #                                throw error("@SYS59594");
        #                            }
        #
        #                            checkFailed("@SYS59594");
        #                            break;
        #                        }
        #                    }
        #                }
        #            }
        #        }
        #    }
        #    return exchRate;
        #}
      ENDSOURCE
      SOURCE #shipCarrierLocation
        #/// <summary>
        #/// Gets the record ID of the record in the <c>LogisticsLocationRecId</c> table that is associated with
        #/// the selected ship carrier postal address.
        #/// </summary>
        #/// <returns>
        #/// The record ID of the record in the <c>LogisticsLocationRecId</c> table.
        #/// </returns>
        #public LogisticsLocationRecId shipCarrierLocation()
        #{
        #    return LogisticsPostalAddress::getLocation(this.ShipCarrierPostalAddress);
        #}
      ENDSOURCE
      SOURCE #shipCarrierThirdPartyName
        #Name shipCarrierThirdPartyName()
        #{
        #    return LogisticsLocationEntity::findLocation(this.custTable_CustAccount(), LogisticsLocationRoleType::ShipCarrierThirdPartyShipping).parmLocationDescription();
        #}
      ENDSOURCE
      SOURCE #showContactPerson
        #display ContactPersonName showContactPerson()
        #{
        #    return ContactPerson::find(this.ContactPersonId).personName();
        #}
      ENDSOURCE
      SOURCE #showDocHanIcon
        #// AOSRunMode::Called
        #display smmDocIconNum showDocHanIcon()
        #{
        #    #macrolib.resource
        #
        #    if ((select docuRef
        #           where docuRef.RefCompanyId == this.DataAreaId &&
        #                 docuRef.RefTableId   == this.TableId &&
        #                 docuRef.RefRecId     == this.RecId).RecId)
        #    {
        #        return #RES_NODE_DOC;
        #    }
        #
        #    return #RES_AM_NEW;
        #}
      ENDSOURCE
      SOURCE #smmAmountDeliveredMST
        #server display AmountMST smmAmountDeliveredMST()
        #{
        #    return this.amountMST(this.amountDelivered());
        #}
      ENDSOURCE
      SOURCE #smmAmountInvoicedMST
        #server display AmountMST smmAmountInvoicedMST()
        #{
        #    return this.amountMST(this.amountInvoiced());
        #}
      ENDSOURCE
      SOURCE #smmAmountOrderedNotInvoicedMST
        #server display AmountMST smmAmountOrderedNotInvoicedMST()
        #{
        #    return this.amountMST(this.amountOrderedNotInvoiced());
        #}
      ENDSOURCE
      SOURCE #taxModuleType
        #TaxModuleType taxModuleType()
        #{
        #    return TaxModuleType::Sales;
        #}
      ENDSOURCE
      SOURCE #timeZoneSite
        #display Timezone timeZoneSite()
        #{
        #    return InventSite::timeZoneSite(this.InventSiteId);
        #}
      ENDSOURCE
      SOURCE #tmsDisplayExpressBOL
        #/// <summary>
        #/// Displays the Customer's express bill of lading.
        #/// </summary>
        #/// <returns>
        #/// The customer's express bill of lading.
        #/// </returns>
        #// BP Deviation Documented
        #public display TMSExpressBillofLading tmsDisplayExpressBOL()
        #{
        #    return CustTable::find(this.CustAccount).ExpressBillOfLading;
        #}
      ENDSOURCE
      SOURCE #tmsDisplayRoute
        #/// <summary>
        #/// Displays the Route associated with the Sales order, if applicable.
        #/// </summary>
        #/// <returns>
        #/// The Route code if there is only one associated with the order, otherwise an empty string or "Multiple".
        #/// </returns>
        #/// <remarks>
        #/// Unfortunately we cannot cache this display method by either decorating this method with the
        #/// [SysClientCacheDataMethodAttribute(true)] attribute or adding this method to the cache on the
        #/// Sales Table Form. Reason behind is that it triggers many database calls for retrieving tmsDisplayRoute
        #/// data for all Sales orders that are in current query. Instead, custom cache is implemented in
        #/// the SaleTableForm class.
        #/// </remarks>
        #// BP Deviation Documented
        #public server display TMSRouteCode tmsDisplayRoute()
        #{
        #    SalesLine                   salesLine;
        #    TMSRouteSegmentLoadLine     segmentLine;
        #    TMSRouteCode                ret;
        #    int                         counter = 0;
        #
        #    while select RouteCode from segmentLine
        #        group by RouteCode
        #        exists join salesLine
        #            where salesLine.InventTransId   == segmentLine.InventTransId
        #               && salesLine.SalesId         == this.SalesId
        #    {
        #        ret = segmentLine.RouteCode;
        #        ++counter;
        #
        #        if (counter > 1)
        #        {
        #            break;
        #        }
        #    }
        #
        #    switch (counter)
        #    {
        #        case 0:
        #            ret = "";
        #            break;
        #        case 1:
        #            break;
        #        default:
        #            ret = "@SYS78137";
        #            break;
        #    }
        #
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #totalWeightAndVolume
        #/// <summary>
        #/// Calculates total weight and volume aggregated over all sales order lines.
        #/// </summary>
        #/// <returns>
        #/// Container with two elements: total wieght and total volume.
        #/// </returns>
        #public container totalWeightAndVolume()
        #{
        #    Volume      totalVolume;
        #    Weight      totalWeight;
        #    SalesLine   salesLine;
        #
        #    while select ItemId, QtyOrdered from salesLine
        #        where salesLine.SalesId == this.SalesId
        #    {
        #        totalWeight += salesLine.tmsWeight();
        #        totalVolume += salesLine.tmsVolume();
        #    }
        #
        #    return [totalWeight, totalVolume];
        #}
      ENDSOURCE
      SOURCE #tpAddress
        #Addressing tpAddress()
        #{
        #    return LogisticsLocationEntity::findPostalAddress(this.custTable_CustAccount(), LogisticsLocationRoleType::ShipCarrierThirdPartyShipping).Address;
        #}
      ENDSOURCE
      SOURCE #transferCustAccount
        #client server void  transferCustAccount(boolean _isReplacementOrder = false)
        #{
        #    boolean initFromCustTable = true;
        #
        #    #IsoCountryRegionCodes
        #
        #    if (this.CustAccount)
        #    {
        #        if (!_isReplacementOrder && SalesParameters::find().PromptTransfer &&
        #            Box::yesNo("@SYS418", DialogButton::Yes) != DialogButton::Yes)
        #        {
        #            initFromCustTable = false;
        #        }
        #
        #        this.transferCustAccount_Server(initFromCustTable);
        #
        #        // copy the raw RU fields using this.data().salesTable_RU() from the
        #        // extension to the buffer instance using this.salesTable_RU().data(<input>)
        #        // because the RPC causes a disconnect
        #        if (SysCountryRegionCode::isLegalEntityInCountryRegion([#IsoRU]))
        #        {
        #            this.salesTable_RU().data(this.data().salesTable_RU());
        #        }
        #
        #        if (BrazilParameters::isEnabled())
        #        {
        #            this.salesTable_BR().data(this.data().salesTable_BR());
        #        }
        #    }
        #}
      ENDSOURCE
      SOURCE #transferCustAccount_Server
        #server void  transferCustAccount_Server(boolean _initFromCustTable)
        #{
        #    MCRCustPaymTable mcrCustPaymTableCancel;
        #
        #    if (_initFromCustTable)
        #    {
        #        this.initFromCustTable();
        #        if (this.CustAccount != this.InvoiceAccount)
        #        {
        #            this.transferInvoiceAccount();
        #        }
        #    }
        #    else
        #    {
        #        this.initFromCustTableMandatoryFields();
        #    }
        #    this.copyThirdPartyAddressFromCust();
        #    SalesCalcAvailableDlvDates::initDateFieldsOrderEntryDeadline(this);
        #
        #    if (isConfigurationkeyEnabled(configurationKeyNum(MCRPayment)))
        #    {
        #        // If Invoice Account has changed back out any existing payments
        #        // that are not for the new invoice account.
        #        while select RecId,RefRecId,RefTableId,CustAccount from mcrCustPaymTableCancel
        #            where mcrCustPaymTableCancel.RefRecId == this.RecId &&
        #                    mcrCustPaymTableCancel.RefTableId == this.TableId  &&
        #                    mcrCustPaymTableCancel.CustAccount != this.InvoiceAccount
        #        {
        #            MCRCustPaymTable::cancelPaym(mcrCustPaymTableCancel.RecId);
        #        }
        #    }
        #}
      ENDSOURCE
      SOURCE #transferInvoiceAccount
        #void transferInvoiceAccount()
        #{
        #    MCRCustPaymTable mcrCustPaymTableCancel;
        #
        #    if (isConfigurationkeyEnabled(configurationKeyNum(MCRCallCenter)))
        #    {
        #
        #        // Invoice account has changed so back out any existing payments
        #        // that are not for the new invoice account.
        #        while select RefRecId,RecId,TableId,CustAccount from mcrCustPaymTableCancel
        #            where mcrCustPaymTableCancel.RefRecId == this.RecId &&
        #                  mcrCustPaymTableCancel.RefTableId == this.TableId  &&
        #                  mcrCustPaymTableCancel.CustAccount != this.InvoiceAccount
        #        {
        #            MCRCustPaymTable::cancelPaym(mcrCustPaymTableCancel.RecId);
        #        }
        #    }
        #    if (SalesParameters::find().PromptTransfer)
        #    {
        #        if (Box::yesNo("@SYS19435"+'\n\n'+this.InvoiceAccount+'\n\n'+CustTable::promptAddress(this.InvoiceAccount, LogisticsLocationRoleType::Delivery),DialogButton::Yes)==DialogButton::Yes)
        #        {
        #            this.initInvoiceAccount();
        #        }
        #    }
        #    else
        #    {
        #        this.initInvoiceAccount();
        #    }
        #
        #    if (this.transferTaxDefaultsFromInvoiceAcc())
        #    {
        #        this.initTaxDefaultsFromInvoiceAccount();
        #    }
        #}
      ENDSOURCE
      SOURCE #transferTaxDefaultsFromInvoiceAcc
        #private boolean transferTaxDefaultsFromInvoiceAcc()
        #{
        #    #ISOCountryRegionCodes
        #    boolean includeTaxDefaults;
        #
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoES]))
        #    {
        #        switch(CustParameters::find().UseFiscalInvoiceAccount)
        #        {
        #            case UseFiscalInvoiceAccount::Always:
        #                includeTaxDefaults = true;
        #                break;
        #            case UseFiscalInvoiceAccount::Ask:
        #                if (Box::yesNo("@SYS112098"+'\n\n'+ this.InvoiceAccount+'\n\n'+ CustTable::promptAddress(this.InvoiceAccount, LogisticsLocationRoleType::Delivery),DialogButton::Yes)==DialogButton::Yes)
        #                {
        #                    includeTaxDefaults = true;
        #                }
        #                break;
        #            case UseFiscalInvoiceAccount::Never:
        #                break;
        #        }
        #    }
        #    return includeTaxDefaults;
        #}
      ENDSOURCE
      SOURCE #transferToOnetimeCustomer
        #/// <summary>
        #/// Updates the related one time customer entity based on the sales order.
        #/// </summary>
        #server void transferToOnetimeCustomer()
        #{
        #    CustomerEntity customerEntity;
        #    if (this.OneTimeCustomer)
        #    {
        #        ttsbegin;
        #        customerEntity = DirParty::constructFromCommon(this.custTable_CustAccount(),
        #                                                       DateTimeUtil::getSystemDateTime(),
        #                                                       DirPartyType::None,
        #                                                       true,
        #                                                       false);
        #        customerEntity.initFromSalesTable(this);
        #        customerEntity.update();
        #        ttscommit;
        #    }
        #}
      ENDSOURCE
      SOURCE #type
        #SalesTableType type()
        #{
        #    return SalesTableType::construct(this);
        #}
      ENDSOURCE
      SOURCE #unlinkAgreement
        #server private void unlinkAgreement(boolean _unlinkLines      = false,
        #                                    boolean _recalculatePrice = false
        #                                    ,boolean _doUpdateSalesTable = true
        #                                    ,boolean _doUpdateSalesLine  = true
        #                                    )
        #{
        #    AgreementReleaseHeaderMatch agreementReleaseHeaderMatch;
        #    SalesLine                   salesLine;
        #    boolean                     restorePriceDiscChagnePolicy = true;
        #    SalesTable_RU               salesTableRU;
        #
        #    #ISOCountryRegionCodes
        #
        #
        #    if (this.MatchingAgreement)
        #    {
        #        ttsbegin;
        #
        #        if (_unlinkLines)
        #        {
        #            while select forupdate salesLine
        #                    where salesLine.SalesId == this.SalesId
        #            {
        #                if (salesLine.MatchingAgreementLine)
        #                {
        #                    if (_recalculatePrice)
        #                    {
        #                        SalesLine::modifySalesQty(salesLine,salesLine.inventDim());
        #                        restorePriceDiscChagnePolicy = false;
        #                    }
        #                    if (restorePriceDiscChagnePolicy)
        #                    {
        #                        // Set Price Discount Change Policy originated by PriceDiscSystemSource::Agreement.
        #                        salesLine.setPriceDiscChangePolicy(PriceDiscSystemSource::Agreement);
        #                    }
        #
        #                    salesLine.unLinkAgreementLine(
        #                                                  _doUpdateSalesLine
        #                                                  );
        #                }
        #            }
        #        }
        #
        #        delete_from agreementReleaseHeaderMatch
        #        where agreementReleaseHeaderMatch.SalesTableSalesId == this.SalesId
        #           && agreementReleaseHeaderMatch.SalesTableDataAreaId == this.DataAreaId;
        #
        #        this.MatchingAgreement = 0;
        #
        #        if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
        #        {
        #            salesTableRU = this.salesTable_RU();
        #            salesTableRU.AgreementHeaderExt_RU = 0;
        #            this.packSalesTable_RU(salesTableRU);
        #
        #            this.DefaultDimension = AgreementHeaderExt_RU::clearAgreementDimension(this.DefaultDimension);
        #        }
        #
        #        if (_doUpdateSalesTable)
        #        {
        #            this.doUpdate();
        #        }
        #        ttscommit;
        #    }
        #}
      ENDSOURCE
      SOURCE #unlinkAgreementPrompt
        #public boolean unlinkAgreementPrompt(
        #                                     boolean _doUpdateSalesTable = true
        #                                     )
        #{
        #    Dialog       dialog;
        #    DialogField  dialogField;
        #    boolean      linesExist;
        #
        #    if (this.MatchingAgreement)
        #    {
        #        linesExist = SalesLine::exist(this.SalesId);
        #        dialog = new Dialog();
        #        dialog.addText("@SYS305715");
        #        if (linesExist)
        #        {
        #            dialogField = dialog.addField(extendedTypeStr(NoYesId), "@SYS23228", "@SYS305716");
        #            dialogField.value(NoYes::Yes);
        #        }
        #        if (!dialog.run())
        #        {
        #            return false;
        #        }
        #
        #        if (linesExist)
        #        {
        #            this.unlinkAgreement(linesExist, dialogField.value()
        #                                 , _doUpdateSalesTable
        #                                 );
        #        }
        #        else
        #        {
        #            this.unlinkAgreement(linesExist, false
        #                                 , _doUpdateSalesTable
        #                                 );
        #        }
        #    }
        #
        #    return true;
        #}
      ENDSOURCE
      SOURCE #update
        #public void  update()
        #{
        #    SalesTableType salesTableType;
        #    boolean calcEstimateAfterUpdate;
        #
        #    ttsbegin;
        #
        #    salesTableType = this.type();
        #
        #    this.Touched = NoYes::No;
        #
        #    calcEstimateAfterUpdate = this.mustDoCreditLimitAfterUpdate();
        #
        #    salesTableType.update();
        #
        #    this.SysExtensionSerializerMap::postUpdate();
        #
        #    if (calcEstimateAfterUpdate)
        #    {
        #        if (this.setEstimate())
        #        {
        #            this.doUpdate();
        #        }
        #
        #        if (CustParameters::find().salesCheckCreditOnHeader())
        #        {
        #            this.checkAgainstCreditLimit();
        #        }
        #    }
        #
        #    // Update the CRM transaction log
        #    smmTransLog::initTrans(this, smmLogAction::update);
        #
        #    ttscommit;
        #}
      ENDSOURCE
      SOURCE #updateBackStatus
        #void  updateBackStatus()
        #{
        #    SalesTableType  salesTableType;
        #
        #    salesTableType = this.type();
        #    salesTableType.updateBackStatus();
        #}
      ENDSOURCE
      SOURCE #updateDeadline
        #void  updateDeadline(SalesDeadline  deadline)
        #{
        #    SalesTableType  salesTableType;
        #
        #    salesTableType = this.type();
        #    salesTableType.updateDeadline(deadline);
        #}
      ENDSOURCE
      SOURCE #updateDeadlineOnLine
        #void updateDeadlineOnLine()
        #{
        #    SalesLine   salesLine;
        #
        #    ttsbegin;
        #
        #    update_recordset salesLine
        #        setting ReturnDeadline = this.ReturnDeadline
        #        where   salesLine.SalesId == this.SalesId;
        #
        #    ttscommit;
        #}
      ENDSOURCE
      SOURCE #updateDocumentStatus
        #void  updateDocumentStatus(DocumentStatus  documentStatus)
        #{
        #    SalesTableType  salesTableType;
        #
        #    salesTableType = this.type();
        #    salesTableType.updateDocumentStatus(documentStatus);
        #
        #    if (documentStatus == DocumentStatus::Confirmation)
        #    {
        #        RetailEventNotificationAction::InsertRetailOENAction(
        #                        RetailEventNotificationType::OrderConfirmation,
        #                        this.RecId,
        #                        this);
        #    }
        #}
      ENDSOURCE
      SOURCE #updateFinalDisc
        #server void  updateFinalDisc()
        #{
        #    SalesLine salesLine;
        #    boolean   processDisc = true;
        #
        #    // Do not calculate final discounts if they've been overridden or the sales order is associated with a call center.
        #    // For call center order, total discount will be calculated in pricing engine when item is input on sales line, so we don't calculate total discount here for call center order
        #    if (isConfigurationkeyEnabled(configurationKeyNum(MCRCallCenter)))
        #    {
        #        if (this.mcrSalesTable().PriceOverride || this.mcrIsCallCenter())
        #        {
        #            processDisc = false;
        #        }
        #    }
        #
        #    if (processDisc)
        #    {
        #        if (this.icCheckUpdateHeaderDiscounts()
        #               && this.PriceDiscHeading::updateFinalDisc(salesLine))
        #        {
        #            // This will trigger the creditlimit calculation when salesTable.validateWrite is called
        #            this.Touched = NoYes::Yes;
        #        }
        #    }
        #}
      ENDSOURCE
      SOURCE #updateLedgerCov
        #public void  updateLedgerCov()
        #{
        #    SalesTableType salesTableType;
        #
        #    salesTableType = this.type();
        #    salesTableType.updateLedgerCov();
        #}
      ENDSOURCE
      SOURCE #updateLineFieldsBasedOnHeaderChanges_BR
        #/// <summary>
        #/// It is responsible for updating the SalesLine when fiscal information
        #/// on header is changed
        #/// </summary>
        #public void updateLineFieldsBasedOnHeaderChanges_BR()
        #{
        #    SalesLine           salesLine;
        #    SalesLine_BR        salesLine_BR;
        #    CFOPValidation_BR   cfopValidation;
        #
        #    ttsbegin;
        #
        #    while select forupdate salesLine
        #        where salesLine.SalesId == this.SalesId
        #    {
        #
        #        cfopValidation = CFOPValidation_BR::construct(this);
        #
        #        salesLine_BR = salesLine.salesLine_BR();
        #        salesLine_BR.cfopTable_BR = cfopValidation.getDefaultCFOP();
        #        salesLine.packSalesLine_BR(salesLine_BR);
        #
        #        if (salesLine_BR.cfopTable_BR != salesLine_BR.orig().cfopTable_BR)
        #        {
        #            salesLine.setTaxGroupAndTaxItemGroupFields_BR();
        #
        #            salesLine_BR = salesLine.salesLine_BR();
        #            salesLine_BR.DeliveryCFOPTable_BR = CFOPTable_BR::find(salesLine_BR.cfopTable_BR).DeliveryCFOPTable_BR;
        #            salesLine.packSalesLine_BR(salesLine_BR);
        #
        #            salesLine.update();
        #
        #            salesLine.type().updateFiscalDocumentText_BR(FiscalDocumentTextType_BR::CFOP);
        #        }
        #    }
        #
        #    ttscommit;
        #}
      ENDSOURCE
      SOURCE #updateLineReasonCode
        #/// <summary>
        #/// Updates the reason code for the sales lines of a sales order.
        #/// </summary>
        #public server void updateLineReasonCode()
        #{
        #    SalesLine       tmpSalesLine;
        #    ReasonTableRef  reasonTableRefLine;
        #    ReasonCode      reasonCode;
        #
        #    reasonCode = ReasonTableRef::find(this.CreditNoteReasonCode).Reason;
        #
        #    ttsbegin;
        #
        #    while select forupdate CreditNoteReasonCode from tmpSalesLine
        #        where tmpSalesLine.SalesId == this.SalesId &&
        #            ((tmpSalesLine.RefReturnInvoiceTrans_W == 0 && tmpSalesLine.CreditNoteInternalRef_PL != 0) ||
        #            (tmpSalesLine.RefReturnInvoiceTrans_W != 0 && tmpSalesLine.CreditNoteInternalRef_PL == 0))
        #    {
        #        if (tmpSalesLine.CreditNoteReasonCode)
        #        {
        #            reasonTableRefLine = ReasonTableRef::find(tmpSalesLine.CreditNoteReasonCode, true);
        #            reasonTableRefLine.Reason = reasonCode;
        #            reasonTableRefLine.doUpdate();
        #        }
        #        else
        #        {
        #            if (reasonCode != "")
        #            {
        #                reasonTableRefLine.Reason = reasonCode;
        #                reasonTableRefLine.insert();
        #
        #                tmpSalesLine.CreditNoteReasonCode = reasonTableRefLine.RecId;
        #                tmpSalesLine.doUpdate();
        #            }
        #        }
        #    }
        #
        #    ttscommit;
        #}
      ENDSOURCE
      SOURCE #updateLineReasonComment
        #/// <summary>
        #/// Updates the reason code comments for the sales lines of a sales order.
        #/// </summary>
        #public server void updateLineReasonComment()
        #{
        #    SalesLine       tmpSalesLine;
        #    ReasonComment   reasonComment;
        #
        #    reasonComment = ReasonTableRef::find(this.CreditNoteReasonCode).ReasonComment;
        #
        #    ttsbegin;
        #
        #    while select forupdate CreditNoteReasonCode from tmpSalesLine
        #        where tmpSalesLine.SalesId == this.SalesId &&
        #            ((tmpSalesLine.RefReturnInvoiceTrans_W == 0 && tmpSalesLine.CreditNoteInternalRef_PL != 0) ||
        #            (tmpSalesLine.RefReturnInvoiceTrans_W != 0 && tmpSalesLine.CreditNoteInternalRef_PL == 0))
        #    {
        #        tmpSalesLine.editReasonComment(true, reasonComment);
        #        tmpSalesLine.doUpdate();
        #    }
        #
        #    ttscommit;
        #}
      ENDSOURCE
      SOURCE #updateMultiLineDisc
        #server boolean  updateMultiLineDisc()
        #{
        #    SalesLine salesLine;
        #    boolean   ret;
        #
        #    if (this.PriceDiscHeading::updateMultiLineDisc(salesLine))
        #    {
        #        ret = true;
        #
        #        //This will trigger the creditlimit calculation when salesTable.validateWrite is called
        #        this.Touched = NoYes::Yes;
        #    }
        #
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #updateSalesLineDelete
        #/// <summary>
        #/// Makes deletion-related updates to records in the <c>SalesTable</c> table.
        #/// </summary>
        #public void updateSalesLineDelete()
        #{
        #    SalesTableType  salesTableType;
        #
        #    salesTableType = this.type();
        #    salesTableType.updateSalesLineDelete();
        #}
      ENDSOURCE
      SOURCE #updateSalesType
        #void  updateSalesType()
        #{
        #    SalesTableType  salesTableType;
        #
        #    salesTableType = this.type();
        #    salesTableType.updateSalesType();
        #}
      ENDSOURCE
      SOURCE #updateServiceCode_BR
        #/// <summary>
        #/// Updates lines service code values
        #/// </summary>
        #/// <param name="_servicecodeOnDlvAddress">
        #/// Defines the which method will be called to search <c>TaxServiceCode_BR</c>
        #/// </param>
        #server void updateServiceCode_BR(boolean _servicecodeOnDlvAddress)
        #{
        #    SalesLine                 salesLine;
        #
        #    ttsbegin;
        #
        #    while select forupdate salesLine
        #          where salesLine.SalesId   == this.SalesId
        #    {
        #        salesLine.setServiceCodeId_BR(_servicecodeOnDlvAddress);
        #        salesLine.doUpdate();
        #    }
        #
        #    ttscommit;
        #}
      ENDSOURCE
      SOURCE #validateDelete
        #boolean validateDelete(boolean _mcrCancel = false)
        #{
        #    boolean            ok = true;
        #    SalesTableType     salesTableType;
        #
        #    ok = super();
        #
        #    if (ok)
        #    {
        #        salesTableType = this.type();
        #        ok = salesTableType.validateDelete(_mcrCancel && this.mcrIsCallCenter());
        #    }
        #
        #    return ok;
        #}
      ENDSOURCE
      SOURCE #validateField
        #boolean validateField(FieldId  _fieldId)
        #{
        #    boolean     ok = true;
        #    CustTable   custTable = CustTable::find(this.InvoiceAccount);
        #
        #    if (this.mcrIsCallCenter())
        #    {
        #        // A user may not turn on a price override via the checkbox,
        #        // they may only turn off the price override via the checkbox.
        #        if (_fieldId == fieldNum(MCRSalesTable, PriceOverride))
        #        {
        #            ok = ! this.mcrSalesTable().PriceOverride;
        #        }
        #
        #        // Warn that they are invoicing a merged customer
        #        if (_fieldId == fieldNum(SalesTable, InvoiceAccount))
        #        {
        #            if (custTable.mcrMergedParent)
        #            {
        #                warning(strFmt("@MCR12337",this.InvoiceAccount,custTable.mcrMergedParent));
        #                ok = false;
        #            }
        #        }
        #
        #        if (!this.LogisticsPostalAddressMap::validatePostalCode(_fieldId))
        #        {
        #            return false;
        #        }
        #    }
        #    ok = super(_fieldId) && ok;
        #
        #    if (ok)
        #    {
        #        ok = this.validateFieldServer(_fieldId);
        #    }
        #
        #    return ok;
        #}
      ENDSOURCE
      SOURCE #validateFieldServer
        #/// <summary>
        #/// Validates a changed field on the server side.
        #/// </summary>
        #/// <param name="_fieldId">
        #/// The field ID of the changed field.
        #/// </param>
        #/// <returns>
        #/// true if the validation succeeded; otherwise, false.
        #/// </returns>
        #public server boolean validateFieldServer(FieldId  _fieldId)
        #{
        #    boolean            ok;
        #    SalesTableType     salesTableType;
        #
        #    salesTableType = this.type();
        #    ok = salesTableType.validateField(_fieldId);
        #
        #    return ok;
        #}
      ENDSOURCE
      SOURCE #validateWrite
        #public boolean  validateWrite()
        #{
        #    boolean            ok = true;
        #
        #    ok = super();
        #    ok = ok && this.validateWriteServer();
        #
        #    return ok;
        #}
        #
      ENDSOURCE
      SOURCE #validateWriteServer
        #server public boolean  validateWriteServer()
        #{
        #    boolean            ok = true;
        #    SalesTableType     salesTableType;
        #    MCROrderParameters mcrOrderParameters;
        #    smmCampaignTable   campaignTable;
        #    #ISOCountryRegionCodes
        #
        #    if (ok && !this.SalesId)
        #    {
        #        ok = checkFailed(strFmt("@SYS26332", fieldId2pname(tableNum(SalesTable), fieldNum(SalesTable, SalesId))));
        #    }
        #    salesTableType = this.type();
        #
        #    if (ok && this.Touched)
        #    {
        #        ok = SalesTableType::checkAgainstCreditLimit(this);
        #    }
        #
        #    if (ok)
        #    {
        #        setPrefix(strFmt("@SYS25975", this.SalesId));
        #        ok = salesTableType.validateWrite();
        #    }
        #
        #    if (ok && this.InclTax && SysCountryRegionCode::isLegalEntityInCountryRegion([#isoLT, #isoHU]))
        #    {
        #        ok = this.SalesPurchTable::validateExcludeTaxFromInvoice();
        #    }
        #    if (isConfigurationkeyEnabled(configurationKeyNum(MCRCallCenter)))
        #    {
        #        mcrOrderParameters = MCROrderParameters::find();
        #        // Check for sourceId if parameters set to mandatory.
        #        if (mcrOrderParameters.mcrSourceCodeRequired
        #            && this.SalesType != SalesType::ReturnItem
        #            && this.RecId
        #            && this.mcrSalesTable().SourceId == "")
        #        {
        #            ok = checkFailed("@MCR12004");
        #        }
        #
        #        // Don't allow user to create a sales order for a parent campaign.
        #        if (this.SmmCampaignId)
        #        {
        #            select firstonly RecId from campaignTable
        #                where campaignTable.CampaignParentId == this.SmmCampaignId;
        #            if (campaignTable.RecId)
        #            {
        #                ok = checkFailed("@MCR26162");
        #            }
        #        }
        #    }
        #
        #    return ok;
        #}
      ENDSOURCE
      SOURCE #voidCreditCardPreauthorize
        #/// <summary>
        #/// Voids the credit card pre-authorization for a sales order.
        #/// </summary>
        #void voidCreditCardPreauthorize()
        #{
        #    CreditCardAuthTrans creditCardAuthTrans;
        #
        #    if (this.CreditCardCustRefId && this.isCreditCardPaymentType())
        #    {
        #        creditCardAuthTrans = CreditCardAuthTrans::findValidPreApproval(this.SalesId);
        #        if (creditCardAuthTrans != null)
        #        {
        #            CreditCardProcess::doVoidAuth(creditCardAuthTrans);
        #        }
        #    }
        #}
      ENDSOURCE
      SOURCE #whsCheckSalesLineDeliveryPostalAddress
        #/// <summary>
        #///     Validates the sales lines postal addresses for current sales order.
        #/// </summary>
        #/// <returns>
        #///     false if the <c>SalesLine</c> table <c>DeliveryPostalAddress</c> field is 0; otherwise, true.
        #/// </returns>
        #public boolean whsCheckSalesLineDeliveryPostalAddress()
        #{
        #    SalesLine   salesLine;
        #    boolean     ok = true;
        #
        #    select firstonly RecId from salesLine
        #        where salesLine.SalesId                == this.SalesId
        #            && salesLine.DeliveryPostalAddress == 0;
        #
        #    ok = salesLine.RecId == 0;
        #
        #    return ok;
        #}
        #
      ENDSOURCE
      SOURCE #changeReturnStatus
        #public static Counter changeReturnStatus(FormDataSource _datasource, ReturnUpdateAction _updateAction)
        #{
        #    SalesTable          returnTable;
        #    SalesLine           returnLine;
        #    SalesTable          returnTableUpdate;
        #    Counter             numberOfRecords;
        #    SalesTable          salesTable;
        #    PurchTable          purchTable;
        #    PurchLine           purchLine;
        #
        #    ttsbegin;
        #
        #    for (returnTable = (_datasource.getFirst(true) ? _datasource.getFirst(true) : _datasource.cursor()) as SalesTable;
        #        returnTable;
        #        returnTable = _datasource.getNext() as SalesTable)
        #    {
        #        if (returnTable.ReturnStatus == ReturnStatusHeader::Created && !returnTable.existRegisteredReceivedInvoicedLines() && !returnTable.type().interCompanyIsDerivedOrder())
        #        {
        #            if (_updateAction == ReturnUpdateAction::Cancel)
        #            {
        #                while select forupdate returnLine
        #                      where returnLine.SalesId == returnTable.SalesId
        #                {
        #                    if (returnLine.interCompanySalesLineExist())
        #                    {
        #                        purchLine            = PurchLine::findInventTransId(returnLine.InventRefTransId,true);
        #                        purchTable           = PurchTable::find(purchLine.PurchId);
        #
        #                        purchLine.SkipUpdate = InterCompanySkipUpdate::Internal;
        #                        purchLine.delete(false);
        #
        #                        if (!purchTable.existPurchLine())
        #                        {
        #                            if (purchTable.InterCompanyCompanyId
        #                            &&  purchTable.InterCompanySalesId)
        #                            {
        #                                changecompany(purchTable.InterCompanyCompanyId)
        #                                {
        #                                    salesTable = null;
        #                                    salesTable = SalesTable::find(purchTable.InterCompanySalesId,true);
        #                                    if (salesTable)
        #                                        salesTable.delete();
        #                                }
        #                            }
        #                        }
        #                    }
        #
        #                    returnLine.SalesQty     = 0;
        #                    returnLine.CostPrice    = 0;
        #                    returnLine.ExpectedRetQty  = 0;
        #                    returnLine.salesQtyModified();
        #                    returnLine.DeliveryType = TradeLineDlvType::None;
        #                    returnLine.SkipUpdate   = InterCompanySkipUpdate::Internal;
        #                    returnLine.ReturnStatus = ReturnStatusLine::Canceled;   // This assignment is required to make sure that InventPendingQuantity gets cleaned up
        #                    returnLine.SalesStatus  = SalesStatus::Canceled;        // This assignment is required to make sure that InventPendingQuantity gets cleaned up
        #                    returnLine.ReturnClosedDate = systemDateGet();
        #                    returnLine.InventTransIdReturn = '';
        #                    returnLine.update();
        #                }
        #                if (isConfigurationkeyEnabled(configurationKeyNum(MCRCallCenter)))
        #                {
        #                    returnLine.skipDataMethods(true);
        #                    update_recordset returnLine
        #                    setting          ReturnStatus         = ReturnStatusLine::Canceled,
        #                                     CostPrice            = 0,
        #                                     InventTransIdReturn  = '',
        #                                     SalesStatus          = SalesStatus::Canceled,
        #                                     ReturnClosedDate     = systemDateGet()
        #                    where returnLine.SalesId == returnTable.SalesId;
        #                }
        #
        #                SpecTransManager::construct(returnTable).deleteAll();
        #
        #                returnTableUpdate = SalesTable::find(returnTable.SalesId, true);
        #                returnTableUpdate.ReturnStatus               = ReturnStatusHeader::Canceled;
        #                returnTableUpdate.SalesStatus                = SalesStatus::Canceled;
        #                returnTableUpdate.InterCompanyDirectDelivery = false;
        #                returnTableUpdate.unlinkAgreement(true, false, false, true);
        #                returnTableUpdate.update();
        #            }
        #
        #            numberOfRecords++;
        #        }
        #    }
        #
        #    ttscommit;
        #
        #    return numberOfRecords;
        #}
      ENDSOURCE
      SOURCE #checkCustomsExportOrder_IN
        #/// <summary>
        #/// Checks whether in <c>SalesTable</c> table exist record wiht CustomsExportOrder_IN equal yes.
        #/// </summary>
        #/// <param name="_salesId">
        #/// The sales id is used to find record.
        #/// </param>
        #/// <returns>
        #/// Returns true, if exist record; otherwise, false.
        #/// </returns>
        #public static boolean checkCustomsExportOrder_IN(SalesId  _salesId)
        #{
        #    ;
        #
        #    return _salesId
        #        && (select firstonly RecId from salesTable
        #            where salesTable.SalesId                == _salesId
        #               && (salesTable.DocumentStatus        == DocumentStatus::Invoice
        #               || salesTable.DocumentStatus         == DocumentStatus::ShippingBill_IN)
        #               && salesTable.CustomsExportOrder_IN  == NoYes::Yes).RecId != 0;
        #}
      ENDSOURCE
      SOURCE #checkExist
        #static boolean checkExist(SalesId  salesId)
        #{
        #    if (salesId && !SalesTable::exist(salesId))
        #    {
        #        return checkFailed(strFmt(SalesTable::txtNotExist(),salesId));
        #    }
        #
        #    return true;
        #}
      ENDSOURCE
      SOURCE #createSalesTable_Replacement
        #/// <summary>
        #/// Creates a sales order replacement.
        #/// </summary>
        #/// <param name="_originalSalesTable">
        #/// The sales table with the original sales order.
        #/// </param>
        #/// <returns>
        #/// The replacement sales order.
        #/// </returns>
        #static server SalesTable createSalesTable_Replacement(SalesTable _originalSalesTable)
        #{
        #    SalesTable      salesTable;
        #
        #    ttsbegin;
        #    salesTable.SalesType            = SalesType::Sales;
        #    salesTable.initValue();
        #    salesTable.CustAccount          = _originalSalesTable.CustAccount;
        #    salesTable.initFromCustTable();
        #    salesTable.CurrencyCode         = _originalSalesTable.CurrencyCode;
        #    salesTable.ReturnItemNum        = _originalSalesTable.ReturnItemNum;
        #    salesTable.SalesId              = NumberSeq::newGetNum(SalesParameters::numRefSalesId()).num();
        #
        #    if (_originalSalesTable.MatchingAgreement)
        #    {
        #        salesTable.MatchingAgreement = _originalSalesTable.MatchingAgreement;
        #        AgreementHeader::find(_originalSalesTable.MatchingAgreement).createAgreementReleaseHeaderMatch(salesTable);
        #    }
        #
        #    salesTable.insert();
        #
        #    ttscommit;
        #
        #    return salesTable;
        #}
      ENDSOURCE
      SOURCE #custOpenOrders
        #static SalesTable  custOpenOrders(CustAccount  custAccount, boolean  _forUpdate = false)
        #{
        #    SalesTable salesTable;
        #
        #    salesTable.selectForUpdate(_forUpdate);
        #
        #    select salesTable
        #           index hint CustIdx
        #           where salesTable.CustAccount  == custAccount                &&
        #                 (salesTable.SalesStatus == SalesStatus::None      ||
        #                  salesTable.SalesStatus == SalesStatus::Backorder ||
        #                  salesTable.SalesStatus == SalesStatus::Delivered);
        #
        #    return salesTable;
        #}
      ENDSOURCE
      SOURCE #deleteAllLines
        #public static void deleteAllLines(SalesId _salesId)
        #{
        #    SalesLine   salesLine;
        #
        #    ttsbegin;
        #
        #    delete_from salesLine where salesLine.SalesId == _salesId;
        #
        #    ttscommit;
        #}
      ENDSOURCE
      SOURCE #exist
        #static boolean exist(SalesId  salesId)
        #{
        #    if (!salesId)
        #    {
        #        return false;
        #    }
        #
        #    return (select firstonly RecId from salesTable
        #                index hint SalesIdx
        #                where salesTable.SalesId == salesId).RecId != 0;
        #}
      ENDSOURCE
      SOURCE #existCustOpenOrder
        #static boolean existCustOpenOrder(CustAccount custAccount)
        #{
        #    SalesTable salesTable;
        #
        #    return (select firstonly RecId from salesTable
        #                index hint CustIdx
        #                where salesTable.CustAccount  == custAccount                &&
        #                      (salesTable.SalesStatus == SalesStatus::None      ||
        #                       salesTable.SalesStatus == SalesStatus::Backorder ||
        #                       salesTable.SalesStatus == SalesStatus::Delivered)).RecId != 0;
        #
        #}
      ENDSOURCE
      SOURCE #existDlvModeNotInvoiced
        #/// <summary>
        #/// Determines whether the delivery mode is used on a non-invoiced sales order.
        #/// </summary>
        #/// <param name="_dlvModeId">
        #/// The <c>DlvModeId</c> value that specifies the delivery mode record.
        #/// </param>
        #/// <returns>
        #/// true if the deliver mode is used on a non-invoiced sales order; otherwise, false.
        #/// </returns>
        #/// <remarks>
        #/// The check is made against the sales order header and all of the non-invoiced lines.
        #/// </remarks>
        #public static server boolean existDlvModeNotInvoiced(DlvModeId _dlvModeId)
        #{
        #    boolean         isReferenced;
        #    SalesTable      salesTable;
        #    SalesLine       salesLine;
        #
        #    if (_dlvModeId == '')
        #    {
        #        return false;
        #    }
        #
        #    select firstonly
        #        RecId from salesTable
        #    where
        #        ((salesTable.SalesStatus != SalesStatus::Invoiced) && (salesTable.SalesStatus != SalesStatus::Canceled)) &&
        #        salesTable.DlvMode == _dlvModeId;
        #
        #    isReferenced = (salesTable.RecId != 0);
        #    if (!isReferenced)
        #    {
        #        select firstonly
        #            RecId from salesLine
        #        where
        #            ((salesLine.SalesStatus != SalesStatus::Invoiced) && (salesLine.SalesStatus != SalesStatus::Canceled)) &&
        #            salesLine.DlvMode == _dlvModeId;
        #
        #        isReferenced = (salesLine.RecId != 0);
        #    }
        #
        #    return isReferenced;
        #}
      ENDSOURCE
      SOURCE #existsRegQrRecInvLines
        #public static boolean existsRegQrRecInvLines(SalesId _salesId)
        #{
        #    return (select firstonly salesLine where salesLine.SalesId == _salesId &&
        #                                salesLine.ReturnStatus > ReturnStatusLine::Awaiting &&
        #                                salesLine.ReturnStatus < ReturnStatusLine::Canceled).RecId ? true : false;
        #}
      ENDSOURCE
      SOURCE #find
        #static SalesTable find(SalesId          salesId,
        #                       boolean          _forUpdate = false,
        #                       ConcurrencyModel _concurrencyModel = ConcurrencyModel::Auto)
        #{
        #    SalesTable  salesTable;
        #
        #    if (salesId)
        #    {
        #        if (_forUpdate)
        #        {
        #            salesTable.selectForUpdate (_forUpdate);
        #            if (_concurrencyModel != ConcurrencyModel::Auto)
        #            {
        #                salesTable.concurrencyModel(_concurrencyModel);
        #            }
        #        }
        #        salesTable.selectLocked    (_forUpdate);
        #
        #        select firstonly salesTable
        #            where salesTable.SalesId == salesId;
        #    }
        #
        #    return salesTable;
        #}
      ENDSOURCE
      SOURCE #findByBankLG
        #/// <summary>
        #/// Finds a record that is linked to a specified record in the <c>BankLGGuarantee</c> table.
        #/// </summary>
        #/// <param name="_bankLGRefRecId">
        #/// The record ID of the related record in the <c>BankLGGuarantee</c> table.
        #/// </param>
        #/// <param name="_forUpdate">
        #/// A Boolean value that indicates whether to read the record for update; optional.
        #/// </param>
        #/// <returns>
        #/// A record in the <c>SalesTable</c> table; otherwise, an empty record.
        #/// </returns>
        #public static SalesTable findByBankLG(
        #    BankLGRefRecId   _bankLGRefRecId,
        #    boolean          _forUpdate = false)
        #{
        #    SalesTable                          salesTable;
        #    BankLGGuaranteeCustomerSalesOrder   bankLGGuaranteeCustomerSalesOrder;
        #
        #    salesTable.selectForUpdate(_forUpdate);
        #
        #    if (_bankLGRefRecId)
        #    {
        #        select firstonly salesTable
        #            exists join bankLGGuaranteeCustomerSalesOrder
        #            where bankLGGuaranteeCustomerSalesOrder.CustomerSalesOrder  == salesTable.SalesId
        #                && bankLGGuaranteeCustomerSalesOrder.Guarantee          == _bankLGRefRecId;
        #    }
        #
        #    return salesTable;
        #}
      ENDSOURCE
      SOURCE #findOrCreateSalesTable_ItemReq
        #static server SalesTable findOrCreateSalesTable_ItemReq(CustAccount _custAccount, CustCurrencyCode _currencyCode, ProjId _projId)
        #{
        #    SalesTable      salesTable;
        #    ProjTable       projTable;
        #    SalesTableType  salesTableType;
        #
        #    projTable = ProjTable::find(_projId);
        #
        #    if (_projId)
        #    {
        #        ttsbegin;
        #
        #        select firstonly forupdate salesTable
        #            where salesTable.ProjId         == ''                   &&
        #                  salesTable.CustAccount    == _custAccount         &&
        #                  salesTable.CurrencyCode   == _currencyCode        &&
        #                  salesTable.SalesType      == SalesType::ItemReq;
        #
        #        if (salesTable.RecId && !salesTable.numberOfLines())
        #        {
        #            salesTable.ProjId           = _projId;
        #
        #            salesTableType              = SalesTableType::construct(salesTable);
        #            salesTableType.initValue();
        #
        #            salesTable.CurrencyCode     = _currencyCode;
        #            salesTable.FixedExchRate    = ProjInvoiceCurrency::find(projTable.projInvoice().ProjInvoiceProjId,salesTable.CurrencyCode).ExchRate;
        #            salesTable.update();
        #        }
        #
        #        ttscommit;
        #    }
        #
        #    select firstonly salesTable
        #        where salesTable.ProjId         == _projId              &&
        #              salesTable.CustAccount    == _custAccount         &&
        #              salesTable.CurrencyCode   == _currencyCode        &&
        #              salesTable.SalesType      == SalesType::ItemReq;
        #
        #    if (!salesTable.RecId)
        #    {
        #        salesTable = projTable.createSalesTable_ItemReq(_currencyCode);
        #    }
        #
        #    return salesTable;
        #}
      ENDSOURCE
      SOURCE #findRecId
        #static SalesTable findRecId(RecId       recId,
        #                            boolean     _forUpdate = false )
        #{
        #    SalesTable salesTable;
        #
        #    salesTable.selectForUpdate(_forUpdate);
        #
        #    select salesTable
        #        where salesTable.RecId == recId;
        #
        #    return salesTable;
        #}
      ENDSOURCE
      SOURCE #findReturnItemNum
        #static SalesTable findReturnItemNum(SalesReturnItemNum _returnItemNum, boolean _forupdate = false, ConcurrencyModel _concurrencyModel = ConcurrencyModel::Auto)
        #{
        #    SalesTable  salesTable;
        #
        #    if (_returnItemNum)
        #    {
        #        if (_forupdate)
        #        {
        #            salesTable.selectForUpdate(_forupdate);
        #            if (_concurrencyModel != ConcurrencyModel::Auto)
        #            {
        #                salesTable.concurrencyModel(_concurrencyModel);
        #            }
        #        }
        #
        #        salesTable.selectLocked(_forupdate);
        #
        #
        #        if (salesTable.mcrIsCallCenter())
        #        {
        #            select firstonly salesTable  where salesTable.ReturnItemNum == _returnItemNum &&
        #                                salesTable.SalesType == SalesType::ReturnItem;
        #        }
        #        else
        #        {
        #            select firstonly salesTable  where salesTable.ReturnItemNum == _returnItemNum &&
        #                                salesTable.ReturnStatus  != ReturnStatusHeader::None;
        #        }
        #    }
        #
        #    return salesTable;
        #}
      ENDSOURCE
      SOURCE #findSalesIdLocationSalesType
        #/// <summary>
        #/// Finds a <c>SalesTable</c> record, depending on the specified sales ID, location, and sales type.
        #/// </summary>
        #/// <param name="salesId">
        #/// A sales ID.
        #/// </param>
        #/// <param name="location">
        #/// A location.
        #/// </param>
        #/// <param name="salesType">
        #/// A sales type.
        #/// </param>
        #/// <param name="_forUpdate">
        #/// A Boolean value that indicates whether to read the record for update; optional.
        #/// </param>
        #/// <returns>
        #/// A <c>SalesTable</c> record if found; otherwise, an empty record.
        #/// </returns>
        #static SalesTable findSalesIdLocationSalesType(SalesId   salesId,RetailLocationEx2  location, SalesType salesType,
        #                       boolean  _forUpdate = false)
        #{
        #    SalesTable  salesTable;
        #    ;
        #
        #    if (salesId)
        #    {
        #        salesTable.selectForUpdate (_forUpdate);
        #        salesTable.selectLocked    (_forUpdate);
        #
        #        select firstonly salesTable
        #            index hint SalesIdx
        #            where salesTable.SalesId            == salesId
        #                && salesTable.SalesType         == salesType
        #                && salesTable.InventLocationId  == location;
        #    }
        #
        #    return salesTable;
        #}
      ENDSOURCE
      SOURCE #findSalesIdSalesType
        #/// <summary>
        #/// Finds a <c>SalesTable</c> record, depending on the specified sales ID and sales type.
        #/// </summary>
        #/// <param name="salesId">
        #/// A sales ID.
        #/// </param>
        #/// <param name="salesType">
        #/// A sales type.
        #/// </param>
        #/// <param name="_forUpdate">
        #/// A Boolean value that indicates whether to read the record for update; optional.
        #/// </param>
        #/// <returns>
        #/// A <c>SalesTable</c> record if found; otherwise, an empty record.
        #/// </returns>
        #static SalesTable findSalesIdSalesType(SalesId   salesId,
        #                                          SalesType salesType,
        #                                          boolean   _forUpdate = false)
        #{
        #    SalesTable  salesTable;
        #    ;
        #
        #    if (salesId)
        #    {
        #        salesTable.selectForUpdate(_forUpdate);
        #        salesTable.selectLocked(_forUpdate);
        #
        #        select firstonly salesTable
        #            index hint SalesIdx
        #            where salesTable.SalesId   == salesId  &&
        #                  salesTable.SalesType == salesType;
        #    }
        #
        #    return salesTable;
        #}
      ENDSOURCE
      SOURCE #getExtFieldId_BR
        #/// <summary>
        #/// Retrieves the extended field ID representation.
        #/// </summary>
        #/// <param name="_fieldId">
        #/// Normal field ID to be included in the extended representation.
        #/// </param>
        #/// <param name="_tableId">
        #/// field ID to be included in the extended representation; optional.
        #/// </param>
        #/// <returns>
        #/// The extended field ID.
        #/// </returns>
        #/// <remarks>
        #/// Extended field ID contains the table ID in the upper bits.
        #/// If no table ID is given the field is considered as being from <c>SalesTable</c>.
        #/// </remarks>
        #public static FieldId getExtFieldId_BR(FieldId _fieldId,
        #                                       TableId _tableId = tableNum(SalesTable))
        #{
        #    TableId internalTableId;
        #
        #    switch (_tableId)
        #    {
        #        case tableNum(SalesTable):
        #            internalTableId = 0;
        #            break;
        #
        #        case tableNum(SalesTable_BR):
        #            internalTableId = 1;
        #            break;
        #
        #        case tableNum(SalesTableExtensionTH):
        #            internalTableId = 2;
        #            break;
        #
        #        default:
        #            throw error(Error::wrongUseOfFunction(funcName()));
        #    }
        #
        #    return ((internalTableId << 24) | _fieldId);
        #}
      ENDSOURCE
      SOURCE #getFieldIdFromExt_BR
        #/// <summary>
        #/// Retrieves the field ID from extended field ID representation.
        #/// </summary>
        #/// <param name="_fieldId">
        #/// Extended field ID to retrieve normal field ID from.
        #/// </param>
        #/// <returns>
        #/// Normal field ID.
        #/// </returns>
        #/// <remarks>
        #/// Extended field ID contains the table ID in the upper bits.
        #/// </remarks>
        #public static FieldId getFieldIdFromExt_BR(FieldId _fieldId)
        #{
        #    return (_fieldId & 0xffffff);
        #}
      ENDSOURCE
      SOURCE #getFulfillmentTypeAndRate
        #/// <summary>
        #/// Returns the type and rate of fulfillment needed for autoReleaseToWarhouse to release an order.
        #/// </summary>
        #/// <param name="_salesId">
        #/// The identifier of the Sales Order to check.
        #/// </param>
        #/// <returns>
        #/// A container with the type and rate.
        #/// </returns>
        #[SysObsoleteAttribute('Use WHSFulfillmentRateRequirementsProvider::getFulfillmentTypeAndRate')]
        #static container getFulfillmentTypeAndRate(SalesId _salesId)
        #{
        #    return WHSFulfillmentRateRequirementsProvider::getFulfillmentTypeAndRate(SalesTable::find(_salesId));
        #}
      ENDSOURCE
      SOURCE #getTableIdFromExt_BR
        #/// <summary>
        #/// Retrieves the table ID from extended field ID representation.
        #/// </summary>
        #/// <param name="_fieldId">
        #/// Extended field ID to retrieve table ID from.
        #/// </param>
        #/// <returns>
        #/// The table ID
        #/// </returns>
        #/// <remarks>
        #/// Extended field ID contains the table ID in the upper bits.
        #/// </remarks>
        #public static TableId getTableIdFromExt_BR(FieldId _fieldId)
        #{
        #    TableId internalTableId = (_fieldId >> 24);
        #    TableId tableId;
        #
        #    switch (internalTableId)
        #    {
        #        case 0:
        #            tableId = tableNum(SalesTable);
        #            break;
        #
        #        case 1:
        #            tableId = tableNum(SalesTable_BR);
        #            break;
        #
        #        case 2:
        #            tableId = tableNum(SalesTableExtensionTH);
        #            break;
        #
        #        default:
        #            throw error(Error::wrongUseOfFunction(funcName()));
        #    }
        #
        #    return tableId;
        #}
      ENDSOURCE
      SOURCE #initFromCustTableIL
        #/// <summary>
        #/// Initializes a record in the <c>SalesTable</c> table from the customer account in the
        #/// <c>SalesTable</c> table.
        #/// </summary>
        #/// <param name="_salesTableContainer">
        #/// A container that contains the record from the <c>SalesTable</c> table.
        #/// </param>
        #/// <returns>
        #/// An initialized record from the <c>SalesTable</c> table.
        #/// </returns>
        #/// <remarks>
        #/// This method is expected to be called only from the <c>SalesTable.initFromCustTable</c> method and
        #/// should be called to run in IL.
        #/// </remarks>
        #private static server container initFromCustTableIL(container _salesTableContainer)
        #{
        #    SalesTable              salesTable = con2Buf(_salesTableContainer);
        #    CustTable               custTable   = salesTable.custTable_CustAccount();
        #    DirPartyTable           partyTable;
        #    CustTable               custTable_InvoiceAccount;
        #    CustParameters          custParameters;
        #    DlvMode                 dlvMode;
        #    LogisticsLocationDefault custDefaultLocations;
        #    LogisticsLocationEntity locationEntity;
        #    SalesTable_W            salesTable_W;
        #    #ISOCountryRegionCodes
        #
        #    SalesTable_RU           salesTableRU;
        #
        #    SalesTable_BR           salesTable_BR;
        #
        #    MCRSalesTable           mcrSalesTable;
        #    MCRCustTable            mcrCustTable;
        #
        #    TaxInformationCustTable_IN  taxInformationCustTableLoc;
        #    TaxWithholdParameters_IN    taxWithholdParameters;
        #    boolean                     isIndiaTaxParameterMarked = TaxParameters::checkTaxParameters_IN();
        #    boolean                     isIndiaCountryEnabled     = SysCountryRegionCode::isLegalEntityInCountryRegion([#isoIN]);
        #
        #    if (isIndiaCountryEnabled)
        #    {
        #        taxWithholdParameters = TaxWithholdParameters_IN::find();
        #    }
        #    custParameters = CustParameters::find();
        #
        #    if (custTable.Party)
        #    {
        #        select firstonly Name, LanguageId from partyTable where partyTable.RecId == custTable.Party;
        #    }
        #
        #    salesTable.CustAccount                = custTable.AccountNum;
        #    salesTable.SalesName                  = partyTable.Name;
        #    salesTable.DeliveryName               = partyTable.Name;
        #
        #    salesTable.InclTax                    = custTable.InclTax;
        #    salesTable.PriceGroupId               = custTable.PriceGroup;
        #    salesTable.LineDisc                   = custTable.LineDisc;
        #    salesTable.MultiLineDisc              = custTable.MultiLineDisc;
        #    salesTable.EndDisc                    = custTable.EndDisc;
        #    salesTable.MarkupGroup                = custTable.MarkupGroup;
        #
        #    salesTable.FreightZone                = custTable.FreightZone;
        #    salesTable.SalesGroup                 = custTable.SalesGroup;
        #    salesTable.CommissionGroup            = custTable.CommissionGroup;
        #    salesTable.InventLocationId           = custTable.InventLocation;
        #    salesTable.setInventSiteId(custTable.InventSiteId);
        #
        #    salesTable.LanguageId                 = partyTable.LanguageId;
        #
        #    salesTable.CurrencyCode               = custTable.Currency;
        #    salesTable.InvoiceAccount             = custTable.InvoiceAccount  ? custTable.InvoiceAccount
        #                                                                : custTable.AccountNum;
        #    custTable_InvoiceAccount              = salesTable.custTable_InvoiceAccount();
        #    salesTable.vatNum                     = custTable.vatNum;
        #    salesTable.EnterpriseNumber           = custTable.EnterpriseNumber;
        #    salesTable.NumberSequenceGroup        = custTable_InvoiceAccount.NumberSequenceGroup;
        #
        #    salesTable.DlvTerm                    = custTable.DlvTerm;
        #    salesTable.DlvMode                    = custTable.DlvMode;
        #    salesTable.DlvReason                  = custTable.DlvReason;
        #
        #    dlvMode                               = DlvMode::find(custTable.DlvMode);
        #    if (salesTable.DlvMode)
        #    {
        #        salesTable.ShipCarrierId              = dlvMode.ShipCarrierId;
        #        salesTable.ShipCarrierAccountCode     = dlvMode.ShipCarrierAccountCode;
        #        salesTable.ShipCarrierDlvType         = dlvMode.ShipCarrierDlvType;
        #    }
        #
        #    salesTable.initFromCustTableMandatoryFields();
        #    salesTable.setTaxGroup(TaxSales::custTaxGroup(salesTable.DlvTerm, custTable.TaxGroup, salesTable.deliveryLocation()));
        #
        #    if (custParameters.CustNameFromVATNum)
        #    {
        #        salesTable.setNameUsingVATNum(salesTable.vatNum,
        #                                salesTable.deliveryAddress().CountryRegionId,
        #                                salesTable.DeliveryName,
        #                                custParameters);
        #    }
        #
        #    salesTable.DefaultDimension           = salesTable.copyDimension(custTable.DefaultDimension);
        #    salesTable.CashDisc                   = custTable.CashDisc;
        #    salesTable.CashDiscBaseDays           = custTable.CashDiscBaseDays;
        #
        #    if (custTable.CashDisc)
        #    {
        #        salesTable.CashDiscPercent        = CashDisc::find(custTable.CashDisc).Percent;
        #    }
        #
        #    salesTable.Payment                    = custTable.PaymTermId;
        #    salesTable.initFromPayment();
        #    if (custTable.PaymSched)
        #    {
        #        salesTable.PaymentSched               = custTable.PaymSched;
        #    }
        #    salesTable.PaymMode                   = custTable.PaymMode;
        #    salesTable.PaymSpec                   = custTable.PaymSpec;
        #
        #    salesTable.PostingProfile             = CustParameters::find().PostingProfile;
        #
        #    salesTable.CreditCardCustRefId        = 0;
        #
        #    salesTable.ContactPersonId            = custTable.ContactPersonId;
        #    if (custTable.ContactPersonId)
        #    {
        #        salesTable.initFromContactInfo();
        #    }
        #    else
        #    {
        #        salesTable.url = custTable.url();
        #        salesTable.Email = custTable.email();
        #    }
        #
        #    salesTable.setListCode();
        #
        #    salesTable.SalesPoolId                = SalesParameters::find().SalesPoolId;
        #    if (custTable.SalesPoolId)
        #    {
        #        salesTable.SalesPoolId            = custTable.SalesPoolId;
        #    }
        #
        #    salesTable.GiroType                   = custTable.GiroType;
        #
        #    salesTable.ItemTagging                = custTable.rfidItemTagging;
        #    salesTable.CaseTagging                = custTable.rfidCaseTagging;
        #    salesTable.PalletTagging              = custTable.rfidPalletTagging;
        #
        #    salesTable.InterCompanyOrder          = custTable.interCompanyTradingRelationActive();
        #
        #    if (salesTable.InterCompanyOrder)
        #    {
        #        salesTable.InterCompanyCompanyId  = custTable.interCompanyTradingPartnerCompanyID();
        #    }
        #
        #    if (salesTable.SalesType == SalesType::ItemReq
        #    ||  salesTable.SalesType == SalesType::ReturnItem)
        #    {
        #        salesTable.InterCompanyAutoCreateOrders   = false;
        #        salesTable.InterCompanyDirectDelivery     = false;
        #    }
        #    else
        #    {
        #        salesTable.InterCompanyAutoCreateOrders   = custTable.InterCompanyAutoCreateOrders;
        #        salesTable.InterCompanyDirectDelivery     = custTable.InterCompanyDirectDelivery;
        #    }
        #    salesTable.InterCompanyAllowIndirectCreation  = custTable.InterCompanyAllowIndirectCreation;
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoNO]))
        #    {
        #        salesTable.BankCentralBankPurposeCode = custTable.BankCentralBankPurposeCode;
        #        salesTable.BankCentralBankPurposeText = custTable.BankCentralBankPurposeText;
        #    }
        #    salesTable.initBankAccounts_LV();
        #
        #    salesTable.ShipCarrierFuelSurcharge   = custTable.ShipCarrierFuelSurcharge;
        #    custDefaultLocations = LogisticsLocationDefault::construct(custTable);
        #
        #    if (custDefaultLocations.defaultExistsByType(LogisticsLocationRoleType::ShipCarrierThirdPartyShipping))
        #    {
        #        locationEntity = LogisticsLocationEntity::constructFromLocationRecId(
        #            custDefaultLocations.getDefaultLocationByType(LogisticsLocationRoleType::ShipCarrierThirdPartyShipping).RecId);
        #
        #        salesTable.setShipCarrierFromLogisticsLocation(locationEntity.getLogisticsLocation(), locationEntity.getPostalAddress().RecId);
        #    }
        #
        #    salesTable.TaxPeriodPaymentCode_PL    = custTable.TaxPeriodPaymentCode_PL;
        #    BankAccountTable::checkDefaultGiroBank_W(salesTable.CurrencyCode);
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
        #    {
        #        salesTableRU = salesTable.salesTable_RU();
        #
        #        if (custTable.InventProfileType_RU || custTable.InventProfileId_RU)
        #        {
        #            salesTableRU.InventProfileType_RU   = custTable.InventProfileType_RU;
        #            salesTableRU.InventProfileId_RU     = custTable.InventProfileId_RU;
        #        }
        #
        #        salesTableRU.initInvoicePostingType_RU(custTable);
        #
        #        if (!salesTable.DlvTerm)
        #        {
        #            salesTable.DlvTerm = custTable.DlvTerm;
        #        }
        #
        #        salesTable.packSalesTable_RU(salesTableRU);
        #    }
        #    if (isIndiaCountryEnabled)
        #    {
        #        taxInformationCustTableLoc            = custTable.getTaxInformationCustTable_IN();
        #        if (taxWithholdParameters.tcsInvoice)
        #        {
        #            salesTable.NatureOfAssessee_IN    = taxInformationCustTableLoc.NatureOfAssessee;
        #            salesTable.tcsGroup_IN            = taxInformationCustTableLoc.tcsGroup;
        #        }
        #        if (taxWithholdParameters.tdsInvoice)
        #        {
        #            salesTable.NatureOfAssessee_IN    = taxInformationCustTableLoc.NatureOfAssessee;
        #        }
        #        if (isIndiaTaxParameterMarked && custTable.isForeign())
        #        {
        #            salesTable.CustomsExportOrder_IN  = NoYes::Yes;
        #        }
        #    }
        #    if (CustConsInvoiceType_JP::isCustConsInvoiceEnabled())
        #    {
        #        if (custTable.ConsDay_JP != 0)
        #        {
        #            salesTable.ConsTarget_JP = NoYes::Yes;
        #        }
        #    }
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoLT]))
        #    {
        #        salesTable.UnitedVATInvoice_LT = custTable.UnitedVATInvoice_LT;
        #    }
        #    salesTable.FiscalDocType_PL = custTable.FiscalDocType_PL;
        #
        #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoLV, #isoLT]))
        #    {
        #        salesTable.InvoiceRegister_LT         = LtInvoiceAutoNumberingGroups::autoNumberingForSalesInvoice(salesTable.CustAccount);
        #        salesTable.PackingSlipRegister_LT     = LtInvoiceAutoNumberingGroups::autoNumberingForSalesPackingSlip(salesTable.CustAccount);
        #    }
        #
        #    if (BrazilParameters::isEnabled())
        #    {
        #        salesTable_BR = salesTable.salesTable_BR();
        #        salesTable_BR.CustFinalUser_BR              = custTable.CustFinalUser_BR;
        #        salesTable_BR.ServiceCodeOnDlvAddress_BR    = custTable.ServiceCodeOnDlvAddress_BR;
        #        salesTable_BR.FineCode_BR                   = custTable.FineCode_BR;
        #        salesTable_BR.InterestCode_BR               = custTable.InterestCode_BR;
        #        salesTable_BR.PresenceType                  = custTable.PresenceType_BR;
        #        salesTable.packSalesTable_BR(salesTable_BR);
        #    }
        #    if (CustPaymModeTable::find(custTable.PaymMode).IsSEPA)
        #    {
        #        salesTable.DirectDebitMandate = CustDirectDebitMandate::getDefaultMandate(salesTable.InvoiceAccount);
        #    }
        #
        #    if (isConfigurationkeyEnabled(configurationKeyNum(MCRCallCenter)))
        #    {
        #        mcrCustTable = custTable.mcrCustTable();
        #        if (mcrCustTable.soAllocPriority
        #                || mcrCustTable.PostageGroupID)
        #        {
        #            mcrSalesTable = salesTable.mcrSalesTable();
        #
        #            // Default allocation priority from Customer
        #            mcrSalesTable.soAllocPriority = mcrCustTable.soAllocPriority;
        #
        #            // If there is no postage group ID, set it to the customer group
        #            mcrSalesTable.PostageGroupID = mcrCustTable.PostageGroupID ? mcrCustTable.PostageGroupID : custTable.CustGroup;
        #            salesTable.mcrPackMCRSalesTable(mcrSalesTable);
        #        }
        #
        #        salesTable.DefaultDimension = custTable.DefaultDimension;
        #    }
        #
        #    if (SalesTable_W::isLegalEntityInCountryRegion())
        #    {
        #        salesTable_W = salesTable.salesTable_W();
        #
        #        if (custParameters.EntryCertificateManagementEnabled_W)
        #            salesTable_W.EntryCertificateRequired_W = custTable.EntryCertificateRequired_W;
        #
        #        if (custParameters.EntryCertificateIssuingEnabled_W)
        #            salesTable_W.IssueOwnEntryCertificate_W = custTable.IssueOwnEntryCertificate_W;
        #
        #        salesTable.packSalesTable_W(salesTable_W);
        #    }
        #
        #    return buf2Con(salesTable, true);
        #}
      ENDSOURCE
      SOURCE #initFromCustTableServer
        #/// <summary>
        #/// Executes the <c>SalesTable::initFromCustTableIL</c> method after transitioning to IL.
        #/// </summary>
        #/// <param name="_packedSalesTable">
        #/// The packed <c>SalesTable</c> table on which to operate.
        #/// </param>
        #/// <returns>
        #/// The updated packed <c>SalesTable</c> buffer.
        #/// </returns>
        #/// <remarks>
        #/// This static method is required to make sure that the calls from the EP will transition to the
        #/// server tier before asserting the <c>XppILExecutePermission</c> class.
        #/// </remarks>
        #private static server container initFromCustTableServer(container _packedSalesTable)
        #{
        #    container               salesTableContainer;
        #    XppILExecutePermission  xppILExecutePermission;
        #
        #    // Transition to IL to update the sales quantity
        #    xppILExecutePermission = new XppILExecutePermission();
        #    xppILExecutePermission.assert();
        #    salesTableContainer = runTableMethodIL(tableStr(SalesTable),
        #                        tableStaticMethodStr(SalesTable, initFromCustTableIL),
        #                        _packedSalesTable);
        #    CodeAccessPermission::revertAssert();
        #
        #    return salesTableContainer;
        #}
      ENDSOURCE
      SOURCE #jumpRefSalesIdReturnTable
        #/// <summary>
        #/// Opens the sales return order form by using jump reference.
        #/// </summary>
        #/// <param name="_salesId">
        #/// A <c>SalesId</c> enumeration value that specifies the sales return order.
        #/// </param>
        #public static void jumpRefSalesIdReturnTable(SalesId _salesId)
        #{
        #    Args args = new Args();
        #
        #    args.record(SalesTable::find(_salesId));
        #
        #    new MenuFunction(menuitemDisplayStr(ReturnTableDetails), MenuItemType::Display).run(args);
        #}
      ENDSOURCE
      SOURCE #lookupCustomsExportOrder_IN
        #/// <summary>
        #/// Provides filtered lookup functionality for the <c>CustomsExportOrder_IN</c> field.
        #/// </summary>
        #/// <param name="_formControl">
        #/// A <c>FormStringControl</c> object.
        #/// </param>
        #public static void lookupCustomsExportOrder_IN(FormControl _formControl)
        #{
        #    SysTableLookup          sysTableLookup = SysTableLookup::newParameters(tableNum(SalesTable), _formControl);
        #    Query                   query = new Query();
        #    QueryBuildDataSource    queryBuildDataSource;
        #    QueryBuildRange         queryBuildRange;
        #    ;
        #
        #    queryBuildDataSource    = query.addDataSource(tableNum(SalesTable));
        #    queryBuildRange         = queryBuildDataSource.addRange(fieldNum(SalesTable, CustomsExportOrder_IN));
        #    queryBuildRange.value(queryValue(NoYes::Yes));
        #
        #    queryBuildRange         = queryBuildDataSource.addRange(fieldNum(SalesTable, DocumentStatus));
        #    queryBuildRange.value(queryValue(DocumentStatus::Invoice));
        #
        #    queryBuildRange         = queryBuildDataSource.addRange(fieldNum(SalesTable, DocumentStatus));
        #    queryBuildRange.value(queryValue(DocumentStatus::ShippingBill_IN));
        #
        #    queryBuildRange         = queryBuildDataSource.addRange(fieldNum(SalesTable, CustomsShippingBill_IN));
        #    queryBuildRange.value(queryValue(NoYes::No));
        #    sysTableLookup.addLookupfield(fieldNum(SalesTable, SalesId));
        #    sysTableLookup.addLookupfield(fieldNum(SalesTable, SalesName));
        #    sysTableLookup.addLookupfield(fieldNum(SalesTable, SalesStatus));
        #    sysTableLookup.addLookupfield(fieldNum(SalesTable, CustAccount));
        #    sysTableLookup.parmQuery(query);
        #    sysTableLookup.performFormLookup();
        #}
      ENDSOURCE
      SOURCE #lookupDispositionCodeId
        #/// <summary>
        #/// Provides filtered lookup functionality for the <c>DispositionCodeId</c> field.
        #/// </summary>
        #/// <param name="_salesId">
        #/// An extended data type that identifies a sales order.
        #/// </param>
        #/// <param name="_lookupCtrl">
        #/// A <c>FormStringControl</c> object.
        #/// </param>
        #public static client void lookupDispositionCodeId(
        #    SalesId             _salesId,
        #    FormStringControl   _lookupCtrl)
        #{
        #    SysTableLookup          sysTableLookup = SysTableLookup::newParameters(tableNum(ReturnDispositionCode), _lookupCtrl);
        #    Query                   query = new Query();
        #    QueryBuildDataSource    queryBuildDataSource = query.addDataSource(tableNum(ReturnDispositionCode));
        #    QueryBuildRange         queryBuildRange;
        #
        #    queryBuildRange = queryBuildDataSource.addRange(fieldNum(ReturnDispositionCode, DispositionAction));
        #    queryBuildRange.value(SysQuery::valueNot(DispositionAction::CreditOnly));
        #
        #    if (SalesTable::find(_salesId).ReturnReplacementCreated)
        #    {
        #        queryBuildRange.value(strFmt('!%1, !%2 , !%3', DispositionAction::CreditOnly, DispositionAction::ReplaceCredit, DispositionAction::ReplaceScrap));
        #    }
        #
        #    sysTableLookup.addLookupfield(fieldNum(ReturnDispositionCode, DispositionCodeId));
        #    sysTableLookup.addLookupfield(fieldNum(ReturnDispositionCode, DispositionAction));
        #    sysTableLookup.addLookupfield(fieldNum(ReturnDispositionCode, Description));
        #
        #    sysTableLookup.parmQuery(query);
        #    sysTableLookup.performFormLookup();
        #}
      ENDSOURCE
      SOURCE #lookupDispositionCodeIdNonStocked
        #/// <summary>
        #/// Provides filtered lookup functionality for the <c>DispositionCodeId</c> field for non-stocked items.
        #/// </summary>
        #/// <param name="_salesId">
        #/// An extended data type that identifies a sales order.
        #/// </param>
        #/// <param name="_lookupCtrl">
        #/// A <c>FormStringControl</c> object.
        #/// </param>
        #public static client void lookupDispositionCodeIdNonStocked(
        #    SalesId             _salesId,
        #    FormStringControl   _lookupCtrl)
        #{
        #
        #    SysTableLookup          sysTableLookup = SysTableLookup::newParameters(tableNum(ReturnDispositionCode), _lookupCtrl);
        #    Query                   query = new Query();
        #    QueryBuildDataSource    queryBuildDataSource = query.addDataSource(tableNum(ReturnDispositionCode));
        #    QueryBuildRange         queryBuildRange;
        #
        #    queryBuildRange = queryBuildDataSource.addRange(fieldNum(ReturnDispositionCode, DispositionAction));
        #    queryBuildRange.value(SysQuery::valueNot(DispositionAction::CreditOnly));
        #    queryBuildRange.value(SysQuery::valueNot(DispositionAction::ReplaceCredit));
        #    queryBuildRange.value(SysQuery::valueNot(DispositionAction::ReplaceScrap));
        #
        #    queryBuildRange.value(strFmt('!%1, !%2 , !%3', DispositionAction::CreditOnly, DispositionAction::ReplaceCredit, DispositionAction::ReplaceScrap));
        #
        #    sysTableLookup.addLookupfield(fieldNum(ReturnDispositionCode, DispositionCodeId));
        #    sysTableLookup.addLookupfield(fieldNum(ReturnDispositionCode, DispositionAction));
        #    sysTableLookup.addLookupfield(fieldNum(ReturnDispositionCode, Description));
        #
        #    sysTableLookup.parmQuery(query);
        #    sysTableLookup.performFormLookup();
        #}
      ENDSOURCE
      SOURCE #lookupWMSReception
        #static void lookupWMSReception(FormStringControl ctrl, CustAccount custAccount)
        #{
        #    SysTableLookup          sysTableLookup = SysTableLookup::newParameters(tableNum(SalesTable), ctrl);
        #    Query                   query = new Query();
        #    QueryBuildDataSource    queryBuildDataSource;
        #    QueryBuildRange         queryBuildRange;
        #
        #    sysTableLookup.addLookupfield(fieldNum(SalesTable, SalesId));
        #    sysTableLookup.addLookupfield(fieldNum(SalesTable, SalesName));
        #    sysTableLookup.addLookupfield(fieldNum(SalesTable, CustAccount));
        #
        #    queryBuildDataSource = query.addDataSource(tableNum(SalesTable));
        #
        #    if (custAccount)
        #    {
        #        queryBuildRange = queryBuildDataSource.addRange(fieldNum(SalesTable, CustAccount));
        #        queryBuildRange.value(queryValue(custAccount));
        #    }
        #    queryBuildRange = queryBuildDataSource.addRange(fieldNum(SalesTable, SalesStatus));
        #    queryBuildRange.value(enum2Value(SalesStatus::Backorder));
        #
        #    sysTableLookup.parmQuery(query);
        #    sysTableLookup.performFormLookup();
        #}
      ENDSOURCE
      SOURCE #lookupWMSReceptionRMA
        #/// <summary>
        #///    Provides filtered look up functionality to the ReturnItemNum field.
        #/// </summary>
        #/// <param name="ctrl">
        #///    The form string object.
        #/// </param>
        #/// <param name="_custAccount">
        #///    A CustTable table buffer; optional.
        #/// </param>
        #/// <remarks>
        #///    Look up Return orders.
        #/// </remarks>
        #static void lookupWMSReceptionRMA(FormStringControl ctrl, CustAccount _custAccount = '')
        #{
        #    SysTableLookup          sysTableLookup = SysTableLookup::newParameters(tableNum(SalesTable), ctrl);
        #    Query                   query = new Query();
        #    QueryBuildDataSource    queryBuildDataSource;
        #    QueryBuildRange         queryBuildRange;
        #
        #    ListEnumerator listEnumerator;
        #    List list = new List(Types::Int64);
        #    sysTableLookup.addLookupfield(fieldNum(SalesTable, ReturnItemNum));
        #    sysTableLookup.addLookupfield(fieldNum(SalesTable, SalesId));
        #    sysTableLookup.addLookupfield(fieldNum(SalesTable, SalesName));
        #    sysTableLookup.addLookupfield(fieldNum(SalesTable, CustAccount));
        #
        #    queryBuildDataSource = query.addDataSource(tableNum(SalesTable));
        #
        #    if (isConfigurationkeyEnabled(configurationKeyNum(MCRCallCenter)))
        #    {
        #        list = List::create(SalesTable::mcrFindRefundChecksNotApprovedOrDeclined());
        #        listEnumerator = list.getEnumerator();
        #        listEnumerator.reset();
        #        // Also show sales tables with refund checks that have not been approved nor declined yet.
        #        while (listEnumerator.moveNext())
        #        {
        #            queryBuildDataSource.addRange(fieldNum(SalesTable, RecId)).value(queryValue(listEnumerator.current()));
        #        }
        #    }
        #    queryBuildRange = queryBuildDataSource.addRange(fieldNum(SalesTable, ReturnStatus));
        #    queryBuildRange.value(strFmt("%1, %2", SysQuery::value(ReturnStatusHeader::Created), SysQuery::value(ReturnStatusHeader::Open)));
        #
        #    if (_custAccount)
        #    {
        #        queryBuildRange = queryBuildDataSource.addRange(fieldNum(SalesTable, CustAccount));
        #        queryBuildRange.value(SysQuery::value(_custAccount));
        #    }
        #
        #    sysTableLookup.parmQuery(query);
        #    sysTableLookup.performFormLookup();
        #}
      ENDSOURCE
      SOURCE #mcrCalcPostingProfile
        #/// <summary>
        #/// Determines and sets the posting profile of the passed in sales order.
        #/// </summary>
        #/// <param name="_salesTable">
        #/// The <c>SalesTable</c> record for which to set the posting profile.
        #/// </param>
        #/// <returns>
        #/// The posting profile that the sales order should be updated with.
        #/// </returns>
        #public static PostingProfile mcrCalcPostingProfile(SalesTable _salesTable)
        #{
        #    MCRCustPaymTable            mcrCustPaymTable, mcrCustPaymTable_Count;
        #    CustParameters              custParameters = CustParameters::find();
        #    MCROrderParameters          mcrOrderParameters = MCROrderParameters::find();
        #    MCRContinuityCustHeader     mcrContinuityCustHeader;
        #    PostingProfile              newProfile = _salesTable.PostingProfile;
        #
        #    if (_salesTable.PostingProfile == custParameters.PostingProfile
        #        || _salesTable.PostingProfile == custParameters.PrepaymentPostingProfile
        #        || _salesTable.PostingProfile == mcrOrderParameters.ContinuityPaymentProfile)
        #    {
        #        select firstonly RecId from mcrContinuityCustHeader
        #            where mcrContinuityCustHeader.SalesId == _salesTable.SalesId
        #                && mcrContinuityCustHeader.BillUpFront;
        #
        #        // If the order has a bill up front parent set the
        #        //posting profile to the continuity posting profile.
        #        if (mcrContinuityCustHeader.RecId)
        #        {
        #            newProfile = mcrOrderParameters.ContinuityPaymentProfile;
        #        }
        #        else
        #        {
        #            // If this order has 1 or more payments and none of them are not prepay
        #            // use the prepayment posting profile.
        #            select count(Amount) from mcrCustPaymTable_Count
        #                where mcrCustPaymTable_Count.RefTableId == _salesTable.TableId
        #                    && mcrCustPaymTable_Count.RefRecId == _salesTable.RecId
        #                    && mcrCustPaymTable_Count.Amount > 0;
        #
        #            if (mcrCustPaymTable_Count.Amount > 0)
        #            {
        #                select firstonly RecId from mcrCustPaymTable
        #                    where mcrCustPaymTable.RefRecId == _salesTable.RecId
        #                        && mcrCustPaymTable.RefTableId == _salesTable.TableId
        #                        && mcrCustPaymTable.Amount > 0
        #                        && mcrCustPaymTable.IsPrepay == NoYes::No;
        #
        #                if (mcrCustPaymTable.RecId)
        #                {
        #                    newProfile = custParameters.PostingProfile;
        #                }
        #                else
        #                {
        #                    newProfile = custParameters.PrepaymentPostingProfile;
        #                }
        #            }
        #        }
        #    }
        #
        #    // If the order does not have a posting profile and it was not determined
        #    // to be continuity or prepayment, set it to general posting profile.
        #    if (!newProfile)
        #    {
        #        newProfile = custParameters.PostingProfile;
        #    }
        #
        #    return newProfile;
        #}
      ENDSOURCE
      SOURCE #mcrContinuityLineEvalResult
        #/// <summary>
        #/// Gets the enumeration to indicate what type of continuity
        #/// order is being dealt with.
        #/// </summary>
        #/// <param name="_contLineEval">
        #/// A <c>Container</c> holding the continuity data necessary for finding the type
        #/// of the continuity.
        #/// </param>
        #/// <returns>
        #/// The type of continuity order.
        #/// </returns>
        #/// <remarks>
        #/// The <c>MCRContinuityLineEval</c> enumeration to indicate the type of continuity order.
        #/// </remarks>
        #public static MCRContinuityLineEval mcrContinuityLineEvalResult(container _contLineEval)
        #{
        #    if (conPeek(_contLineEval, 1) != 0)
        #    {
        #        if (conPeek(_contLineEval, 2)==0 && conPeek(_contLineEval, 3) == 0)
        #            return MCRContinuityLineEval::PayAllNow;
        #        if (conPeek(_contLineEval, 2)==0 && conPeek(_contLineEval, 3)!=0)
        #            return MCRContinuityLineEval::PayPartNowPartSched;
        #        if (conPeek(_contLineEval, 2)!=0 && conPeek(_contLineEval, 3)==0)
        #            return MCRContinuityLineEval::PayPartNowPartSched;
        #        if (conPeek(_contLineEval, 2)!=0 && conPeek(_contLineEval, 3)!=0)
        #            return MCRContinuityLineEval::PayPartNowPartSched;
        #    }
        #    if (conPeek(_contLineEval, 2) != 0)
        #    {
        #        if (((conPeek(_contLineEval, 1)==0
        #            && conPeek(_contLineEval, 3)==0))
        #            || ((conPeek(_contLineEval, 1)==0
        #            && conPeek(_contLineEval, 3)!=0)))
        #        {
        #        if (conPeek(_contLineEval, 4)!=0)
        #            return MCRContinuityLineEval::PayPartNowPartSched;
        #        else
        #            return MCRContinuityLineEval::PayAllLater;
        #        }
        #        if (conPeek(_contLineEval, 2) != 0)
        #        {
        #        if ((conPeek(_contLineEval, 1)!=0
        #            && conPeek(_contLineEval, 3)== 0)
        #            || (conPeek(_contLineEval, 1)!=0
        #            && conPeek(_contLineEval, 3 != 0)))
        #            return MCRContinuityLineEval::PayPartNowPartSched;
        #        }
        #    }
        #    if (conPeek(_contLineEval, 3)!=0)
        #    {
        #        if ((conPeek(_contLineEval, 1)==0
        #            && conPeek(_contLineEval, 2)==0)
        #            || (conPeek(_contLineEval, 1)==0
        #            && conPeek(_contLineEval, 2)!=0))
        #        {
        #            if (conPeek(_contLineEval, 4)==0)
        #                return MCRContinuityLineEval::PayAllLater;
        #            else
        #                return MCRContinuityLineEval::PayPartNowPartSched;
        #        }
        #        if ((conPeek(_contLineEval, 1)!=0
        #            && conPeek(_contLineEval, 2)==0)
        #            || (conPeek(_contLineEval, 1)!=0
        #            && conPeek(_contLineEval, 2)!=0))
        #        {
        #            return MCRContinuityLineEval::PayPartNowPartSched;
        #        }
        #    }
        #    return MCRContinuityLineEval::Blank;
        #}
      ENDSOURCE
      SOURCE #mcrEvalContOrderLines
        #/// <summary>
        #/// Loops through all sales lines associated with this sales order and returns a
        #/// container with the number if lines that are bill up fronts with no payment schedules, bill up front with
        #/// payment schedules, or regular items.
        #/// </summary>
        #/// <param name="_salesId">
        #/// The <c>SalesId</c> of the sales order for wihich to count the continuity lines.
        #/// </param>
        #/// <returns>
        #/// The counts of the number if lines that are bill up fronts with no payment schedules, bill up front with
        #/// payment schedules, or regular items.
        #/// </returns>
        #public static container mcrEvalContOrderLines(SalesId _salesId)
        #{
        #    SalesLine   salesLine;
        #    int         billUpFrontPaymSched = 0;
        #    int         billUpFrontNoPaymSched = 0;
        #    int         nonBillUpFront = 0;
        #    int         regularItemLines = 0;
        #    InventTable inventTable;
        #    MCRInventTable mcrInventTable;
        #
        #    while select ItemId  from salesLine
        #        where  salesLine.SalesId == _salesId
        #        outer join RecId from inventTable
        #            where inventTable.ItemId == salesLine.ItemId
        #        outer join ContinuityScheduleId from mcrInventTable
        #            where mcrInventTable.InventTable == inventTable.RecId
        #
        #
        #    {
        #        // Is this item continuity.
        #        if (InventTable::mcrIsItemContinuity(salesLine.ItemId))
        #        {
        #            // If continuity item, is the attached schedule a bill up front
        #            // with no payment schedule.
        #            if (MCRContinuityScheduleHeader::isBillUPFrontWithNoPaymSched(mcrInventTable.ContinuityScheduleId))
        #            {
        #                billUpFrontNoPaymSched += 1;
        #            }
        #            else if (MCRContinuityScheduleHeader::isBillUPFrontWithPaymSched(mcrInventTable.ContinuityScheduleId))
        #            {
        #                billUpfrontPaymSched += 1;
        #            }
        #            else
        #            {
        #                nonBillUpFront += 1;
        #            }
        #        }
        #        else
        #        {
        #            regularItemLines += 1;
        #        }
        #    }
        #    return[billUpFrontNoPaymSched, billUpFrontPaymSched, nonBillUpFront, regularItemLines];
        #}
      ENDSOURCE
      SOURCE #mcrExistCustSalesOrder
        #/// <summary>
        #/// Determines whether an order exists for the passed customer.
        #/// </summary>
        #/// <param name="_custAccount">
        #/// The customer's account number for which this method determins if a sales order exists.
        #/// </param>
        #/// <returns>
        #/// true if a sales order exists for the passed customer; otherwise, false.
        #/// </returns>
        #public static boolean mcrExistCustSalesOrder(AccountNum _custAccount)
        #{
        #    SalesTable salesTable;
        #    if(_custAccount)
        #    {
        #        return (select firstonly RecId from salesTable
        #            where salesTable.CustAccount == _custAccount).RecId != 0;
        #    }
        #    else
        #    {
        #        return false;
        #    }
        #
        #}
      ENDSOURCE
      SOURCE #mcrFindRefundChecksNotApprovedOrDeclined
        #/// <summary>
        #/// Finds refund checks that have not been approved or declined.
        #/// </summary>
        #/// <returns>
        #/// A list of <c>SalesTable</c> records that have declined or
        #///     unapproved refund checks.
        #/// </returns>
        #private static container mcrFindRefundChecksNotApprovedOrDeclined()
        #{
        #    SalesTable              salesTable;
        #    MCRCustPaymTable        mcrCustPaymTable;
        #    List                    list = new List(Types::Int64);
        #
        #    //Also show sales tables with refund checks that have not been approved nor declined yet.
        #    while select RecId from salesTable
        #        where  (salesTable.ReturnStatus == ReturnStatusHeader::Created
        #                || salesTable.ReturnStatus == ReturnStatusHeader::Open)
        #                || salesTable.mcrOrderStopped == NoYes::Yes
        #        exists join mcrCustPaymTable
        #            where mcrCustPaymTable.RefTableId == salesTable.TableId
        #                && mcrCustPaymTable.RefRecId   == salesTable.RecId
        #                && mcrCustPaymTable.Status != MCRCustPaymStatus::Declined
        #                && mcrCustPaymTable.CustPaymType == MCRCustPaymType::RefundCheck
        #    {
        #        list.addEnd(salesTable.RecId);
        #    }
        #
        #    return list.pack();
        #}
      ENDSOURCE
      SOURCE #mcrFindReturnByExchId
        #/// <summary>
        #/// Finds the returns sales order based on the passed in exchange order <c>SalesId</c>.
        #/// </summary>
        #/// <param name="_exchSalesId">
        #/// The <c>SalesId</c> of the exchange order  to use in finding the sales order recrod.
        #/// </param>
        #/// <param name="_forUpdate">
        #///  A <c>Boolean</c> value defining whether or not the <c>SalesTable</c> record
        #/// should be selected for update; optional.
        #/// </param>
        #/// <returns>
        #/// The sales order found by the exchange order <c>SalesId</c>.
        #/// </returns>
        #public static SalesTable mcrFindReturnByExchId(SalesId _exchSalesId, boolean  _forUpdate = false)
        #{
        #    SalesTable  salesTable;
        #
        #    if (_exchSalesId)
        #    {
        #        salesTable.selectForUpdate (_forUpdate);
        #
        #        select firstonly salesTable
        #            where salesTable.ReturnReplacementId == _exchSalesId;
        #    }
        #
        #    return salesTable;
        #}
      ENDSOURCE
      SOURCE #mcrFindSource
        #/// <summary>
        #/// Finds a sales order containing the passed <c>MCRSourceID</c>.
        #/// </summary>
        #/// <param name="_sourceId">
        #/// The <c>MCRSourceId</c> used to find a sales order.
        #/// </param>
        #/// <param name="_forUpdate">
        #/// A boolean that determines whether to select the record for update; optional.
        #/// </param>
        #/// <returns>
        #/// The <c>SalesTable</c> record containing the passed <c>MCRSourceId</c> if one exists;
        #/// otheriwse, an empty buffer.
        #/// </returns>
        #public static SalesTable mcrFindSource(MCRSourceID _sourceId, boolean  _forUpdate = false)
        #{
        #    SalesTable      salesTable;
        #    MCRSalesTable   mcrSalesTable;
        #
        #    if (_sourceId)
        #    {
        #        salesTable.selectForUpdate (_forUpdate);
        #
        #        select firstonly salesTable
        #        exists join mcrSalesTable
        #        where mcrSalesTable.SalesTable == salesTable.RecId
        #        && mcrSalesTable.SourceId == _sourceId;
        #    }
        #
        #    return salesTable;
        #}
      ENDSOURCE
      SOURCE #mcrGetOldestOutOfBalanceDate
        #/// <summary>
        #/// Gets the oldest sales order that is over or under paid.
        #/// </summary>
        #/// <param name="_status">
        #/// The out of balance status for which to search.
        #/// </param>
        #/// <returns>
        #/// The date that the oldest sales order that is over or under paid was created.
        #/// </returns>
        #static TransDate mcrGetOldestOutOfBalanceDate(MCRPaymOutOfBalance _status)
        #{
        #    SalesTable              salesTable;
        #    MCRSalesTable           mcrSalesTable;
        #    TransDate               dateCreated=dateNull();
        #
        #    select firstonly CreatedDateTime, RecId from salesTable
        #        order by CreatedDateTime
        #        where salesTable.SalesStatus == SalesStatus::Backorder
        #        exists join mcrSalesTable
        #        where mcrSalesTable.SalesTable == salesTable.RecId
        #            && mcrSalesTable.PaymOutOfBalance == _status;
        #
        #    if(salesTable.RecId)
        #    {
        #        dateCreated = DateTimeUtil::date(salesTable.CreatedDateTime);
        #    }
        #
        #    return dateCreated;
        #}
      ENDSOURCE
      SOURCE #mcrInsertFraudHold
        #private static void mcrInsertFraudHold(SalesId salesId, MCRHoldCodeComment _mcrHoldCodeComment)
        #{
        #    MCRHoldCodeTrans    mcrHoldCodeTrans;
        #
        #    ttsbegin;
        #    mcrHoldCodeTrans.InventRefId = salesId;
        #    mcrHoldCodeTrans.mcrHoldCode = MCROrderParameters::find().mcrFraudManualHoldCode;
        #    mcrHoldCodeTrans.mcrHoldCodeComment = _mcrHoldCodeComment;
        #
        #    if (mcrHoldCodeTrans.validateWrite())
        #    {
        #        mcrHoldCodeTrans.insert();
        #    }
        #    else
        #    {
        #        throw error("@SYS104318");
        #    }
        #
        #    ttscommit;
        #}
      ENDSOURCE
      SOURCE #mcrIsOrderContinuityParent
        #/// <summary>
        #/// Determines if the <c>SalesTable</c> record, found by the passed sales ID,
        #/// is a continuity order parent.
        #/// </summary>
        #/// <param name="_salesId">
        #/// The <c>SalesId</c> of the sales order for which this method determins if it is a
        #/// continuity order parent.
        #/// </param>
        #/// <returns>
        #/// True if the sales order containing the passed <c>SalesId</c> is a continuity order
        #/// parent; otherwise, false.
        #/// </returns>
        #public static boolean mcrIsOrderContinuityParent(SalesId _salesId)
        #{
        #    if (SalesTable::find(_salesId, false).mcrSalesTable().ContinuityOrder)
        #    {
        #        return true;
        #    }
        #    else
        #    {
        #        return false;
        #    }
        #}
      ENDSOURCE
      SOURCE #mcrJumpRef
        #/// <summary>
        #///  Passes records to the <c>SalesTable</c> menu function based on the passed record and string.
        #/// </summary>
        #/// <param name="_record">
        #/// The record to be passed to the <c>SalesTable</c> menu function.
        #/// </param>
        #/// <param name="_customerServiceParam">
        #/// Thestring parameter for the customer service form.
        #/// </param>
        #/// <param name="_caller">
        #/// The calling object; optional.
        #/// </param>
        #/// <returns>
        #/// The returned value from the <c>SalesTable</c> menu function.
        #/// </returns>
        #public static str mcrJumpRef(Common _record, MCRCustomerServiceParam _customerServiceParam, Object _caller = null)
        #{
        #    Args                    args;
        #    FormRun                 formRun;
        #    str                     rv;
        #    MCRSalesTableConfigure  salesTableConfigure = new MCRSalesTableConfigure();
        #
        #    args = new Args();
        #    args.parmEnum(NoYes::Yes);
        #    args.record(_record);
        #    salesTableConfigure.parmCustomerServiceParam(_customerServiceParam);
        #    args.parmObject(salesTableConfigure);
        #    args.caller(_caller);
        #    formRun = new MenuFunction(menuitemDisplayStr(salesTable), MenuItemType::Display).create(args);
        #    formRun.run();
        #    formRun.wait();
        #
        #    rv = args.parm();
        #    return rv;
        #}
      ENDSOURCE
      SOURCE #mcrlookupByInvoiceAccountInvoiceId
        #/// <summary>
        #/// looks up all sales orders that have the passed customer invoice account and are related to
        #/// the customer invoice journal with the passed invoice ID.
        #/// </summary>
        #/// <param name="_callingControl">
        #/// The calling form control.
        #/// </param>
        #/// <param name="_custInvoiceAccount">
        #/// The customer invoice account to search for.
        #/// </param>
        #/// <param name="_invoiceId">
        #/// The invoice number to search for.
        #/// </param>
        #public static void mcrlookupByInvoiceAccountInvoiceId(FormControl         _callingControl,
        #                                                    CustInvoiceAccount    _custInvoiceAccount,
        #                                                    InvoiceId             _invoiceId)
        #{
        #    SysTableLookup          sysTableLookup;
        #    Query                   query;
        #    QueryBuildDataSource    qbdsSalesTable;
        #    QueryBuildDataSource    qbdsCustInvoiceJour;
        #
        #    sysTableLookup = SysTableLookup::newParameters(tableNum(SalesTable), _callingControl);
        #    sysTableLookup.addLookupfield(fieldNum(SalesTable, SalesId));
        #    sysTableLookup.addLookupfield(fieldNum(SalesTable, CustAccount));
        #    sysTableLookup.addLookupfield(fieldNum(SalesTable, InvoiceAccount));
        #    sysTableLookup.addLookupfield(fieldNum(SalesTable, SalesStatus));
        #
        #    query = new Query();
        #    qbdsSalesTable = query.addDataSource(tableNum(SalesTable));
        #
        #    if (_custInvoiceAccount)
        #    {
        #        qbdsSalesTable.addRange(fieldNum(SalesTable, InvoiceAccount))
        #            .value(SysQuery::value(_custInvoiceAccount));
        #    }
        #
        #    // Sort by sales ID descending.
        #    qbdsSalesTable.addSortField(fieldNum(SalesTable, SalesId), SortOrder::Descending);
        #
        #    if (_invoiceId)
        #    {
        #        qbdsCustInvoiceJour = qbdsSalesTable.addDataSource(tableNum(CustInvoiceJour));
        #        qbdsCustInvoiceJour.relations(true);
        #        qbdsCustInvoiceJour.addRange(fieldNum(CustInvoiceJour, InvoiceId))
        #            .value(SysQuery::value(_invoiceId));
        #    }
        #
        #    sysTableLookup.parmQuery(query);
        #    sysTableLookup.performFormLookup();
        #}
      ENDSOURCE
      SOURCE #mcrlookupInWarehouseOrders
        #/// <summary>
        #/// Looks up sales orders that are no picked or in warehouse status.
        #/// </summary>
        #/// <param name="ctrl">
        #/// The form string control.
        #/// </param>
        #public static void mcrlookupInWarehouseOrders(FormStringControl ctrl)
        #{
        #    SysTableLookup          sysTableLookup = SysTableLookup::newParameters(tableNum(SalesTable), ctrl);
        #    Query                   query = new Query();
        #    QueryBuildDataSource    queryBuildDataSource;
        #    QueryBuildRange         queryBuildRange;
        #
        #    sysTableLookup.addLookupfield(fieldNum(SalesTable, SalesId));
        #    sysTableLookup.addLookupfield(fieldNum(SalesTable, SalesName));
        #    sysTableLookup.addLookupfield(fieldNum(SalesTable, CustAccount));
        #
        #    queryBuildDataSource = query.addDataSource(tableNum(SalesTable));
        #    queryBuildRange = queryBuildDataSource.addRange(fieldNum(SalesTable, SalesStatus));
        #    queryBuildRange.value(enum2Value(SalesStatus::Backorder));
        #    queryBuildRange = queryBuildDataSource.addRange(fieldNum(SalesTable, mcrOrderStopped));
        #    queryBuildRange.value(enum2Value(NoYes::No));
        #
        #    sysTableLookup.parmQuery(query);
        #    sysTableLookup.performFormLookup();
        #}
      ENDSOURCE
      SOURCE #mcrUnReserveOrderLines
        #/// <summary>
        #/// Un-reserves all of the sales order lines for the <c>SalesId</c> passed.
        #/// </summary>
        #/// <param name="_salesId">
        #/// The <c>SalesId</c> for which to un-reserve any sales order lines that have been reserved.
        #/// </param>
        #public static void mcrUnReserveOrderLines(SalesId _salesId)
        #{
        #    SalesLine           salesLine;
        #    InventTrans         inventTrans;
        #    InventDim           inventDim;
        #    InventTransOrigin   inventTransOrigin;
        #
        #    // Get all of the lines which are reserved and un-reserve them.
        #    while select salesLine
        #        where salesLine.SalesId == _salesId
        #        join inventTrans
        #        exists join inventTransOrigin
        #        where inventTrans.InventTransOrigin == inventTransOrigin.RecId
        #            && inventTransOrigin.InventTransId == salesLine.InventTransId
        #            && inventTrans.StatusIssue == StatusIssue::ReservPhysical
        #        join inventDim
        #        where inventDim.InventDimId == inventTrans.InventDimId
        #    {
        #        MCRAutoallocatebo::unreserve(salesLine, inventTrans, inventDim, false);
        #    }
        #
        #}
      ENDSOURCE
      SOURCE #mcrUpdateContinuityPayments
        #/// <summary>
        #/// Updates the continuity payment records when the
        #/// invoice account is modified.
        #/// </summary>
        #/// <param name="_salesTable">
        #/// The sales order record for which the continuity payment records need to be updated.
        #/// </param>
        #public static void mcrUpdateContinuityPayments(SalesTable _salesTable)
        #{
        #    MCRCustPaymTable            mcrCustPaymTableHeader;
        #    MCRContinuityCustHeader     mcrContinuityCustHeader;
        #    CustPaymSchedLine           custPaymSchedLine;
        #    CustPaymSched               custPaymSched;
        #    MCRCustPaymTable            mcrCustPaymTable;
        #
        #    // For all header records related to this order we need to update the assocated continuity
        #    //  payment records.
        #    while select forupdate mcrContinuityCustHeader
        #        where mcrContinuityCustHeader.SalesId == _salesTable.SalesId
        #    {
        #        // Find the payment associated with the continuity header.
        #        select forupdate mcrCustPaymTableHeader
        #            where mcrCustPaymTableHeader.RefRecId == mcrContinuityCustHeader.RecId
        #                && mcrCustPaymTableHeader.RefTableId == mcrContinuityCustHeader.TableId
        #                && mcrCustPaymTableHeader.CustAccount != _salesTable.InvoiceAccount;
        #
        #        // If a header payment was found update the account.
        #        if (mcrCustPaymTableHeader)
        #        {
        #            mcrCustPaymTableHeader.CustAccount = _salesTable.InvoiceAccount;
        #            ttsbegin;
        #            if (mcrCustPaymTableHeader.validateWrite())
        #            {
        #                mcrCustPaymTableHeader.update();
        #            }
        #            else
        #            {
        #                throw error("@SYS104318");
        #            }
        #            ttscommit;
        #        }
        #        // Regardless of whether or not a header payment record was found, need to make
        #        //  sure that a related payment schedule is correct.
        #        select firstonly RecId from custPaymSched
        #            where custPaymSched.ExtTableId == mcrContinuityCustHeader.TableId
        #                && custPaymSched.ExtRecId == mcrContinuityCustHeader.RecId;
        #
        #        // If there is a payment schedule related to the order update the record.
        #        if (custPaymSched.RecId)
        #        {
        #            // Find the lines associated with the payment schedule.
        #            while select RecId, TableId from custPaymSchedLine
        #                where custPaymSchedLine.ParentRecID == custPaymSched.RecId
        #                join forupdate mcrCustPaymTable
        #                where mcrCustPaymTable.RefRecId == custPaymSchedLine.RecId
        #                    && mcrCustPaymTable.RefTableId == custPaymSchedLine.TableId
        #                    && mcrCustPaymTable.CustAccount != _salesTable.InvoiceAccount
        #            {
        #                if (mcrCustPaymTable)
        #                {
        #                    mcrCustPaymTable.CustAccount = _salesTable.InvoiceAccount;
        #                    ttsbegin;
        #                    if ( mcrCustPaymTable.validateWrite())
        #                    {
        #                         mcrCustPaymTable.update();
        #                    }
        #                    else
        #                    {
        #                        throw error("@SYS104318");
        #                    }
        #                    ttscommit;
        #                }
        #            }
        #        }
        #
        #        ttsbegin;
        #        mcrContinuityCustHeader.CustAccount = _salesTable.InvoiceAccount;
        #        if (mcrContinuityCustHeader.validateWrite())
        #        {
        #            mcrContinuityCustHeader.update();
        #        }
        #        else
        #        {
        #            throw error("@SYS104318");
        #        }
        #        ttscommit;
        #    }
        #}
      ENDSOURCE
      SOURCE #mcrUpdateSalesStatus
        #/// <summary>
        #/// Updates the status and order stopped flag of the passed <c>SalesTable</c> record.
        #/// </summary>
        #/// <param name="_salesTable">
        #/// The <c>SalesTable</c> record for which this methods updates status and stopped order flag.
        #/// </param>
        #/// <param name="_status">
        #/// The status to be set on the passed sales order.
        #/// </param>
        #/// <param name="_mcrOrderStopped">
        #/// The <c>NoYes</c> enumeration that determines whether the order is stopped; optional.
        #/// </param>
        #public static void mcrUpdateSalesStatus(SalesTable _salesTable,
        #                                        SalesStatus _status,
        #                                        MCROrderStopped _mcrOrderStopped = NoYes::No)
        #{
        #    if (_salesTable)
        #    {
        #        ttsbegin;
        #        _salesTable.selectForUpdate(true);
        #        _salesTable.reread();
        #        _salesTable.SalesStatus = _status;
        #        _salesTable.mcrOrderStopped = _mcrOrderStopped;
        #        _salesTable.update();
        #        ttscommit;
        #    }
        #}
      ENDSOURCE
      SOURCE #mcrUserName
        #/// <summary>
        #/// Gets the user name based on the <c>UserId</c>.
        #/// </summary>
        #/// <returns>
        #/// The user name.
        #/// </returns>
        #public static UserName mcrUserName()
        #{
        #    UserInfo userInfo;
        #
        #    select firstonly Name, Id from userInfo
        #        where userInfo.Id == curUserId();
        #
        #    return userInfo.Name;
        #}
      ENDSOURCE
      SOURCE #meetsFulfilmentRate
        #/// <summary>
        #/// Checks whether the Sales Order is fulfilled or not.
        #/// </summary>
        #/// <param name="_salesId">
        #/// The identifier of the Sales Order to check.
        #/// </param>
        #/// <returns>
        #/// True if the Sales Order is fulfilled or doesn't have the fulfillment type, false otherwise.
        #/// </returns>
        #public static boolean meetsFulfilmentRate(SalesId _salesId)
        #{
        #    return WHSFulfillmentRateValidator::checkFulfillmentRate(SalesTable::find(_salesId), ErrorTolerance::Warning);
        #}
      ENDSOURCE
      SOURCE #promptConvertCurrencyCode
        #client static container promptConvertCurrencyCode(SalesTable _salesTable = null)
        #{
        #    DialogButton            dialogButton;
        #    if (!isConfigurationkeyEnabled(configurationKeyNum(PriceDisc)))
        #    {
        #        dialogButton = Box::okCancel("@SYS54755", DialogButton::Ok);
        #
        #        if (dialogButton == DialogButton::Ok)
        #        {
        #            return [NoYes::Yes, TradeCurencyConversion::ExchRate];
        #        }
        #
        #        return [NoYes::No, TradeCurencyConversion::ExchRate];
        #    }
        #
        #    return TradeCurrencyConversionPrompt::newFromParm(_salesTable,
        #                                                      _salesTable.SalesId,
        #                                                      _salesTable.priceDiscChangePolicyExistOnLine()
        #                                                      ).promptConvertCurrencyCode();
        #}
      ENDSOURCE
      SOURCE #promptCopyDeliveryAddress
        #client static DialogButton  promptCopyDeliveryAddress()
        #{
        #    return Box::yesYesAllNoCancel("@SYS78472", DialogButton::Yes);
        #}
      ENDSOURCE
      SOURCE #promptCopyThirdPartyBillingAddress
        #client static DialogButton  promptCopyThirdPartyBillingAddress()
        #{
        #    return Box::yesNo("@SYS119160", DialogButton::Yes);
        #}
      ENDSOURCE
      SOURCE #returnUpdatedHeaderStatus
        #static void returnUpdatedHeaderStatus(SalesId _salesId, DocumentStatus _documentStatus = DocumentStatus::None)
        #{
        #    SalesLine                   salesLine;
        #    SalesTable                  salesTable;
        #    SalesTableType_ReturnItem   salesTableType_ReturnItem;
        #
        #    switch (_documentStatus)
        #    {
        #        case DocumentStatus::PackingSlip :
        #            select firstonly RecId from salesLine where salesLine.SalesId       == _salesId &&
        #                                                (salesLine.ReturnStatus == ReturnStatusLine::Received   ||
        #                                                 salesLine.ReturnStatus == ReturnStatusLine::Registered);
        #
        #            if (salesLine.RecId)
        #            {
        #                ttsbegin;
        #                salesTable = SalesTable::find(_salesId, true);
        #                salesTable.ReturnStatus = ReturnStatusHeader::Open;
        #                salesTable.update();
        #                ttscommit;
        #            }
        #            break;
        #
        #        case DocumentStatus::Invoice :
        #        case DocumentStatus::Facture_RU  :
        #
        #            select firstonly RecId from salesLine where salesLine.SalesId       == _salesId &&
        #                                                (salesLine.ReturnStatus == ReturnStatusLine::Awaiting   ||
        #                                                 salesLine.ReturnStatus == ReturnStatusLine::None       ||
        #                                                 salesLine.ReturnStatus == ReturnStatusLine::Quarantine ||
        #                                                 salesLine.ReturnStatus == ReturnStatusLine::Received   ||
        #                                                 salesLine.ReturnStatus == ReturnStatusLine::Registered);
        #
        #            if (!salesLine.RecId)
        #            {
        #                ttsbegin;
        #                salesTable = SalesTable::find(_salesId, true);
        #                salesTable.ReturnStatus = ReturnStatusHeader::Closed;
        #                salesTable.update();
        #                ttscommit;
        #            }
        #            if (isConfigurationkeyEnabled(configurationKeyNum(MCRCallCenter)))
        #            {
        #                // Check exchange holds to see if they can be released.
        #                if(!salesTable)
        #                {
        #                    salesTable = SalesTable::find(_salesId);
        #                }
        #
        #                if(salesTable.ReturnReplacementId)
        #                {
        #                    salesTableType_ReturnItem = SalesTableType_ReturnItem::construct(salesTable);
        #                    salesTableType_ReturnItem.mcrUpdateExchangeReturnHold();
        #
        #                }
        #            }
        #            break;
        #    }
        #}
      ENDSOURCE
      SOURCE #returnUpdateReplacement
        #public static void returnUpdateReplacement(ReturnItemNum _returnItemNum, SalesId _replacementSalesId)
        #{
        #    SalesTable returnOrder;
        #
        #    ttsbegin;
        #    returnOrder = SalesTable::findReturnItemNum(_returnItemNum,true);
        #    returnOrder.ReturnReplacementCreated    = NoYes::Yes;
        #    returnOrder.ReturnReplacementId         = _replacementSalesId;
        #    returnOrder.update();
        #    ttscommit;
        #}
      ENDSOURCE
      SOURCE #returnValidateReturnItemNum
        #/// <summary>
        #/// Validates the input to the return order field.
        #/// </summary>
        #/// <param name="_returnItemNum">
        #/// A <c>ReturnItemNum</c> type.
        #/// </param>
        #/// <returns>
        #/// true if the return order in question exists; otherwise, false.
        #/// </returns>
        #static boolean returnValidateReturnItemNum(ReturnItemNum _returnItemNum)
        #{
        #    boolean ret = true;
        #    SalesTable salesTable = SalesTable::findReturnItemNum(strLTrim(_returnItemNum));
        #
        #    if (_returnItemNum && !salesTable.RecId)
        #    {
        #        //Return order %1 doesn't exists
        #        ret = checkFailed(strFmt("@SYS115108", _returnItemNum));
        #    }
        #
        #    if (ret)
        #    {
        #        if (salesTable.ReturnStatus == ReturnStatusHeader::Created || salesTable.ReturnStatus == ReturnStatusHeader::Open)
        #        {
        #            ret = true;
        #        }
        #        else
        #        {                           //Only Return orders with status %1 or %2 are legal input.
        #            ret = checkFailed(strFmt("@SYS123163", ReturnStatusHeader::Created, ReturnStatusHeader::Open));
        #        }
        #    }
        #
        #    return ret;
        #}
      ENDSOURCE
      SOURCE #setSalesOrderReleasedStatus
        #/// <summary>
        #/// Sets the released status for a sales order.
        #/// </summary>
        #/// <param name="_salesId">
        #/// The sales Id of the sales order to be updated.
        #/// </param>
        #static void setSalesOrderReleasedStatus(SalesId _salesId)
        #{
        #    SalesLine           salesLine;
        #    WHSSalesLine        whsSalesLine;
        #    SalesTable          salesTable;
        #    WHSInventEnabled    whsInventEnabled;
        #
        #    WHSReleaseStatus    calculatedReleaseStatus;
        #
        #    ttsbegin;
        #
        #    // Find total released qty for the sales order
        #    // Find total qty of sales lines for WHS enabled items
        #    select sum(ReleasedQty) from whsSalesLine
        #        join sum(QtyOrdered) from salesLine
        #        where salesLine.InventTransId       == whsSalesLine.InventTransId
        #        &&    salesLine.SalesId             == _salesId
        #        &&    salesLine.LineDeliveryType    != LineDeliveryType::OrderLineWithMultipleDeliveries
        #            exists join whsInventEnabled
        #            where whsInventEnabled.ItemId   == salesLine.ItemId;
        #
        #    // If total released qty is not zero continue to find total sales line ordered qty
        #    if (whsSalesLine.ReleasedQty != 0)
        #    {
        #        // Compare total released qty and total ordered qty
        #        if (salesLine.QtyOrdered > whsSalesLine.ReleasedQty)
        #        {
        #            // If ordered qty is greater than the status is partial released
        #            calculatedReleaseStatus = WHSReleaseStatus::PartialReleased;
        #        }
        #        else if (salesLine.QtyOrdered == whsSalesLine.ReleasedQty)
        #        {
        #            // If ordered qty is equal to released qty then the status is released
        #            calculatedReleaseStatus = WHSReleaseStatus::Released;
        #        }
        #    }
        #    else
        #    {
        #        // If there is no released qty then the status is open
        #        calculatedReleaseStatus = WHSReleaseStatus::Open;
        #    }
        #
        #    salesTable.skipDataMethods(true);
        #    update_recordSet salesTable
        #        setting ReleaseStatus = calculatedReleaseStatus
        #        where salesTable.SalesId        == _salesId
        #           && salesTable.ReleaseStatus  != calculatedReleaseStatus;
        #
        #    ttscommit;
        #}
      ENDSOURCE
      SOURCE #shipCarrierPostPickup
        #static void shipCarrierPostPickup(
        #    SalesTable          _salesTable,
        #    DocumentStatus      _documentStatus)
        #{
        #    SalesFormLetter     salesFormLetter;
        #
        #
        #    if (_documentStatus != DocumentStatus::PackingSlip && _documentStatus != DocumentStatus::Invoice
        #        && _documentStatus != DocumentStatus::Facture_RU)
        #    {
        #        return;
        #    }
        #
        #    salesFormLetter = SalesFormLetter::construct(_documentStatus);
        #
        #    salesFormLetter.allowEmptyTable(salesFormLetter.initAllowEmptyTable(true));
        #
        #    salesFormLetter.transDate(systemDateGet());
        #
        #    salesFormLetter.update(_salesTable, systemDateGet(), SalesUpdate::All, AccountOrder::None, false, true);
        #
        #    salesFormLetter.runShipCarrier();
        #}
      ENDSOURCE
      SOURCE #txtNotExist
        #static str  txtNotExist()
        #{
        #    return "@SYS15067";
        #}
      ENDSOURCE
      SOURCE #updateDlvModeFromCarrierService
        #/// <summary>
        #///   Updates delivery mode on sales order and optionally on related sales lines.
        #/// </summary>
        #/// <param name="_salesId">
        #///   The sales order ID.
        #/// </param>
        #/// <param name="_carrierCode">
        #///   The carrier code.
        #/// </param>
        #/// <param name="_carrierServiceCode">
        #///   The carrier service code.
        #/// </param>
        #/// <param name="_updateLines">
        #///   true if sales lines should be updated; otherwise false; optional.
        #/// </param>
        #/// <remarks>
        #///   The delivery mode is assigned based on carrier code and carrier service.
        #/// </remarks>
        #public static server void updateDlvModeFromCarrierService(
        #    SalesId                 _salesId,
        #    TMSCarrierCode          _carrierCode,
        #    TMSCarrierServiceCode   _carrierServiceCode,
        #    boolean                 _updateLines = false)
        #{
        #    SalesTable salesTable;
        #    SalesLine  salesLine;
        #    DlvModeId   dlvModeId = TMSCarrierService::findDlvModeId(_carrierCode, _carrierServiceCode);
        #
        #    if (dlvModeId)
        #    {
        #        ttsbegin;
        #
        #        update_recordset salesTable
        #            setting DlvMode = dlvModeId
        #            where salesTable.SalesId == _salesId;
        #
        #        if (_updateLines)
        #        {
        #            salesLine.skipDataMethods(true);
        #            update_recordset salesLine
        #                setting DlvMode = dlvModeId
        #                where salesLine.SalesId == _salesId;
        #        }
        #
        #        ttscommit;
        #    }
        #}
      ENDSOURCE
    ENDMETHODS
  ENDTABLE
  

***Element: DBT

; Microsoft Dynamics AX Table : TempPurch unloaded
; --------------------------------------------------------------------------------
  TABLEVERSION 1
  
  TABLE #TempPurch
    EnforceFKRelation 1
    PROPERTIES
      Name                #TempPurch
      CreateRecIdIndex    #Yes
      PrimaryIndex        #SurrogateKey
      ClusterIndex        #SurrogateKey
      Origin              #{0C3337F6-20D3-45D0-9C13-B60B091C9723}
    ENDPROPERTIES
    
    FIELDS
      FIELD #AZ_ArrivedWH
        DATE
        PROPERTIES
          Name                #AZ_ArrivedWH
          Label               #Arrived di WH ABU
          Table               #TempPurch
          Origin              #{9D77ABA7-B0C8-4D48-82BA-C87E63CD14C2}
          ExtendedDataType    #TransDate
        ENDPROPERTIES
        
      FIELD #AZ_BackContainer
        DATE
        PROPERTIES
          Name                #AZ_BackContainer
          Label               #Kembali Container
          Table               #TempPurch
          Origin              #{7C81622F-BE13-4B24-A631-AC772178B30C}
          ExtendedDataType    #TransDate
        ENDPROPERTIES
        
      FIELD #AZ_ChArrivedWh
        ENUM
        PROPERTIES
          Name                #AZ_ChArrivedWh
          Label               #Arrived At WH
          Table               #TempPurch
          Origin              #{BC948ECA-C37A-43BB-BEE4-4FA03FF02DDF}
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #AZ_ChBackContainer
        ENUM
        PROPERTIES
          Name                #AZ_ChBackContainer
          Label               #Back Container
          Table               #TempPurch
          Origin              #{52558D28-5160-47D2-96C7-B0929083C67D}
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #AZ_ChContainerNumber
        ENUM
        PROPERTIES
          Name                #AZ_ChContainerNumber
          Label               #Container Number
          Table               #TempPurch
          Origin              #{4A8089BE-144E-4E67-899B-5041EADDB8DD}
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #AZ_ChContainerOnPort
        ENUM
        PROPERTIES
          Name                #AZ_ChContainerOnPort
          Label               #Container On Port
          Table               #TempPurch
          Origin              #{912DD32A-E7E4-4D40-9093-3EDA33E8E7C3}
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #AZ_ChDocReceipt
        ENUM
        PROPERTIES
          Name                #AZ_ChDocReceipt
          Label               #Document Receipt
          Table               #TempPurch
          Origin              #{190FB975-5430-4FD2-A6BC-13662E3AE0B2}
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #AZ_CHInvoiceDate
        ENUM
        PROPERTIES
          Name                #AZ_CHInvoiceDate
          Label               #Invoice Date
          Table               #TempPurch
          Origin              #{D4B7BE4C-124B-460B-A6EC-0186E5A8B51B}
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #AZ_ChProductReceipt
        ENUM
        PROPERTIES
          Name                #AZ_ChProductReceipt
          Label               #Product Receipt
          Table               #TempPurch
          Origin              #{2EF6F900-12D4-44EA-9D49-FD0A6A257D40}
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #AZ_CHRealeasedContainer
        ENUM
        PROPERTIES
          Name                #AZ_CHRealeasedContainer
          Label               #Released Container
          Table               #TempPurch
          Origin              #{7954EF98-5D49-4433-A921-C77CD5B2100C}
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #AZ_CHTaxPaid
        ENUM
        PROPERTIES
          Name                #AZ_CHTaxPaid
          Label               #Tax Paid
          Table               #TempPurch
          Origin              #{2864ADCC-A963-4596-B050-F65F9BFA9D01}
          EnumType            #NoYes
        ENDPROPERTIES
        
      FIELD #AZ_ContainerNumber
        REAL
        PROPERTIES
          Name                #AZ_ContainerNumber
          Table               #TempPurch
          Origin              #{55C78AAB-A449-4D33-B554-CB32D51B3F5E}
          ExtendedDataType    #LineAmount
        ENDPROPERTIES
        
      FIELD #AZ_CountainerOnPort
        DATE
        PROPERTIES
          Name                #AZ_CountainerOnPort
          Label               #Container On Port
          Table               #TempPurch
          Origin              #{E89014AF-D810-4F4F-A54A-808F85B046C3}
          ExtendedDataType    #TransDate
        ENDPROPERTIES
        
      FIELD #AZ_DocReceipt
        DATE
        PROPERTIES
          Name                #AZ_DocReceipt
          Label               #Receipt Dokumen Import
          Table               #TempPurch
          Origin              #{487F56C4-03C1-4AB5-ADC9-8343BAD4B6EC}
          ExtendedDataType    #TransDate
        ENDPROPERTIES
        
      FIELD #AZ_InvoiceDate
        DATE
        PROPERTIES
          Name                #AZ_InvoiceDate
          Table               #TempPurch
          Origin              #{79655C99-182D-453C-87DD-BA3250CA2DF5}
          ExtendedDataType    #TransDate
        ENDPROPERTIES
        
      FIELD #AZ_ProductReceipt
        DATE
        PROPERTIES
          Name                #AZ_ProductReceipt
          Label               #Bongkar Container
          Table               #TempPurch
          Origin              #{F764616B-C550-49D3-8CE4-4AD4942D0D1F}
          ExtendedDataType    #TransDate
        ENDPROPERTIES
        
      FIELD #AZ_ReleasedContainer
        DATE
        PROPERTIES
          Name                #AZ_ReleasedContainer
          Table               #TempPurch
          Origin              #{6C405CCF-54BB-4700-874D-C246988ACC86}
          ExtendedDataType    #TransDate
        ENDPROPERTIES
        
      FIELD #AZ_SUPPLIERRELEASED
        DATE
        PROPERTIES
          Name                #AZ_SUPPLIERRELEASED
          Label               #Arrived di WH ABU
          Table               #TempPurch
          Origin              #{CA803362-9627-48B2-80AC-154C798FBF37}
          ExtendedDataType    #TransDate
        ENDPROPERTIES
        
      FIELD #AZ_TaxPaid
        DATE
        PROPERTIES
          Name                #AZ_TaxPaid
          Table               #TempPurch
          Origin              #{7391B5A3-04DF-4DF4-A997-8713898B2F15}
          ExtendedDataType    #TransDate
        ENDPROPERTIES
        
    ENDFIELDS
    GROUPS
    ENDGROUPS
    
    INDICES
    ENDINDICES
    FULLTEXTINDICES
    ENDFULLTEXTINDICES
    REFERENCES
    ENDREFERENCES
    
    DELETEACTIONS
    ENDDELETEACTIONS
    
    METHODS
    ENDMETHODS
  ENDTABLE
  

***Element: END
